{"version":3,"sources":["webpack:///./contribs/gmf/src/theme/Manager.js","webpack:///./node_modules/openlayers/src/ol/format/XSD.js","webpack:///./node_modules/openlayers/src/ol/geom/MultiLineString.js","webpack:///./node_modules/openlayers/src/ol/geom/MultiPoint.js","webpack:///./node_modules/openlayers/src/ol/geom/MultiPolygon.js","webpack:///./contribs/gmf/src/theme/Themes.js","webpack:///./src/layertree/Controller.js","webpack:///./src/statemanager/Service.js","webpack:///./src/map/LayerHelper.js","webpack:///./contribs/gmf/src/layertree/TreeManager.js","webpack:///./node_modules/openlayers/src/ol/format/XML.js","webpack:///./contribs/gmf/examples/themeselector.js","webpack:///./contribs/gmf/src/theme/module.js","webpack:///./contribs/gmf/src/theme/selectorComponent.js","webpack:///./src/utils.js","webpack:///./src/message/Message.js","webpack:///./node_modules/openlayers/src/ol/format/XLink.js","webpack:///./node_modules/openlayers/src/ol/Image.js","webpack:///./node_modules/openlayers/src/ol/source/ImageWMS.js","webpack:///./node_modules/openlayers/src/ol/source/common.js","webpack:///./node_modules/openlayers/src/ol/source/WMSServerType.js","webpack:///./node_modules/openlayers/src/ol/source/TileWMS.js","webpack:///./src/statemanager/Location.js","webpack:///./node_modules/openlayers/src/ol/format/OWS.js","webpack:///./node_modules/openlayers/src/ol/format/WMTSCapabilities.js","webpack:///./src/misc/decorate.js","webpack:///./src/message/Notification.js"],"names":["__webpack_require__","exports","$rootScope","gmfThemes","gmfTreeManagerModeFlush","gmfTreeManager","ngeoStateManager","this","$rootScope_","gmfThemes_","modeFlush","gmfTreeManager_","ngeoStateManager_","themeName_","prototype","addTheme","theme","opt_silent","updateState","name","setThemeName","setFirstLevelGroups","children","addFirstLevelGroups","getThemeName","isLoading","loaded","$emit","EventType","THEME_NAME_SET","removeAll","module","angular","_TreeManager2","default","_Service2","value","service","__WEBPACK_IMPORTED_MODULE_1__string_js__","XSD","readBoolean","node","s","__WEBPACK_IMPORTED_MODULE_0__xml_js__","getAllTextContent","readBooleanString","string","m","exec","undefined","readDateTime","dateTime","Date","parse","isNaN","readDecimal","readDecimalString","parseFloat","readNonNegativeInteger","readNonNegativeIntegerString","parseInt","readString","trim","writeBooleanTextNode","bool","writeStringTextNode","writeCDATASection","appendChild","DOCUMENT","createCDATASection","writeDateTimeTextNode","date","getUTCFullYear","padNumber","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","createTextNode","writeDecimalTextNode","decimal","toPrecision","writeNonNegativeIntegerTextNode","nonNegativeInteger","toString","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_12__geom_flat_simplify_js__","MultiLineString","coordinates","opt_layout","__WEBPACK_IMPORTED_MODULE_6__geom_SimpleGeometry_js__","call","ends_","maxDelta_","maxDeltaRevision_","setCoordinates","Object","__WEBPACK_IMPORTED_MODULE_0__index_js__","appendLineString","lineString","flatCoordinates","__WEBPACK_IMPORTED_MODULE_1__array_js__","getFlatCoordinates","slice","push","length","changed","clone","multiLineString","setFlatCoordinates","layout","closestPointXY","x","y","closestPoint","minSquaredDistance","__WEBPACK_IMPORTED_MODULE_2__extent_js__","getExtent","getRevision","Math","sqrt","__WEBPACK_IMPORTED_MODULE_7__geom_flat_closest_js__","getsMaxSquaredDelta","stride","getsClosestPoint","getCoordinateAtM","opt_extrapolate","opt_interpolate","__WEBPACK_IMPORTED_MODULE_3__geom_GeometryLayout_js__","XYM","XYZM","extrapolate","interpolate","__WEBPACK_IMPORTED_MODULE_10__geom_flat_interpolate_js__","lineStringsCoordinateAtM","getCoordinates","__WEBPACK_IMPORTED_MODULE_9__geom_flat_inflate_js__","coordinatess","getEnds","getLineString","index","__WEBPACK_IMPORTED_MODULE_5__geom_LineString_js__","getLineStrings","ends","lineStrings","i","ii","offset","end","getFlatMidpoints","midpoints","midpoint","getSimplifiedGeometryInternal","squaredTolerance","simplifiedFlatCoordinates","simplifiedEnds","douglasPeuckers","simplifiedMultiLineString","XY","getType","__WEBPACK_IMPORTED_MODULE_4__geom_GeometryType_js__","MULTI_LINE_STRING","intersectsExtent","extent","__WEBPACK_IMPORTED_MODULE_11__geom_flat_intersectsextent_js__","setLayout","__WEBPACK_IMPORTED_MODULE_8__geom_flat_deflate_js__","setFlatCoordinatesInternal","setLineStrings","getLayout","__WEBPACK_IMPORTED_MODULE_9__math_js__","MultiPoint","appendPoint","point","multiPoint","j","squaredDistance","__WEBPACK_IMPORTED_MODULE_8__geom_flat_inflate_js__","getPoint","n","__WEBPACK_IMPORTED_MODULE_5__geom_Point_js__","getPoints","points","MULTI_POINT","__WEBPACK_IMPORTED_MODULE_7__geom_flat_deflate_js__","__WEBPACK_IMPORTED_MODULE_17__geom_flat_simplify_js__","MultiPolygon","__WEBPACK_IMPORTED_MODULE_7__geom_SimpleGeometry_js__","endss_","flatInteriorPointsRevision_","flatInteriorPoints_","orientedRevision_","orientedFlatCoordinates_","appendPolygon","polygon","multiPolygon","len","newEndss","Array","__WEBPACK_IMPORTED_MODULE_10__geom_flat_closest_js__","getssMaxSquaredDelta","getssClosestPoint","getOrientedFlatCoordinates","containsXY","__WEBPACK_IMPORTED_MODULE_11__geom_flat_contains_js__","linearRingssContainsXY","getArea","__WEBPACK_IMPORTED_MODULE_8__geom_flat_area_js__","linearRingss","opt_right","__WEBPACK_IMPORTED_MODULE_16__geom_flat_orient_js__","orientLinearRingss","__WEBPACK_IMPORTED_MODULE_13__geom_flat_inflate_js__","coordinatesss","getEndss","getFlatInteriorPoints","flatCenters","__WEBPACK_IMPORTED_MODULE_9__geom_flat_center_js__","__WEBPACK_IMPORTED_MODULE_14__geom_flat_interiorpoint_js__","getInteriorPoints","interiorPoints","__WEBPACK_IMPORTED_MODULE_5__geom_MultiPoint_js__","linearRingssAreOriented","simplifiedEndss","quantizess","simplifiedMultiPolygon","getPolygon","prevEnds","__WEBPACK_IMPORTED_MODULE_6__geom_Polygon_js__","getPolygons","endss","polygons","jj","MULTI_POLYGON","__WEBPACK_IMPORTED_MODULE_15__geom_flat_intersectsextent_js__","__WEBPACK_IMPORTED_MODULE_12__geom_flat_deflate_js__","lastEnds","setPolygons","olBase","olArray","$http","$injector","$q","ngeoLayerHelper","gettextCatalog","gmfThemesOptions","_EventTarget2","addBlankBackgroundLayer_","addBlankBackgroundLayer","$q_","$http_","treeUrl_","has","get","cacheVersion_","ngeoLocation_","layerHelper_","deferred_","defer","promise_","promise","bgLayerPromise_","inherits","findGroupByLayerNodeName","themes","group","childNodes","getFlatNodes","findObjectByName","findGroupByName","internalNodes","getFlatInternalNodes","objects","objectName","find","object","findThemeByName","themeName","nodes","getBgLayers","appDimensions","_this","layerHelper","callback","item","layer","set","metadata","dimensions","ids","getIds","array","getUid","forEach","child","layerLayerCreationFn","ogcServers","gmfLayer","type","gmfLayerWMTS","_asserts2","assert","url","createWMTSLayerFromCapabilitites","then","bind","response","message","console","error","resolve","gmfLayerWMS","ogcServer","server","imageType","createBasicWMSLayer","layers","credential","fail","promiseSuccessFn","data","promises","background_layers","map","itemType","reverse","all","collection","filter","l","_Collection2","createBasicGroup","layerGroupCreationFn","values","getString","_Tile2","label","thumbnail","getThemeObject","getThemesObject","getBackgroundLayersObject","getOgcServersObject","hasEditableLayers","hasEditableLayers_","_this2","some","hasNodeEditableLayers_","editable","getSnappingConfig","snappingConfig","getNodeMaxResolution","maxResolution","maxResolutionHint","getNodeMinResolution","minResolution","minResolutionHint","loadThemes","opt_roleId","_this3","params","role","cache_version","cache","withCredentials","errors","join","hasParam","window","alert","dispatchEvent","reject","NodeType","MIXED_GROUP","NOT_MIXED_GROUP","WMTS","WMS","_LayerHelper2","$scope","$attrs","isRoot","nodeExpr","rootScope_","properties","state_","$watch","newVal","oldVal","$eval","mapExpr","parent","$parent","$on","indexOf","splice","uid","depth","nodelayerExpr","nodelayerexprExpr","newNodelayerExpr","assertString","treeCtrl","dataSource_","_decorate2","layerLoading","_events2","listen","$broadcast","listenersExpr","listenersexprExpr","treeScope","getState","setState","state","opt_broadcast","setStateInternal_","refreshState","firstParents","getFirstParentTree","firstParent","newState","getCalculateState","childState","previousChildState","getSetActive","val","getLayers","getArray","addLayer","removeLayer","getDataSource","setDataSource","dataSource","tree","VisitorDecision","STOP","SKIP","DESCEND","traverseDepthFirst","visitor","controller","ngeoLocation","ngeoUsedKeyRegexp","initialState","usedKeyRegexp","useLocalStorage_","setUseLocalStorage","paramKeys","getParamKeys","key","_loop","keyRegexp","match","localStorage","getParam","err","getInitialValue","getInitialStringValue","getInitialNumberValue","getInitialBooleanValue","updateParams","deleteParam","_Location2","RegExp","olObj","olUri","GROUP_KEY","REFRESH_PARAM","sourceURL","sourceLayersName","sourceFormat","opt_serverType","opt_time","opt_params","opt_crossOrigin","FORMAT","LAYERS","olServerType","replace","source","_ImageWMS2","serverType","crossOrigin","_Image2","createBasicWMSLayerFromDataSource","wmsUrl","layerNames","getOGCLayerNames","ogcServerType","ogcImageType","setVisible","visible","id","capabilitiesURL","layerName","opt_dimensions","parser","_WMTSCapabilities2","preload","Infinity","result","read","options","_WMTS2","optionsFromCapabilities","isEmpty","updateDimensions","setSource","elt","createWMTSLayerFromCapabilititesObj","capabilities","layerCap","capabilitiesStyles","opt_layers","_Group2","setLayers","getGroupFromMap","groupName","getLayerGroup","existingGroup","getFlatLayers","getFlatLayers_","getLayerByName","found","sublayers","getWMTSLegendURL","styles","legendURL","getWMSLegendURL","opt_scale","opt_legendRule","queryString","TRANSPARENT","SERVICE","VERSION","REQUEST","LAYER","appendParams","isLayerVisible","getVisible","currentResolution","getView","getResolution","getMinResolution","getMaxResolution","refreshWMSLayer","source_","getSource","getParams","random","updateWMSLayerState","names","TIME","getQuerySourceIds","$timeout","ngeoNotification","$timeout_","$injector_","gettextCatalog_","ngeoNotification_","root","rootCtrl","numberOfGroupsToAddInThisDigestLoop","groupsToAddInThisDigestLoop_","promiseForGroupsToAddInThisDigestLoop_","ogcServers_","handleThemesChange_","refreshFirstLevelGroups_","firstLevelGroups","_index2","PermalinkParam","TREE_GROUPS","opt_add","groupNotAdded","addFirstLevelGroup_","notifyCantAddGroups_","updateTreeGroupsState_","groups","treeGroupsParam","cleanParams","alreadyAdded","groupID","rootChild","grp","cancel","unshift","addGroupByName","_this4","_Themes2","addGroupByLayerName","_this5","groupAdded","getTreeCtrlByNodeId","treeCtrlToActive","_Controller2","warn","removeGroup","cloneGroupNode_","assign","toggleNodeCheck_","childNode","isChecked","includes","msg","notify","_Message2","Type","INFORMATION","correspondingTreeCtrl","getOgcServer","mixed","firstLevelGroupCtrl","gmfGroup","_this6","firstLevelGroupsFullState","getFirstLevelGroupFullState_","nodesToRestore","nodeToRestore","fullState","setNodeMetadataFromFullState_","_this7","isExpanded","isLegendExpanded","nodeElement","$","hasClass","legendElement","is","_this8","_Notification2","XML","isDocument","readFromDocument","isNode","readFromNode","doc","_module2","constant","MainController","gmfThemeManager","manager","_selectorComponent2","_Manager2","component_","bindings","templateUrl","baseModuleTemplateUrl","component","Controller_","listenerKeys_","setThemes_","handleDestroy_","setTheme","unlistenByKey","geometry","multiGeom","_MultiPoint2","_MultiLineString2","_MultiPolygon2","navigator","userAgent","hex","rgb","r","g","b","Error","colorZeroPadding","queryData","pairs","substring","split","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","pair","indexOfEquals","decodeURIComponent","return","queryItem","encodeURIComponent","event","_condition2","noModifierKeys","singleClick","showMessage","show","getMessageObjects","ERROR","info","success","SUCCESS","WARNING","opt_type","msgObjects","msgObject","defaultType","isArray","XLink","readHref","getAttributeNS","_ol_Image_","resolution","pixelRatio","src","imageLoadFunction","ImageBase","ImageState","IDLE","src_","image_","Image","imageListenerKeys_","imageLoadFunction_","ol","getImage","handleImageError_","unlistenImage_","handleImageLoad_","ol_extent","height","LOADED","load","LOADING","events","listenOnce","LOAD","setImage","image","ol_Image","ImageWMS","opt_options","source_Image","attributions","projection","resolutions","crossOrigin_","url_","defaultImageLoadFunction","params_","v13_","updateV13_","serverType_","hidpi_","hidpi","imageSize_","renderedRevision_","ratio_","ratio","GETFEATUREINFO_IMAGE_SIZE_","getGetFeatureInfoUrl","coordinate","projectionObj","proj","sourceProjectionObj","getProjection","reproj","calculateSourceResolution","baseParams","common","QUERY_LAYERS","obj","floor","getRequestUrl_","getImageInternal","findNearestResolution","imageResolution","center","viewWidth","ceil","viewHeight","viewExtent","requestWidth","requestHeight","requestExtent","getPixelRatio","round","CHANGE","handleImageChange","getImageLoadFunction","size","asserts","getCode","WMSServerType","GEOSERVER","dpi","MAPSERVER","CARMENTA_SERVER","QGIS","axisOrientation","getAxisOrientation","bbox","substr","uri","getUrl","setImageLoadFunction","setUrl","version","compareVersions","__WEBPACK_IMPORTED_MODULE_13__uri_js__","TileWMS","transparent","__WEBPACK_IMPORTED_MODULE_9__source_TileImage_js__","cacheSize","opaque","reprojectionErrorThreshold","tileClass","tileGrid","tileLoadFunction","urls","wrapX","transition","gutter_","gutter","tmpExtent_","__WEBPACK_IMPORTED_MODULE_3__extent_js__","setKey","getKeyForParams_","__WEBPACK_IMPORTED_MODULE_1__index_js__","__WEBPACK_IMPORTED_MODULE_6__proj_js__","getTileGrid","getTileGridForProjection","tileCoord","getTileCoordForCoordAndResolution","getResolutions","tileResolution","tileExtent","getTileCoordExtent","tileSize","__WEBPACK_IMPORTED_MODULE_8__size_js__","toSize","getTileSize","tmpSize","buffer","__WEBPACK_IMPORTED_MODULE_7__reproj_js__","__WEBPACK_IMPORTED_MODULE_0__common_js__","__WEBPACK_IMPORTED_MODULE_4__obj_js__","getGutterInternal","__WEBPACK_IMPORTED_MODULE_10__source_WMSServerType_js__","__WEBPACK_IMPORTED_MODULE_2__asserts_js__","tmp","__WEBPACK_IMPORTED_MODULE_5__math_js__","__WEBPACK_IMPORTED_MODULE_11__tilecoord_js__","hash","getTilePixelRatio","res","fixedTileUrlFunction","scale","__WEBPACK_IMPORTED_MODULE_12__string_js__","location","history","history_","schema_","protocol","domain_","hostname","port_","port","path_","pathname","queryData_","_utils2","decodeQueryString","search","fragment_","replaceState","getPath","getUriString","out","String","charAt","encodedQueryData","encodeQueryString","encodedFragment","hasFragmentParam","getFragmentParam","getParamAsInt","valueAsInt","getParamAsFloat","valueAsFloat","getFragmentParamAsInt","keys","getFragmentParamKeys","getParamKeysWithPrefix","prefix","getFragmentParamKeysWithPrefix","updateFragmentParams","deleteFragmentParam","refresh","setPath","path","LocationFactory","$window","lastUri","newUri","$evalAsync","MockProvider","$locationProvider","absUrl","opt_path","host","opt_search","opt_paramValue","opt_url","factory","OWS","firstChild","nextSibling","nodeType","Node","ELEMENT_NODE","owsObject","xml","pushParseAndPop","PARSERS_","readAddress_","objectStack","ADDRESS_PARSERS_","readAllowedValues_","ALLOWED_VALUES_PARSERS_","readConstraint_","getAttribute","CONSTRAINT_PARSERS_","readContactInfo_","CONTACT_INFO_PARSERS_","readDcp_","DCP_PARSERS_","readGet_","href","REQUEST_METHOD_PARSERS_","readHttp_","HTTP_PARSERS_","readOperation_","OPERATION_PARSERS_","readOperationsMetadata_","OPERATIONS_METADATA_PARSERS_","readPhone_","PHONE_PARSERS_","readServiceIdentification_","SERVICE_IDENTIFICATION_PARSERS_","readServiceContact_","SERVICE_CONTACT_PARSERS_","readServiceProvider_","SERVICE_PROVIDER_PARSERS_","readValue_","NAMESPACE_URIS_","makeStructureNS","ServiceIdentification","makeObjectPropertySetter","ServiceProvider","OperationsMetadata","DeliveryPoint","City","AdministrativeArea","PostalCode","Country","ElectronicMailAddress","Value","makeObjectPropertyPusher","AllowedValues","Phone","Address","HTTP","Get","Post","DCP","Operation","Voice","Facsimile","Constraint","IndividualName","PositionName","ContactInfo","Abstract","AccessConstraints","Fees","Title","ServiceTypeVersion","ServiceType","ProviderName","ProviderSite","ServiceContact","format_OWS","WMTSCapabilities","owsParser_","WMTSCapabilityObject","readContents_","CONTENTS_PARSERS_","readLayer_","LAYER_PARSERS_","readTileMatrixSet_","TMS_PARSERS_","readStyle_","style","STYLE_PARSERS_","isDefault","readTileMatrixSetLink_","TMS_LINKS_PARSERS_","readDimensions_","DIMENSION_PARSERS_","readResourceUrl_","format","template","resourceType","resource","readWgs84BoundingBox_","WGS84_BBOX_READERS_","readLegendUrl_","legend","readCoordinates_","readTileMatrix_","TM_PARSERS_","readTileMatrixLimitsList_","TMS_LIMITS_LIST_PARSERS_","readTileMatrixLimits_","TMS_LIMITS_PARSERS_","OWS_NAMESPACE_URIS_","Contents","Layer","TileMatrixSet","Style","Format","TileMatrixSetLink","Dimension","ResourceURL","WGS84BoundingBox","Identifier","LegendURL","TileMatrixSetLimits","TileMatrixLimits","makeArrayPusher","TileMatrix","MinTileRow","MaxTileRow","MinTileCol","MaxTileCol","Default","LowerCorner","UpperCorner","WellKnownScaleSet","SupportedCRS","TopLeftCorner","ScaleDenominator","TileWidth","TileHeight","MatrixWidth","MatrixHeight","interaction","assertInstanceof","_Interaction2","defineProperty","getActive","setActive","_Base2","configurable","getOpacity","setOpacity","incrementEvents","decrementEvents","incrementLoadCount_","increment_","load_count","decrementLoadCount_","decrement_","on","olEvent","element","$applyAsync","timeout_","container","document","body","append","container_","cache_","DEFAULT_DELAY_","clear","clearMessageByCacheItem_","classNames","el","target","html","addClass","delay"],"mappings":"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","file":"themeselector.dd87c1a37505f5a80e65.js","sourcesContent":["/**\n * @module gmf.theme.Manager\n */\nimport gmfBase from 'gmf/index.js';\nimport gmfLayertreeTreeManager from 'gmf/layertree/TreeManager.js';\nimport gmfThemeThemes from 'gmf/theme/Themes.js';\nimport ngeoStatemanagerService from 'ngeo/statemanager/Service.js';\n\n/**\n * Manage a tree with children. This service can be used in mode 'flush'\n * (default) or not (mode 'add'). In mode 'flush', each theme, group or group\n * by layer that you add will replace the previous children's array. In mode\n * 'add', children will be just pushed in this array. The default state can be\n * changed by setting the value `gmfTreeManagerModeFlush`, e.g.:\n *\n *    let module = angular.module('app');\n *    module.value('gmfTreeManagerModeFlush', false);\n *\n * This service's theme is a GmfTheme with only children and a name.\n * Thought to be the tree source of the gmf layertree directive.\n * @constructor\n * @param {angular.Scope} $rootScope Angular rootScope.\n * @param {gmf.theme.Themes} gmfThemes gmf Themes service.\n * @param {boolean} gmfTreeManagerModeFlush Flush mode active?\n * @param {gmf.layertree.TreeManager} gmfTreeManager the tree manager.\n * @param {ngeo.statemanager.Service} ngeoStateManager The ngeo statemanager service.\n * @ngInject\n * @struct\n * @ngdoc service\n * @ngname gmfTreeManager\n */\nconst exports = function($rootScope, gmfThemes, gmfTreeManagerModeFlush,\n  gmfTreeManager, ngeoStateManager) {\n\n  /**\n   * @type {angular.Scope}\n   * @private\n   */\n  this.$rootScope_ = $rootScope;\n\n  /**\n   * @type {gmf.theme.Themes}\n   * @private\n   */\n  this.gmfThemes_ = gmfThemes;\n\n  /**\n   * @type {boolean}\n   * @export\n   */\n  this.modeFlush = gmfTreeManagerModeFlush;\n\n  /**\n   * @type {gmf.layertree.TreeManager}\n   * @private\n   */\n  this.gmfTreeManager_ = gmfTreeManager;\n\n  /**\n   * @type {ngeo.statemanager.Service}\n   * @private\n   */\n  this.ngeoStateManager_ = ngeoStateManager;\n\n  /**\n   * @type {string}\n   * @private\n   */\n  this.themeName_ = '';\n};\n\n\n/**\n * Set the current theme name (mode 'flush' only) and add its children. Add\n * only groups that are not already in the tree.\n * @param {!gmfThemes.GmfTheme} theme A theme object.\n * @param {boolean=} opt_silent if true it will be no user message if\n *     the theme should be added but it's already added.\n * @export\n */\nexports.prototype.addTheme = function(theme, opt_silent) {\n  if (this.modeFlush) {\n    this.ngeoStateManager_.updateState({\n      'theme': theme.name\n    });\n    this.setThemeName(theme.name);\n    this.gmfTreeManager_.setFirstLevelGroups(theme.children);\n  } else {\n    this.gmfTreeManager_.addFirstLevelGroups(theme.children, false, opt_silent);\n  }\n};\n\n\n/**\n * @return {string} The theme name. Will be empty on 'not flush' mode.\n * @export\n */\nexports.prototype.getThemeName = function() {\n  return this.themeName_;\n};\n\n\n/**\n * @return {boolean} true if the theme is loading.\n * @export\n */\nexports.prototype.isLoading = function() {\n  return !this.gmfThemes_.loaded;\n};\n\n/**\n * @param {string} name The new theme name.\n * @param {boolean=} opt_silent Don't emit a theme change event, default is false.\n */\nexports.prototype.setThemeName = function(name, opt_silent) {\n  this.themeName_ = name;\n  if (!opt_silent) {\n    this.$rootScope_.$emit(exports.EventType.THEME_NAME_SET, name);\n  }\n};\n\n\n/**\n * Remove all groups.\n * @export\n */\nexports.prototype.removeAll = function() {\n  this.gmfTreeManager_.removeAll();\n};\n\n\n/**\n * @enum {string}\n */\nexports.EventType = {\n  /**\n   * Triggered when the theme name change.\n   */\n  THEME_NAME_SET: 'gmf-thememanager-theme_name_set'\n};\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('gmfThemeManager', [\n  gmfLayertreeTreeManager.module.name,\n  ngeoStatemanagerService.module.name,\n]);\n\n/**\n * The default value for `modeFlush` that `gmf.layertree.TreeManager` is initialized with.\n */\nexports.module.value('gmfTreeManagerModeFlush', true);\n\nexports.module.service('gmfThemeManager', exports);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./contribs/gmf/src/theme/Manager.js","/**\n * @module ol/format/XSD\n */\nimport _ol_xml_ from '../xml.js';\nimport _ol_string_ from '../string.js';\nconst XSD = {};\n\n\n/**\n * @param {Node} node Node.\n * @return {boolean|undefined} Boolean.\n */\nXSD.readBoolean = function(node) {\n  const s = _ol_xml_.getAllTextContent(node, false);\n  return XSD.readBooleanString(s);\n};\n\n\n/**\n * @param {string} string String.\n * @return {boolean|undefined} Boolean.\n */\nXSD.readBooleanString = function(string) {\n  const m = /^\\s*(true|1)|(false|0)\\s*$/.exec(string);\n  if (m) {\n    return m[1] !== undefined || false;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} DateTime in seconds.\n */\nXSD.readDateTime = function(node) {\n  const s = _ol_xml_.getAllTextContent(node, false);\n  const dateTime = Date.parse(s);\n  return isNaN(dateTime) ? undefined : dateTime / 1000;\n};\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Decimal.\n */\nXSD.readDecimal = function(node) {\n  const s = _ol_xml_.getAllTextContent(node, false);\n  return XSD.readDecimalString(s);\n};\n\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Decimal.\n */\nXSD.readDecimalString = function(string) {\n  // FIXME check spec\n  const m = /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*$/i.exec(string);\n  if (m) {\n    return parseFloat(m[1]);\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Non negative integer.\n */\nXSD.readNonNegativeInteger = function(node) {\n  const s = _ol_xml_.getAllTextContent(node, false);\n  return XSD.readNonNegativeIntegerString(s);\n};\n\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Non negative integer.\n */\nXSD.readNonNegativeIntegerString = function(string) {\n  const m = /^\\s*(\\d+)\\s*$/.exec(string);\n  if (m) {\n    return parseInt(m[1], 10);\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @return {string|undefined} String.\n */\nXSD.readString = function(node) {\n  return _ol_xml_.getAllTextContent(node, false).trim();\n};\n\n\n/**\n * @param {Node} node Node to append a TextNode with the boolean to.\n * @param {boolean} bool Boolean.\n */\nXSD.writeBooleanTextNode = function(node, bool) {\n  XSD.writeStringTextNode(node, (bool) ? '1' : '0');\n};\n\n\n/**\n * @param {Node} node Node to append a CDATA Section with the string to.\n * @param {string} string String.\n */\nXSD.writeCDATASection = function(node, string) {\n  node.appendChild(_ol_xml_.DOCUMENT.createCDATASection(string));\n};\n\n\n/**\n * @param {Node} node Node to append a TextNode with the dateTime to.\n * @param {number} dateTime DateTime in seconds.\n */\nXSD.writeDateTimeTextNode = function(node, dateTime) {\n  const date = new Date(dateTime * 1000);\n  const string = date.getUTCFullYear() + '-' +\n      _ol_string_.padNumber(date.getUTCMonth() + 1, 2) + '-' +\n      _ol_string_.padNumber(date.getUTCDate(), 2) + 'T' +\n      _ol_string_.padNumber(date.getUTCHours(), 2) + ':' +\n      _ol_string_.padNumber(date.getUTCMinutes(), 2) + ':' +\n      _ol_string_.padNumber(date.getUTCSeconds(), 2) + 'Z';\n  node.appendChild(_ol_xml_.DOCUMENT.createTextNode(string));\n};\n\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} decimal Decimal.\n */\nXSD.writeDecimalTextNode = function(node, decimal) {\n  const string = decimal.toPrecision();\n  node.appendChild(_ol_xml_.DOCUMENT.createTextNode(string));\n};\n\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} nonNegativeInteger Non negative integer.\n */\nXSD.writeNonNegativeIntegerTextNode = function(node, nonNegativeInteger) {\n  const string = nonNegativeInteger.toString();\n  node.appendChild(_ol_xml_.DOCUMENT.createTextNode(string));\n};\n\n\n/**\n * @param {Node} node Node to append a TextNode with the string to.\n * @param {string} string String.\n */\nXSD.writeStringTextNode = function(node, string) {\n  node.appendChild(_ol_xml_.DOCUMENT.createTextNode(string));\n};\nexport default XSD;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/format/XSD.js\n// module id = 17\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/**\n * @module ol/geom/MultiLineString\n */\nimport {inherits} from '../index.js';\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport _ol_geom_flat_closest_ from '../geom/flat/closest.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\nimport _ol_geom_flat_inflate_ from '../geom/flat/inflate.js';\nimport _ol_geom_flat_interpolate_ from '../geom/flat/interpolate.js';\nimport _ol_geom_flat_intersectsextent_ from '../geom/flat/intersectsextent.js';\nimport _ol_geom_flat_simplify_ from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-linestring geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {Array.<Array.<ol.Coordinate>>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst MultiLineString = function(coordinates, opt_layout) {\n\n  SimpleGeometry.call(this);\n\n  /**\n   * @type {Array.<number>}\n   * @private\n   */\n  this.ends_ = [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDelta_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDeltaRevision_ = -1;\n\n  this.setCoordinates(coordinates, opt_layout);\n\n};\n\ninherits(MultiLineString, SimpleGeometry);\n\n\n/**\n * Append the passed linestring to the multilinestring.\n * @param {ol.geom.LineString} lineString LineString.\n * @api\n */\nMultiLineString.prototype.appendLineString = function(lineString) {\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = lineString.getFlatCoordinates().slice();\n  } else {\n    extend(this.flatCoordinates, lineString.getFlatCoordinates().slice());\n  }\n  this.ends_.push(this.flatCoordinates.length);\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.MultiLineString} Clone.\n * @override\n * @api\n */\nMultiLineString.prototype.clone = function() {\n  const multiLineString = new MultiLineString(null);\n  multiLineString.setFlatCoordinates(\n    this.layout, this.flatCoordinates.slice(), this.ends_.slice());\n  return multiLineString;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiLineString.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  if (this.maxDeltaRevision_ != this.getRevision()) {\n    this.maxDelta_ = Math.sqrt(_ol_geom_flat_closest_.getsMaxSquaredDelta(\n      this.flatCoordinates, 0, this.ends_, this.stride, 0));\n    this.maxDeltaRevision_ = this.getRevision();\n  }\n  return _ol_geom_flat_closest_.getsClosestPoint(\n    this.flatCoordinates, 0, this.ends_, this.stride,\n    this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n};\n\n\n/**\n * Returns the coordinate at `m` using linear interpolation, or `null` if no\n * such coordinate exists.\n *\n * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n * M will return the first coordinate and Ms greater than the last M will\n * return the last coordinate.\n *\n * `opt_interpolate` controls interpolation between consecutive LineStrings\n * within the MultiLineString. If `opt_interpolate` is `true` the coordinates\n * will be linearly interpolated between the last coordinate of one LineString\n * and the first coordinate of the next LineString.  If `opt_interpolate` is\n * `false` then the function will return `null` for Ms falling between\n * LineStrings.\n *\n * @param {number} m M.\n * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n * @param {boolean=} opt_interpolate Interpolate. Default is `false`.\n * @return {ol.Coordinate} Coordinate.\n * @api\n */\nMultiLineString.prototype.getCoordinateAtM = function(m, opt_extrapolate, opt_interpolate) {\n  if ((this.layout != GeometryLayout.XYM &&\n       this.layout != GeometryLayout.XYZM) ||\n      this.flatCoordinates.length === 0) {\n    return null;\n  }\n  const extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n  const interpolate = opt_interpolate !== undefined ? opt_interpolate : false;\n  return _ol_geom_flat_interpolate_.lineStringsCoordinateAtM(this.flatCoordinates, 0,\n    this.ends_, this.stride, m, extrapolate, interpolate);\n};\n\n\n/**\n * Return the coordinates of the multilinestring.\n * @return {Array.<Array.<ol.Coordinate>>} Coordinates.\n * @override\n * @api\n */\nMultiLineString.prototype.getCoordinates = function() {\n  return _ol_geom_flat_inflate_.coordinatess(\n    this.flatCoordinates, 0, this.ends_, this.stride);\n};\n\n\n/**\n * @return {Array.<number>} Ends.\n */\nMultiLineString.prototype.getEnds = function() {\n  return this.ends_;\n};\n\n\n/**\n * Return the linestring at the specified index.\n * @param {number} index Index.\n * @return {ol.geom.LineString} LineString.\n * @api\n */\nMultiLineString.prototype.getLineString = function(index) {\n  if (index < 0 || this.ends_.length <= index) {\n    return null;\n  }\n  const lineString = new LineString(null);\n  lineString.setFlatCoordinates(this.layout, this.flatCoordinates.slice(\n    index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]));\n  return lineString;\n};\n\n\n/**\n * Return the linestrings of this multilinestring.\n * @return {Array.<ol.geom.LineString>} LineStrings.\n * @api\n */\nMultiLineString.prototype.getLineStrings = function() {\n  const flatCoordinates = this.flatCoordinates;\n  const ends = this.ends_;\n  const layout = this.layout;\n  /** @type {Array.<ol.geom.LineString>} */\n  const lineStrings = [];\n  let offset = 0;\n  let i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const lineString = new LineString(null);\n    lineString.setFlatCoordinates(layout, flatCoordinates.slice(offset, end));\n    lineStrings.push(lineString);\n    offset = end;\n  }\n  return lineStrings;\n};\n\n\n/**\n * @return {Array.<number>} Flat midpoints.\n */\nMultiLineString.prototype.getFlatMidpoints = function() {\n  const midpoints = [];\n  const flatCoordinates = this.flatCoordinates;\n  let offset = 0;\n  const ends = this.ends_;\n  const stride = this.stride;\n  let i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const midpoint = _ol_geom_flat_interpolate_.lineString(\n      flatCoordinates, offset, end, stride, 0.5);\n    extend(midpoints, midpoint);\n    offset = end;\n  }\n  return midpoints;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiLineString.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  const simplifiedFlatCoordinates = [];\n  const simplifiedEnds = [];\n  simplifiedFlatCoordinates.length = _ol_geom_flat_simplify_.douglasPeuckers(\n    this.flatCoordinates, 0, this.ends_, this.stride, squaredTolerance,\n    simplifiedFlatCoordinates, 0, simplifiedEnds);\n  const simplifiedMultiLineString = new MultiLineString(null);\n  simplifiedMultiLineString.setFlatCoordinates(\n    GeometryLayout.XY, simplifiedFlatCoordinates, simplifiedEnds);\n  return simplifiedMultiLineString;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiLineString.prototype.getType = function() {\n  return GeometryType.MULTI_LINE_STRING;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiLineString.prototype.intersectsExtent = function(extent) {\n  return _ol_geom_flat_intersectsextent_.lineStrings(\n    this.flatCoordinates, 0, this.ends_, this.stride, extent);\n};\n\n\n/**\n * Set the coordinates of the multilinestring.\n * @param {Array.<Array.<ol.Coordinate>>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\nMultiLineString.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(GeometryLayout.XY, null, this.ends_);\n  } else {\n    this.setLayout(opt_layout, coordinates, 2);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const ends = _ol_geom_flat_deflate_.coordinatess(\n      this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<number>} ends Ends.\n */\nMultiLineString.prototype.setFlatCoordinates = function(layout, flatCoordinates, ends) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.ends_ = ends;\n  this.changed();\n};\n\n\n/**\n * @param {Array.<ol.geom.LineString>} lineStrings LineStrings.\n */\nMultiLineString.prototype.setLineStrings = function(lineStrings) {\n  let layout = this.getLayout();\n  const flatCoordinates = [];\n  const ends = [];\n  let i, ii;\n  for (i = 0, ii = lineStrings.length; i < ii; ++i) {\n    const lineString = lineStrings[i];\n    if (i === 0) {\n      layout = lineString.getLayout();\n    }\n    extend(flatCoordinates, lineString.getFlatCoordinates());\n    ends.push(flatCoordinates.length);\n  }\n  this.setFlatCoordinates(layout, flatCoordinates, ends);\n};\nexport default MultiLineString;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/geom/MultiLineString.js\n// module id = 18\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23","/**\n * @module ol/geom/MultiPoint\n */\nimport {inherits} from '../index.js';\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY, containsXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport Point from '../geom/Point.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\nimport _ol_geom_flat_inflate_ from '../geom/flat/inflate.js';\nimport {squaredDistance as squaredDx} from '../math.js';\n\n/**\n * @classdesc\n * Multi-point geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst MultiPoint = function(coordinates, opt_layout) {\n  SimpleGeometry.call(this);\n  this.setCoordinates(coordinates, opt_layout);\n};\n\ninherits(MultiPoint, SimpleGeometry);\n\n\n/**\n * Append the passed point to this multipoint.\n * @param {ol.geom.Point} point Point.\n * @api\n */\nMultiPoint.prototype.appendPoint = function(point) {\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = point.getFlatCoordinates().slice();\n  } else {\n    extend(this.flatCoordinates, point.getFlatCoordinates());\n  }\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.MultiPoint} Clone.\n * @override\n * @api\n */\nMultiPoint.prototype.clone = function() {\n  const multiPoint = new MultiPoint(null);\n  multiPoint.setFlatCoordinates(this.layout, this.flatCoordinates.slice());\n  return multiPoint;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiPoint.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  const flatCoordinates = this.flatCoordinates;\n  const stride = this.stride;\n  let i, ii, j;\n  for (i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n    const squaredDistance = squaredDx(\n      x, y, flatCoordinates[i], flatCoordinates[i + 1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (j = 0; j < stride; ++j) {\n        closestPoint[j] = flatCoordinates[i + j];\n      }\n      closestPoint.length = stride;\n    }\n  }\n  return minSquaredDistance;\n};\n\n\n/**\n * Return the coordinates of the multipoint.\n * @return {Array.<ol.Coordinate>} Coordinates.\n * @override\n * @api\n */\nMultiPoint.prototype.getCoordinates = function() {\n  return _ol_geom_flat_inflate_.coordinates(\n    this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n};\n\n\n/**\n * Return the point at the specified index.\n * @param {number} index Index.\n * @return {ol.geom.Point} Point.\n * @api\n */\nMultiPoint.prototype.getPoint = function(index) {\n  const n = !this.flatCoordinates ?\n    0 : this.flatCoordinates.length / this.stride;\n  if (index < 0 || n <= index) {\n    return null;\n  }\n  const point = new Point(null);\n  point.setFlatCoordinates(this.layout, this.flatCoordinates.slice(\n    index * this.stride, (index + 1) * this.stride));\n  return point;\n};\n\n\n/**\n * Return the points of this multipoint.\n * @return {Array.<ol.geom.Point>} Points.\n * @api\n */\nMultiPoint.prototype.getPoints = function() {\n  const flatCoordinates = this.flatCoordinates;\n  const layout = this.layout;\n  const stride = this.stride;\n  /** @type {Array.<ol.geom.Point>} */\n  const points = [];\n  let i, ii;\n  for (i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n    const point = new Point(null);\n    point.setFlatCoordinates(layout, flatCoordinates.slice(i, i + stride));\n    points.push(point);\n  }\n  return points;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiPoint.prototype.getType = function() {\n  return GeometryType.MULTI_POINT;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiPoint.prototype.intersectsExtent = function(extent) {\n  const flatCoordinates = this.flatCoordinates;\n  const stride = this.stride;\n  let i, ii, x, y;\n  for (i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n    x = flatCoordinates[i];\n    y = flatCoordinates[i + 1];\n    if (containsXY(extent, x, y)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * Set the coordinates of the multipoint.\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\nMultiPoint.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(GeometryLayout.XY, null);\n  } else {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = _ol_geom_flat_deflate_.coordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n */\nMultiPoint.prototype.setFlatCoordinates = function(layout, flatCoordinates) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.changed();\n};\nexport default MultiPoint;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/geom/MultiPoint.js\n// module id = 20\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23","/**\n * @module ol/geom/MultiPolygon\n */\nimport {inherits} from '../index.js';\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport Polygon from '../geom/Polygon.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport _ol_geom_flat_area_ from '../geom/flat/area.js';\nimport _ol_geom_flat_center_ from '../geom/flat/center.js';\nimport _ol_geom_flat_closest_ from '../geom/flat/closest.js';\nimport _ol_geom_flat_contains_ from '../geom/flat/contains.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\nimport _ol_geom_flat_inflate_ from '../geom/flat/inflate.js';\nimport _ol_geom_flat_interiorpoint_ from '../geom/flat/interiorpoint.js';\nimport _ol_geom_flat_intersectsextent_ from '../geom/flat/intersectsextent.js';\nimport _ol_geom_flat_orient_ from '../geom/flat/orient.js';\nimport _ol_geom_flat_simplify_ from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-polygon geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {Array.<Array.<Array.<ol.Coordinate>>>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst MultiPolygon = function(coordinates, opt_layout) {\n\n  SimpleGeometry.call(this);\n\n  /**\n   * @type {Array.<Array.<number>>}\n   * @private\n   */\n  this.endss_ = [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.flatInteriorPointsRevision_ = -1;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.flatInteriorPoints_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDelta_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDeltaRevision_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.orientedRevision_ = -1;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.orientedFlatCoordinates_ = null;\n\n  this.setCoordinates(coordinates, opt_layout);\n\n};\n\ninherits(MultiPolygon, SimpleGeometry);\n\n\n/**\n * Append the passed polygon to this multipolygon.\n * @param {ol.geom.Polygon} polygon Polygon.\n * @api\n */\nMultiPolygon.prototype.appendPolygon = function(polygon) {\n  /** @type {Array.<number>} */\n  let ends;\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = polygon.getFlatCoordinates().slice();\n    ends = polygon.getEnds().slice();\n    this.endss_.push();\n  } else {\n    const offset = this.flatCoordinates.length;\n    extend(this.flatCoordinates, polygon.getFlatCoordinates());\n    ends = polygon.getEnds().slice();\n    let i, ii;\n    for (i = 0, ii = ends.length; i < ii; ++i) {\n      ends[i] += offset;\n    }\n  }\n  this.endss_.push(ends);\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.MultiPolygon} Clone.\n * @override\n * @api\n */\nMultiPolygon.prototype.clone = function() {\n  const multiPolygon = new MultiPolygon(null);\n\n  const len = this.endss_.length;\n  const newEndss = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    newEndss[i] = this.endss_[i].slice();\n  }\n\n  multiPolygon.setFlatCoordinates(\n    this.layout, this.flatCoordinates.slice(), newEndss);\n  return multiPolygon;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiPolygon.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  if (this.maxDeltaRevision_ != this.getRevision()) {\n    this.maxDelta_ = Math.sqrt(_ol_geom_flat_closest_.getssMaxSquaredDelta(\n      this.flatCoordinates, 0, this.endss_, this.stride, 0));\n    this.maxDeltaRevision_ = this.getRevision();\n  }\n  return _ol_geom_flat_closest_.getssClosestPoint(\n    this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n    this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n};\n\n\n/**\n * @inheritDoc\n */\nMultiPolygon.prototype.containsXY = function(x, y) {\n  return _ol_geom_flat_contains_.linearRingssContainsXY(\n    this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, x, y);\n};\n\n\n/**\n * Return the area of the multipolygon on projected plane.\n * @return {number} Area (on projected plane).\n * @api\n */\nMultiPolygon.prototype.getArea = function() {\n  return _ol_geom_flat_area_.linearRingss(\n    this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride);\n};\n\n\n/**\n * Get the coordinate array for this geometry.  This array has the structure\n * of a GeoJSON coordinate array for multi-polygons.\n *\n * @param {boolean=} opt_right Orient coordinates according to the right-hand\n *     rule (counter-clockwise for exterior and clockwise for interior rings).\n *     If `false`, coordinates will be oriented according to the left-hand rule\n *     (clockwise for exterior and counter-clockwise for interior rings).\n *     By default, coordinate orientation will depend on how the geometry was\n *     constructed.\n * @return {Array.<Array.<Array.<ol.Coordinate>>>} Coordinates.\n * @override\n * @api\n */\nMultiPolygon.prototype.getCoordinates = function(opt_right) {\n  let flatCoordinates;\n  if (opt_right !== undefined) {\n    flatCoordinates = this.getOrientedFlatCoordinates().slice();\n    _ol_geom_flat_orient_.orientLinearRingss(\n      flatCoordinates, 0, this.endss_, this.stride, opt_right);\n  } else {\n    flatCoordinates = this.flatCoordinates;\n  }\n\n  return _ol_geom_flat_inflate_.coordinatesss(\n    flatCoordinates, 0, this.endss_, this.stride);\n};\n\n\n/**\n * @return {Array.<Array.<number>>} Endss.\n */\nMultiPolygon.prototype.getEndss = function() {\n  return this.endss_;\n};\n\n\n/**\n * @return {Array.<number>} Flat interior points.\n */\nMultiPolygon.prototype.getFlatInteriorPoints = function() {\n  if (this.flatInteriorPointsRevision_ != this.getRevision()) {\n    const flatCenters = _ol_geom_flat_center_.linearRingss(\n      this.flatCoordinates, 0, this.endss_, this.stride);\n    this.flatInteriorPoints_ = _ol_geom_flat_interiorpoint_.linearRingss(\n      this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n      flatCenters);\n    this.flatInteriorPointsRevision_ = this.getRevision();\n  }\n  return this.flatInteriorPoints_;\n};\n\n\n/**\n * Return the interior points as {@link ol.geom.MultiPoint multipoint}.\n * @return {ol.geom.MultiPoint} Interior points as XYM coordinates, where M is\n * the length of the horizontal intersection that the point belongs to.\n * @api\n */\nMultiPolygon.prototype.getInteriorPoints = function() {\n  const interiorPoints = new MultiPoint(null);\n  interiorPoints.setFlatCoordinates(GeometryLayout.XYM,\n    this.getFlatInteriorPoints().slice());\n  return interiorPoints;\n};\n\n\n/**\n * @return {Array.<number>} Oriented flat coordinates.\n */\nMultiPolygon.prototype.getOrientedFlatCoordinates = function() {\n  if (this.orientedRevision_ != this.getRevision()) {\n    const flatCoordinates = this.flatCoordinates;\n    if (_ol_geom_flat_orient_.linearRingssAreOriented(\n      flatCoordinates, 0, this.endss_, this.stride)) {\n      this.orientedFlatCoordinates_ = flatCoordinates;\n    } else {\n      this.orientedFlatCoordinates_ = flatCoordinates.slice();\n      this.orientedFlatCoordinates_.length =\n          _ol_geom_flat_orient_.orientLinearRingss(\n            this.orientedFlatCoordinates_, 0, this.endss_, this.stride);\n    }\n    this.orientedRevision_ = this.getRevision();\n  }\n  return this.orientedFlatCoordinates_;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiPolygon.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  const simplifiedFlatCoordinates = [];\n  const simplifiedEndss = [];\n  simplifiedFlatCoordinates.length = _ol_geom_flat_simplify_.quantizess(\n    this.flatCoordinates, 0, this.endss_, this.stride,\n    Math.sqrt(squaredTolerance),\n    simplifiedFlatCoordinates, 0, simplifiedEndss);\n  const simplifiedMultiPolygon = new MultiPolygon(null);\n  simplifiedMultiPolygon.setFlatCoordinates(\n    GeometryLayout.XY, simplifiedFlatCoordinates, simplifiedEndss);\n  return simplifiedMultiPolygon;\n};\n\n\n/**\n * Return the polygon at the specified index.\n * @param {number} index Index.\n * @return {ol.geom.Polygon} Polygon.\n * @api\n */\nMultiPolygon.prototype.getPolygon = function(index) {\n  if (index < 0 || this.endss_.length <= index) {\n    return null;\n  }\n  let offset;\n  if (index === 0) {\n    offset = 0;\n  } else {\n    const prevEnds = this.endss_[index - 1];\n    offset = prevEnds[prevEnds.length - 1];\n  }\n  const ends = this.endss_[index].slice();\n  const end = ends[ends.length - 1];\n  if (offset !== 0) {\n    let i, ii;\n    for (i = 0, ii = ends.length; i < ii; ++i) {\n      ends[i] -= offset;\n    }\n  }\n  const polygon = new Polygon(null);\n  polygon.setFlatCoordinates(\n    this.layout, this.flatCoordinates.slice(offset, end), ends);\n  return polygon;\n};\n\n\n/**\n * Return the polygons of this multipolygon.\n * @return {Array.<ol.geom.Polygon>} Polygons.\n * @api\n */\nMultiPolygon.prototype.getPolygons = function() {\n  const layout = this.layout;\n  const flatCoordinates = this.flatCoordinates;\n  const endss = this.endss_;\n  const polygons = [];\n  let offset = 0;\n  let i, ii, j, jj;\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i].slice();\n    const end = ends[ends.length - 1];\n    if (offset !== 0) {\n      for (j = 0, jj = ends.length; j < jj; ++j) {\n        ends[j] -= offset;\n      }\n    }\n    const polygon = new Polygon(null);\n    polygon.setFlatCoordinates(\n      layout, flatCoordinates.slice(offset, end), ends);\n    polygons.push(polygon);\n    offset = end;\n  }\n  return polygons;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiPolygon.prototype.getType = function() {\n  return GeometryType.MULTI_POLYGON;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiPolygon.prototype.intersectsExtent = function(extent) {\n  return _ol_geom_flat_intersectsextent_.linearRingss(\n    this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, extent);\n};\n\n\n/**\n * Set the coordinates of the multipolygon.\n * @param {Array.<Array.<Array.<ol.Coordinate>>>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\nMultiPolygon.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(GeometryLayout.XY, null, this.endss_);\n  } else {\n    this.setLayout(opt_layout, coordinates, 3);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const endss = _ol_geom_flat_deflate_.coordinatesss(\n      this.flatCoordinates, 0, coordinates, this.stride, this.endss_);\n    if (endss.length === 0) {\n      this.flatCoordinates.length = 0;\n    } else {\n      const lastEnds = endss[endss.length - 1];\n      this.flatCoordinates.length = lastEnds.length === 0 ?\n        0 : lastEnds[lastEnds.length - 1];\n    }\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<Array.<number>>} endss Endss.\n */\nMultiPolygon.prototype.setFlatCoordinates = function(layout, flatCoordinates, endss) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.endss_ = endss;\n  this.changed();\n};\n\n\n/**\n * @param {Array.<ol.geom.Polygon>} polygons Polygons.\n */\nMultiPolygon.prototype.setPolygons = function(polygons) {\n  let layout = this.getLayout();\n  const flatCoordinates = [];\n  const endss = [];\n  for (let i = 0, ii = polygons.length; i < ii; ++i) {\n    const polygon = polygons[i];\n    if (i === 0) {\n      layout = polygon.getLayout();\n    }\n    const offset = flatCoordinates.length;\n    const ends = polygon.getEnds();\n    for (let j = 0, jj = ends.length; j < jj; ++j) {\n      ends[j] += offset;\n    }\n    extend(flatCoordinates, polygon.getFlatCoordinates());\n    endss.push(ends);\n  }\n  this.setFlatCoordinates(layout, flatCoordinates, endss);\n};\n\nexport default MultiPolygon;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/geom/MultiPolygon.js\n// module id = 21\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23","/**\n * @module gmf.theme.Themes\n */\nimport googAsserts from 'goog/asserts.js';\nimport gmfBase from 'gmf/index.js';\nimport ngeoMapLayerHelper from 'ngeo/map/LayerHelper.js';\nimport * as olBase from 'ol/index.js';\nimport * as olArray from 'ol/array.js';\nimport olCollection from 'ol/Collection.js';\nimport olEventsEventTarget from 'ol/events/EventTarget.js';\nimport olLayerTile from 'ol/layer/Tile.js';\n\n/**\n * The Themes service. This service interacts\n * with c2cgeoportal's \"themes\" web service and exposes functions that return\n * objects in the tree returned by the \"themes\" web service.\n *\n * @constructor\n * @struct\n * @extends {ol.events.EventTarget}\n * @param {angular.$http} $http Angular http service.\n * @param {angular.$injector} $injector Main injector.\n * @param {angular.$q} $q Angular q service\n * @param {ngeo.map.LayerHelper} ngeoLayerHelper Ngeo Layer Helper.\n * @param {angularGettext.Catalog} gettextCatalog Gettext catalog.\n * @param {gmfx.ThemesOptions} gmfThemesOptions Themes options.\n * @ngInject\n * @ngdoc service\n * @ngname gmfThemes\n */\nconst exports = function($http, $injector, $q, ngeoLayerHelper, gettextCatalog, gmfThemesOptions) {\n\n  olEventsEventTarget.call(this);\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.addBlankBackgroundLayer_ = true;\n  if (gmfThemesOptions.addBlankBackgroundLayer !== undefined) {\n    this.addBlankBackgroundLayer_ = gmfThemesOptions.addBlankBackgroundLayer;\n  }\n\n  /**\n   * @type {angular.$q}\n   * @private\n   */\n  this.$q_ = $q;\n\n  /**\n   * @type {angular.$http}\n   * @private\n   */\n  this.$http_ = $http;\n\n  /**\n   * @type {string|undefined}\n   * @private\n   */\n  this.treeUrl_ = undefined;\n  if ($injector.has('gmfTreeUrl')) {\n    this.treeUrl_ = $injector.get('gmfTreeUrl');\n  }\n\n  this.cacheVersion_ = '0';\n  if ($injector.has('cacheVersion')) {\n    this.cacheVersion_ = $injector.get('cacheVersion');\n  }\n\n  /**\n   * @type {?ngeo.statemanager.Location}\n   * @private\n   */\n  this.ngeoLocation_ = null;\n  if ($injector.has('ngeoLocation')) {\n    this.ngeoLocation_ = $injector.get('ngeoLocation');\n  }\n\n  /**\n   * @type {ngeo.map.LayerHelper}\n   * @private\n   */\n  this.layerHelper_ = ngeoLayerHelper;\n\n  /**\n   * @type {angularGettext.Catalog}\n   * @private\n   */\n  this.gettextCatalog = gettextCatalog;\n\n  /**\n   * @type {angular.$q.Deferred}\n   * @private\n   */\n  this.deferred_ = $q.defer();\n\n  /**\n   * @type {angular.$q.Promise}\n   * @private\n   */\n  this.promise_ = this.deferred_.promise;\n\n  /**\n   * @type {boolean}\n   */\n  this.loaded = false;\n\n  /**\n   * @type {angular.$q.Promise}\n   * @private\n   */\n  this.bgLayerPromise_ = null;\n};\n\nolBase.inherits(exports, olEventsEventTarget);\n\n\n/**\n * @param {Array.<gmfThemes.GmfTheme>} themes Array of \"theme\" objects.\n * @param {string} name The layer name.\n * @return {gmfThemes.GmfGroup} The group.\n */\nexports.findGroupByLayerNodeName = function(themes, name) {\n  for (let i = 0, ii = themes.length; i < ii; i++) {\n    const theme = themes[i];\n    for (let j = 0, jj = theme.children.length; j < jj; j++) {\n      const group = theme.children[j];\n      const childNodes = [];\n      exports.getFlatNodes(group, childNodes);\n      if (exports.findObjectByName(childNodes, name)) {\n        return group;\n      }\n    }\n  }\n  return null;\n};\n\n/**\n * Find a layer group object by its name. Return null if not found.\n * @param {Array.<gmfThemes.GmfTheme>} themes Array of \"theme\" objects.\n * @param {string} name The group name.\n * @return {gmfThemes.GmfGroup} The group.\n */\nexports.findGroupByName = function(themes, name) {\n  for (let i = 0, ii = themes.length; i < ii; i++) {\n    const theme = themes[i];\n    for (let j = 0, jj = theme.children.length; j < jj; j++) {\n      const group = theme.children[j];\n      const internalNodes = [];\n      exports.getFlatInternalNodes(group, internalNodes);\n      if (exports.findObjectByName(internalNodes, name)) {\n        return group;\n      }\n    }\n  }\n  return null;\n};\n\n\n/**\n * Find an object by its name. Return null if not found.\n * @param {Array.<T>} objects Array of objects with a 'name' attribute.\n * @param {string} objectName The object name.\n * @return {T} The object or null.\n * @template T\n */\nexports.findObjectByName = function(objects, objectName) {\n  return olArray.find(objects, object => object['name'] === objectName);\n};\n\n\n/**\n * Find a theme object by its name. Return null if not found.\n * @param {Array.<gmfThemes.GmfTheme>} themes Array of \"theme\" objects.\n * @param {string} themeName The theme name.\n * @return {gmfThemes.GmfTheme} The theme object or null.\n */\nexports.findThemeByName = function(themes, themeName) {\n  return exports.findObjectByName(themes, themeName);\n};\n\n\n/**\n * Fill the given \"nodes\" array with all internal nodes (non-leaf nones) in\n * the given node.\n *\n * @param {gmfThemes.GmfGroup|gmfThemes.GmfLayer} node Layertree node.\n * @param {Array.<gmfThemes.GmfGroup|gmfThemes.GmfLayer>} nodes An array.\n */\nexports.getFlatInternalNodes = function(node, nodes) {\n  const children = node.children;\n  if (children !== undefined) {\n    nodes.push(node);\n    for (let i = 0; i < children.length; i++) {\n      exports.getFlatInternalNodes(children[i], nodes);\n    }\n  }\n};\n\n\n/**\n * Fill the given \"nodes\" array with all leaf nodes in the given node.\n *\n * @param {gmfThemes.GmfGroup|gmfThemes.GmfLayer} node Layertree node.\n * @param {Array.<gmfThemes.GmfGroup|gmfThemes.GmfLayer>} nodes An array.\n */\nexports.getFlatNodes = function(node, nodes) {\n  let i;\n  const children = node.children;\n  if (children !== undefined) {\n    for (i = 0; i < children.length; i++) {\n      exports.getFlatNodes(children[i], nodes);\n    }\n  } else {\n    nodes.push(node);\n  }\n};\n\n\n/**\n * Get background layers.\n * @param {!Object.<string, string>} appDimensions Dimensions.\n * @return {!angular.$q.Promise.<!Array.<!ol.layer.Base>>} Promise.\n */\nexports.prototype.getBgLayers = function(appDimensions) {\n  const gettextCatalog = this.gettextCatalog;\n  if (this.bgLayerPromise_) {\n    return this.bgLayerPromise_;\n  }\n  const $q = this.$q_;\n  const layerHelper = this.layerHelper_;\n\n  /**\n   * @param {gmfThemes.GmfGroup|gmfThemes.GmfLayer} item A group or a leaf.\n   * @param {Array.<number>} array Array of ids;\n   */\n  const getIds = function(item, array) {\n    array.push(olBase.getUid(item));\n    const children = item.children || [];\n    children.forEach((child) => {\n      getIds(child, array);\n    });\n  };\n\n  /**\n   * @param {gmfThemes.GmfGroup|gmfThemes.GmfLayer} item The item.\n   * @param {ol.layer.Base} layer The layer.\n   * @return {ol.layer.Base} the provided layer.\n   */\n  const callback = function(item, layer) {\n    layer.set('label', item.name);\n    layer.set('metadata', item.metadata);\n    layer.set('dimensions', item.dimensions);\n    const ids = [];\n    getIds(item, ids);\n    layer.set('querySourceIds', ids);\n    return layer;\n  };\n\n  /**\n   * @param {gmfThemes.GmfOgcServers} ogcServers The ogc servers.\n   * @param {gmfThemes.GmfGroup|gmfThemes.GmfLayer} gmfLayer The item.\n   * @return {angular.$q.Promise.<ol.layer.Base>|ol.layer.Base} the created layer.\n   */\n  const layerLayerCreationFn = function(ogcServers, gmfLayer) {\n    if (gmfLayer.type === 'WMTS') {\n      const gmfLayerWMTS = /** @type gmfThemes.GmfLayerWMTS */ (gmfLayer);\n      googAsserts.assert(gmfLayerWMTS.url, 'Layer URL is required');\n      return layerHelper.createWMTSLayerFromCapabilitites(\n        gmfLayerWMTS.url,\n        gmfLayerWMTS.layer || '',\n        gmfLayer.dimensions\n      ).then(callback.bind(null, gmfLayer)).then(null, (response) => {\n        let message = `Unable to build layer \"${gmfLayerWMTS.layer}\" from WMTSCapabilities: ${gmfLayerWMTS.url}\\n`;\n        message += `OpenLayers error is \"${response['message']}`;\n        console.error(message);\n        // Continue even if some layers have failed loading.\n        return $q.resolve(undefined);\n      });\n    } else if (gmfLayer.type === 'WMS') {\n      const gmfLayerWMS = /** @type gmfThemes.GmfLayerWMS */ (gmfLayer);\n      googAsserts.assert(gmfLayerWMS.ogcServer, 'An OGC server is required');\n      const server = ogcServers[gmfLayerWMS.ogcServer];\n      googAsserts.assert(server, 'The OGC server was not found');\n      googAsserts.assert(server.url, 'The server URL is required');\n      googAsserts.assert(server.imageType, 'The server image type is required');\n      return callback(gmfLayer, layerHelper.createBasicWMSLayer(\n        server.url,\n        gmfLayerWMS.layers || '',\n        server.imageType,\n        server.type,\n        undefined, // time\n        gmfLayer.dimensions,\n        server.credential ? 'use-credentials' : 'anonymous'\n      ));\n    }\n    googAsserts.fail(`Unsupported type: ${gmfLayer.type}`);\n  };\n\n  /**\n   * @param {gmfThemes.GmfOgcServers} ogcServers The ogc servers.\n   * @param {gmfThemes.GmfGroup} item The item.\n   * @return {angular.$q.Promise.<ol.layer.Group>} the created layer.\n   */\n  const layerGroupCreationFn = function(ogcServers, item) {\n    // We assume no child is a layer group.\n    const orderedChildren = item.children.map(x => x).reverse(); // the order of insertion in OL3 is the contrary of the theme\n    const promises = orderedChildren.map(layerLayerCreationFn.bind(null, ogcServers));\n    return $q.all(promises).then((layers) => {\n      let collection;\n      if (layers) {\n        layers = layers.filter(l => l);\n        collection = new olCollection(layers);\n      }\n      const group = layerHelper.createBasicGroup(collection);\n      callback(item, group);\n      return group;\n    });\n  };\n\n  /**\n   * @param {gmfThemes.GmfThemesResponse} data The \"themes\" web service\n   *     response.\n   * @return {angular.$q.Promise.<Array.<ol.layer.Base>>} Promise.\n   */\n  const promiseSuccessFn = function(data) {\n    const promises = data.background_layers.map((item) => {\n      const itemType = item.type;\n      if (itemType === 'WMTS' || itemType === 'WMS') {\n        return layerLayerCreationFn(data.ogcServers, item);\n      } else if (item.children) {\n        // group of layers\n        return layerGroupCreationFn(data.ogcServers, item);\n      } else {\n        return undefined;\n      }\n    }, this);\n    return $q.all(promises);\n  }.bind(this);\n\n  this.bgLayerPromise_ = this.promise_.then(promiseSuccessFn).then((values) => {\n    const layers = [];\n\n    // (1) add a blank layer\n    if (this.addBlankBackgroundLayer_) {\n      // For i18n string collection\n      gettextCatalog.getString('blank');\n      layers.push(new olLayerTile({\n        'label': 'blank',\n        'metadata': {'thumbnail': ''}\n      }));\n    }\n\n    // (2) add layers that were returned\n    values.forEach((layer) => {\n      if (layer) {\n        layers.push(layer);\n      }\n    });\n    return layers;\n  });\n\n  return this.bgLayerPromise_;\n};\n\n\n/**\n * Get a theme object by its name.\n * @param {string} themeName Theme name.\n * @return {angular.$q.Promise.<gmfThemes.GmfTheme>} Promise.\n * @export\n */\nexports.prototype.getThemeObject = function(themeName) {\n  return this.promise_.then(\n    /**\n       * @param {gmfThemes.GmfThemesResponse} data The \"themes\" web service\n       *     response.\n       * @return {gmfThemes.GmfTheme?} The theme object for themeName, or null\n       *     if not found.\n       */\n    data => exports.findThemeByName(data.themes, themeName));\n};\n\n\n/**\n * Get an array of theme objects.\n * @return {angular.$q.Promise.<!Array.<!gmfThemes.GmfTheme>>} Promise.\n * @export\n */\nexports.prototype.getThemesObject = function() {\n  return this.promise_.then(\n    /**\n       * @param {!gmfThemes.GmfThemesResponse} data The \"themes\" web service\n       *     response.\n       * @return {!Array.<!gmfThemes.GmfTheme>} The themes object.\n       */\n    data => data.themes);\n};\n\n\n/**\n * Get an array of background layer objects.\n * @return {angular.$q.Promise.<!Array.<!gmfThemes.GmfLayer>>} Promise.\n */\nexports.prototype.getBackgroundLayersObject = function() {\n  googAsserts.assert(this.promise_ !== null);\n  return this.promise_.then(\n    /**\n       * @param {!gmfThemes.GmfThemesResponse} data The \"themes\" web service\n       *     response.\n       * @return {!Array.<!gmfThemes.GmfLayer>} The background layers object.\n       */\n    data => data.background_layers\n  );\n};\n\n\n/**\n * Get the `ogcServers` object.\n * @return {angular.$q.Promise.<!gmfThemes.GmfOgcServers>} Promise.\n * @export\n */\nexports.prototype.getOgcServersObject = function() {\n  googAsserts.assert(this.promise_ !== null);\n  return this.promise_.then(\n    /**\n       * @param {gmfThemes.GmfThemesResponse} data The \"themes\" web service\n       *     response.\n       * @return {gmfThemes.GmfOgcServers} The `ogcServers` object.\n       */\n    data => data.ogcServers);\n};\n\n\n/**\n * Returns a promise to check if one of the layers in the themes is editable.\n * @return {angular.$q.Promise.<boolean>} Promise.\n */\nexports.prototype.hasEditableLayers = function() {\n  googAsserts.assert(this.promise_ !== null);\n  return this.promise_.then(this.hasEditableLayers_.bind(this));\n};\n\n\n/**\n * Returns if one of the layers in the themes is editable.\n * @param {gmfThemes.GmfThemesResponse} data The \"themes\" web service response.\n * @return {boolean} Editable layers?\n */\nexports.prototype.hasEditableLayers_ = function(data) {\n  return data.themes.some((theme) => {\n    const hasEditableLayers = theme.children.some(this.hasNodeEditableLayers_.bind(this));\n    return hasEditableLayers;\n  });\n};\n\n\n/**\n * @param {gmfThemes.GmfGroup|gmfThemes.GmfLayer} node Theme node\n * @return {boolean} Editable layers?\n */\nexports.prototype.hasNodeEditableLayers_ = function(node) {\n  if (node.editable) {\n    return true;\n  }\n\n  let hasEditableLayers = false;\n  const children = node.children;\n  if (children && children.length) {\n    hasEditableLayers = children.some(this.hasNodeEditableLayers_.bind(this));\n  }\n  return hasEditableLayers;\n};\n\n\n/**\n * Get the snapping configuration object from a Layertree controller\n * @param {gmfThemes.GmfLayer} node Layer node from the theme.\n * @return {?gmfThemes.GmfSnappingConfig} Snapping configuration, if found.\n * @export\n */\nexports.getSnappingConfig = function(node) {\n  const config = (node.metadata && node.metadata.snappingConfig !== undefined) ?\n    node.metadata.snappingConfig : null;\n  return config;\n};\n\n\n/**\n * Get the maximal resolution defined for this layer. Looks in the\n *     layer itself before to look into its metadata.\n * @param {gmfThemes.GmfLayerWMS} gmfLayer the GeoMapFish Layer. WMTS layer is\n *     also allowed (the type is defined as GmfLayerWMS only to avoid some\n *     useless tests to know if a maxResolutionHint property can exist\n *     on the node).\n * @return {number|undefined} the max resolution or undefined if any.\n */\nexports.getNodeMaxResolution = function(gmfLayer) {\n  const metadata = gmfLayer.metadata;\n  let maxResolution = gmfLayer.maxResolutionHint;\n  if (maxResolution === undefined && metadata !== undefined) {\n    maxResolution = metadata.maxResolution;\n  }\n  return maxResolution;\n};\n\n\n/**\n * Get the minimal resolution defined for this layer. Looks in the\n *     layer itself before to look into its metadata.\n * @param {gmfThemes.GmfLayerWMS} gmfLayer the GeoMapFish Layer. WMTS layer is\n *     also allowed (the type is defined as GmfLayerWMS only to avoid some\n *     useless tests to know if a minResolutionHint property can exist\n *     on the node).\n * @return {number|undefined} the min resolution or undefined if any.\n */\nexports.getNodeMinResolution = function(gmfLayer) {\n  const metadata = gmfLayer.metadata;\n  let minResolution = gmfLayer.minResolutionHint;\n  if (minResolution === undefined && metadata !== undefined) {\n    minResolution = metadata.minResolution;\n  }\n  return minResolution;\n};\n\n\n/**\n * @param {number=} opt_roleId The role id to send in the request.\n * Load themes from the \"themes\" service.\n * @export\n */\nexports.prototype.loadThemes = function(opt_roleId) {\n\n  googAsserts.assert(this.treeUrl_, 'gmfTreeUrl should be defined.');\n\n  if (this.loaded) {\n    // reload the themes\n    this.deferred_ = this.$q_.defer();\n    this.promise_ = this.deferred_.promise;\n    this.bgLayerPromise_ = null;\n    this.loaded = false;\n  }\n\n  this.$http_.get(this.treeUrl_, {\n    params: opt_roleId !== undefined ? {\n      'role': opt_roleId,\n      'cache_version': this.cacheVersion_\n    } : {\n      'cache_version': this.cacheVersion_\n    },\n    cache: false,\n    withCredentials: true\n  }).then((response) => {\n    if (response.data.errors.length != 0) {\n      const message = `The themes contain some errors:\\n${\n        response.data.errors.join('\\n')}`;\n      console.error(message);\n      if (this.ngeoLocation_ !== null && this.ngeoLocation_.hasParam('debug')) {\n        window.alert(message);\n      }\n    }\n    this.deferred_.resolve(response.data);\n    this.dispatchEvent('change');\n    this.loaded = true;\n  }, (response) => {\n    this.deferred_.reject(response);\n  });\n};\n\n\n/**\n * @enum {string}\n */\nexports.NodeType = {\n  MIXED_GROUP: 'MixedGroup',\n  NOT_MIXED_GROUP: 'NotMixedGroup',\n  WMTS: 'WMTS',\n  WMS: 'WMS'\n};\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('gmfThemes', [\n  ngeoMapLayerHelper.module.name,\n]);\nexports.module.value('gmfThemesOptions', {});\nexports.module.service('gmfThemes', exports);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./contribs/gmf/src/theme/Themes.js","/**\n * @module ngeo.layertree.Controller\n */\nimport googAsserts from 'goog/asserts.js';\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoMiscDecorate from 'ngeo/misc/decorate.js';\nimport * as olBase from 'ol/index.js';\nimport olEvents from 'ol/events.js';\nimport olLayerGroup from 'ol/layer/Group.js';\nimport olLayerLayer from 'ol/layer/Layer.js';\n\n/**\n * The controller for the \"tree node\" directive.\n * @param {angular.Scope} $scope Scope.\n * @param {angular.Scope} $rootScope Angular rootScope.\n * @param {angular.Attributes} $attrs Attributes.\n * @constructor\n * @ngInject\n * @export\n * @struct\n * @ngdoc controller\n * @ngname NgeoLayertreeController\n */\nconst exports = function($scope, $rootScope, $attrs) {\n\n  const isRoot = $attrs['ngeoLayertreeNotroot'] === undefined;\n\n  /**\n   * @type {boolean}\n   * @export\n   */\n  this.isRoot = isRoot;\n\n  const nodeExpr = $attrs['ngeoLayertree'];\n\n  /**\n   * @type {angular.Scope}\n   * @private\n   */\n  this.rootScope_ = $rootScope;\n\n  /**\n   * @type {!Object}\n   * @export\n   */\n  this.properties = {};\n\n  /**\n   * @type {!string}\n   * @private\n   */\n  this.state_ = 'off';\n\n  /**\n   * @type {!Object}\n   * @export\n   */\n  this.node;\n\n  if (isRoot) {\n    $scope.$watch(nodeExpr, (newVal, oldVal) => {\n      this.node = newVal;\n    });\n  } else {\n    this.node = /** @type {!Object} */ ($scope.$eval(nodeExpr));\n    googAsserts.assert(this.node !== undefined);\n  }\n\n  const mapExpr = $attrs['ngeoLayertreeMap'];\n  const map = /** @type {ol.Map} */ ($scope.$eval(mapExpr));\n  googAsserts.assert(map !== undefined);\n\n  /**\n   * @type {ngeo.layertree.Controller}\n   * @export\n   */\n  this.parent = $scope.$parent['layertreeCtrl'];\n\n  /**\n   * @type {Array.<ngeo.layertree.Controller>}\n   * @export\n   */\n  this.children = [];\n\n  if (this.parent) {\n    this.parent.children.push(this);\n  }\n\n  $scope.$on('$destroy', () => {\n    if (this.parent) {\n      const index = this.parent.children.indexOf(this);\n      googAsserts.assert(index >= 0);\n      this.parent.children.splice(index, 1);\n    }\n  });\n\n  /**\n   * @type {number}\n   * @export\n   */\n  this.uid = olBase.getUid(this);\n\n  /**\n   * @type {number}\n   * @export\n   */\n  this.depth = isRoot ? 0 : this.parent.depth + 1;\n\n  // We set 'uid' and 'depth' in the scope as well to access the parent values\n  // in the inherited scopes. This is intended to be used in the javascript not\n  // in the templates.\n  $scope['uid'] = this.uid;\n  $scope['depth'] = this.depth;\n\n  /**\n   * @type {ol.Map}\n   * @export\n   */\n  this.map = map;\n\n  let nodelayerExpr = $attrs['ngeoLayertreeNodelayer'];\n  if (nodelayerExpr === undefined) {\n    const nodelayerexprExpr = $attrs['ngeoLayertreeNodelayerexpr'];\n    const newNodelayerExpr = $scope.$eval(nodelayerexprExpr);\n    googAsserts.assertString(newNodelayerExpr);\n    nodelayerExpr = newNodelayerExpr;\n  }\n  googAsserts.assert(nodelayerExpr !== undefined);\n\n  /**\n   * @type {string}\n   * @export\n   */\n  this.nodelayerExpr = nodelayerExpr;\n\n  /**\n   * @type {?ol.layer.Layer|ol.layer.Group}\n   * @export\n   */\n  this.layer = null;\n  if (!isRoot) {\n    const layer = $scope.$eval(nodelayerExpr, {'treeCtrl': this}) || null;\n    if (layer) {\n      googAsserts.assert(\n        layer instanceof olLayerLayer || layer instanceof olLayerGroup\n      );\n      this.layer = layer;\n    }\n  }\n\n  /**\n   * @type {?ngeo.datasource.DataSource}\n   * @private\n   */\n  this.dataSource_ = null;\n\n  if (this.layer) {\n    ngeoMiscDecorate.layerLoading(this.layer, $scope);\n    ngeoMiscDecorate.layer(this.layer);\n\n    olEvents.listen(this.layer, 'change:opacity', () => {\n      this.rootScope_.$broadcast('ngeo-layertree-opacity', this);\n    });\n  }\n\n  let listenersExpr = $attrs['ngeoLayertreeListeners'];\n  if (listenersExpr === undefined) {\n    const listenersexprExpr = $attrs['ngeoLayertreeListenersexpr'];\n    listenersExpr = $scope.$eval(listenersexprExpr);\n  }\n\n  if (listenersExpr !== undefined) {\n    googAsserts.assertString(listenersExpr);\n  }\n\n  /**\n   * @type {string|undefined}\n   * @export\n   */\n  this.listenersExpr = listenersExpr;\n\n  // Eval function to bind functions to this tree's events.\n  if (listenersExpr) {\n    $scope.$eval(listenersExpr, {'treeScope': $scope, 'treeCtrl': this});\n  }\n\n  $scope['layertreeCtrl'] = this;\n};\n\n\n/**\n * Return the current state.\n * @return {string} 'on', 'off', 'indeterminate'.\n * @export\n */\nexports.prototype.getState = function() {\n  return this.state_;\n};\n\n\n/**\n * Set the state of this treeCtrl. Update its children with its value and then\n * ask its parent to refresh its state.\n * @param {string} state 'on' or 'off'.\n * @param {boolean=} opt_broadcast Broadcast.\n * @export\n */\nexports.prototype.setState = function(state, opt_broadcast) {\n  if (state === this.state_) {\n    return;\n  }\n  this.setStateInternal_(state);\n\n  // Ask to its parent to update it's state.\n  if (this.parent) {\n    this.parent.refreshState();\n  }\n\n  const firstParents = this.isRoot ? this.children : [exports.getFirstParentTree(this)];\n\n  if (opt_broadcast === undefined || opt_broadcast) {\n    firstParents.forEach((firstParent) => {\n      this.rootScope_.$broadcast('ngeo-layertree-state', this, firstParent);\n    });\n  }\n};\n\n\n/**\n * @param {string} state 'on' or 'off'.\n */\nexports.prototype.setStateInternal_ = function(state) {\n  // Set the state\n  this.state_ = state === 'on' ? 'on' : 'off';\n  // Asks to each child to set its state;\n  this.children.forEach(function(child) {\n    child.setStateInternal_(this.state_);\n  }, this);\n};\n\n\n/**\n * Refresh the state of this treeCtrl based on it's children value. The call its\n * parent to do the same.\n * @public\n */\nexports.prototype.refreshState = function() {\n  const newState = this.getCalculateState();\n  if (this.state_ === newState) {\n    return;\n  }\n  this.state_ = newState;\n  if (this.parent) {\n    this.parent.refreshState();\n  }\n};\n\n\n/**\n * Return the current state, calculate on all its children recursively.\n * @return {string} 'on', 'off' or 'indeterminate'.\n * @export\n */\nexports.prototype.getCalculateState = function() {\n  if (this.node.children === undefined) {\n    return this.state_;\n  }\n  let childState;\n  let previousChildState;\n  this.children.some((child) => {\n    childState = child.getCalculateState();\n    if (previousChildState) {\n      if (previousChildState !== childState) {\n        return childState = 'indeterminate';\n      }\n    }\n    previousChildState = childState;\n  });\n  return childState;\n};\n\n\n/**\n * @param {boolean|undefined} val Value.\n * @return {boolean|undefined} Value.\n * @export\n */\nexports.prototype.getSetActive = function(val) {\n  const layer = this.layer;\n  const map = this.map;\n  if (!layer) {\n    return;\n  }\n  if (val !== undefined) {\n    if (!val) {\n      map.removeLayer(layer);\n    } else {\n      map.addLayer(layer);\n    }\n  } else {\n    return map.getLayers().getArray().indexOf(layer) >= 0;\n  }\n};\n\n\n/**\n * @return {?ngeo.datasource.DataSource} dataSource The data source bound to\n *     this layer tree controller.\n * @export\n */\nexports.prototype.getDataSource = function() {\n  return this.dataSource_;\n};\n\n\n/**\n * @param {?ngeo.datasource.DataSource} dataSource Data source or null.\n * @export\n */\nexports.prototype.setDataSource = function(dataSource) {\n  this.dataSource_ = dataSource;\n};\n\n\n/**\n * Get the \"top level\" layertree (one of the first level child under the root\n * layertree). Can return itself.\n * @param {ngeo.layertree.Controller} treeCtrl ngeo layertree controller.\n * @return {ngeo.layertree.Controller} the top level layertree.\n * @public\n */\nexports.getFirstParentTree = function(treeCtrl) {\n  let tree = treeCtrl;\n  while (!tree.parent.isRoot) {\n    tree = tree.parent;\n  }\n  return tree;\n};\n\n\n/**\n * @enum {string}\n */\nexports.VisitorDecision = {\n  STOP: 'STOP',\n  SKIP: 'SKIP',\n  DESCEND: 'DESCEND'\n};\n\n\n/**\n * @typedef {\n *   function(ngeo.layertree.Controller): (!ngeo.layertree.Controller.VisitorDecision|undefined)\n * }\n */\nexports.Visitor;\n\n\n/**\n * Recursive method to traverse the layertree controller graph.\n * @param {ngeo.layertree.Controller.Visitor} visitor A visitor called for each node.\n * @return {boolean} whether to stop traversing.\n * @export\n */\nexports.prototype.traverseDepthFirst = function(visitor) {\n  // First visit the current controller\n  const decision = visitor(this) || exports.VisitorDecision.DESCEND;\n\n  switch (decision) {\n    case exports.VisitorDecision.STOP:\n      return true; // stop traversing\n    case exports.VisitorDecision.SKIP:\n      return false; // continue traversing but skip current branch\n    case exports.VisitorDecision.DESCEND:\n      for (let i = 0; i < this.children.length; ++i) {\n        const child = this.children[i];\n        const stop = child.traverseDepthFirst(visitor);\n        if (stop) {\n          return true; // stop traversing\n        }\n      }\n      return false; // continue traversing\n    default:\n      googAsserts.fail('Unhandled case');\n  }\n};\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoLayertreeController', []);\nexports.module.controller('ngeoLayertreeController', exports);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/layertree/Controller.js","/**\n * @module ngeo.statemanager.Service\n */\nimport googAsserts from 'goog/asserts.js';\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoStatemanagerLocation from 'ngeo/statemanager/Location.js';\n\n/**\n * Provides a service for managing the application state.\n * The application state is written to both the URL and the local storage.\n * @constructor\n * @struct\n * @param {!ngeo.statemanager.Location} ngeoLocation ngeo location service.\n * @param {!Array.<!RegExp>} ngeoUsedKeyRegexp regexp used to identify the used keys.\n * @ngInject\n */\nconst exports = function(ngeoLocation, ngeoUsedKeyRegexp) {\n\n  /**\n   * Object representing the application's initial state.\n   * @type {!Object.<string, string>}\n   */\n  this.initialState = {};\n\n  /**\n   * @type {!ngeo.statemanager.Location}\n   */\n  this.ngeoLocation = ngeoLocation;\n\n\n  /**\n   * @type {!Array.<!RegExp>}\n   */\n  this.usedKeyRegexp = ngeoUsedKeyRegexp;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.useLocalStorage_;\n\n  this.setUseLocalStorage(false);\n\n  // Populate initialState with the application's initial state. The initial\n  // state is read from the location URL, or from the local storage if there\n  // is no state in the location URL.\n\n  const paramKeys = ngeoLocation.getParamKeys().filter(key => key != 'debug' && key != 'no_redirect');\n\n  if (paramKeys.length === 0) {\n    if (this.useLocalStorage_) {\n      for (const key in window.localStorage) {\n        googAsserts.assert(key);\n\n        this.usedKeyRegexp.some((keyRegexp) => {\n          if (key.match(keyRegexp)) {\n            const value = window.localStorage[key];\n            if (value !== undefined || value !== null) {\n              this.initialState[key] = value;\n            } else {\n              this.initialState[key] = '';\n            }\n            return true;\n          }\n        });\n      }\n    }\n  } else {\n    paramKeys.forEach((key) => {\n      this.usedKeyRegexp.some((keyRegexp) => {\n        if (key.match(keyRegexp)) {\n          const value = this.ngeoLocation.getParam(key);\n          if (value !== undefined) {\n            this.initialState[key] = value;\n            return true;\n          }\n        }\n      });\n    });\n  }\n};\n\n\n/**\n * @param {boolean} value Use localStorage\n * @return {boolean} localStorage will be used.\n */\nexports.prototype.setUseLocalStorage = function(value) {\n  this.useLocalStorage_ = value;\n\n  // check if localStorage is supported\n  if (this.useLocalStorage_) {\n    try {\n      if ('localStorage' in window) {\n        window.localStorage['test'] = '';\n        delete window.localStorage['test'];\n      } else {\n        this.useLocalStorage_ = false;\n      }\n    } catch (err) {\n      console.error(err);\n      this.useLocalStorage_ = false;\n    }\n  }\n  return this.useLocalStorage_;\n};\n\n/**\n * Get the state value for `key`.\n * @param {string} key State key.\n * @return {string|undefined} State value.\n */\nexports.prototype.getInitialValue = function(key) {\n  return this.initialState[key];\n};\n\n\n/**\n * Get the state value for `key`.\n * @param {string} key State key.\n * @return {string|undefined} State value.\n */\nexports.prototype.getInitialStringValue = function(key) {\n  const value = this.initialState[key];\n  if (value === undefined) {\n    return undefined;\n  }\n  return value;\n};\n\n\n/**\n * Get the state value for `key`.\n * @param {string} key State key.\n * @return {number|undefined} State value.\n */\nexports.prototype.getInitialNumberValue = function(key) {\n  const value = this.initialState[key];\n  if (value === undefined) {\n    return undefined;\n  }\n  return parseFloat(value);\n};\n\n\n/**\n * Get the state value for `key`.\n * @param {string} key State key.\n * @return {boolean|undefined} State value.\n */\nexports.prototype.getInitialBooleanValue = function(key) {\n  const value = this.initialState[key];\n  if (value === undefined) {\n    return undefined;\n  }\n  return value === 'true';\n};\n\n\n/**\n * Update the application state with the values in `object`.\n * @param {!Object.<string, string>} object Object.\n */\nexports.prototype.updateState = function(object) {\n  this.ngeoLocation.updateParams(object);\n  if (this.useLocalStorage_) {\n    for (const key in object) {\n      googAsserts.assert(key);\n      const value = object[key];\n      googAsserts.assert(value !== undefined);\n      window.localStorage[key] = value;\n    }\n  }\n};\n\n\n/**\n * Delete a parameter\n * @param {string} key Key.\n */\nexports.prototype.deleteParam = function(key) {\n  this.ngeoLocation.deleteParam(key);\n  if (this.useLocalStorage_) {\n    delete window.localStorage[key];\n  }\n};\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoStateManager', [\n  ngeoStatemanagerLocation.module.name\n]);\nexports.module.service('ngeoStateManager', exports);\nexports.module.value('ngeoUsedKeyRegexp', [new RegExp('.*')]);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/statemanager/Service.js","/**\n * @module ngeo.map.LayerHelper\n */\nimport googAsserts from 'goog/asserts.js';\nimport ngeoBase from 'ngeo/index.js';\nimport * as olArray from 'ol/array.js';\nimport olFormatWMTSCapabilities from 'ol/format/WMTSCapabilities.js';\nimport olLayerGroup from 'ol/layer/Group.js';\nimport olLayerImage from 'ol/layer/Image.js';\nimport olLayerTile from 'ol/layer/Tile.js';\nimport * as olObj from 'ol/obj.js';\nimport olSourceImageWMS from 'ol/source/ImageWMS.js';\nimport olSourceTileWMS from 'ol/source/TileWMS.js';\nimport olSourceWMTS from 'ol/source/WMTS.js';\nimport * as olUri from 'ol/uri.js';\n\n/**\n * Provides help functions that helps you to create and manage layers.\n * @param {angular.$q} $q Angular promises/deferred service.\n * @param {angular.$http} $http Angular http service.\n * @constructor\n * @struct\n * @ngdoc service\n * @ngname ngeoLayerHelper\n * @ngInject\n */\nconst exports = function($q, $http) {\n\n  /**\n   * @type {angular.$q}\n   * @private\n   */\n  this.$q_ = $q;\n\n  /**\n   * @type {angular.$http}\n   * @private\n   */\n  this.$http_ = $http;\n};\n\n\n/**\n * @const\n */\nexports.GROUP_KEY = 'groupName';\n\n\n/**\n * @const\n */\nexports.REFRESH_PARAM = 'random';\n\n\n/**\n * Create and return a basic WMS layer with only a source URL and a comma\n * separated layers names (see {@link ol.source.ImageWMS}).\n *\n * @param {string} sourceURL The source URL.\n * @param {string} sourceLayersName A comma separated names string.\n * @param {string} sourceFormat Image format, for example 'image/png'.\n * @param {string=} opt_serverType Type of the server (\"mapserver\",\n *     \"geoserver\", \"qgisserver\", ).\n * @param {string=} opt_time time parameter for layer queryable by time/periode\n * @param {Object.<string, string>=} opt_params WMS parameters.\n * @param {string=} opt_crossOrigin crossOrigin.\n * @return {ol.layer.Image} WMS Layer.\n * @export\n */\nexports.prototype.createBasicWMSLayer = function(sourceURL,\n  sourceLayersName, sourceFormat, opt_serverType, opt_time, opt_params, opt_crossOrigin) {\n\n  const params = {\n    'FORMAT': sourceFormat,\n    'LAYERS': sourceLayersName\n  };\n  let olServerType;\n  if (opt_time) {\n    params['TIME'] = opt_time;\n  }\n  if (opt_serverType) {\n    params['SERVERTYPE'] = opt_serverType;\n    // OpenLayers expects 'qgis' insteads of 'qgisserver'\n    olServerType = opt_serverType.replace('qgisserver', 'qgis');\n  }\n  const source = new olSourceImageWMS({\n    url: sourceURL,\n    params: params,\n    serverType: olServerType,\n    crossOrigin: opt_crossOrigin\n  });\n  if (opt_params) {\n    source.updateParams(opt_params);\n  }\n\n  return new olLayerImage({source});\n};\n\n\n/**\n * Create and return a basic WMS layer using an OGC data source.\n *\n * @param {ngeo.datasource.OGC} dataSource OGC data source.\n * @param {string=} opt_crossOrigin crossOrigin.\n * @return {ol.layer.Image} WMS Layer.\n * @export\n */\nexports.prototype.createBasicWMSLayerFromDataSource = function(\n  dataSource, opt_crossOrigin\n) {\n  const url = dataSource.wmsUrl;\n  googAsserts.assert(url);\n\n  const layerNames = dataSource.getOGCLayerNames().join(',');\n  const serverType = dataSource.ogcServerType;\n  const imageType = dataSource.ogcImageType;\n\n  // (1) Layer creation\n  const layer = this.createBasicWMSLayer(\n    url,\n    layerNames,\n    imageType,\n    serverType,\n    undefined,\n    undefined,\n    opt_crossOrigin\n  );\n\n  // (2) Manage visibility\n  layer.setVisible(dataSource.visible);\n\n  // (3) Reference to the data source\n  layer.set('querySourceIds', [dataSource.id]);\n\n  return layer;\n};\n\n\n/**\n * Create and return a promise that provides a WMTS layer with source on\n * success, no layer else.\n * The WMTS layer source will be configured by the capabilities that are\n * loaded from the given capabilitiesUrl.\n * The style object described in the capabilities for this layer will be added\n * as key 'capabilitiesStyles' as param of the new layer.\n * @param {string} capabilitiesURL The getCapabilities url.\n * @param {string} layerName The name of the layer.\n * @param {Object.<string, string>=} opt_dimensions WMTS dimensions.\n * @return {angular.$q.Promise.<ol.layer.Tile>} A Promise with a layer (with source) on success,\n *     no layer else.\n * @export\n */\nexports.prototype.createWMTSLayerFromCapabilitites = function(capabilitiesURL, layerName, opt_dimensions) {\n  const parser = new olFormatWMTSCapabilities();\n  const layer = new olLayerTile({\n    preload: Infinity\n  });\n  const $q = this.$q_;\n\n  return this.$http_.get(capabilitiesURL, {cache: true}).then((response) => {\n    let result;\n    if (response.data) {\n      result = parser.read(response.data);\n    }\n    if (result) {\n      const options = olSourceWMTS.optionsFromCapabilities(result, {\n        crossOrigin: 'anonymous',\n        layer: layerName\n      });\n      googAsserts.assert(options);\n      const source = new olSourceWMTS(/** @type {olx.source.WMTSOptions} */ (options));\n      if (opt_dimensions && !olObj.isEmpty(opt_dimensions)) {\n        source.updateDimensions(opt_dimensions);\n      }\n      layer.setSource(source);\n\n      // Add styles from capabilities as param of the layer\n      const layers = result['Contents']['Layer'];\n      const l = olArray.find(layers, (elt, index, array) => elt['Identifier'] == layerName);\n      layer.set('capabilitiesStyles', l['Style']);\n\n      return $q.resolve(layer);\n    }\n    return $q.reject(`Failed to get WMTS capabilities from ${capabilitiesURL}`);\n  });\n};\n\n\n/**\n * Create and return a WMTS layer using a formatted capabilities response\n * and a capability layer.\n *\n * @param {!Object} capabilities The complete capabilities object of the service\n * @param {!Object} layerCap The layer capability object\n * @param {Object.<string, string>=} opt_dimensions WMTS dimensions.\n * @return {!ol.layer.Tile} WMTS layer\n * @export\n */\nexports.prototype.createWMTSLayerFromCapabilititesObj = function(\n  capabilities, layerCap, opt_dimensions\n) {\n\n  const options = olSourceWMTS.optionsFromCapabilities(capabilities, {\n    crossOrigin: 'anonymous',\n    layer: layerCap['Identifier']\n  });\n\n  googAsserts.assert(options);\n  const source = new olSourceWMTS(\n    /** @type {olx.source.WMTSOptions} */ (options));\n\n  if (opt_dimensions && !olObj.isEmpty(opt_dimensions)) {\n    source.updateDimensions(opt_dimensions);\n  }\n\n  return new olLayerTile({\n    'capabilitiesStyles': layerCap['Style'],\n    preload: Infinity,\n    source: source\n  });\n};\n\n\n/**\n * Create and return an ol.layer.Group. You can pass a collection of layers to\n * directly add them in the returned group.\n * @param {ol.Collection.<ol.layer.Base>=} opt_layers The layer to add to the\n * returned Group.\n * @return {ol.layer.Group} Layer group.\n * @export\n */\nexports.prototype.createBasicGroup = function(opt_layers) {\n  const group = new olLayerGroup();\n  if (opt_layers) {\n    group.setLayers(opt_layers);\n  }\n  return group;\n};\n\n\n/**\n * Retrieve (or create if it doesn't exist) and return a group of layer from\n * the base array of layers of a map. The given name is used as unique\n * identifier. If the group is created, it will be automatically added to\n * the map.\n * @param {ol.Map} map A map.\n * @param {string} groupName The name of the group.\n * @return {ol.layer.Group} The group corresponding to the given name.\n * @export\n */\nexports.prototype.getGroupFromMap = function(map, groupName) {\n  const groups = map.getLayerGroup().getLayers();\n  let group;\n  groups.getArray().some((existingGroup) => {\n    if (existingGroup.get(exports.GROUP_KEY) === groupName) {\n      group = /** @type {ol.layer.Group} */ (existingGroup);\n      return true;\n    } else {\n      return false;\n    }\n  });\n  if (!group) {\n    group = this.createBasicGroup();\n    group.set(exports.GROUP_KEY, groupName);\n    map.addLayer(group);\n  }\n  return group;\n};\n\n\n/**\n * Get an array of all layers in a group. The group can contain multiple levels\n * of others groups.\n * @param {ol.layer.Base} layer The base layer, mostly a group of layers.\n * @return {Array.<ol.layer.Layer>} Layers.\n * @export\n */\nexports.prototype.getFlatLayers = function(layer) {\n  return this.getFlatLayers_(layer, []);\n};\n\n\n/**\n * Get an array of all layers in a group. The group can contain multiple levels\n * of others groups.\n * @param {ol.layer.Base} layer The base layer, mostly a group of layers.\n * @param {Array.<ol.layer.Base>} array An array to add layers.\n * @return {Array.<ol.layer.Layer>} Layers.\n * @private\n */\nexports.prototype.getFlatLayers_ = function(layer, array) {\n  if (layer instanceof olLayerGroup) {\n    const sublayers = layer.getLayers();\n    sublayers.forEach(function(l) {\n      this.getFlatLayers_(l, array);\n    }, this);\n  } else {\n    if (array.indexOf(layer) < 0) {\n      array.push(layer);\n    }\n  }\n  return array;\n};\n\n\n/**\n * Get a layer that has a `layerName` property equal to a given layer name from\n * an array of layers. If one of the layers in the array is a group, then the\n * layers contained in that group are searched as well.\n * @param {string} layerName The name of the layer we're looking for.\n * @param {Array.<ol.layer.Base>} layers Layers.\n * @return {?ol.layer.Base} Layer.\n * @export\n */\nexports.prototype.getLayerByName = function(layerName, layers) {\n  let found = null;\n  layers.some(function(layer) {\n    if (layer instanceof olLayerGroup) {\n      const sublayers = layer.getLayers().getArray();\n      found = this.getLayerByName(layerName, sublayers);\n    } else if (layer.get('layerNodeName') === layerName) {\n      found = layer;\n    }\n    return !!found;\n  }, this);\n\n  return found;\n};\n\n\n/**\n * Get the WMTS legend URL for the given layer.\n * @param {ol.layer.Tile} layer Tile layer as returned by the\n * ngeo layerHelper service.\n * @return {string|undefined} The legend URL or undefined.\n * @export\n */\nexports.prototype.getWMTSLegendURL = function(layer) {\n  // FIXME case of multiple styles ?  case of multiple legendUrl ?\n  let url;\n  const styles = layer.get('capabilitiesStyles');\n  if (styles !== undefined) {\n    const legendURL = styles[0]['legendURL'];\n    if (legendURL !== undefined) {\n      url = legendURL[0]['href'];\n    }\n  }\n  return url;\n};\n\n\n/**\n * Get the WMS legend URL for the given node.\n * @param {string|undefined} url The base url of the wms service.\n * @param {string} layerName The name of a wms layer.\n * @param {number=} opt_scale A scale.\n * @param {string=} opt_legendRule rule parameters to add to the returned URL.\n * @return {string|undefined} The legend URL or undefined.\n * @export\n */\nexports.prototype.getWMSLegendURL = function(url,\n  layerName, opt_scale, opt_legendRule) {\n  if (!url) {\n    return undefined;\n  }\n  const queryString = {\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true,\n    'SERVICE': 'WMS',\n    'VERSION': '1.1.1',\n    'REQUEST': 'GetLegendGraphic',\n    'LAYER': layerName\n  };\n  if (opt_scale !== undefined) {\n    queryString['SCALE'] = opt_scale;\n  }\n  if (opt_legendRule !== undefined) {\n    queryString['RULE'] = opt_legendRule;\n  }\n  return olUri.appendParams(url, queryString);\n};\n\n\n/**\n * Returns if this layer is visible at the current resolution.\n * @param {ol.layer.Base} layer Layer.\n * @param {ol.Map} map Map.\n * @return {boolean} Is the layer currently visible?\n */\nexports.prototype.isLayerVisible = function(layer, map) {\n  if (!layer.getVisible()) {\n    return false;\n  }\n\n  const currentResolution = map.getView().getResolution();\n  return currentResolution > layer.getMinResolution() &&\n      currentResolution < layer.getMaxResolution();\n};\n\n\n/**\n * Force a WMS layer to refresh using a random value.\n * @param {ol.layer.Image|ol.layer.Tile} layer Layer to refresh.\n */\nexports.prototype.refreshWMSLayer = function(layer) {\n  const source_ = layer.getSource();\n  googAsserts.assert(\n    source_ instanceof olSourceImageWMS ||\n    source_ instanceof olSourceTileWMS\n  );\n  const source = /** @type {ol.source.ImageWMS|ol.source.TileWMS} */ (source_);\n  const params = source.getParams();\n  params[exports.REFRESH_PARAM] = Math.random();\n  source.updateParams(params);\n};\n\n\n/**\n * Update the LAYERS parameter of the source of the given WMS layer.\n * @param {ol.layer.Image} layer The WMS layer.\n * @param {string} names The names that will be used to set\n * the LAYERS parameter.\n * @param {string=} opt_time The start\n * and optionally the end datetime (for time range selection) selected by user\n * in a ISO-8601 string datetime or time interval format\n * @export\n */\nexports.prototype.updateWMSLayerState = function(layer, names, opt_time) {\n  // Don't send layer without parameters, hide layer instead;\n  if (names.length <= 0) {\n    layer.setVisible(false);\n  } else {\n    layer.setVisible(true);\n    const source = /** @type {ol.source.ImageWMS} */ (layer.getSource());\n    if (opt_time) {\n      source.updateParams({'LAYERS': names, 'TIME': opt_time});\n    } else {\n      source.updateParams({'LAYERS': names});\n    }\n  }\n};\n\n\n/**\n * @param {ol.layer.Image} layer The WMS layer.\n * @return {Array.<number>|undefined} List of query source ids, a.k.a.\n *     the data source ids this layer is composed of.\n * @export\n */\nexports.prototype.getQuerySourceIds = function(layer) {\n  return /** @type {Array.<number>|undefined} */ (\n    layer.get('querySourceIds'));\n};\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoLayerHelper', []);\nexports.module.service('ngeoLayerHelper', exports);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/LayerHelper.js","/**\n * @module gmf.layertree.TreeManager\n */\nimport gmfBase from 'gmf/index.js';\nimport gmfThemeThemes from 'gmf/theme/Themes.js';\nimport googAsserts from 'goog/asserts.js';\nimport ngeoLayertreeController from 'ngeo/layertree/Controller.js';\nimport ngeoMessageMessage from 'ngeo/message/Message.js';\nimport ngeoMessageNotification from 'ngeo/message/Notification.js';\nimport ngeoStatemanagerService from 'ngeo/statemanager/Service.js';\nimport * as olArray from 'ol/array.js';\nimport olEvents from 'ol/events.js';\nimport * as olObj from 'ol/obj.js';\n\n/**\n * Manage a tree with children. This service can be used in mode 'flush'\n * (default) or not (mode 'add'). In mode 'flush', each theme, group or group\n * by layer that you add will replace the previous children's array. In mode\n * 'add', children will be just pushed in this array. The default state can be\n * changed by setting the value `gmfTreeManagerModeFlush`, e.g.:\n *\n *     let module = angular.module('app');\n *     module.value('gmfTreeManagerModeFlush', false);\n *\n * This service's theme is a GmfTheme with only children and a name.\n * Thought to be the tree source of the gmf layertree directive.\n * @constructor\n * @struct\n * @param {angular.$timeout} $timeout Angular timeout service.\n * @param {angular.$injector} $injector Angular injector service.\n * @param {angularGettext.Catalog} gettextCatalog Gettext catalog.\n * @param {ngeo.map.LayerHelper} ngeoLayerHelper Ngeo Layer Helper.\n * @param {ngeo.message.Notification} ngeoNotification Ngeo notification service.\n * @param {gmf.theme.Themes} gmfThemes gmf Themes service.\n * @param {ngeo.statemanager.Service} ngeoStateManager The ngeo statemanager service.\n * @ngInject\n * @ngdoc service\n * @ngname gmfTreeManager\n */\nconst exports = function($timeout, $injector, gettextCatalog, ngeoLayerHelper,\n  ngeoNotification, gmfThemes, ngeoStateManager) {\n\n  /**\n   * @type {angular.$timeout}\n   * @private\n   */\n  this.$timeout_ = $timeout;\n\n  /**\n   * @type {angular.$injector}\n   * @private\n   */\n  this.$injector_ = $injector;\n\n  /**\n   * @type {angularGettext.Catalog}\n   * @private\n   */\n  this.gettextCatalog_ = gettextCatalog;\n\n  /**\n   * @type {ngeo.map.LayerHelper}\n   * @private\n   */\n  this.layerHelper_ = ngeoLayerHelper;\n\n  /**\n   * @type {ngeo.message.Notification}\n   * @private\n   */\n  this.ngeoNotification_ = ngeoNotification;\n\n  /**\n   * @type {gmf.theme.Themes}\n   * @private\n   */\n  this.gmfThemes_ = gmfThemes;\n\n  /**\n   * The root node and its children used to generate the layertree (with the\n   * same ordre).\n   * @type {gmfThemes.GmfRootNode}\n   * @public\n   */\n  this.root = /** @type {gmfThemes.GmfRootNode} */ ({\n    children: []\n  });\n\n  /**\n   * The controller of the (unique) root layer tree.\n   * The array of top level layer trees is avaible through `rootCtrl.children`.\n   * The order doesn't match with the ordre of the displayed layertree.\n   * @type {ngeo.layertree.Controller}\n   * @export\n   */\n  this.rootCtrl = null;\n\n  /**\n   * Number of groups to add to the layertree during one single Angular\n   * digest loop.\n   * @type {number}\n   * @public\n   */\n  this.numberOfGroupsToAddInThisDigestLoop = 0;\n\n  /**\n   * @type {Array.<gmfThemes.GmfGroup>}\n   * @private\n   */\n  this.groupsToAddInThisDigestLoop_ = [];\n\n  /**\n   * @type {angular.$q.Promise}\n   * @private\n   */\n  this.promiseForGroupsToAddInThisDigestLoop_ = null;\n\n  /**\n   * @type {ngeo.statemanager.Service}\n   * @private\n   */\n  this.ngeoStateManager_ = ngeoStateManager;\n\n  /**\n   * A reference to the OGC servers loaded by the theme service.\n   * @type {gmfThemes.GmfOgcServers|null}\n   * @private\n   */\n  this.ogcServers_ = null;\n\n  olEvents.listen(this.gmfThemes_, 'change', this.handleThemesChange_, this);\n};\n\n/**\n * Called when the themes change. Get the OGC servers, then listen to the\n * tree manager Layertree controllers array changes.\n * The themes could have been changed so it also call a refresh of the\n * layertree.\n * @private\n */\nexports.prototype.handleThemesChange_ = function() {\n  this.gmfThemes_.getOgcServersObject().then((ogcServers) => {\n    this.ogcServers_ = ogcServers;\n  });\n\n  if (this.rootCtrl && this.rootCtrl.children) {\n    this.gmfThemes_.getThemesObject().then((themes) => {\n      this.refreshFirstLevelGroups_(themes);\n    });\n  }\n};\n\n/**\n * Set some groups as tree's children. If the service use mode 'flush', the\n * previous tree's children will be removed. Add only groups that are not\n * already in the tree.\n * @param {Array.<gmfThemes.GmfGroup>} firstLevelGroups An array of gmf theme group.\n * @return {boolean} True if the group has been added. False otherwise.\n * @export\n */\nexports.prototype.setFirstLevelGroups = function(firstLevelGroups) {\n  this.root.children.length = 0;\n  this.ngeoStateManager_.deleteParam(gmfBase.PermalinkParam.TREE_GROUPS);\n  return this.addFirstLevelGroups(firstLevelGroups);\n};\n\n/**\n * Add some groups as tree's children. If the service use mode 'flush', the\n * previous tree's children will be removed. Add only groups that are not\n * already in the tree.\n * @param {Array.<gmfThemes.GmfGroup>} firstLevelGroups An array of gmf theme\n *     group.\n * @param {boolean=} opt_add if true, force to use the 'add' mode this time.\n * @param {boolean=} opt_silent if true notifyCantAddGroups_ is not called.\n * @return{boolean} True if the group has been added. False otherwise.\n * @export\n */\nexports.prototype.addFirstLevelGroups = function(firstLevelGroups,\n  opt_add, opt_silent) {\n  const groupNotAdded = [];\n\n  firstLevelGroups.slice().reverse().forEach((group) => {\n    if (!this.addFirstLevelGroup_(group)) {\n      groupNotAdded.push(group);\n    }\n  });\n  if (groupNotAdded.length > 0 && !opt_silent) {\n    this.notifyCantAddGroups_(groupNotAdded);\n  }\n\n  return groupNotAdded.length === 0;\n};\n\n\n/**\n * Update the application state with the list of first level groups in the tree\n * @param {Array.<gmfThemes.GmfGroup>} groups firstlevel groups of the tree\n * @private\n */\nexports.prototype.updateTreeGroupsState_ = function(groups) {\n  const treeGroupsParam = {};\n  treeGroupsParam[gmfBase.PermalinkParam.TREE_GROUPS] = groups.map(node => node.name).join(',');\n  this.ngeoStateManager_.updateState(treeGroupsParam);\n  if (this.$injector_.has('gmfPermalink')) {\n    /** @type {gmf.permalink.Permalink} */(this.$injector_.get('gmfPermalink')).cleanParams(groups);\n  }\n};\n\n\n/**\n * Add a group as tree's children without consideration of this service 'mode'.\n * Add it only if it's not already in the tree.\n * @param {gmfThemes.GmfGroup} group The group to add.\n * @return {boolean} true if the group has been added.\n * @private\n */\nexports.prototype.addFirstLevelGroup_ = function(group) {\n  let alreadyAdded = false;\n  const groupID = group.id;\n  this.root.children.some((rootChild) => {\n    if (groupID === rootChild.id) {\n      return alreadyAdded = true;\n    }\n  }, this);\n  this.groupsToAddInThisDigestLoop_.some((grp) => {\n    if (groupID === grp.id) {\n      return alreadyAdded = true;\n    }\n  }, this);\n  if (alreadyAdded) {\n    return false;\n  }\n\n  // Add groups in the list of groups to add and be sure that the counter of\n  // groups to add is reset.\n  this.groupsToAddInThisDigestLoop_.push(group);\n  this.numberOfGroupsToAddInThisDigestLoop = 0;\n\n  // Delete previous timeout promise if it exists to do this action only once.\n  if (this.promiseForGroupsToAddInThisDigestLoop_ !== null) {\n    this.$timeout_.cancel(this.promiseForGroupsToAddInThisDigestLoop_);\n  }\n\n  // Add the groups only when there is no more group to come during this digest\n  // loop. The purpose of this is to preserve a consistent order between the\n  // layertree (generated by a template) and the layers in the map.\n  this.promiseForGroupsToAddInThisDigestLoop_ = this.$timeout_(() => {\n    // Set the number of group to add.\n    this.numberOfGroupsToAddInThisDigestLoop = this.groupsToAddInThisDigestLoop_.length;\n    // Add each first-level-groups.\n    this.groupsToAddInThisDigestLoop_.forEach(function(grp) {\n      this.root.children.unshift(grp);\n    }, this);\n    //Update the permalink\n    this.updateTreeGroupsState_(this.root.children);\n    // Reset the groups and the promise state. Don't reset the\n    // numberOfGroupsToAddInThisDigestLoop, it must persist because the layers\n    // will be added into the map after that the layertree template is\n    // generated (so in the next angular loop).\n    this.groupsToAddInThisDigestLoop_.length = 0;\n    this.promiseForGroupsToAddInThisDigestLoop_ = null;\n  });\n\n  return true;\n};\n\n\n/**\n * Retrieve a group (first found) by its name and add in the tree. Do nothing\n * if any corresponding group is found.\n * @param {string} groupName Name of the group to add.\n * @param {boolean=} opt_add if true, force to use the 'add' mode this time.\n * @export\n */\nexports.prototype.addGroupByName = function(groupName, opt_add) {\n  this.gmfThemes_.getThemesObject().then((themes) => {\n    const group = gmfThemeThemes.findGroupByName(themes, groupName);\n    if (group) {\n      this.addFirstLevelGroups([group], opt_add, false);\n    }\n  });\n};\n\n\n/**\n * Retrieve a group by the name of a layer that is contained in this group\n * (first found). This group will be added in the tree. Do nothing if any\n * corresponding group is found.\n * @param {string} layerName Name of the layer inside the group to add.\n * @param {boolean=} opt_add if true, force to use the 'add' mode this time.\n * @param {boolean=} opt_silent if true notifyCantAddGroups_ is not called\n * @export\n */\nexports.prototype.addGroupByLayerName = function(layerName, opt_add, opt_silent) {\n  this.gmfThemes_.getThemesObject().then((themes) => {\n    const group = gmfThemeThemes.findGroupByLayerNodeName(themes, layerName);\n    if (group) {\n      const groupAdded = this.addFirstLevelGroups([group], opt_add, opt_silent);\n      this.$timeout_(() => {\n        const treeCtrl = this.getTreeCtrlByNodeId(group.id);\n        if (!treeCtrl) {\n          console.warn('Tree controller not found, unable to add the group');\n          return;\n        }\n        let treeCtrlToActive;\n        treeCtrl.traverseDepthFirst((treeCtrl) => {\n          if (treeCtrl.node.name === layerName) {\n            treeCtrlToActive = treeCtrl;\n            return ngeoLayertreeController.VisitorDecision.STOP;\n          }\n        });\n\n        // Deactive all layers in the group if it's not in the tree.\n        if (groupAdded)  {\n          treeCtrl.setState('off');\n        }\n\n        // Active it.\n        if (treeCtrlToActive) {\n          treeCtrlToActive.setState('on');\n        }\n      });\n    }\n  });\n};\n\n\n/**\n * Remove a group from this tree's children. The first group that is found (\n * based on its name) will be removed. If any is found, nothing will append.\n * @param {gmfThemes.GmfGroup} group The group to remove.\n * @export\n */\nexports.prototype.removeGroup = function(group) {\n  const children = this.root.children;\n  let index = 0, found = false;\n  children.some((child) => {\n    if (child.name === group.name) {\n      return found = true;\n    }\n    index++;\n  });\n  if (found) {\n    children.splice(index, 1);\n    this.updateTreeGroupsState_(children);\n  }\n};\n\n\n/**\n * Remove all groups.\n * @export\n */\nexports.prototype.removeAll = function() {\n  while (this.root.children.length) {\n    this.removeGroup(this.root.children[0]);\n  }\n};\n\n\n/**\n * Clone a group node and recursively set all child node `isChecked` using\n * the given list of layer names.\n * @param {gmfThemes.GmfGroup} group The original group node.\n * @param {Array.<string>} names Array of node names to check (i.e. that\n *     should have their checkbox checked)\n * @return {gmfThemes.GmfGroup} Cloned node.\n * @private\n */\nexports.prototype.cloneGroupNode_ = function(group, names) {\n  const clone = /** @type {gmfThemes.GmfGroup} */ (olObj.assign({}, group));\n  this.toggleNodeCheck_(clone, names);\n  return clone;\n};\n\n\n/**\n * Set the child nodes metadata `isChecked` if its name is among the list of\n * given names. If a child node also has children, check those instead.\n * @param {gmfThemes.GmfGroup|gmfThemes.GmfLayer} node The original node.\n * @param {Array.<string>} names Array of node names to check (i.e. that\n *     should have their checkbox checked)\n * @private\n */\nexports.prototype.toggleNodeCheck_ = function(node, names) {\n  if (!node.children) {\n    return;\n  }\n  node.children.forEach(function(childNode) {\n    if (childNode.children) {\n      this.toggleNodeCheck_(childNode, names);\n    } else if (childNode.metadata) {\n      childNode.metadata.isChecked = olArray.includes(names, childNode.name);\n    }\n  }, this);\n};\n\n\n/**\n * Display a notification that informs that the given groups are already in the\n * tree.\n * @param {Array.<gmfThemes.GmfGroup>} groups An array of groups that already in\n *   the tree.\n * @private\n */\nexports.prototype.notifyCantAddGroups_ = function(groups) {\n  const names = [];\n  const gettextCatalog = this.gettextCatalog_;\n  groups.forEach((group) => {\n    names.push(group.name);\n  });\n  const msg = (names.length < 2) ?\n    gettextCatalog.getString('group is already loaded.') :\n    gettextCatalog.getString('groups are already loaded.');\n  this.ngeoNotification_.notify({\n    msg: `${names.join(', ')} ${msg}`,\n    type: ngeoMessageMessage.Type.INFORMATION\n  });\n};\n\n\n/**\n * Get a treeCtrl based on it's node id.\n * @param {number} id the id of a GMFThemesGroup or a GMFThemesLeaf.\n * @return {ngeo.layertree.Controller?} treeCtrl The associated controller or null.\n * @public\n */\nexports.prototype.getTreeCtrlByNodeId = function(id) {\n  let correspondingTreeCtrl = null;\n  if (this.rootCtrl && this.rootCtrl.traverseDepthFirst) {\n    this.rootCtrl.traverseDepthFirst((treeCtrl) => {\n      if (treeCtrl.node.id === id) {\n        correspondingTreeCtrl = treeCtrl;\n        return ngeoLayertreeController.VisitorDecision.STOP;\n      }\n    });\n  }\n  return correspondingTreeCtrl;\n};\n\n\n/**\n * Get the OGC server.\n * @param {ngeo.layertree.Controller} treeCtrl ngeo layertree controller, from\n *     the current node.\n * @return {gmfThemes.GmfOgcServer} The OGC server.\n */\nexports.prototype.getOgcServer = function(treeCtrl) {\n  if (treeCtrl.parent.node.mixed) {\n    const gmfLayerWMS = /** @type {gmfThemes.GmfLayerWMS} */ (treeCtrl.node);\n    googAsserts.assert(gmfLayerWMS.ogcServer);\n    return this.ogcServers_[gmfLayerWMS.ogcServer];\n  } else {\n    let firstLevelGroupCtrl = treeCtrl;\n    while (!firstLevelGroupCtrl.parent.isRoot) {\n      firstLevelGroupCtrl = firstLevelGroupCtrl.parent;\n    }\n    const gmfGroup = /** @type {gmfThemes.GmfGroup} */ (firstLevelGroupCtrl.node);\n    googAsserts.assert(gmfGroup.ogcServer);\n    return this.ogcServers_[gmfGroup.ogcServer];\n  }\n};\n\n\n/**\n * Keep the state of each existing first-level-groups in the layertree then\n * remove it and recreate it with nodes that come from the new theme and\n * the corresponding saved state (when possible, otherwise, juste take the\n * corresponding new node).\n * FIXME: Currently doesn't save nor restore the opacity.\n * @param {Array.<gmfThemes.GmfTheme>} themes the array of themes to be based on.\n * @private\n */\nexports.prototype.refreshFirstLevelGroups_ = function(themes) {\n  const firstLevelGroupsFullState = {};\n\n  // Save state of each child\n  this.rootCtrl.children.map((treeCtrl) => {\n    const name = treeCtrl.node.name;\n    firstLevelGroupsFullState[name] = this.getFirstLevelGroupFullState_(treeCtrl);\n  });\n\n  // Get nodes and set their state\n  const nodesToRestore = [];\n  // Iterate on the root to keep the same order in the tree as before.\n  this.root.children.map((node) => {\n    const name = node.name;\n\n    // Find the right firstlevelgroup in the new theme.\n    const nodeToRestore = gmfThemeThemes.findGroupByName(themes, name);\n    if (nodeToRestore) {\n      // Restore state.\n      const fullState = firstLevelGroupsFullState[name];\n      if (fullState) {\n        this.setNodeMetadataFromFullState_(nodeToRestore, fullState);\n      }\n      nodesToRestore.push(nodeToRestore);\n    }\n  });\n\n  // Readd the firstlevelgroups.\n  this.setFirstLevelGroups(nodesToRestore);\n\n  // Wait that Angular has created the layetree, then update the permalink.\n  this.$timeout_(() => {\n    this.updateTreeGroupsState_(this.root.children);\n  });\n};\n\n\n/**\n * Return a gmfx.TreeManagerFullState that keeps the state of the given\n * treeCtrl including the state of its children.\n * @param {ngeo.layertree.Controller} treeCtrl the ngeo layertree controller to\n *     save.\n * @return {gmfx.TreeManagerFullState!} the fullState object.\n * @private\n */\nexports.prototype.getFirstLevelGroupFullState_ = function(treeCtrl) {\n  const children = {};\n  // Get the state of the treeCtrl children recursively.\n  treeCtrl.children.map((child) => {\n    children[child.node.name] = this.getFirstLevelGroupFullState_(child);\n  });\n\n  let isChecked, isExpanded, isLegendExpanded;\n  if (treeCtrl.children.length > 0) {\n    const nodeElement = $(`#gmf-layertree-layer-group-${treeCtrl.uid}`);\n    // Set isExpanded only in groups.\n    if (nodeElement) {\n      isExpanded = nodeElement.hasClass('in');\n    }\n  } else {\n    // Set state and isLegendExpanded only in leaves.\n    isChecked = treeCtrl.getState();\n    if (isChecked === 'on') {\n      isChecked = true;\n    } else if (isChecked === 'off') {\n      isChecked = false;\n    } else {\n      isChecked = undefined;\n    }\n    const legendElement = $(`#gmf-layertree-node-${treeCtrl.uid}-legend`);\n    if (legendElement) {\n      isLegendExpanded = legendElement.is(':visible');\n    }\n  }\n\n  return {\n    children,\n    isChecked,\n    isExpanded,\n    isLegendExpanded\n  };\n};\n\n\n/**\n * Set a node's metadata with the given fullState. Update also its children\n * recursively with the fullState children.\n * @param {gmfThemes.GmfGroup|gmfThemes.GmfLayer} node to update.\n * @param {gmfx.TreeManagerFullState|undefined} fullState the fullState object\n *     to use.\n * @return {gmfThemes.GmfGroup|gmfThemes.GmfLayer} the node with modification.\n * @private\n */\nexports.prototype.setNodeMetadataFromFullState_ = function(node, fullState) {\n  if (!fullState) {\n    return node;\n  }\n\n  // Set the metadata of the node children recursively.\n  if (node.children) {\n    node.children.map((child) => {\n      this.setNodeMetadataFromFullState_(child, fullState.children[child.name]);\n    });\n  }\n\n  // Set the metadata with the fullState object informations.\n  const metadata = node.metadata;\n  metadata.isChecked = fullState.isChecked;\n  metadata.isExpanded = fullState.isExpanded;\n  metadata.isLegendExpanded = fullState.isLegendExpanded;\n\n  return node;\n};\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('gmfTreeManager', [\n  gmfThemeThemes.module.name,\n  ngeoLayertreeController.module.name,\n  ngeoMessageNotification.module.name,\n  ngeoStatemanagerService.module.name,\n]);\nexports.module.service('gmfTreeManager', exports);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./contribs/gmf/src/layertree/TreeManager.js","/**\n * @module ol/format/XML\n */\nimport _ol_xml_ from '../xml.js';\n\n/**\n * @classdesc\n * Generic format for reading non-feature XML data\n *\n * @constructor\n * @abstract\n * @struct\n */\nconst XML = function() {\n};\n\n\n/**\n * @param {Document|Node|string} source Source.\n * @return {Object} The parsed result.\n */\nXML.prototype.read = function(source) {\n  if (_ol_xml_.isDocument(source)) {\n    return this.readFromDocument(/** @type {Document} */ (source));\n  } else if (_ol_xml_.isNode(source)) {\n    return this.readFromNode(/** @type {Node} */ (source));\n  } else if (typeof source === 'string') {\n    const doc = _ol_xml_.parse(source);\n    return this.readFromDocument(doc);\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * @abstract\n * @param {Document} doc Document.\n * @return {Object} Object\n */\nXML.prototype.readFromDocument = function(doc) {};\n\n\n/**\n * @abstract\n * @param {Node} node Node.\n * @return {Object} Object\n */\nXML.prototype.readFromNode = function(node) {};\nexport default XML;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/format/XML.js\n// module id = 50\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/**\n * @module gmfapp.themeselector\n */\nconst exports = {};\n\nimport './themeselector.css';\nimport './common_dependencies.js';\nimport gmfBase from 'gmf/index.js';\n\n/** @suppress {extraRequire} */\nimport gmfThemeModule from 'gmf/theme/module.js';\n\n/** @suppress {extraRequire} */\nimport gmfLayertreeTreeManager from 'gmf/layertree/TreeManager.js';\n\n/** @type {!angular.Module} **/\nexports.module = angular.module('gmfapp', [\n  gmfThemeModule.name,\n]);\n\nexports.module.value('gmfTreeUrl',\n  'https://geomapfish-demo.camptocamp.net/2.2/wsgi/themes?version=2&background=background');\n\nexports.constant('angularLocaleScript', '../build/angular-locale_{{locale}}.js');\n\n\n/**\n * @constructor\n * @param {angular.$http} $http Angular's $http service.\n * @param {gmf.theme.Themes} gmfThemes Themes service.\n * @param {gmf.theme.Manager} gmfThemeManager gmf Tree Manager service.\n * @ngInject\n */\nexports.MainController = function($http, gmfThemes, gmfThemeManager) {\n\n  /**\n   * @param {gmfThemes.GmfTheme} theme Theme.\n   * @return {boolean} Theme is 'Enseignement'\n   * @export\n   */\n  this.filter = function(theme) {\n    return theme.name !== 'Enseignement';\n  };\n\n  /**\n   * @type {gmf.theme.Manager}\n   * @export\n   */\n  this.manager = gmfThemeManager;\n\n  gmfThemes.loadThemes();\n};\n\n\nexports.module.controller('MainController', exports.MainController);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./contribs/gmf/examples/themeselector.js","/**\n * @module gmf.theme.module\n */\nimport gmfThemeManager from 'gmf/theme/Manager.js';\nimport gmfThemeSelectorComponent from 'gmf/theme/selectorComponent.js';\nimport gmfThemeThemes from 'gmf/theme/Themes.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('gmfThemeModule', [\n  gmfThemeSelectorComponent.name,\n  gmfThemeManager.module.name,\n  gmfThemeThemes.module.name,\n]);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./contribs/gmf/src/theme/module.js","/**\n * @module gmf.theme.selectorComponent\n */\nimport gmfBase from 'gmf/index.js';\nimport gmfThemeManager from 'gmf/theme/Manager.js';\nimport gmfThemeThemes from 'gmf/theme/Themes.js';\nimport olEvents from 'ol/events.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('gmfThemeSelectorComponent', [\n  gmfThemeManager.module.name,\n  gmfThemeThemes.module.name,\n]);\n\n\n/**\n * Note that this component works with the {@link gmf.layertree.TreeManager}.\n * Setting the theme will update the \"tree\" object of\n * this {@link gmf.layertree.TreeManager}.\n *\n * Example:\n *\n *      <a href class=\"btn btn-default btn-block btn-primary\" data-toggle=\"dropdown\">\n *          <span class=\"fa fa-grid\"></span>\n *          <span ng-if=\"mainCtrl.gmfThemeManager.modeFlush\">\n *            <span translate>Theme:</span>\n *            <b ng-if=\"!mainCtrl.gmfThemeManager.getThemeName()\" translate>Loading...</b>\n *            <b ng-if=\"mainCtrl.gmfThemeManager.getThemeName()\">{{mainCtrl.gmfThemeManager.getThemeName()|translate}}</b>\n *          </span>\n *          <span ng-if=\"!mainCtrl.gmfThemeManager.modeFlush\">\n *            <b ng-if=\"!mainCtrl.gmfThemeManager.themeName\" translate>Themes</b>\n *          </span>\n *          <span class=\"caret\"></span>\n *      </a>\n *      <gmf-themeselector\n *         id=\"themes\"\n *         data-header-title=\"Themes\"\n *         gmf-themeselector-filter=\"::mainCtrl.filter\">\n *      </gmf-themeselector>\n *\n * The theme selector can operate in a 'flush' (as above) or 'add' mode. For more information\n * about these modes, refer to the documentation of {@link gmf.layertree.TreeManager}.\n *\n * Example in 'add' mode:\n *\n *      <a href class=\"btn btn-default btn-block btn-primary\" data-toggle=\"dropdown\">\n *          <span class=\"fa fa-grid\"></span>\n *          <span translate>Themes</span>\n *          <span class=\"caret\"></span>\n *      </a>\n *      <gmf-themeselector\n *         id=\"themes\"\n *         data-header-title=\"Themes\"\n *         gmf-themeselector-filter=\"::mainCtrl.filter\">\n *      </gmf-themeselector>\n *      <script>\n *        (function() {\n *          let module = angular.module('app');\n *          module.value('gmfTreeManagerModeFlush', false);\n *        })();\n *      </script>\n *\n * @htmlAttribute {Function} gmf-themeselector-filter The themes filter.\n *\n * @type {!angular.Component}\n */\nexports.component_ = {\n  bindings: {\n    'filter': '<gmfThemeselectorFilter'\n  },\n  controller: 'gmfThemeselectorController',\n  templateUrl: () => `${gmfBase.baseModuleTemplateUrl}/theme/selectorComponent.html`\n};\n\nexports.component('gmfThemeselector', exports.component_);\n\n\n/**\n * @param {!angular.Scope} $scope Angular scope.\n * @param {gmf.theme.Manager} gmfThemeManager Tree manager service.\n * @param {gmf.theme.Themes} gmfThemes Themes service.\n * @constructor\n * @private\n * @ngInject\n * @ngdoc controller\n * @ngname gmfThemeselectorController\n */\nexports.Controller_ = function($scope, gmfThemeManager, gmfThemes) {\n\n  /**\n   * @type {gmf.theme.Manager}\n   * @export\n   */\n  this.gmfThemeManager = gmfThemeManager;\n\n  /**\n   * @type {gmf.theme.Themes}\n   * @private\n   */\n  this.gmfThemes_ = gmfThemes;\n\n  /**\n   * @type {Array.<Object>}\n   * @export\n   */\n  this.themes;\n\n  /**\n   * @type {Function|undefined}\n   * @export\n   */\n  this.filter;\n\n  /**\n   * @type {Array.<ol.EventsKey>}\n   * @private\n   */\n  this.listenerKeys_ = [];\n\n  this.listenerKeys_.push(olEvents.listen(this.gmfThemes_, 'change', this.setThemes_, this));\n\n  $scope.$on('$destroy', this.handleDestroy_.bind(this));\n\n};\n\n/**\n * Store the loaded themes locally applying a filter (if any), then set the\n * current theme.\n * @private\n */\nexports.Controller_.prototype.setThemes_ = function() {\n  this.gmfThemes_.getThemesObject().then((themes) => {\n    // Keep only the themes dedicated to the theme switcher\n    this.themes = this.filter ? themes.filter(this.filter) : themes;\n  });\n};\n\n\n/**\n * @param {gmfThemes.GmfTheme} theme Theme.\n * @param {boolean=} opt_silent if true it will be no user message if\n *     the theme should be added but it's already added.\n * @export\n */\nexports.Controller_.prototype.setTheme = function(theme, opt_silent) {\n  if (theme) {\n    this.gmfThemeManager.addTheme(theme, opt_silent);\n  }\n};\n\n\n/**\n * @private\n */\nexports.Controller_.prototype.handleDestroy_ = function() {\n  this.listenerKeys_.forEach(olEvents.unlistenByKey);\n  this.listenerKeys_.length = 0;\n};\n\n\nexports.controller('gmfThemeselectorController',\n  exports.Controller_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./contribs/gmf/src/theme/selectorComponent.js","/**\n * @module ngeo.utils\n */\nconst exports = {};\nimport olEventsCondition from 'ol/events/condition.js';\nimport olGeomLineString from 'ol/geom/LineString.js';\nimport olGeomMultiPoint from 'ol/geom/MultiPoint.js';\nimport olGeomMultiLineString from 'ol/geom/MultiLineString.js';\nimport olGeomMultiPolygon from 'ol/geom/MultiPolygon.js';\nimport olGeomPoint from 'ol/geom/Point.js';\nimport olGeomPolygon from 'ol/geom/Polygon.js';\n\n\n/**\n * Utility method that converts a simple geometry to its multi equivalent. If\n * the geometry itself is already multi, it is returned as-is.\n * @param {ol.geom.Geometry} geometry A geometry\n * @return {ol.geom.Geometry} A multi geometry\n */\nexports.toMulti = function(geometry) {\n  let multiGeom;\n  if (geometry instanceof olGeomPoint) {\n    multiGeom = new olGeomMultiPoint([]);\n    multiGeom.appendPoint(geometry);\n  } else if (geometry instanceof olGeomLineString) {\n    multiGeom = new olGeomMultiLineString([]);\n    multiGeom.appendLineString(geometry);\n  } else if (geometry instanceof olGeomPolygon) {\n    multiGeom = new olGeomMultiPolygon([]);\n    multiGeom.appendPolygon(geometry);\n  } else {\n    multiGeom = geometry;\n  }\n  return multiGeom;\n};\n\n/**\n * Checks if on Safari.\n * @return {boolean} True if on Safari.\n */\nexports.isSafari = function() {\n  return navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1;\n};\n\n/**\n * Takes a hex value and prepends a zero if it's a single digit.\n * @param {string} hex Hex value to prepend if single digit.\n * @return {string} hex value prepended with zero if it was single digit,\n *     otherwise the same value that was passed in.\n */\nexports.colorZeroPadding = function(hex) {\n  return hex.length == 1 ? `0${hex}` : hex;\n};\n\n/**\n * Converts a color from RGB to hex representation.\n * @param {!Array.<number>} rgb rgb representation of the color.\n * @return {string} hex representation of the color.\n */\nexports.rgbArrayToHex = function(rgb) {\n  const r = rgb[0];\n  const g = rgb[1];\n  const b = rgb[2];\n  if (r != (r & 255) || g != (g & 255) || b != (b & 255)) {\n    throw Error(`\"(${r},${g},${b})\" is not a valid RGB color`);\n  }\n  const hexR = exports.colorZeroPadding(r.toString(16));\n  const hexG = exports.colorZeroPadding(g.toString(16));\n  const hexB = exports.colorZeroPadding(b.toString(16));\n  return `#${hexR}${hexG}${hexB}`;\n};\n\n/**\n * Decode the encoded query string into a query data dictionary.\n * @param {string|undefined} queryString The queryString.\n * @return {!Object.<string, string>} The result.\n */\nexports.decodeQueryString = function(queryString) {\n  const queryData = {};\n  if (queryString) {\n    const pairs = queryString.substring(1).split('&');\n    for (const pair of pairs) {\n      const indexOfEquals = pair.indexOf('=');\n      if (indexOfEquals >= 0) {\n        const name = pair.substring(0, indexOfEquals);\n        const value = pair.substring(indexOfEquals + 1);\n        queryData[decodeURIComponent(name)] = decodeURIComponent(value);\n      } else {\n        queryData[pair] = '';\n      }\n    }\n  }\n  return queryData;\n};\n\n/**\n * Encode the query data dictionary into an encoded query string.\n * @param {!Object.<string, string>} queryData The queryData,\n * @return {string} The result.\n */\nexports.encodeQueryString = function(queryData) {\n  const queryItem = [];\n  for (const key in queryData) {\n    const value = queryData[key];\n    queryItem.push(`${encodeURIComponent(key)}=${encodeURIComponent(value)}`);\n  }\n  return queryItem.join('&');\n};\n\n\n/**\n * Delete condition passed to the modify interaction\n * @param {ol.MapBrowserEvent} event Browser event.\n * @return {boolean} The result.\n */\nexports.deleteCondition = function(event) {\n  return olEventsCondition.noModifierKeys(event) && olEventsCondition.singleClick(event);\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","/**\n * @module ngeo.message.Message\n */\n/**\n * Abstract class for services that display messages.\n *\n * @constructor\n * @struct\n * @abstract\n */\nconst exports = function() {};\n\n\n/**\n * Show the message.\n *\n * @abstract\n * @param {ngeox.Message} message Message.\n * @protected\n */\nexports.prototype.showMessage = function(message) {};\n\n\n/**\n * Show disclaimer message string or object or list of disclame message\n * strings or objects.\n *\n * @param {string|Array.<string>|ngeox.Message|Array.<ngeox.Message>}\n *     object A message or list of messages as text or configuration objects.\n * @export\n */\nexports.prototype.show = function(object) {\n  const msgObjects = this.getMessageObjects(object);\n  msgObjects.forEach(this.showMessage, this);\n};\n\n\n/**\n * Display the given error message or list of error messages.\n *\n * @param {string|Array.<string>} message Message or list of messages.\n * @export\n */\nexports.prototype.error = function(message) {\n  this.show(this.getMessageObjects(message, exports.Type.ERROR));\n};\n\n\n/**\n * Display the given info message or list of info messages.\n * @param {string|Array.<string>} message Message or list of messages.\n * @export\n */\nexports.prototype.info = function(message) {\n  this.show(this.getMessageObjects(message, exports.Type.INFORMATION));\n};\n\n\n/**\n * Display the given success message or list of success messages.\n * @param {string|Array.<string>} message Message or list of messages.\n * @export\n */\nexports.prototype.success = function(message) {\n  this.show(this.getMessageObjects(message, exports.Type.SUCCESS));\n};\n\n\n/**\n * Display the given warning message or list of warning messages.\n * @param {string|Array.<string>} message Message or list of messages.\n * @export\n */\nexports.prototype.warn = function(message) {\n  this.show(this.getMessageObjects(message, exports.Type.WARNING));\n};\n\n\n/**\n * Returns an array of message object from any given message string, list of\n * message strings, message object or list message objects. The type can be\n * overridden here as well OR defined (if the message(s) is/are string(s),\n * defaults to 'information').\n * @param {string|Array.<string>|ngeox.Message|Array.<ngeox.Message>}\n *     object A message or list of messages as text or configuration objects.\n * @param {string=} opt_type The type of message to override the messages with.\n * @return {Array.<ngeox.Message>} List of message objects.\n * @protected\n */\nexports.prototype.getMessageObjects = function(object, opt_type) {\n  const msgObjects = [];\n  let msgObject = null;\n  const defaultType = exports.Type.INFORMATION;\n\n  if (typeof object === 'string') {\n    msgObjects.push({\n      msg: object,\n      type: opt_type !== undefined ? opt_type : defaultType\n    });\n  } else if (Array.isArray(object)) {\n    object.forEach((msg) => {\n      if (typeof object === 'string') {\n        msgObject = {\n          msg: msg,\n          type: opt_type !== undefined ? opt_type : defaultType\n        };\n      } else {\n        msgObject = msg;\n        if (opt_type !== undefined) {\n          msgObject.type = opt_type;\n        }\n      }\n      msgObjects.push(msgObject);\n    }, this);\n  } else {\n    msgObject = object;\n    if (opt_type !== undefined) {\n      msgObject.type = opt_type;\n    }\n    if (msgObject.type === undefined) {\n      msgObject.type = defaultType;\n    }\n    msgObjects.push(msgObject);\n  }\n\n  return msgObjects;\n};\n\n\n/**\n * @enum {string}\n * @export\n */\nexports.Type = {\n  /**\n   * @type {string}\n   * @export\n   */\n  ERROR: 'error',\n  /**\n   * @type {string}\n   * @export\n   */\n  INFORMATION: 'information',\n  /**\n   * @type {string}\n   * @export\n   */\n  SUCCESS: 'success',\n  /**\n   * @type {string}\n   * @export\n   */\n  WARNING: 'warning'\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/message/Message.js","/**\n * @module ol/format/XLink\n */\nconst XLink = {};\n\n\n/**\n * @const\n * @type {string}\n */\nconst NAMESPACE_URI = 'http://www.w3.org/1999/xlink';\n\n\n/**\n * @param {Node} node Node.\n * @return {boolean|undefined} Boolean.\n */\nXLink.readHref = function(node) {\n  return node.getAttributeNS(NAMESPACE_URI, 'href');\n};\nexport default XLink;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/format/XLink.js\n// module id = 60\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/**\n * @module ol/Image\n */\nimport {inherits} from './index.js';\nimport _ol_ImageBase_ from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport _ol_events_ from './events.js';\nimport EventType from './events/EventType.js';\nimport {getHeight} from './extent.js';\n\n/**\n * @constructor\n * @extends {ol.ImageBase}\n * @param {ol.Extent} extent Extent.\n * @param {number|undefined} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {string} src Image source URI.\n * @param {?string} crossOrigin Cross origin.\n * @param {ol.ImageLoadFunctionType} imageLoadFunction Image load function.\n */\nconst _ol_Image_ = function(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n\n  _ol_ImageBase_.call(this, extent, resolution, pixelRatio, ImageState.IDLE);\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.src_ = src;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement|Image|HTMLVideoElement}\n   */\n  this.image_ = new Image();\n  if (crossOrigin !== null) {\n    this.image_.crossOrigin = crossOrigin;\n  }\n\n  /**\n   * @private\n   * @type {Array.<ol.EventsKey>}\n   */\n  this.imageListenerKeys_ = null;\n\n  /**\n   * @protected\n   * @type {ol.ImageState}\n   */\n  this.state = ImageState.IDLE;\n\n  /**\n   * @private\n   * @type {ol.ImageLoadFunctionType}\n   */\n  this.imageLoadFunction_ = imageLoadFunction;\n\n};\n\ninherits(_ol_Image_, _ol_ImageBase_);\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_Image_.prototype.getImage = function() {\n  return this.image_;\n};\n\n\n/**\n * Tracks loading or read errors.\n *\n * @private\n */\n_ol_Image_.prototype.handleImageError_ = function() {\n  this.state = ImageState.ERROR;\n  this.unlistenImage_();\n  this.changed();\n};\n\n\n/**\n * Tracks successful image load.\n *\n * @private\n */\n_ol_Image_.prototype.handleImageLoad_ = function() {\n  if (this.resolution === undefined) {\n    this.resolution = getHeight(this.extent) / this.image_.height;\n  }\n  this.state = ImageState.LOADED;\n  this.unlistenImage_();\n  this.changed();\n};\n\n\n/**\n * Load the image or retry if loading previously failed.\n * Loading is taken care of by the tile queue, and calling this method is\n * only needed for preloading or for reloading in case of an error.\n * @override\n * @api\n */\n_ol_Image_.prototype.load = function() {\n  if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n    this.state = ImageState.LOADING;\n    this.changed();\n    this.imageListenerKeys_ = [\n      _ol_events_.listenOnce(this.image_, EventType.ERROR,\n        this.handleImageError_, this),\n      _ol_events_.listenOnce(this.image_, EventType.LOAD,\n        this.handleImageLoad_, this)\n    ];\n    this.imageLoadFunction_(this, this.src_);\n  }\n};\n\n\n/**\n * @param {HTMLCanvasElement|Image|HTMLVideoElement} image Image.\n */\n_ol_Image_.prototype.setImage = function(image) {\n  this.image_ = image;\n};\n\n\n/**\n * Discards event handlers which listen for load completion or errors.\n *\n * @private\n */\n_ol_Image_.prototype.unlistenImage_ = function() {\n  this.imageListenerKeys_.forEach(_ol_events_.unlistenByKey);\n  this.imageListenerKeys_ = null;\n};\nexport default _ol_Image_;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/Image.js\n// module id = null\n// module chunks = ","/**\n * @module ol/source/ImageWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\nimport {inherits} from '../index.js';\nimport _ol_Image_ from '../Image.js';\nimport {assert} from '../asserts.js';\nimport _ol_events_ from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {containsExtent, getCenter, getForViewAndSize, getHeight, getWidth} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {get as getProjection, transform} from '../proj.js';\nimport _ol_reproj_ from '../reproj.js';\nimport ImageSource from '../source/Image.js';\nimport WMSServerType from '../source/WMSServerType.js';\nimport _ol_string_ from '../string.js';\nimport {appendParams} from '../uri.js';\n\n/**\n * @classdesc\n * Source for WMS servers providing single, untiled images.\n *\n * @constructor\n * @fires ol.source.Image.Event\n * @extends {ol.source.Image}\n * @param {olx.source.ImageWMSOptions=} opt_options Options.\n * @api\n */\nconst ImageWMS = function(opt_options) {\n\n  const options = opt_options || {};\n\n  ImageSource.call(this, {\n    attributions: options.attributions,\n    projection: options.projection,\n    resolutions: options.resolutions\n  });\n\n  /**\n   * @private\n   * @type {?string}\n   */\n  this.crossOrigin_ =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.url_ = options.url;\n\n  /**\n   * @private\n   * @type {ol.ImageLoadFunctionType}\n   */\n  this.imageLoadFunction_ = options.imageLoadFunction !== undefined ?\n    options.imageLoadFunction : ImageSource.defaultImageLoadFunction;\n\n  /**\n   * @private\n   * @type {!Object}\n   */\n  this.params_ = options.params || {};\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.v13_ = true;\n  this.updateV13_();\n\n  /**\n   * @private\n   * @type {ol.source.WMSServerType|undefined}\n   */\n  this.serverType_ = /** @type {ol.source.WMSServerType|undefined} */ (options.serverType);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n  /**\n   * @private\n   * @type {ol.Image}\n   */\n  this.image_ = null;\n\n  /**\n   * @private\n   * @type {ol.Size}\n   */\n  this.imageSize_ = [0, 0];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedRevision_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.ratio_ = options.ratio !== undefined ? options.ratio : 1.5;\n\n};\n\ninherits(ImageWMS, ImageSource);\n\n\n/**\n * @const\n * @type {ol.Size}\n * @private\n */\nImageWMS.GETFEATUREINFO_IMAGE_SIZE_ = [101, 101];\n\n\n/**\n * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n * constructed.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {ol.ProjectionLike} projection Projection.\n * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n *     in the `LAYERS` parameter will be used. `VERSION` should not be\n *     specified here.\n * @return {string|undefined} GetFeatureInfo URL.\n * @api\n */\nImageWMS.prototype.getGetFeatureInfoUrl = function(coordinate, resolution, projection, params) {\n  if (this.url_ === undefined) {\n    return undefined;\n  }\n  const projectionObj = getProjection(projection);\n  const sourceProjectionObj = this.getProjection();\n\n  if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n    resolution = _ol_reproj_.calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, resolution);\n    coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n  }\n\n  const extent = getForViewAndSize(coordinate, resolution, 0,\n    ImageWMS.GETFEATUREINFO_IMAGE_SIZE_);\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetFeatureInfo',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true,\n    'QUERY_LAYERS': this.params_['LAYERS']\n  };\n  assign(baseParams, this.params_, params);\n\n  const x = Math.floor((coordinate[0] - extent[0]) / resolution);\n  const y = Math.floor((extent[3] - coordinate[1]) / resolution);\n  baseParams[this.v13_ ? 'I' : 'X'] = x;\n  baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n  return this.getRequestUrl_(\n    extent, ImageWMS.GETFEATUREINFO_IMAGE_SIZE_,\n    1, sourceProjectionObj || projectionObj, baseParams);\n};\n\n\n/**\n * Get the user-provided params, i.e. those passed to the constructor through\n * the \"params\" option, and possibly updated using the updateParams method.\n * @return {Object} Params.\n * @api\n */\nImageWMS.prototype.getParams = function() {\n  return this.params_;\n};\n\n\n/**\n * @inheritDoc\n */\nImageWMS.prototype.getImageInternal = function(extent, resolution, pixelRatio, projection) {\n\n  if (this.url_ === undefined) {\n    return null;\n  }\n\n  resolution = this.findNearestResolution(resolution);\n\n  if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n    pixelRatio = 1;\n  }\n\n  const imageResolution = resolution / pixelRatio;\n\n  const center = getCenter(extent);\n  const viewWidth = Math.ceil(getWidth(extent) / imageResolution);\n  const viewHeight = Math.ceil(getHeight(extent) / imageResolution);\n  const viewExtent = getForViewAndSize(center, imageResolution, 0,\n    [viewWidth, viewHeight]);\n  const requestWidth = Math.ceil(this.ratio_ * getWidth(extent) / imageResolution);\n  const requestHeight = Math.ceil(this.ratio_ * getHeight(extent) / imageResolution);\n  const requestExtent = getForViewAndSize(center, imageResolution, 0,\n    [requestWidth, requestHeight]);\n\n  const image = this.image_;\n  if (image &&\n      this.renderedRevision_ == this.getRevision() &&\n      image.getResolution() == resolution &&\n      image.getPixelRatio() == pixelRatio &&\n      containsExtent(image.getExtent(), viewExtent)) {\n    return image;\n  }\n\n  const params = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetMap',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true\n  };\n  assign(params, this.params_);\n\n  this.imageSize_[0] = Math.round(getWidth(requestExtent) / imageResolution);\n  this.imageSize_[1] = Math.round(getHeight(requestExtent) / imageResolution);\n\n  const url = this.getRequestUrl_(requestExtent, this.imageSize_, pixelRatio,\n    projection, params);\n\n  this.image_ = new _ol_Image_(requestExtent, resolution, pixelRatio,\n    url, this.crossOrigin_, this.imageLoadFunction_);\n\n  this.renderedRevision_ = this.getRevision();\n\n  _ol_events_.listen(this.image_, EventType.CHANGE,\n    this.handleImageChange, this);\n\n  return this.image_;\n\n};\n\n\n/**\n * Return the image load function of the source.\n * @return {ol.ImageLoadFunctionType} The image load function.\n * @api\n */\nImageWMS.prototype.getImageLoadFunction = function() {\n  return this.imageLoadFunction_;\n};\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {ol.Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.proj.Projection} projection Projection.\n * @param {Object} params Params.\n * @return {string} Request URL.\n * @private\n */\nImageWMS.prototype.getRequestUrl_ = function(extent, size, pixelRatio, projection, params) {\n\n  assert(this.url_ !== undefined, 9); // `url` must be configured or set using `#setUrl()`\n\n  params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n  if (!('STYLES' in this.params_)) {\n    params['STYLES'] = '';\n  }\n\n  if (pixelRatio != 1) {\n    switch (this.serverType_) {\n      case WMSServerType.GEOSERVER:\n        const dpi = (90 * pixelRatio + 0.5) | 0;\n        if ('FORMAT_OPTIONS' in params) {\n          params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n        } else {\n          params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n        }\n        break;\n      case WMSServerType.MAPSERVER:\n        params['MAP_RESOLUTION'] = 90 * pixelRatio;\n        break;\n      case WMSServerType.CARMENTA_SERVER:\n      case WMSServerType.QGIS:\n        params['DPI'] = 90 * pixelRatio;\n        break;\n      default:\n        assert(false, 8); // Unknown `serverType` configured\n        break;\n    }\n  }\n\n  params['WIDTH'] = size[0];\n  params['HEIGHT'] = size[1];\n\n  const axisOrientation = projection.getAxisOrientation();\n  let bbox;\n  if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n    bbox = [extent[1], extent[0], extent[3], extent[2]];\n  } else {\n    bbox = extent;\n  }\n  params['BBOX'] = bbox.join(',');\n\n  return appendParams(/** @type {string} */ (this.url_), params);\n};\n\n\n/**\n * Return the URL used for this WMS source.\n * @return {string|undefined} URL.\n * @api\n */\nImageWMS.prototype.getUrl = function() {\n  return this.url_;\n};\n\n\n/**\n * Set the image load function of the source.\n * @param {ol.ImageLoadFunctionType} imageLoadFunction Image load function.\n * @api\n */\nImageWMS.prototype.setImageLoadFunction = function(\n  imageLoadFunction) {\n  this.image_ = null;\n  this.imageLoadFunction_ = imageLoadFunction;\n  this.changed();\n};\n\n\n/**\n * Set the URL to use for requests.\n * @param {string|undefined} url URL.\n * @api\n */\nImageWMS.prototype.setUrl = function(url) {\n  if (url != this.url_) {\n    this.url_ = url;\n    this.image_ = null;\n    this.changed();\n  }\n};\n\n\n/**\n * Update the user-provided params.\n * @param {Object} params Params.\n * @api\n */\nImageWMS.prototype.updateParams = function(params) {\n  assign(this.params_, params);\n  this.updateV13_();\n  this.image_ = null;\n  this.changed();\n};\n\n\n/**\n * @private\n */\nImageWMS.prototype.updateV13_ = function() {\n  const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n  this.v13_ = _ol_string_.compareVersions(version, '1.3') >= 0;\n};\nexport default ImageWMS;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/ImageWMS.js\n// module id = null\n// module chunks = ","/**\n * @type {string} Default WMS version.\n */\nexport const DEFAULT_WMS_VERSION = '1.3.0';\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/common.js\n// module id = 66\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/**\n * @module ol/source/WMSServerType\n */\n\n/**\n * Available server types: `'carmentaserver'`, `'geoserver'`, `'mapserver'`,\n *     `'qgis'`. These are servers that have vendor parameters beyond the WMS\n *     specification that OpenLayers can make use of.\n * @enum {string}\n */\nexport default {\n  CARMENTA_SERVER: 'carmentaserver',\n  GEOSERVER: 'geoserver',\n  MAPSERVER: 'mapserver',\n  QGIS: 'qgis'\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/WMSServerType.js\n// module id = 67\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/**\n * @module ol/source/TileWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\nimport {inherits} from '../index.js';\nimport {assert} from '../asserts.js';\nimport {buffer, createEmpty} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {modulo} from '../math.js';\nimport {get as getProjection, transform, transformExtent} from '../proj.js';\nimport _ol_reproj_ from '../reproj.js';\nimport _ol_size_ from '../size.js';\nimport TileImage from '../source/TileImage.js';\nimport WMSServerType from '../source/WMSServerType.js';\nimport _ol_tilecoord_ from '../tilecoord.js';\nimport _ol_string_ from '../string.js';\nimport {appendParams} from '../uri.js';\n\n/**\n * @classdesc\n * Layer source for tile data from WMS servers.\n *\n * @constructor\n * @extends {ol.source.TileImage}\n * @param {olx.source.TileWMSOptions=} opt_options Tile WMS options.\n * @api\n */\nconst TileWMS = function(opt_options) {\n\n  const options = opt_options || {};\n\n  const params = options.params || {};\n\n  const transparent = 'TRANSPARENT' in params ? params['TRANSPARENT'] : true;\n\n  TileImage.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: options.crossOrigin,\n    opaque: !transparent,\n    projection: options.projection,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileClass: options.tileClass,\n    tileGrid: options.tileGrid,\n    tileLoadFunction: options.tileLoadFunction,\n    url: options.url,\n    urls: options.urls,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true,\n    transition: options.transition\n  });\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.gutter_ = options.gutter !== undefined ? options.gutter : 0;\n\n  /**\n   * @private\n   * @type {!Object}\n   */\n  this.params_ = params;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.v13_ = true;\n\n  /**\n   * @private\n   * @type {ol.source.WMSServerType|undefined}\n   */\n  this.serverType_ = /** @type {ol.source.WMSServerType|undefined} */ (options.serverType);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n  /**\n   * @private\n   * @type {ol.Extent}\n   */\n  this.tmpExtent_ = createEmpty();\n\n  this.updateV13_();\n  this.setKey(this.getKeyForParams_());\n\n};\n\ninherits(TileWMS, TileImage);\n\n\n/**\n * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n * constructed.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {ol.ProjectionLike} projection Projection.\n * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n *     in the `LAYERS` parameter will be used. `VERSION` should not be\n *     specified here.\n * @return {string|undefined} GetFeatureInfo URL.\n * @api\n */\nTileWMS.prototype.getGetFeatureInfoUrl = function(coordinate, resolution, projection, params) {\n  const projectionObj = getProjection(projection);\n  const sourceProjectionObj = this.getProjection();\n\n  let tileGrid = this.getTileGrid();\n  if (!tileGrid) {\n    tileGrid = this.getTileGridForProjection(projectionObj);\n  }\n\n  const tileCoord = tileGrid.getTileCoordForCoordAndResolution(coordinate, resolution);\n\n  if (tileGrid.getResolutions().length <= tileCoord[0]) {\n    return undefined;\n  }\n\n  let tileResolution = tileGrid.getResolution(tileCoord[0]);\n  let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n  let tileSize = _ol_size_.toSize(tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n\n  const gutter = this.gutter_;\n  if (gutter !== 0) {\n    tileSize = _ol_size_.buffer(tileSize, gutter, this.tmpSize);\n    tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n  }\n\n  if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n    tileResolution = _ol_reproj_.calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, tileResolution);\n    tileExtent = transformExtent(tileExtent, projectionObj, sourceProjectionObj);\n    coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n  }\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetFeatureInfo',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true,\n    'QUERY_LAYERS': this.params_['LAYERS']\n  };\n  assign(baseParams, this.params_, params);\n\n  const x = Math.floor((coordinate[0] - tileExtent[0]) / tileResolution);\n  const y = Math.floor((tileExtent[3] - coordinate[1]) / tileResolution);\n\n  baseParams[this.v13_ ? 'I' : 'X'] = x;\n  baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n  return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n    1, sourceProjectionObj || projectionObj, baseParams);\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.getGutterInternal = function() {\n  return this.gutter_;\n};\n\n\n/**\n * Get the user-provided params, i.e. those passed to the constructor through\n * the \"params\" option, and possibly updated using the updateParams method.\n * @return {Object} Params.\n * @api\n */\nTileWMS.prototype.getParams = function() {\n  return this.params_;\n};\n\n\n/**\n * @param {ol.TileCoord} tileCoord Tile coordinate.\n * @param {ol.Size} tileSize Tile size.\n * @param {ol.Extent} tileExtent Tile extent.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.proj.Projection} projection Projection.\n * @param {Object} params Params.\n * @return {string|undefined} Request URL.\n * @private\n */\nTileWMS.prototype.getRequestUrl_ = function(tileCoord, tileSize, tileExtent,\n  pixelRatio, projection, params) {\n\n  const urls = this.urls;\n  if (!urls) {\n    return undefined;\n  }\n\n  params['WIDTH'] = tileSize[0];\n  params['HEIGHT'] = tileSize[1];\n\n  params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n  if (!('STYLES' in this.params_)) {\n    params['STYLES'] = '';\n  }\n\n  if (pixelRatio != 1) {\n    switch (this.serverType_) {\n      case WMSServerType.GEOSERVER:\n        const dpi = (90 * pixelRatio + 0.5) | 0;\n        if ('FORMAT_OPTIONS' in params) {\n          params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n        } else {\n          params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n        }\n        break;\n      case WMSServerType.MAPSERVER:\n        params['MAP_RESOLUTION'] = 90 * pixelRatio;\n        break;\n      case WMSServerType.CARMENTA_SERVER:\n      case WMSServerType.QGIS:\n        params['DPI'] = 90 * pixelRatio;\n        break;\n      default:\n        assert(false, 52); // Unknown `serverType` configured\n        break;\n    }\n  }\n\n  const axisOrientation = projection.getAxisOrientation();\n  const bbox = tileExtent;\n  if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n    let tmp;\n    tmp = tileExtent[0];\n    bbox[0] = tileExtent[1];\n    bbox[1] = tmp;\n    tmp = tileExtent[2];\n    bbox[2] = tileExtent[3];\n    bbox[3] = tmp;\n  }\n  params['BBOX'] = bbox.join(',');\n\n  let url;\n  if (urls.length == 1) {\n    url = urls[0];\n  } else {\n    const index = modulo(_ol_tilecoord_.hash(tileCoord), urls.length);\n    url = urls[index];\n  }\n  return appendParams(url, params);\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.getTilePixelRatio = function(pixelRatio) {\n  return (!this.hidpi_ || this.serverType_ === undefined) ? 1 :\n  /** @type {number} */ (pixelRatio);\n};\n\n\n/**\n * @private\n * @return {string} The key for the current params.\n */\nTileWMS.prototype.getKeyForParams_ = function() {\n  let i = 0;\n  const res = [];\n  for (const key in this.params_) {\n    res[i++] = key + '-' + this.params_[key];\n  }\n  return res.join('/');\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.fixedTileUrlFunction = function(tileCoord, pixelRatio, projection) {\n\n  let tileGrid = this.getTileGrid();\n  if (!tileGrid) {\n    tileGrid = this.getTileGridForProjection(projection);\n  }\n\n  if (tileGrid.getResolutions().length <= tileCoord[0]) {\n    return undefined;\n  }\n\n  if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n    pixelRatio = 1;\n  }\n\n  const tileResolution = tileGrid.getResolution(tileCoord[0]);\n  let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n  let tileSize = _ol_size_.toSize(\n    tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n  const gutter = this.gutter_;\n  if (gutter !== 0) {\n    tileSize = _ol_size_.buffer(tileSize, gutter, this.tmpSize);\n    tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n  }\n\n  if (pixelRatio != 1) {\n    tileSize = _ol_size_.scale(tileSize, pixelRatio, this.tmpSize);\n  }\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetMap',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true\n  };\n  assign(baseParams, this.params_);\n\n  return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n    pixelRatio, projection, baseParams);\n};\n\n/**\n * Update the user-provided params.\n * @param {Object} params Params.\n * @api\n */\nTileWMS.prototype.updateParams = function(params) {\n  assign(this.params_, params);\n  this.updateV13_();\n  this.setKey(this.getKeyForParams_());\n};\n\n\n/**\n * @private\n */\nTileWMS.prototype.updateV13_ = function() {\n  const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n  this.v13_ = _ol_string_.compareVersions(version, '1.3') >= 0;\n};\nexport default TileWMS;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/TileWMS.js\n// module id = 69\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/**\n * @module ngeo.statemanager.Location\n */\nimport googAsserts from 'goog/asserts.js';\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoUtils from 'ngeo/utils.js';\n\n/**\n * Provides a service for interacting with the URL in the\n * browser address bar.\n *\n * WARNING: because of a bug in Angular this service is not compatible with\n * the $location service. This further means that service is not compatible\n * with the $anchorScroll and $route services, and with the ng-include and\n * ng-view directives (which are based on the $anchorScroll and $route\n * services). See <https://github.com/angular/angular.js/issues/1417>.\n *\n * This file also provides an ngeo.statemanager.Location.MockProvider function that you can\n * use to mock Angular's $location provider and make it possible to use both\n * ngeoLocation and ng-include.\n *\n *     app.module.config(ngeo.statemanager.Location.MockProvider);\n *\n * The ngeo Location type.\n *\n * See our live example: [../examples/permalink.html](../examples/permalink.html)\n *\n * @param {Location} location Location.\n * @param {History} history History.\n * @constructor\n * @struct\n * @ngdoc service\n * @ngname ngeoLocation\n */\nconst exports = function(location, history) {\n  /**\n   * @type {History}\n   * @private\n   */\n  this.history_ = history;\n\n  /**\n   * @type {string|undefined}\n   * @private\n   */\n  this.schema_ = location.protocol.substring(0, location.protocol.length - 1);\n\n  /**\n   * @type {string|undefined}\n   * @private\n   */\n  this.domain_ = location.hostname;\n\n  /**\n   * @type {number|undefined}\n   * @private\n   */\n  this.port_ = location.port ? parseInt(location.port, 10) : undefined;\n\n  /**\n   * @type {string|undefined}\n   * @private\n   */\n  this.path_ = location.pathname;\n\n  /**\n   * @type {!Object.<string, string>}\n   * @private\n   */\n  this.queryData_ = ngeoUtils.decodeQueryString(location.search);\n\n  /**\n   * @type {!Object.<string, string>}\n   * @private\n   */\n  this.fragment_ = ngeoUtils.decodeQueryString(location.hash);\n};\n\n\n/**\n * @param {History} history History.\n * @param {string} state State.\n */\nexports.replaceState = function(history, state) {\n  try {\n    history.replaceState(null, '', state);\n  } catch (error) {\n    // replaceState fails on some browser if the domain in the state\n    // is not the same as location.origin\n  }\n};\n\n\n/**\n * Get the location's current path.\n * @return {string|undefined} The path.\n * @export\n */\nexports.prototype.getPath = function() {\n  return this.path_;\n};\n\n\n/**\n * Get the location's URI as a string\n * @return {string} The URI.\n * @export\n */\nexports.prototype.getUriString = function() {\n  const out = [];\n\n  if (this.schema_) {\n    out.push(this.schema_, ':');\n  }\n\n  if (this.domain_ || this.schema_ === 'file') {\n    out.push('//');\n\n    out.push(this.domain_);\n\n    if (this.port_ !== undefined) {\n      out.push(':', String(this.port_));\n    }\n  }\n\n  if (this.path_) {\n    if (this.domain_ && this.path_.charAt(0) !== '/') {\n      out.push('/');\n    }\n    out.push(this.path_);\n  }\n\n  const encodedQueryData = ngeoUtils.encodeQueryString(this.queryData_);\n  if (encodedQueryData.length > 0) {\n    out.push('?', encodedQueryData);\n  }\n\n  const encodedFragment = ngeoUtils.encodeQueryString(this.fragment_);\n  if (encodedFragment.length > 0) {\n    out.push('#', encodedFragment);\n  }\n  return out.join('');\n};\n\n\n/**\n * Check if a param exists in the location's URI.\n * @param {string} key Param key.\n * @return {boolean} True if the param exists.\n * @export\n */\nexports.prototype.hasParam = function(key) {\n  return key in this.queryData_;\n};\n\n\n/**\n * Check if a param exists in the fragment of the location's URI.\n * @param {string} key Param key.\n * @return {boolean} True if the param exists.\n * @export\n */\nexports.prototype.hasFragmentParam = function(key) {\n  return key in this.fragment_;\n};\n\n\n/**\n * Get a param in the location's URI.\n * @param {string} key Param key.\n * @return {string|undefined} Param value.\n * @export\n */\nexports.prototype.getParam = function(key) {\n  return this.queryData_[key];\n};\n\n\n/**\n * Get a param from the fragment of the location's URI.\n * @param {string} key Param key.\n * @return {string|undefined} Param value.\n * @export\n */\nexports.prototype.getFragmentParam = function(key) {\n  return this.fragment_[key];\n};\n\n\n/**\n * Get a param in the location's URI as integer. If the entry does not exist,\n * or if the value can not be parsed as integer, `undefined` is returned.\n * @param {string} key Param key.\n * @return {number|undefined} Param value.\n * @export\n */\nexports.prototype.getParamAsInt = function(key) {\n  const value = this.getParam(key);\n  if (value === undefined) {\n    return undefined;\n  }\n  googAsserts.assertString(value);\n  const valueAsInt = parseInt(value, 10);\n  return (isNaN(valueAsInt)) ? undefined : valueAsInt;\n};\n\n\n/**\n * Get a param in the location's URI as a floating point number.\n * If the entry does not exist, or if the value can not be parsed,\n * `undefined` is returned.\n * @param {string} key Param key.\n * @return {number|undefined} Param value.\n * @export\n */\nexports.prototype.getParamAsFloat = function(key) {\n  const value = this.getParam(key);\n  if (value === undefined) {\n    return undefined;\n  }\n  googAsserts.assertString(value);\n  const valueAsFloat = parseFloat(value);\n  return isNaN(valueAsFloat) ? undefined : valueAsFloat;\n};\n\n\n/**\n * Get a param from the fragment of the location's URI as integer. If the entry\n * does not exist, or if the value can not be parsed as integer, `undefined` is returned.\n * @param {string} key Param key.\n * @return {number|undefined} Param value.\n * @export\n */\nexports.prototype.getFragmentParamAsInt = function(key) {\n  const value = this.getFragmentParam(key);\n  if (value === undefined) {\n    return undefined;\n  }\n  googAsserts.assertString(value);\n  const valueAsInt = parseInt(value, 10);\n  return (isNaN(valueAsInt)) ? undefined : valueAsInt;\n};\n\n\n/**\n * Get an array with all existing param's keys in the location's URI.\n * @return {Array.<string>} Param keys.\n * @export\n */\nexports.prototype.getParamKeys = function() {\n  const keys = [];\n  for (const key in this.queryData_) {\n    keys.push(key);\n  }\n  return keys;\n};\n\n\n/**\n * Get an array with all existing param's keys from the fragment of the location's URI.\n * @return {Array.<string>} Param keys.\n * @export\n */\nexports.prototype.getFragmentParamKeys = function() {\n  const keys = [];\n  for (const key in this.fragment_) {\n    keys.push(key);\n  }\n  return keys;\n};\n\n\n/**\n * Get an array with all existing param's keys in the location's URI that start\n * with the given prefix.\n * @param {string} prefix Key prefix.\n * @return {Array.<string>} Param keys.\n * @export\n */\nexports.prototype.getParamKeysWithPrefix = function(prefix) {\n  const keys = [];\n  for (const key in this.queryData_) {\n    if (key.indexOf(prefix) == 0) {\n      keys.push(key);\n    }\n  }\n  return keys;\n};\n\n\n/**\n * Get an array with all existing param's keys from the fragment of the location's URI\n * that start with the given prefix.\n * @param {string} prefix Key prefix.\n * @return {Array.<string>} Param keys.\n * @export\n */\nexports.prototype.getFragmentParamKeysWithPrefix = function(prefix) {\n  const keys = [];\n  for (const key in this.fragment_) {\n    if (key.indexOf(prefix) == 0) {\n      keys.push(key);\n    }\n  }\n  return keys;\n};\n\n\n/**\n * Set or create a param in the location's URI.\n * @param {!Object.<string, string>} params Parameters.\n * @export\n */\nexports.prototype.updateParams = function(params) {\n  for (const key in params) {\n    this.queryData_[key] = params[key];\n  }\n};\n\n\n/**\n * Set or create a param in the fragment of the location's URI.\n * @param {!Object.<string, string>} params Parameters.\n * @export\n */\nexports.prototype.updateFragmentParams = function(params) {\n  for (const key in params) {\n    this.fragment_[key] = params[key];\n  }\n};\n\n\n/**\n * Delete a param in the location's URI.\n * @param {string} key Param key.\n * @export\n */\nexports.prototype.deleteParam = function(key) {\n  delete this.queryData_[key];\n};\n\n\n/**\n * Delete a param int the fragment of the location's URI.\n * @param {string} key Param key.\n * @export\n */\nexports.prototype.deleteFragmentParam = function(key) {\n  delete this.fragment_[key];\n};\n\n\n/**\n * Refresh the the location's URI.\n * @export\n */\nexports.prototype.refresh = function() {\n  exports.replaceState(this.history_, this.getUriString());\n};\n\n\n/**\n * Set a new path for this location.\n * @param {string} path Path.\n * @export\n */\nexports.prototype.setPath = function(path) {\n  this.path_ = path;\n};\n\n\n/**\n * The factory creating the ngeo Location service.\n *\n * @param {angular.Scope} $rootScope The root scope.\n * @param {angular.$window} $window Angular window service.\n * @return {ngeo.statemanager.Location} The ngeo location service.\n * @ngInject\n */\nexports.LocationFactory = function($rootScope, $window) {\n  const history = $window.history;\n  const service = new exports($window.location, $window.history);\n\n  let lastUri = service.getUriString();\n  $rootScope.$watch(() => {\n    const newUri = service.getUriString();\n    if (lastUri !== newUri) {\n      $rootScope.$evalAsync(() => {\n        lastUri = newUri;\n        if (history !== undefined && history.replaceState !== undefined) {\n          exports.replaceState(history, newUri);\n        }\n        $rootScope.$broadcast('ngeoLocationChange');\n      });\n    }\n  });\n\n  return service;\n};\n\n/**\n * A function that changes Angular's $location provider to avoid problem\n * when both ngeoLocation and $location are used in an application. This\n * is how you can use that function in an application:\n *\n * app.module.config(ngeo.statemanager.Location.MockProvider);\n *\n * @param {angular.$locationProvider} $locationProvider Angular location\n *     provider.\n * @ngInject\n */\nexports.MockProvider = function($locationProvider) {\n  /**\n   * @return {angular.$location} Mock object for Angular location service.\n   */\n  $locationProvider['$get'] = function() {\n    const locationMock = /** @type {angular.$location} */ ({\n      /**\n       * @return {string} Absolute URL.\n       */\n      absUrl() {\n        return '';\n      },\n      /**\n       * @param {string=} opt_path Path.\n       * @return {string} Hash.\n       */\n      hash(opt_path) {\n        return opt_path !== undefined ? this : '';\n      },\n      /**\n       * @return {string} Host.\n       */\n      host() {\n        return '';\n      },\n      /**\n       * @param {string=} opt_path Path.\n       * @return {string} Path.\n       */\n      path(opt_path) {\n        return opt_path !== undefined ? this : '';\n      },\n      /**\n       * @return {number} Port.\n       */\n      port() {\n        return 0;\n      },\n      /**\n       * @return {string} Protocol.\n       */\n      protocol() {\n        return '';\n      },\n      replace() {\n      },\n      /**\n       * @param {string=} opt_search Search.\n       * @param {Object=} opt_paramValue Parameters.\n       * @return {Object} Search.\n       */\n      search(opt_search, opt_paramValue) {\n        return opt_search !== undefined ? this : {};\n      },\n      /**\n       * @param {string=} opt_url URL.\n       * @return {string} URL.\n       */\n      url(opt_url) {\n        return '';\n      }\n    });\n    return locationMock;\n  };\n};\n\n\n/**\n * @type {!angular.Module}\n * FIXME add utils dependencies.\n * FIXME What about Mockup provider ?\n */\nexports.module = angular.module('ngeoLocation', []);\nexports.module.factory('ngeoLocation', exports.LocationFactory);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/statemanager/Location.js","/**\n * @module ol/format/OWS\n */\nimport {inherits} from '../index.js';\nimport XLink from '../format/XLink.js';\nimport XML from '../format/XML.js';\nimport XSD from '../format/XSD.js';\nimport _ol_xml_ from '../xml.js';\n\n/**\n * @constructor\n * @extends {ol.format.XML}\n */\nconst OWS = function() {\n  XML.call(this);\n};\n\ninherits(OWS, XML);\n\n\n/**\n * @inheritDoc\n */\nOWS.prototype.readFromDocument = function(doc) {\n  for (let n = doc.firstChild; n; n = n.nextSibling) {\n    if (n.nodeType == Node.ELEMENT_NODE) {\n      return this.readFromNode(n);\n    }\n  }\n  return null;\n};\n\n\n/**\n * @inheritDoc\n */\nOWS.prototype.readFromNode = function(node) {\n  const owsObject = _ol_xml_.pushParseAndPop({},\n    OWS.PARSERS_, node, []);\n  return owsObject ? owsObject : null;\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Object|undefined} The address.\n */\nOWS.readAddress_ = function(node, objectStack) {\n  return _ol_xml_.pushParseAndPop({},\n    OWS.ADDRESS_PARSERS_, node, objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Object|undefined} The values.\n */\nOWS.readAllowedValues_ = function(node, objectStack) {\n  return _ol_xml_.pushParseAndPop({},\n    OWS.ALLOWED_VALUES_PARSERS_, node, objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Object|undefined} The constraint.\n */\nOWS.readConstraint_ = function(node, objectStack) {\n  const name = node.getAttribute('name');\n  if (!name) {\n    return undefined;\n  }\n  return _ol_xml_.pushParseAndPop({'name': name},\n    OWS.CONSTRAINT_PARSERS_, node,\n    objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Object|undefined} The contact info.\n */\nOWS.readContactInfo_ = function(node, objectStack) {\n  return _ol_xml_.pushParseAndPop({},\n    OWS.CONTACT_INFO_PARSERS_, node, objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Object|undefined} The DCP.\n */\nOWS.readDcp_ = function(node, objectStack) {\n  return _ol_xml_.pushParseAndPop({},\n    OWS.DCP_PARSERS_, node, objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Object|undefined} The GET object.\n */\nOWS.readGet_ = function(node, objectStack) {\n  const href = XLink.readHref(node);\n  if (!href) {\n    return undefined;\n  }\n  return _ol_xml_.pushParseAndPop({'href': href},\n    OWS.REQUEST_METHOD_PARSERS_, node, objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Object|undefined} The HTTP object.\n */\nOWS.readHttp_ = function(node, objectStack) {\n  return _ol_xml_.pushParseAndPop({}, OWS.HTTP_PARSERS_,\n    node, objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Object|undefined} The operation.\n */\nOWS.readOperation_ = function(node, objectStack) {\n  const name = node.getAttribute('name');\n  const value = _ol_xml_.pushParseAndPop({},\n    OWS.OPERATION_PARSERS_, node, objectStack);\n  if (!value) {\n    return undefined;\n  }\n  const object = /** @type {Object} */\n      (objectStack[objectStack.length - 1]);\n  object[name] = value;\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Object|undefined} The operations metadata.\n */\nOWS.readOperationsMetadata_ = function(node,\n  objectStack) {\n  return _ol_xml_.pushParseAndPop({},\n    OWS.OPERATIONS_METADATA_PARSERS_, node,\n    objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Object|undefined} The phone.\n */\nOWS.readPhone_ = function(node, objectStack) {\n  return _ol_xml_.pushParseAndPop({},\n    OWS.PHONE_PARSERS_, node, objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Object|undefined} The service identification.\n */\nOWS.readServiceIdentification_ = function(node,\n  objectStack) {\n  return _ol_xml_.pushParseAndPop(\n    {}, OWS.SERVICE_IDENTIFICATION_PARSERS_, node,\n    objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Object|undefined} The service contact.\n */\nOWS.readServiceContact_ = function(node, objectStack) {\n  return _ol_xml_.pushParseAndPop(\n    {}, OWS.SERVICE_CONTACT_PARSERS_, node,\n    objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Object|undefined} The service provider.\n */\nOWS.readServiceProvider_ = function(node, objectStack) {\n  return _ol_xml_.pushParseAndPop(\n    {}, OWS.SERVICE_PROVIDER_PARSERS_, node,\n    objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {string|undefined} The value.\n */\nOWS.readValue_ = function(node, objectStack) {\n  return XSD.readString(node);\n};\n\n\n/**\n * @const\n * @type {Array.<string>}\n * @private\n */\nOWS.NAMESPACE_URIS_ = [\n  null,\n  'http://www.opengis.net/ows/1.1'\n];\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nOWS.PARSERS_ = _ol_xml_.makeStructureNS(\n  OWS.NAMESPACE_URIS_, {\n    'ServiceIdentification': _ol_xml_.makeObjectPropertySetter(\n      OWS.readServiceIdentification_),\n    'ServiceProvider': _ol_xml_.makeObjectPropertySetter(\n      OWS.readServiceProvider_),\n    'OperationsMetadata': _ol_xml_.makeObjectPropertySetter(\n      OWS.readOperationsMetadata_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nOWS.ADDRESS_PARSERS_ = _ol_xml_.makeStructureNS(\n  OWS.NAMESPACE_URIS_, {\n    'DeliveryPoint': _ol_xml_.makeObjectPropertySetter(\n      XSD.readString),\n    'City': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'AdministrativeArea': _ol_xml_.makeObjectPropertySetter(\n      XSD.readString),\n    'PostalCode': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'Country': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'ElectronicMailAddress': _ol_xml_.makeObjectPropertySetter(\n      XSD.readString)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nOWS.ALLOWED_VALUES_PARSERS_ = _ol_xml_.makeStructureNS(\n  OWS.NAMESPACE_URIS_, {\n    'Value': _ol_xml_.makeObjectPropertyPusher(OWS.readValue_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nOWS.CONSTRAINT_PARSERS_ = _ol_xml_.makeStructureNS(\n  OWS.NAMESPACE_URIS_, {\n    'AllowedValues': _ol_xml_.makeObjectPropertySetter(\n      OWS.readAllowedValues_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nOWS.CONTACT_INFO_PARSERS_ = _ol_xml_.makeStructureNS(\n  OWS.NAMESPACE_URIS_, {\n    'Phone': _ol_xml_.makeObjectPropertySetter(OWS.readPhone_),\n    'Address': _ol_xml_.makeObjectPropertySetter(OWS.readAddress_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nOWS.DCP_PARSERS_ = _ol_xml_.makeStructureNS(\n  OWS.NAMESPACE_URIS_, {\n    'HTTP': _ol_xml_.makeObjectPropertySetter(OWS.readHttp_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nOWS.HTTP_PARSERS_ = _ol_xml_.makeStructureNS(\n  OWS.NAMESPACE_URIS_, {\n    'Get': _ol_xml_.makeObjectPropertyPusher(OWS.readGet_),\n    'Post': undefined // TODO\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nOWS.OPERATION_PARSERS_ = _ol_xml_.makeStructureNS(\n  OWS.NAMESPACE_URIS_, {\n    'DCP': _ol_xml_.makeObjectPropertySetter(OWS.readDcp_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nOWS.OPERATIONS_METADATA_PARSERS_ = _ol_xml_.makeStructureNS(\n  OWS.NAMESPACE_URIS_, {\n    'Operation': OWS.readOperation_\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nOWS.PHONE_PARSERS_ = _ol_xml_.makeStructureNS(\n  OWS.NAMESPACE_URIS_, {\n    'Voice': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'Facsimile': _ol_xml_.makeObjectPropertySetter(XSD.readString)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nOWS.REQUEST_METHOD_PARSERS_ = _ol_xml_.makeStructureNS(\n  OWS.NAMESPACE_URIS_, {\n    'Constraint': _ol_xml_.makeObjectPropertyPusher(\n      OWS.readConstraint_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nOWS.SERVICE_CONTACT_PARSERS_ =\n    _ol_xml_.makeStructureNS(\n      OWS.NAMESPACE_URIS_, {\n        'IndividualName': _ol_xml_.makeObjectPropertySetter(\n          XSD.readString),\n        'PositionName': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n        'ContactInfo': _ol_xml_.makeObjectPropertySetter(\n          OWS.readContactInfo_)\n      });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nOWS.SERVICE_IDENTIFICATION_PARSERS_ =\n    _ol_xml_.makeStructureNS(\n      OWS.NAMESPACE_URIS_, {\n        'Abstract': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n        'AccessConstraints': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n        'Fees': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n        'Title': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n        'ServiceTypeVersion': _ol_xml_.makeObjectPropertySetter(\n          XSD.readString),\n        'ServiceType': _ol_xml_.makeObjectPropertySetter(XSD.readString)\n      });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nOWS.SERVICE_PROVIDER_PARSERS_ =\n    _ol_xml_.makeStructureNS(\n      OWS.NAMESPACE_URIS_, {\n        'ProviderName': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n        'ProviderSite': _ol_xml_.makeObjectPropertySetter(XLink.readHref),\n        'ServiceContact': _ol_xml_.makeObjectPropertySetter(\n          OWS.readServiceContact_)\n      });\nexport default OWS;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/format/OWS.js\n// module id = null\n// module chunks = ","/**\n * @module ol/format/WMTSCapabilities\n */\nimport {inherits} from '../index.js';\nimport {boundingExtent} from '../extent.js';\nimport OWS from '../format/OWS.js';\nimport XLink from '../format/XLink.js';\nimport XML from '../format/XML.js';\nimport XSD from '../format/XSD.js';\nimport _ol_xml_ from '../xml.js';\n\n/**\n * @classdesc\n * Format for reading WMTS capabilities data.\n *\n * @constructor\n * @extends {ol.format.XML}\n * @api\n */\nconst WMTSCapabilities = function() {\n  XML.call(this);\n\n  /**\n   * @type {ol.format.OWS}\n   * @private\n   */\n  this.owsParser_ = new OWS();\n};\n\ninherits(WMTSCapabilities, XML);\n\n\n/**\n * Read a WMTS capabilities document.\n *\n * @function\n * @param {Document|Node|string} source The XML source.\n * @return {Object} An object representing the WMTS capabilities.\n * @api\n */\nWMTSCapabilities.prototype.read;\n\n\n/**\n * @inheritDoc\n */\nWMTSCapabilities.prototype.readFromDocument = function(doc) {\n  for (let n = doc.firstChild; n; n = n.nextSibling) {\n    if (n.nodeType == Node.ELEMENT_NODE) {\n      return this.readFromNode(n);\n    }\n  }\n  return null;\n};\n\n\n/**\n * @inheritDoc\n */\nWMTSCapabilities.prototype.readFromNode = function(node) {\n  const version = node.getAttribute('version').trim();\n  let WMTSCapabilityObject = this.owsParser_.readFromNode(node);\n  if (!WMTSCapabilityObject) {\n    return null;\n  }\n  WMTSCapabilityObject['version'] = version;\n  WMTSCapabilityObject = _ol_xml_.pushParseAndPop(WMTSCapabilityObject,\n    WMTSCapabilities.PARSERS_, node, []);\n  return WMTSCapabilityObject ? WMTSCapabilityObject : null;\n};\n\n\n/**\n * @private\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Attribution object.\n */\nWMTSCapabilities.readContents_ = function(node, objectStack) {\n  return _ol_xml_.pushParseAndPop({},\n    WMTSCapabilities.CONTENTS_PARSERS_, node, objectStack);\n};\n\n\n/**\n * @private\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Layers object.\n */\nWMTSCapabilities.readLayer_ = function(node, objectStack) {\n  return _ol_xml_.pushParseAndPop({},\n    WMTSCapabilities.LAYER_PARSERS_, node, objectStack);\n};\n\n\n/**\n * @private\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Tile Matrix Set object.\n */\nWMTSCapabilities.readTileMatrixSet_ = function(node, objectStack) {\n  return _ol_xml_.pushParseAndPop({},\n    WMTSCapabilities.TMS_PARSERS_, node, objectStack);\n};\n\n\n/**\n * @private\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Style object.\n */\nWMTSCapabilities.readStyle_ = function(node, objectStack) {\n  const style = _ol_xml_.pushParseAndPop({},\n    WMTSCapabilities.STYLE_PARSERS_, node, objectStack);\n  if (!style) {\n    return undefined;\n  }\n  const isDefault = node.getAttribute('isDefault') === 'true';\n  style['isDefault'] = isDefault;\n  return style;\n\n};\n\n\n/**\n * @private\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Tile Matrix Set Link object.\n */\nWMTSCapabilities.readTileMatrixSetLink_ = function(node,\n  objectStack) {\n  return _ol_xml_.pushParseAndPop({},\n    WMTSCapabilities.TMS_LINKS_PARSERS_, node, objectStack);\n};\n\n\n/**\n * @private\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Dimension object.\n */\nWMTSCapabilities.readDimensions_ = function(node, objectStack) {\n  return _ol_xml_.pushParseAndPop({},\n    WMTSCapabilities.DIMENSION_PARSERS_, node, objectStack);\n};\n\n\n/**\n * @private\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Resource URL object.\n */\nWMTSCapabilities.readResourceUrl_ = function(node, objectStack) {\n  const format = node.getAttribute('format');\n  const template = node.getAttribute('template');\n  const resourceType = node.getAttribute('resourceType');\n  const resource = {};\n  if (format) {\n    resource['format'] = format;\n  }\n  if (template) {\n    resource['template'] = template;\n  }\n  if (resourceType) {\n    resource['resourceType'] = resourceType;\n  }\n  return resource;\n};\n\n\n/**\n * @private\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} WGS84 BBox object.\n */\nWMTSCapabilities.readWgs84BoundingBox_ = function(node, objectStack) {\n  const coordinates = _ol_xml_.pushParseAndPop([],\n    WMTSCapabilities.WGS84_BBOX_READERS_, node, objectStack);\n  if (coordinates.length != 2) {\n    return undefined;\n  }\n  return boundingExtent(coordinates);\n};\n\n\n/**\n * @private\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Legend object.\n */\nWMTSCapabilities.readLegendUrl_ = function(node, objectStack) {\n  const legend = {};\n  legend['format'] = node.getAttribute('format');\n  legend['href'] = XLink.readHref(node);\n  return legend;\n};\n\n\n/**\n * @private\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Coordinates object.\n */\nWMTSCapabilities.readCoordinates_ = function(node, objectStack) {\n  const coordinates = XSD.readString(node).split(' ');\n  if (!coordinates || coordinates.length != 2) {\n    return undefined;\n  }\n  const x = +coordinates[0];\n  const y = +coordinates[1];\n  if (isNaN(x) || isNaN(y)) {\n    return undefined;\n  }\n  return [x, y];\n};\n\n\n/**\n * @private\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} TileMatrix object.\n */\nWMTSCapabilities.readTileMatrix_ = function(node, objectStack) {\n  return _ol_xml_.pushParseAndPop({},\n    WMTSCapabilities.TM_PARSERS_, node, objectStack);\n};\n\n\n/**\n * @private\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} TileMatrixSetLimits Object.\n */\nWMTSCapabilities.readTileMatrixLimitsList_ = function(node,\n  objectStack) {\n  return _ol_xml_.pushParseAndPop([],\n    WMTSCapabilities.TMS_LIMITS_LIST_PARSERS_, node,\n    objectStack);\n};\n\n\n/**\n * @private\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} TileMatrixLimits Array.\n */\nWMTSCapabilities.readTileMatrixLimits_ = function(node, objectStack) {\n  return _ol_xml_.pushParseAndPop({},\n    WMTSCapabilities.TMS_LIMITS_PARSERS_, node, objectStack);\n};\n\n\n/**\n * @const\n * @private\n * @type {Array.<string>}\n */\nWMTSCapabilities.NAMESPACE_URIS_ = [\n  null,\n  'http://www.opengis.net/wmts/1.0'\n];\n\n\n/**\n * @const\n * @private\n * @type {Array.<string>}\n */\nWMTSCapabilities.OWS_NAMESPACE_URIS_ = [\n  null,\n  'http://www.opengis.net/ows/1.1'\n];\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nWMTSCapabilities.PARSERS_ = _ol_xml_.makeStructureNS(\n  WMTSCapabilities.NAMESPACE_URIS_, {\n    'Contents': _ol_xml_.makeObjectPropertySetter(\n      WMTSCapabilities.readContents_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nWMTSCapabilities.CONTENTS_PARSERS_ = _ol_xml_.makeStructureNS(\n  WMTSCapabilities.NAMESPACE_URIS_, {\n    'Layer': _ol_xml_.makeObjectPropertyPusher(\n      WMTSCapabilities.readLayer_),\n    'TileMatrixSet': _ol_xml_.makeObjectPropertyPusher(\n      WMTSCapabilities.readTileMatrixSet_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nWMTSCapabilities.LAYER_PARSERS_ = _ol_xml_.makeStructureNS(\n  WMTSCapabilities.NAMESPACE_URIS_, {\n    'Style': _ol_xml_.makeObjectPropertyPusher(\n      WMTSCapabilities.readStyle_),\n    'Format': _ol_xml_.makeObjectPropertyPusher(\n      XSD.readString),\n    'TileMatrixSetLink': _ol_xml_.makeObjectPropertyPusher(\n      WMTSCapabilities.readTileMatrixSetLink_),\n    'Dimension': _ol_xml_.makeObjectPropertyPusher(\n      WMTSCapabilities.readDimensions_),\n    'ResourceURL': _ol_xml_.makeObjectPropertyPusher(\n      WMTSCapabilities.readResourceUrl_)\n  }, _ol_xml_.makeStructureNS(WMTSCapabilities.OWS_NAMESPACE_URIS_, {\n    'Title': _ol_xml_.makeObjectPropertySetter(\n      XSD.readString),\n    'Abstract': _ol_xml_.makeObjectPropertySetter(\n      XSD.readString),\n    'WGS84BoundingBox': _ol_xml_.makeObjectPropertySetter(\n      WMTSCapabilities.readWgs84BoundingBox_),\n    'Identifier': _ol_xml_.makeObjectPropertySetter(\n      XSD.readString)\n  }));\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nWMTSCapabilities.STYLE_PARSERS_ = _ol_xml_.makeStructureNS(\n  WMTSCapabilities.NAMESPACE_URIS_, {\n    'LegendURL': _ol_xml_.makeObjectPropertyPusher(\n      WMTSCapabilities.readLegendUrl_)\n  }, _ol_xml_.makeStructureNS(WMTSCapabilities.OWS_NAMESPACE_URIS_, {\n    'Title': _ol_xml_.makeObjectPropertySetter(\n      XSD.readString),\n    'Identifier': _ol_xml_.makeObjectPropertySetter(\n      XSD.readString)\n  }));\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nWMTSCapabilities.TMS_LINKS_PARSERS_ = _ol_xml_.makeStructureNS(\n  WMTSCapabilities.NAMESPACE_URIS_, {\n    'TileMatrixSet': _ol_xml_.makeObjectPropertySetter(\n      XSD.readString),\n    'TileMatrixSetLimits': _ol_xml_.makeObjectPropertySetter(\n      WMTSCapabilities.readTileMatrixLimitsList_)\n  });\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nWMTSCapabilities.TMS_LIMITS_LIST_PARSERS_ = _ol_xml_.makeStructureNS(\n  WMTSCapabilities.NAMESPACE_URIS_, {\n    'TileMatrixLimits': _ol_xml_.makeArrayPusher(\n      WMTSCapabilities.readTileMatrixLimits_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nWMTSCapabilities.TMS_LIMITS_PARSERS_ = _ol_xml_.makeStructureNS(\n  WMTSCapabilities.NAMESPACE_URIS_, {\n    'TileMatrix': _ol_xml_.makeObjectPropertySetter(\n      XSD.readString),\n    'MinTileRow': _ol_xml_.makeObjectPropertySetter(\n      XSD.readNonNegativeInteger),\n    'MaxTileRow': _ol_xml_.makeObjectPropertySetter(\n      XSD.readNonNegativeInteger),\n    'MinTileCol': _ol_xml_.makeObjectPropertySetter(\n      XSD.readNonNegativeInteger),\n    'MaxTileCol': _ol_xml_.makeObjectPropertySetter(\n      XSD.readNonNegativeInteger)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nWMTSCapabilities.DIMENSION_PARSERS_ = _ol_xml_.makeStructureNS(\n  WMTSCapabilities.NAMESPACE_URIS_, {\n    'Default': _ol_xml_.makeObjectPropertySetter(\n      XSD.readString),\n    'Value': _ol_xml_.makeObjectPropertyPusher(\n      XSD.readString)\n  }, _ol_xml_.makeStructureNS(WMTSCapabilities.OWS_NAMESPACE_URIS_, {\n    'Identifier': _ol_xml_.makeObjectPropertySetter(\n      XSD.readString)\n  }));\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nWMTSCapabilities.WGS84_BBOX_READERS_ = _ol_xml_.makeStructureNS(\n  WMTSCapabilities.OWS_NAMESPACE_URIS_, {\n    'LowerCorner': _ol_xml_.makeArrayPusher(\n      WMTSCapabilities.readCoordinates_),\n    'UpperCorner': _ol_xml_.makeArrayPusher(\n      WMTSCapabilities.readCoordinates_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nWMTSCapabilities.TMS_PARSERS_ = _ol_xml_.makeStructureNS(\n  WMTSCapabilities.NAMESPACE_URIS_, {\n    'WellKnownScaleSet': _ol_xml_.makeObjectPropertySetter(\n      XSD.readString),\n    'TileMatrix': _ol_xml_.makeObjectPropertyPusher(\n      WMTSCapabilities.readTileMatrix_)\n  }, _ol_xml_.makeStructureNS(WMTSCapabilities.OWS_NAMESPACE_URIS_, {\n    'SupportedCRS': _ol_xml_.makeObjectPropertySetter(\n      XSD.readString),\n    'Identifier': _ol_xml_.makeObjectPropertySetter(\n      XSD.readString)\n  }));\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nWMTSCapabilities.TM_PARSERS_ = _ol_xml_.makeStructureNS(\n  WMTSCapabilities.NAMESPACE_URIS_, {\n    'TopLeftCorner': _ol_xml_.makeObjectPropertySetter(\n      WMTSCapabilities.readCoordinates_),\n    'ScaleDenominator': _ol_xml_.makeObjectPropertySetter(\n      XSD.readDecimal),\n    'TileWidth': _ol_xml_.makeObjectPropertySetter(\n      XSD.readNonNegativeInteger),\n    'TileHeight': _ol_xml_.makeObjectPropertySetter(\n      XSD.readNonNegativeInteger),\n    'MatrixWidth': _ol_xml_.makeObjectPropertySetter(\n      XSD.readNonNegativeInteger),\n    'MatrixHeight': _ol_xml_.makeObjectPropertySetter(\n      XSD.readNonNegativeInteger)\n  }, _ol_xml_.makeStructureNS(WMTSCapabilities.OWS_NAMESPACE_URIS_, {\n    'Identifier': _ol_xml_.makeObjectPropertySetter(\n      XSD.readString)\n  }));\nexport default WMTSCapabilities;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/format/WMTSCapabilities.js\n// module id = null\n// module chunks = ","/**\n * @module ngeo.misc.decorate\n */\nconst exports = {};\nimport googAsserts from 'goog/asserts.js';\nimport ngeoBase from 'ngeo/index.js';\nimport olInteractionInteraction from 'ol/interaction/Interaction.js';\nimport olLayerBase from 'ol/layer/Base.js';\nimport olLayerGroup from 'ol/layer/Group.js';\nimport olLayerLayer from 'ol/layer/Layer.js';\nimport olSourceImage from 'ol/source/Image.js';\nimport olSourceTile from 'ol/source/Tile.js';\n\n\n/**\n * Provides a function that adds an \"active\" property (using\n * `Object.defineProperty`) to an interaction, making it possible to use ngModel\n * to activate/deactivate interactions.\n *\n * Example:\n *\n *      <input type=\"checkbox\" ngModel=\"interaction.active\" />\n *\n * @param {ol.interaction.Interaction} interaction Interaction to decorate.\n */\nexports.interaction = function(interaction) {\n  googAsserts.assertInstanceof(interaction, olInteractionInteraction);\n\n  Object.defineProperty(interaction, 'active', {\n    get: () => interaction.getActive(),\n    set: (val) => {\n      interaction.setActive(val);\n    }\n  });\n};\n\n\n/**\n * Provides a function that adds properties (using\n * `Object.defineProperty`) to the layer, making it possible to control layer\n * properties with ngModel.\n *\n * Example:\n *\n *      <input type=\"checkbox\" ngModel=\"layer.visible\" />\n *\n * @param {ol.layer.Base} layer Layer to decorate.\n */\nexports.layer = function(layer) {\n  googAsserts.assertInstanceof(layer, olLayerBase);\n\n  Object.defineProperty(layer, 'visible', {\n    configurable: true,\n    /**\n     * @return {boolean} Visible.\n     */\n    get: () => layer.getVisible(),\n    /**\n     * @param {boolean} val Visible.\n     */\n    set: (val) => {\n      layer.setVisible(val);\n    }\n  });\n\n  Object.defineProperty(layer, 'opacity', {\n    configurable: true,\n    /**\n     * @return {number} Opacity.\n     */\n    get: () => layer.getOpacity(),\n    /**\n     * @param {number} val Opacity.\n     */\n    set: (val) => {\n      layer.setOpacity(val);\n    }\n  });\n};\n\n\n/**\n * Provides a function that adds a 'loading 'property (using\n * `Object.defineProperty`) to an ol.layer.Group or a layer with\n * an ol.source.Tile or an ol.source.Image source.\n * This property is true when the layer is loading and false otherwise.\n *\n * Example:\n *\n *      <span ng-if=\"layer.loading\">please wait</span>\n *\n * @param {ol.layer.Base} layer layer.\n * @param {angular.Scope} $scope Scope.\n */\nexports.layerLoading = function(layer, $scope) {\n\n  let source;\n\n  /**\n   * @type {Array<string>|null}\n   */\n  let incrementEvents = null;\n\n  /**\n   * @type {Array<string>|null}\n   */\n  let decrementEvents = null;\n\n  /**\n   * @function\n   * @private\n   */\n  const incrementLoadCount_ = increment_;\n\n  /**\n   * @function\n   * @private\n   */\n  const decrementLoadCount_ = decrement_;\n\n  layer.set('load_count', 0, true);\n\n  if (layer instanceof olLayerGroup) {\n    layer.getLayers().on('add', (olEvent) => {\n      const newLayer = olEvent.element;\n      newLayer.set('parent_group', layer);\n    });\n  }\n\n  if (layer instanceof olLayerLayer) {\n    source = layer.getSource();\n    if (source === null) {\n      return;\n    } else if (source instanceof olSourceTile) {\n      incrementEvents = ['tileloadstart'];\n      decrementEvents = ['tileloadend', 'tileloaderror'];\n    } else if (source instanceof olSourceImage) {\n      incrementEvents = ['imageloadstart'];\n      decrementEvents = ['imageloadend', 'imageloaderror'];\n    } else {\n      googAsserts.fail('unsupported source type');\n    }\n\n    source.on(incrementEvents, () => {\n      incrementLoadCount_(layer);\n      $scope.$applyAsync();\n    });\n\n    source.on(decrementEvents, () => {\n      decrementLoadCount_(layer);\n      $scope.$applyAsync();\n    });\n  }\n\n  Object.defineProperty(layer, 'loading', {\n    configurable: true,\n    get: () => /** @type {number} */ (layer.get('load_count')) > 0\n  });\n\n  /**\n   * @function\n   * @param {ol.layer.Base} layer Layer\n   * @private\n   */\n  function increment_(layer) {\n    let load_count = /** @type {number} */ (layer.get('load_count'));\n    const parent = /** @type {ol.layer.Base} */ (layer.get('parent_group'));\n    layer.set('load_count', ++load_count, true);\n    if (parent) {\n      increment_(parent);\n    }\n  }\n\n  /**\n   * @function\n   * @param {ol.layer.Base} layer Layer\n   * @private\n   */\n  function decrement_(layer) {\n    let load_count = /** @type {number} */ (layer.get('load_count'));\n    const parent = /** @type {ol.layer.Base} */ (layer.get('parent_group'));\n    layer.set('load_count', --load_count, true);\n    if (parent) {\n      decrement_(parent);\n    }\n  }\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/misc/decorate.js","/**\n * @module ngeo.message.Notification\n */\nimport googAsserts from 'goog/asserts.js';\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoMessageMessage from 'ngeo/message/Message.js';\nimport * as olBase from 'ol/index.js';\n\n/**\n * Provides methods to display any sort of messages, notifications, errors,\n * etc. Requires Bootstrap library (both CSS and JS) to display the alerts\n * properly.\n *\n * @constructor\n * @struct\n * @extends {ngeo.message.Message}\n * @param {angular.$timeout} $timeout Angular timeout service.\n * @ngdoc service\n * @ngname ngeoNotification\n * @abstract\n * @ngInject\n */\nconst exports = function($timeout) {\n\n  ngeoMessageMessage.call(this);\n\n  /**\n   * @type {angular.$timeout}\n   * @private\n   */\n  this.timeout_ = $timeout;\n\n  const container = angular.element('<div class=\"ngeo-notification\"></div>');\n  angular.element(document.body).append(container);\n\n  /**\n   * @type {angular.JQLite}\n   * @private\n   */\n  this.container_ = container;\n\n  /**\n   * @type {Object.<number, ngeo.message.Notification.CacheItem>}\n   * @private\n   */\n  this.cache_ = {};\n\n};\n\nolBase.inherits(exports, ngeoMessageMessage);\n\n\n/**\n * Default delay (in milliseconds) a message should be displayed.\n * @type {number}\n * @private\n */\nexports.DEFAULT_DELAY_ = 7000;\n\n\n// MAIN API METHODS\n\n\n/**\n * Display the given message string or object or list of message strings or\n * objects.\n * @param {string|Array.<string>|ngeox.Message|Array.<ngeox.Message>}\n *     object A message or list of messages as text or configuration objects.\n * @export\n */\nexports.prototype.notify = function(object) {\n  this.show(object);\n};\n\n\n/**\n * Clears all messages that are currently being shown.\n * @export\n */\nexports.prototype.clear = function() {\n  for (const uid in this.cache_) {\n    this.clearMessageByCacheItem_(this.cache_[parseInt(uid, 10)]);\n  }\n};\n\n\n/**\n * @override\n */\nexports.prototype.showMessage = function(message) {\n  const type = message.type;\n  googAsserts.assertString(type, 'Type should be set.');\n\n  const classNames = ['alert', 'fade'];\n  switch (type) {\n    case ngeoMessageMessage.Type.ERROR:\n      classNames.push('alert-danger');\n      break;\n    case ngeoMessageMessage.Type.INFORMATION:\n      classNames.push('alert-info');\n      break;\n    case ngeoMessageMessage.Type.SUCCESS:\n      classNames.push('alert-success');\n      break;\n    case ngeoMessageMessage.Type.WARNING:\n      classNames.push('alert-warning');\n      break;\n    default:\n      break;\n  }\n\n  const el = angular.element(`<div class=\"${classNames.join(' ')}\"></div>`);\n  let container;\n\n  if (message.target) {\n    container = angular.element(message.target);\n  } else {\n    container = this.container_;\n  }\n\n  container.append(el);\n  el.html(message.msg).addClass('in');\n\n  const delay = message.delay !== undefined ? message.delay :\n    exports.DEFAULT_DELAY_;\n\n  const item = /** @type {ngeo.message.Notification.CacheItem} */ ({\n    el\n  });\n\n  // Keep a reference to the promise, in case we want to manually cancel it\n  // before the delay\n  const uid = olBase.getUid(el);\n  item.promise = this.timeout_(() => {\n    el.alert('close');\n    delete this.cache_[uid];\n  }, delay);\n\n  this.cache_[uid] = item;\n};\n\n\n/**\n * Clear a message using its cache item.\n * @param {ngeo.message.Notification.CacheItem} item Cache item.\n * @private\n */\nexports.prototype.clearMessageByCacheItem_ = function(item) {\n  const el = item.el;\n  const promise = item.promise;\n  const uid = olBase.getUid(el);\n\n  // Close the message\n  el.alert('close');\n\n  // Cancel timeout in case we want to stop before delay. If called by the\n  // timeout itself, then this has no consequence.\n  this.timeout_.cancel(promise);\n\n  // Delete the cache item\n  delete this.cache_[uid];\n};\n\n\n/**\n * @typedef {{\n *     el: angular.JQLite,\n *     promise: angular.$q.Promise\n * }}\n */\nexports.CacheItem;\n\n\n/**\n * @type {angular.Module}\n */\nexports.module = angular.module('ngeoNotification', [\n]);\n\nexports.module.service('ngeoNotification', exports);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/message/Notification.js"],"sourceRoot":""}