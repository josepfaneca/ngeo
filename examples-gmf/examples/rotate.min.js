webpackJsonp([23],{11:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n="1.3.0"},12:function(e,t,i){"use strict";t.a={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},16:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(11),r=i(0),a=i(63),o=i(56),s=i(2),u=i(9),l=i(4),d=function(e,t,i,n,r,s){a.a.call(this,e,t,i,o.a.IDLE),this.src_=n,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.imageListenerKeys_=null,this.state=o.a.IDLE,this.imageLoadFunction_=s};Object(r.inherits)(d,a.a),d.prototype.getImage=function(){return this.image_},d.prototype.handleImageError_=function(){this.state=o.a.ERROR,this.unlistenImage_(),this.changed()},d.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(l.getHeight)(this.extent)/this.image_.height),this.state=o.a.LOADED,this.unlistenImage_(),this.changed()},d.prototype.load=function(){this.state!=o.a.IDLE&&this.state!=o.a.ERROR||(this.state=o.a.LOADING,this.changed(),this.imageListenerKeys_=[s.default.listenOnce(this.image_,u.a.ERROR,this.handleImageError_,this),s.default.listenOnce(this.image_,u.a.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},d.prototype.setImage=function(e){this.image_=e},d.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s.default.unlistenByKey),this.imageListenerKeys_=null};var h=d,c=i(10),f=i(5),_=i(6),g=i(28),p=i(57),m=i(12),v=i(15),y=i(22),E=function(e){var t=e||{};p.default.call(this,{attributions:t.attributions,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:p.default.defaultImageLoadFunction,this.params_=t.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5};Object(r.inherits)(E,p.default),E.GETFEATUREINFO_IMAGE_SIZE_=[101,101],E.prototype.getGetFeatureInfoUrl=function(e,t,i,r){if(void 0!==this.url_){var a=Object(_.get)(i),o=this.getProjection();o&&o!==a&&(t=g.a.calculateSourceResolution(o,a,e,t),e=Object(_.transform)(e,a,o));var s=Object(l.getForViewAndSize)(e,t,0,E.GETFEATUREINFO_IMAGE_SIZE_),u={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};f.default.assign(u,this.params_,r);var d=Math.floor((e[0]-s[0])/t),h=Math.floor((s[3]-e[1])/t);return u[this.v13_?"I":"X"]=d,u[this.v13_?"J":"Y"]=h,this.getRequestUrl_(s,E.GETFEATUREINFO_IMAGE_SIZE_,1,o||a,u)}},E.prototype.getParams=function(){return this.params_},E.prototype.getImageInternal=function(e,t,i,r){if(void 0===this.url_)return null;t=this.findNearestResolution(t),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);var a=t/i,o=Object(l.getCenter)(e),d=Math.ceil(Object(l.getWidth)(e)/a),c=Math.ceil(Object(l.getHeight)(e)/a),_=Object(l.getForViewAndSize)(o,a,0,[d,c]),g=Math.ceil(this.ratio_*Object(l.getWidth)(e)/a),p=Math.ceil(this.ratio_*Object(l.getHeight)(e)/a),m=Object(l.getForViewAndSize)(o,a,0,[g,p]),v=this.image_;if(v&&this.renderedRevision_==this.getRevision()&&v.getResolution()==t&&v.getPixelRatio()==i&&Object(l.containsExtent)(v.getExtent(),_))return v;var y={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};f.default.assign(y,this.params_),this.imageSize_[0]=Math.round(Object(l.getWidth)(m)/a),this.imageSize_[1]=Math.round(Object(l.getHeight)(m)/a);var E=this.getRequestUrl_(m,this.imageSize_,i,r,y);return this.image_=new h(m,t,i,E,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),s.default.listen(this.image_,u.a.CHANGE,this.handleImageChange,this),this.image_},E.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},E.prototype.getRequestUrl_=function(e,t,i,n,r){if(Object(c.a)(void 0!==this.url_,9),r[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(r.STYLES=""),1!=i)switch(this.serverType_){case m.a.GEOSERVER:var a=90*i+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+a:r.FORMAT_OPTIONS="dpi:"+a;break;case m.a.MAPSERVER:r.MAP_RESOLUTION=90*i;break;case m.a.CARMENTA_SERVER:case m.a.QGIS:r.DPI=90*i;break;default:Object(c.a)(!1,8)}r.WIDTH=t[0],r.HEIGHT=t[1];var o,s=n.getAxisOrientation();return o=this.v13_&&"ne"==s.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,r.BBOX=o.join(","),y.default.appendParams(this.url_,r)},E.prototype.getUrl=function(){return this.url_},E.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},E.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},E.prototype.updateParams=function(e){f.default.assign(this.params_,e),this.updateV13_(),this.image_=null,this.changed()},E.prototype.updateV13_=function(){var e=this.params_.VERSION||n.a;this.v13_=v.default.compareVersions(e,"1.3")>=0};t.default=E},179:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(47),a=i(141),o=i(40),s=i(87),u=i(132),l=i(8),d=i(84),h=i(2),c=i(43),f=i(9),_=i(83),g=i(4),p=i(13),m=i(27),v="modifystart",y="modifyend",E=i(77),S=i(20),R=i(18),F=i(186),O=i(152),x=i(17),T=function(e){var t;if(E.default.call(this,{handleDownEvent:T.handleDownEvent_,handleDragEvent:T.handleDragEvent_,handleEvent:T.handleEvent,handleUpEvent:T.handleUpEvent_}),this.condition_=e.condition?e.condition:_.default.primaryAction,this.defaultDeleteCondition_=function(e){return _.default.altKeyOnly(e)&&_.default.singleClick(e)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:_.default.always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new O.default,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new S.default({source:new R.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:T.getDefaultStyleFunction(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,e.source?(this.source_=e.source,t=new r.default(this.source_.getFeatures()),h.default.listen(this.source_,F.a.ADDFEATURE,this.handleSourceAdd_,this),h.default.listen(this.source_,F.a.REMOVEFEATURE,this.handleSourceRemove_,this)):t=e.features,!t)throw new Error("The modify interaction requires features or a source");this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),h.default.listen(this.features_,a.a.ADD,this.handleFeatureAdd_,this),h.default.listen(this.features_,a.a.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null};Object(n.inherits)(T,E.default),T.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX=0,T.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX=1,T.prototype.addFeature_=function(e){var t=e.getGeometry();t&&t.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[t.getType()].call(this,e,t);var i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),h.default.listen(e,f.a.CHANGE,this.handleFeatureChange_,this)},T.prototype.willModifyFeatures_=function(e){this.modified_||(this.modified_=!0,this.dispatchEvent(new T.Event(v,this.features_,e)))},T.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),h.default.unlisten(e,f.a.CHANGE,this.handleFeatureChange_,this)},T.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,i=[];t.forEach(function(t){e===t.feature&&i.push(t)});for(var n=i.length-1;n>=0;--n)t.remove(i[n])},T.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),E.default.prototype.setActive.call(this,e)},T.prototype.setMap=function(e){this.overlay_.setMap(e),E.default.prototype.setMap.call(this,e)},T.prototype.handleSourceAdd_=function(e){e.feature&&this.features_.push(e.feature)},T.prototype.handleSourceRemove_=function(e){e.feature&&this.features_.remove(e.feature)},T.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},T.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}},T.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},T.prototype.writePointGeometry_=function(e,t){var i=t.getCoordinates(),n={feature:e,geometry:t,segment:[i,i]};this.rBush_.insert(t.getExtent(),n)},T.prototype.writeMultiPointGeometry_=function(e,t){var i,n,r,a,o=t.getCoordinates();for(n=0,r=o.length;n<r;++n)a={feature:e,geometry:t,depth:[n],index:n,segment:[i=o[n],i]},this.rBush_.insert(t.getExtent(),a)},T.prototype.writeLineStringGeometry_=function(e,t){var i,n,r,a,o=t.getCoordinates();for(i=0,n=o.length-1;i<n;++i)a={feature:e,geometry:t,index:i,segment:r=o.slice(i,i+2)},this.rBush_.insert(Object(g.boundingExtent)(r),a)},T.prototype.writeMultiLineStringGeometry_=function(e,t){var i,n,r,a,o,s,u,l=t.getCoordinates();for(a=0,o=l.length;a<o;++a)for(n=0,r=(i=l[a]).length-1;n<r;++n)u={feature:e,geometry:t,depth:[a],index:n,segment:s=i.slice(n,n+2)},this.rBush_.insert(Object(g.boundingExtent)(s),u)},T.prototype.writePolygonGeometry_=function(e,t){var i,n,r,a,o,s,u,l=t.getCoordinates();for(a=0,o=l.length;a<o;++a)for(n=0,r=(i=l[a]).length-1;n<r;++n)u={feature:e,geometry:t,depth:[a],index:n,segment:s=i.slice(n,n+2)},this.rBush_.insert(Object(g.boundingExtent)(s),u)},T.prototype.writeMultiPolygonGeometry_=function(e,t){var i,n,r,a,o,s,u,l,d,h,c=t.getCoordinates();for(s=0,u=c.length;s<u;++s)for(a=0,o=(l=c[s]).length;a<o;++a)for(n=0,r=(i=l[a]).length-1;n<r;++n)h={feature:e,geometry:t,depth:[a,s],index:n,segment:d=i.slice(n,n+2)},this.rBush_.insert(Object(g.boundingExtent)(d),h)},T.prototype.writeCircleGeometry_=function(e,t){var i=t.getCenter(),n={feature:e,geometry:t,index:T.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX,segment:[i,i]},r={feature:e,geometry:t,index:T.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX,segment:[i,i]},a=[n,r];n.featureSegments=r.featureSegments=a,this.rBush_.insert(Object(g.createOrUpdateFromCoordinate)(i),n),this.rBush_.insert(t.getExtent(),r)},T.prototype.writeGeometryCollectionGeometry_=function(e,t){var i,n=t.getGeometriesArray();for(i=0;i<n.length;++i)this.SEGMENT_WRITERS_[n[i].getType()].call(this,e,n[i])},T.prototype.createOrUpdateVertexFeature_=function(e){var t=this.vertexFeature_;t?t.getGeometry().setCoordinates(e):(t=new o.default(new m.default(e)),this.vertexFeature_=t,this.overlay_.getSource().addFeature(t));return t},T.compareIndexes_=function(e,t){return e.index-t.index},T.handleDownEvent_=function(e){if(!this.condition_(e))return!1;this.handlePointerAtPixel_(e.pixel,e.map);var t=e.map.getCoordinateFromPixel(e.pixel);this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var r=[],a=i.getGeometry().getCoordinates(),o=Object(g.boundingExtent)([a]),s=this.rBush_.getInExtent(o),u={};s.sort(T.compareIndexes_);for(var l=0,h=s.length;l<h;++l){var c=s[l],f=c.segment,_=Object(n.getUid)(c.feature),m=c.depth;if(m&&(_+="-"+m.join("-")),u[_]||(u[_]=new Array(2)),c.geometry.getType()===p.default.CIRCLE&&c.index===T.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){var v=T.closestOnSegmentData_(t,c);d.default.equals(v,a)&&!u[_][0]&&(this.dragSegments_.push([c,0]),u[_][0]=c)}else if(d.default.equals(f[0],a)&&!u[_][0])this.dragSegments_.push([c,0]),u[_][0]=c;else if(d.default.equals(f[1],a)&&!u[_][1]){if((c.geometry.getType()===p.default.LINE_STRING||c.geometry.getType()===p.default.MULTI_LINE_STRING)&&u[_][0]&&0===u[_][0].index)continue;this.dragSegments_.push([c,1]),u[_][1]=c}else this.insertVertexCondition_(e)&&Object(n.getUid)(f)in this.vertexSegments_&&!u[_][0]&&!u[_][1]&&r.push([c,a])}r.length&&this.willModifyFeatures_(e);for(var y=r.length-1;y>=0;--y)this.insertVertex_.apply(this,r[y])}return!!this.vertexFeature_},T.handleDragEvent_=function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e);for(var t=e.coordinate,i=0,n=this.dragSegments_.length;i<n;++i){for(var r,a=this.dragSegments_[i],o=a[0],s=o.depth,u=o.geometry,l=o.segment,h=a[1];t.length<u.getStride();)t.push(l[h][t.length]);switch(u.getType()){case p.default.POINT:r=t,l[0]=l[1]=t;break;case p.default.MULTI_POINT:(r=u.getCoordinates())[o.index]=t,l[0]=l[1]=t;break;case p.default.LINE_STRING:(r=u.getCoordinates())[o.index+h]=t,l[h]=t;break;case p.default.MULTI_LINE_STRING:case p.default.POLYGON:(r=u.getCoordinates())[s[0]][o.index+h]=t,l[h]=t;break;case p.default.MULTI_POLYGON:(r=u.getCoordinates())[s[1]][s[0]][o.index+h]=t,l[h]=t;break;case p.default.CIRCLE:l[0]=l[1]=t,o.index===T.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX?(this.changingFeature_=!0,u.setCenter(t),this.changingFeature_=!1):(this.changingFeature_=!0,u.setRadius(d.default.distance(u.getCenter(),t)),this.changingFeature_=!1)}r&&this.setGeometryCoordinates_(u,r)}this.createOrUpdateVertexFeature_(t)},T.handleUpEvent_=function(e){for(var t,i,n=this.dragSegments_.length-1;n>=0;--n)if((i=(t=this.dragSegments_[n][0]).geometry).getType()===p.default.CIRCLE){var r=i.getCenter(),a=t.featureSegments[0],o=t.featureSegments[1];a.segment[0]=a.segment[1]=r,o.segment[0]=o.segment[1]=r,this.rBush_.update(Object(g.createOrUpdateFromCoordinate)(r),a),this.rBush_.update(i.getExtent(),o)}else this.rBush_.update(Object(g.boundingExtent)(t.segment),t);return this.modified_&&(this.dispatchEvent(new T.Event(y,this.features_,e)),this.modified_=!1),!1},T.handleEvent=function(e){return!(e instanceof u.default)||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=s.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=s.a.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==s.a.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),E.default.handleEvent.call(this,e)&&!t);var t},T.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map)},T.prototype.handlePointerAtPixel_=function(e,t){var i=t.getCoordinateFromPixel(e),r=Object(g.buffer)(Object(g.createOrUpdateFromCoordinate)(i),t.getView().getResolution()*this.pixelTolerance_),a=this.rBush_.getInExtent(r);if(a.length>0){a.sort(function(e,t){return T.pointDistanceToSegmentDataSquared_(i,e)-T.pointDistanceToSegmentDataSquared_(i,t)});var o=a[0],s=o.segment,u=T.closestOnSegmentData_(i,o),l=t.getPixelFromCoordinate(u),h=d.default.distance(e,l);if(h<=this.pixelTolerance_){var c={};if(o.geometry.getType()===p.default.CIRCLE&&o.index===T.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(u);else{var f,_=t.getPixelFromCoordinate(s[0]),m=t.getPixelFromCoordinate(s[1]),v=d.default.squaredDistance(l,_),y=d.default.squaredDistance(l,m);h=Math.sqrt(Math.min(v,y)),this.snappedToVertex_=h<=this.pixelTolerance_,this.snappedToVertex_&&(u=v>y?s[1]:s[0]),this.createOrUpdateVertexFeature_(u);for(var E=1,S=a.length;E<S&&(f=a[E].segment,d.default.equals(s[0],f[0])&&d.default.equals(s[1],f[1])||d.default.equals(s[0],f[1])&&d.default.equals(s[1],f[0]));++E)c[Object(n.getUid)(f)]=!0}return c[Object(n.getUid)(s)]=!0,void(this.vertexSegments_=c)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},T.pointDistanceToSegmentDataSquared_=function(e,t){var i=t.geometry;if(i.getType()===p.default.CIRCLE){var n=i;if(t.index===T.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){var r=d.default.squaredDistance(n.getCenter(),e),a=Math.sqrt(r)-n.getRadius();return a*a}}return d.default.squaredDistanceToSegment(e,t.segment)},T.closestOnSegmentData_=function(e,t){var i=t.geometry;return i.getType()===p.default.CIRCLE&&t.index===T.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX?i.getClosestPoint(e):d.default.closestOnSegment(e,t.segment)},T.prototype.insertVertex_=function(e,t){for(var i,n=e.segment,r=e.feature,a=e.geometry,o=e.depth,s=e.index;t.length<a.getStride();)t.push(0);switch(a.getType()){case p.default.MULTI_LINE_STRING:case p.default.POLYGON:(i=a.getCoordinates())[o[0]].splice(s+1,0,t);break;case p.default.MULTI_POLYGON:(i=a.getCoordinates())[o[1]][o[0]].splice(s+1,0,t);break;case p.default.LINE_STRING:(i=a.getCoordinates()).splice(s+1,0,t);break;default:return}this.setGeometryCoordinates_(a,i);var u=this.rBush_;u.remove(e),this.updateSegmentIndices_(a,s,o,1);var l={segment:[n[0],t],feature:r,geometry:a,depth:o,index:s};u.insert(Object(g.boundingExtent)(l.segment),l),this.dragSegments_.push([l,1]);var d={segment:[t,n[1]],feature:r,geometry:a,depth:o,index:s+1};u.insert(Object(g.boundingExtent)(d.segment),d),this.dragSegments_.push([d,0]),this.ignoreNextSingleClick_=!0},T.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=s.a.POINTERDRAG){var e=this.lastPointerEvent_;return this.willModifyFeatures_(e),this.removeVertex_(),this.dispatchEvent(new T.Event(y,this.features_,e)),this.modified_=!1,!0}return!1},T.prototype.removeVertex_=function(){var e,t,i,r,a,o,s,u,l,d,h,c=this.dragSegments_,f={},_=!1;for(a=c.length-1;a>=0;--a)d=(i=c[a])[0],h=Object(n.getUid)(d.feature),d.depth&&(h+="-"+d.depth.join("-")),h in f||(f[h]={}),0===i[1]?(f[h].right=d,f[h].index=d.index):1==i[1]&&(f[h].left=d,f[h].index=d.index+1);for(h in f){switch(l=f[h].right,s=f[h].left,u=(o=f[h].index)-1,d=void 0!==s?s:l,u<0&&(u=0),e=t=(r=d.geometry).getCoordinates(),_=!1,r.getType()){case p.default.MULTI_LINE_STRING:t[d.depth[0]].length>2&&(t[d.depth[0]].splice(o,1),_=!0);break;case p.default.LINE_STRING:t.length>2&&(t.splice(o,1),_=!0);break;case p.default.MULTI_POLYGON:e=e[d.depth[1]];case p.default.POLYGON:(e=e[d.depth[0]]).length>4&&(o==e.length-1&&(o=0),e.splice(o,1),_=!0,0===o&&(e.pop(),e.push(e[0]),u=e.length-1))}if(_){this.setGeometryCoordinates_(r,t);var m=[];if(void 0!==s&&(this.rBush_.remove(s),m.push(s.segment[0])),void 0!==l&&(this.rBush_.remove(l),m.push(l.segment[1])),void 0!==s&&void 0!==l){var v={depth:d.depth,feature:d.feature,geometry:d.geometry,index:u,segment:m};this.rBush_.insert(Object(g.boundingExtent)(v.segment),v)}this.updateSegmentIndices_(r,o,d.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),c.length=0}}return _},T.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1},T.prototype.updateSegmentIndices_=function(e,t,i,n){this.rBush_.forEachInExtent(e.getExtent(),function(r){r.geometry===e&&(void 0===i||void 0===r.depth||Object(l.equals)(r.depth,i))&&r.index>t&&(r.index+=n)})},T.getDefaultStyleFunction=function(){var e=x.default.createDefaultEditing();return function(t,i){return e[p.default.POINT]}},T.Event=function(e,t,i){c.default.call(this,e),this.features=t,this.mapBrowserEvent=i},Object(n.inherits)(T.Event,c.default);t.default=T},21:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(i(0)),r=a(i(43));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.default.call(this,e),this.detail=t};n.default.inherits(o,r.default),t.default=o},23:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(11),r=i(0),a=i(10),o=i(4),s=i(5),u=i(14),l=i(6),d=i(28),h=i(60),c=i(41),f=i(12),_=i(61),g=i(15),p=i(22),m=function(e){var t=e||{},i=t.params||{},n=!("TRANSPARENT"in i)||i.TRANSPARENT;c.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,opaque:!n,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=i,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=Object(o.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())};Object(r.inherits)(m,c.a),m.prototype.getGetFeatureInfoUrl=function(e,t,i,r){var a=Object(l.get)(i),u=this.getProjection(),c=this.getTileGrid();c||(c=this.getTileGridForProjection(a));var f=c.getTileCoordForCoordAndResolution(e,t);if(!(c.getResolutions().length<=f[0])){var _=c.getResolution(f[0]),g=c.getTileCoordExtent(f,this.tmpExtent_),p=h.default.toSize(c.getTileSize(f[0]),this.tmpSize),m=this.gutter_;0!==m&&(p=h.default.buffer(p,m,this.tmpSize),g=Object(o.buffer)(g,_*m,g)),u&&u!==a&&(_=d.a.calculateSourceResolution(u,a,e,_),g=Object(l.transformExtent)(g,a,u),e=Object(l.transform)(e,a,u));var v={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};s.default.assign(v,this.params_,r);var y=Math.floor((e[0]-g[0])/_),E=Math.floor((g[3]-e[1])/_);return v[this.v13_?"I":"X"]=y,v[this.v13_?"J":"Y"]=E,this.getRequestUrl_(f,p,g,1,u||a,v)}},m.prototype.getGutterInternal=function(){return this.gutter_},m.prototype.getParams=function(){return this.params_},m.prototype.getRequestUrl_=function(e,t,i,n,r,o){var s=this.urls;if(s){if(o.WIDTH=t[0],o.HEIGHT=t[1],o[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=n)switch(this.serverType_){case f.a.GEOSERVER:var l=90*n+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+l:o.FORMAT_OPTIONS="dpi:"+l;break;case f.a.MAPSERVER:o.MAP_RESOLUTION=90*n;break;case f.a.CARMENTA_SERVER:case f.a.QGIS:o.DPI=90*n;break;default:Object(a.a)(!1,52)}var d,h,c=r.getAxisOrientation(),g=i;if(this.v13_&&"ne"==c.substr(0,2))d=i[0],g[0]=i[1],g[1]=d,d=i[2],g[2]=i[3],g[3]=d;if(o.BBOX=g.join(","),1==s.length)h=s[0];else h=s[Object(u.modulo)(_.a.hash(e),s.length)];return p.default.appendParams(h,o)}},m.prototype.getTilePixelRatio=function(e){return this.hidpi_&&void 0!==this.serverType_?e:1},m.prototype.getKeyForParams_=function(){var e=0,t=[];for(var i in this.params_)t[e++]=i+"-"+this.params_[i];return t.join("/")},m.prototype.fixedTileUrlFunction=function(e,t,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=e[0])){1==t||this.hidpi_&&void 0!==this.serverType_||(t=1);var a=r.getResolution(e[0]),u=r.getTileCoordExtent(e,this.tmpExtent_),l=h.default.toSize(r.getTileSize(e[0]),this.tmpSize),d=this.gutter_;0!==d&&(l=h.default.buffer(l,d,this.tmpSize),u=Object(o.buffer)(u,a*d,u)),1!=t&&(l=h.default.scale(l,t,this.tmpSize));var c={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return s.default.assign(c,this.params_),this.getRequestUrl_(e,l,u,t,i,c)}},m.prototype.updateParams=function(e){s.default.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())},m.prototype.updateV13_=function(){var e=this.params_.VERSION||n.a;this.v13_=g.default.compareVersions(e,"1.3")>=0},t.default=m},25:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(1);(n=a)&&n.__esModule;var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.inRange_=!1!==t.inRange,this.visible_=!0===t.visible,this.attributes=t.attributes||null,this.id_=t.id,this.identifierAttribute_=t.identifierAttribute,this.maxResolution_=t.maxResolution,this.minResolution_=t.minResolution,this.name_=t.name}return r(e,[{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){this.attributes=e}},{key:"inRange",get:function(){return this.inRange_},set:function(e){this.inRange_=e}},{key:"visible",get:function(){return this.visible_},set:function(e){this.visible_=e}},{key:"id",get:function(){return this.id_}},{key:"identifierAttribute",get:function(){return this.identifierAttribute_}},{key:"maxResolution",get:function(){return this.maxResolution_}},{key:"minResolution",get:function(){return this.minResolution_}},{key:"name",get:function(){return this.name_}},{key:"queryable",get:function(){return!1}},{key:"supportsDynamicInRange",get:function(){return null!==this.maxResolution||null!==this.minResolution}}]),e}();t.default=o},26:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(i(1)),r=a(i(47));function a(e){return e&&e.__esModule?e:{default:e}}var o={};n.default.module.value("ngeoDataSources",new r.default),t.default=o},29:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(i(1)),r=h(i(0)),a=h(i(20)),o=h(i(5)),s=h(i(18)),u=h(i(17)),l=h(i(3)),d=h(i(36));function h(e){return e&&e.__esModule?e:{default:e}}var c=function(){this.featureUidToGroupIndex_={},this.groups_=[],this.source_=new s.default({useSpatialIndex:!1}),this.layer_=new a.default({source:this.source_,style:this.styleFunction_.bind(this),updateWhileAnimating:!0,updateWhileInteracting:!0})};c.prototype.addFeature=function(e,t){l.default.assert(t>=0),l.default.assert(t<this.groups_.length);var i=r.default.getUid(e).toString();this.featureUidToGroupIndex_[i]=t,this.groups_[t].features[i]=e,this.source_.addFeature(e)},c.prototype.removeFeature=function(e,t){l.default.assert(t>=0),l.default.assert(t<this.groups_.length);var i=r.default.getUid(e).toString();delete this.featureUidToGroupIndex_[i],delete this.groups_[t].features[i],this.source_.removeFeature(e)},c.prototype.clear=function(e){l.default.assert(e>=0),l.default.assert(e<this.groups_.length);var t=this.groups_[e];for(var i in t.features)this.removeFeature(t.features[i],e);l.default.assert(o.default.isEmpty(t.features))},c.prototype.getLayer=function(){return this.layer_},c.prototype.getFeatureOverlay=function(){var e=this.groups_.length;return this.groups_.push({styleFunction:u.default.defaultFunction,features:{}}),new d.default(this,e)},c.prototype.init=function(e){this.layer_.setMap(e)},c.prototype.setStyle=function(e,t){l.default.assert(t>=0),l.default.assert(t<this.groups_.length),this.groups_[t].styleFunction=null===e?u.default.defaultFunction:u.default.createFunction(e)},c.prototype.styleFunction_=function(e,t){var i=r.default.getUid(e).toString();l.default.assert(i in this.featureUidToGroupIndex_);var n=this.featureUidToGroupIndex_[i];return this.groups_[n].styleFunction(e,t)},(c.module=angular.module("ngeoFeatureOverlayMgr",[d.default.module.name])).service("ngeoFeatureOverlayMgr",c),n.default.module.requires.push(c.module.name),t.default=c},3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={assert:function(e,t,i){},assertNumber:function(e,t,i){},assertString:function(e,t,i){},assertFunction:function(e,t,i){},assertObject:function(e,t,i){},assertArray:function(e,t,i){},assertBoolean:function(e,t,i){},assertElement:function(e,t,i){},assertInstanceof:function(e,t,i,n){},assertObjectPrototypeIsIntact:function(){}};t.default=n},32:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(i(1)),r=d(i(33)),a=d(i(34)),o=d(i(29)),s=d(i(37)),u=d(i(38)),l=d(i(39));function d(e){return e&&e.__esModule?e:{default:e}}var h=angular.module("ngeoMapModule",[n.default.module.name,r.default.module.name,a.default.name,o.default.module.name,s.default.name,u.default.name,l.default.name]);t.default=h},33:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(i(3)),r=f(i(1)),a=f(i(21)),o=f(i(0)),s=f(i(19)),u=f(i(52)),l=f(i(50)),d=f(i(16)),h=f(i(23)),c=f(i(58));function f(e){return e&&e.__esModule?e:{default:e}}var _=function(){s.default.call(this),this.mapUids_={}};o.default.inherits(_,s.default),_.prototype.get=function(e){return o.default.getUid(e).toString()in this.mapUids_?e.getLayers().item(0):null},_.prototype.set=function(e,t){var i=o.default.getUid(e).toString(),r=this.get(e);null!==r?(n.default.assert(i in this.mapUids_),null!==t?e.getLayers().setAt(0,t):(e.getLayers().removeAt(0),delete this.mapUids_[i])):null!==t&&(e.getLayers().insertAt(0,t),this.mapUids_[i]=!0);var s=new a.default("change",{current:t,previous:r});return this.dispatchEvent(s),r},_.prototype.updateDimensions=function(e,t){var i=this.get(e);if(i){var r=[i];i instanceof u.default&&(r=i.getLayers().getArray()),r.forEach(function(e){if(n.default.assertInstanceof(e,l.default),e){var i=!1,r={};for(var a in e.get("dimensions")){var o=t[a];void 0!==o&&(r[a]=o,i=!0)}if(i){var s=e.getSource();s instanceof c.default?(s.updateDimensions(r),s.refresh()):(s instanceof h.default||s instanceof d.default)&&(s.updateParams(r),s.refresh())}}})}},(_.module=angular.module("ngeoBackgroundLayerMgr",[])).service("ngeoBackgroundLayerMgr",_),r.default.module.requires.push(_.module.name),t.default=_},34:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(i(3)),r=s(i(1)),a=(s(i(35)),s(i(2))),o=s(i(7));function s(e){return e&&e.__esModule?e:{default:e}}var u=angular.module("ngeoMap",[]);r.default.module.requires.push(u.name),u.directive_=function(e,t){return{restrict:"A",link:function(i,r,s){var u=s.ngeoMap,l=i.$eval(u);n.default.assertInstanceof(l,o.default),l.setTarget(r[0]),t.map=l;var d=s.ngeoMapManageResize;if(i.$eval(d)){var h=s.ngeoMapResizeTransition,c=i.$eval(h);a.default.listen(e,"resize",function(){if(c){var t=Date.now(),i=!0;!function n(){l.updateSize(),l.renderSync(),i&&e.requestAnimationFrame(n),Date.now()-t>c&&(i=!1)}()}else l.updateSize()})}}}},u.directive_.$inject=["$window","ngeoSyncDataSourcesMap"],u.directive("ngeoMap",u.directive_),t.default=u},35:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=d(i(1)),a=d(i(25)),o=(d(i(26)),d(i(2))),s=d(i(19)),u=d(i(31)),l=d(i(3));function d(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ngeoDataSources_=t,this.map_=null,this.listenerKeys_=[],o.default.listen(this.ngeoDataSources_,"add",this.handleDataSourcesAdd_,this)}return e.$inject=["ngeoDataSources"],n(e,[{key:"bindMap_",value:function(e){var t=e.getView();this.listenerKeys_.push(o.default.listen(t,"change:resolution",this.handleViewResolutionChange_,this));var i=t.getResolution();l.default.assertNumber(i),this.syncDataSourcesToResolution_(i)}},{key:"unbindMap_",value:function(e){s.default.unByKey(this.listenerKeys_),this.listenerKeys_=[]}},{key:"handleViewResolutionChange_",value:function(e){var t=e.target;l.default.assertInstanceof(t,u.default);var i=t.getResolution();l.default.assertNumber(i),this.syncDataSourcesToResolution_(i)}},{key:"syncDataSourcesToResolution_",value:function(e){var t=this;this.ngeoDataSources_.forEach(function(i){t.syncDataSourceToResolution_(i,e)})}},{key:"syncDataSourceToResolution_",value:function(e,t){if(e.supportsDynamicInRange){var i=e.maxResolution,n=e.minResolution,r=(null===n||void 0===n||t>=n)&&(null===i||void 0===i||t<=i);e.inRange=r}}},{key:"handleDataSourcesAdd_",value:function(e){var t=l.default.assertInstanceof(e.element,a.default);if(this.map_){var i=this.map_.getView().getResolution();l.default.assertNumber(i),this.syncDataSourceToResolution_(t,i)}}},{key:"map",set:function(e){this.map_&&this.unbindMap_(this.map_),this.map_=e,e&&this.bindMap_(e)}}]),e}();r.default.module.service("ngeoSyncDataSourcesMap",h),t.default=h},352:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(!function(){var e=new Error('Cannot find module "examples/rotate.css"');throw e.code="MODULE_NOT_FOUND",e}()),i(59);var n=y(i(353)),r=y(i(47)),a=y(i(40)),o=y(i(7)),s=y(i(31)),u=y(i(62)),l=y(i(20)),d=y(i(48)),h=y(i(18)),c=y(i(98)),f=y(i(78)),_=y(i(17)),g=y(i(65)),p=y(i(108)),m=y(i(42)),v=y(i(32));function y(e){return e&&e.__esModule?e:{default:e}}app.module=angular.module("app",[ngeo.module.name,v.default.name]);var E=angular.module("app",["ngeo"]);app.MainController=function(){this.map=new o.default({layers:[new u.default({source:new d.default})],view:new s.default({center:[-10997148,4569099],zoom:4})});var e=this.map,t=new m.default([[[-9e6,4e6],[-11e6,4e6],[-11e6,6e6],[-9e6,6e6]]]);this.features=new r.default,this.features.push(new a.default({geometry:t}));var i=new h.default({features:this.features}),v=new l.default({source:i});v.setMap(e);var y,E=((y={}).Polygon=[new _.default({fill:new g.default({color:[255,255,255,.5]})}),new _.default({stroke:new f.default({color:[255,255,255,1],width:5})}),new _.default({stroke:new f.default({color:[0,153,255,1],width:3})})],y.Point=new _.default({image:new p.default,text:new c.default({text:"ï€ž",font:"normal 18px FontAwesome",fill:new g.default({color:"#ffffff"})})}),y.GeometryCollection=y.Polygon.concat(y.Point),function(e,t){return y[e.getGeometry().getType()]});this.interaction=new n.default({features:this.features,layers:[v],style:E});var S=this.interaction;S.setActive(!1),e.addInteraction(S),e.on("singleclick",function(e){this.map.forEachFeatureAtPixel(e.pixel,function(e){return e})&&this.interaction.setActive(!0)},this)},E.controller("MainController",app.MainController),t.default={}},353:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(i(21)),r=f(i(3)),a=f(i(0)),o=(f(i(47)),f(i(40))),s=(f(i(132)),f(i(2))),u=f(i(179)),l=f(i(77)),d=f(i(27)),h=f(i(20)),c=f(i(18));function f(e){return e&&e.__esModule?e:{default:e}}var _=function(e){r.default.assert(e.features),this.listenerKeys_=[],this.modified_=!1,this.keyPressListenerKey_=null,this.changingFeature_=!1,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.features_=e.features,this.feature_=null,this.coordinate_=null,this.centerCoordinate_=null;var t=e.style?e.style:u.default.getDefaultStyleFunction();this.overlay_=new h.default({source:new c.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:t,updateWhileAnimating:!0,updateWhileInteracting:!0}),this.centerFeatures_={},l.default.call(this,{handleDownEvent:this.handleDown_,handleDragEvent:this.handleDrag_,handleUpEvent:this.handleUp_})};a.default.inherits(_,l.default),_.prototype.setActive=function(e){this.keyPressListenerKey_&&(s.default.unlistenByKey(this.keyPressListenerKey_),this.keyPressListenerKey_=null),l.default.prototype.setActive.call(this,e),e?(this.keyPressListenerKey_=s.default.listen(document,"keyup",this.handleKeyUp_,this),this.features_.forEach(this.addFeature_,this),this.listenerKeys_.push(s.default.listen(this.features_,"add",this.handleFeatureAdd_,this),s.default.listen(this.features_,"remove",this.handleFeatureRemove_,this))):(this.listenerKeys_.forEach(s.default.unlistenByKey),this.listenerKeys_.length=0,this.features_.forEach(this.removeFeature_,this))},_.prototype.addFeature_=function(e){var t=e.getGeometry();r.default.assertInstanceof(t,a.default.geom.Geometry),e.set("angle",0);var i=a.default.getUid(e),n=new d.default(this.getCenterCoordinate_(t)),s=new o.default(n);this.centerFeatures_[i]=s,this.overlay_.getSource().addFeature(s)},_.prototype.willModifyFeatures_=function(e){this.modified_||(this.modified_=!0,this.dispatchEvent(new u.default.Event("modifystart",this.features_,e)))},_.prototype.removeFeature_=function(e){if(this.feature_=null,e){var t=a.default.getUid(e);this.centerFeatures_[t]&&(this.overlay_.getSource().removeFeature(this.centerFeatures_[t]),delete this.centerFeatures_[t])}},_.prototype.setMap=function(e){this.overlay_.setMap(e),l.default.prototype.setMap.call(this,e)},_.prototype.handleFeatureAdd_=function(e){var t=e.element;r.default.assertInstanceof(t,o.default,"feature should be an ol.Feature"),this.addFeature_(t)},_.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},_.prototype.handleDown_=function(e){var t=e.map.forEachFeatureAtPixel(e.pixel,function(e,t){return e},void 0);if(t){var i=!1;this.features_.forEach(function(e){a.default.getUid(e)==a.default.getUid(t)&&(i=!0)}),i||(t=null)}if(t){this.coordinate_=e.coordinate,this.feature_=t;var n=this.feature_.getGeometry();return void 0!==n&&(this.centerCoordinate_=this.getCenterCoordinate_(n)),!0}return!1},_.prototype.getCenterCoordinate_=function(e){var t=void 0;if(e instanceof a.default.geom.LineString)t=e.getFlatMidpoint();else if(e instanceof a.default.geom.Polygon)t=e.getFlatInteriorPoint();else{var i=e.getExtent();t=a.default.extent.getCenter(i)}return t},_.prototype.handleDrag_=function(e){this.willModifyFeatures_(e);var t=this.feature_.getGeometry(),i=this.coordinate_[0],n=this.coordinate_[1],r=this.centerCoordinate_[0],a=this.centerCoordinate_[1],o=i-r,s=n-a,u=e.coordinate[0]-r,l=e.coordinate[1]-a;this.coordinate_[0]=e.coordinate[0],this.coordinate_[1]=e.coordinate[1];var d=Math.atan2(l,u),h=Math.atan2(s,o)-d;t.rotate(-h,[r,a])},_.prototype.handleUp_=function(e){if(this.modified_){var t=new n.default("rotateend",{feature:this.feature_});this.dispatchEvent(t),this.modified_=!1,this.setActive(!1)}return!1},_.prototype.handleKeyUp_=function(e){27===e.keyCode&&this.setActive(!1)},t.default=_},36:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(i(1)),r=(a(i(0)),a(i(2)));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t){this.manager_=e,this.features_=null,this.index_=t};o.prototype.addFeature=function(e){this.manager_.addFeature(e,this.index_)},o.prototype.removeFeature=function(e){this.manager_.removeFeature(e,this.index_)},o.prototype.clear=function(){this.manager_.clear(this.index_)},o.prototype.setFeatures=function(e){null!==this.features_&&(this.features_.clear(),r.default.unlisten(this.features_,"add",this.handleFeatureAdd_,this),r.default.unlisten(this.features_,"remove",this.handleFeatureRemove_,this)),null!==e&&(e.forEach(function(e){this.addFeature(e)},this),r.default.listen(e,"add",this.handleFeatureAdd_,this),r.default.listen(e,"remove",this.handleFeatureRemove_,this)),this.features_=e},o.prototype.setStyle=function(e){this.manager_.setStyle(e,this.index_)},o.prototype.handleFeatureAdd_=function(e){var t=e.element;this.addFeature(t)},o.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature(t)},o.module=angular.module("ngeoFeatureOverlay",[]),n.default.module.requires.push(o.module.name),t.default=o},37:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=i(1),a=(n=r)&&n.__esModule?n:{default:n};var o=angular.module("ngeoRecenter",[]);a.default.module.requires.push(o.name),o.directive_=function(){return{restrict:"A",link:function(e,t,i){var n=i.ngeoRecenterMap,r=e.$eval(n);function a(t){var i=t.attr("ngeo-extent");if(void 0!==i){var n=r.getSize();r.getView().fit(e.$eval(i),{size:n})}var a=t.attr("ngeo-zoom");void 0!==a&&r.getView().setZoom(e.$eval(a))}t.on("click","*",function(e){a(angular.element($(this)))}),t.on("change",function(e){var t=e.target.options[e.target.selectedIndex];a(angular.element(t))})}}},o.directive("ngeoRecenter",o.directive_),t.default=o},38:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(i(3)),r=o(i(1)),a=o(i(7));function o(e){return e&&e.__esModule?e:{default:e}}var s=angular.module("ngeoResizemap",[]);r.default.module.requires.push(s.name),s.directive_=function(e){return{restrict:"A",link:function(t,i,r){var o=r.ngeoResizemap,s=t.$eval(o);n.default.assertInstanceof(s,a.default);var u=r.ngeoResizemapState;n.default.assert(void 0!==u);var l=void 0,d=void 0,h=function t(){s.updateSize(),s.renderSync(),Date.now()-l<1e3&&(d=e.requestAnimationFrame(t))};i.on("transitionend",function(){s.updateSize(),s.renderSync()}),t.$watch(u,function(t,i){t!=i&&(l=Date.now(),e.cancelAnimationFrame(d),d=e.requestAnimationFrame(h))})}}},s.directive("ngeoResizemap",s.directive_),t.default=s},39:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(i(1)),r=s(i(8)),a=s(i(7)),o=s(i(2));function s(e){return e&&e.__esModule?e:{default:e}}var u=angular.module("ngeoScaleselector",[]);n.default.module.requires.push(u.name),u.value("ngeoScaleselectorTemplateUrl",function(e,t){var i=t.ngeoScaleselectorTemplateurl;return void 0!==i?i:n.default.baseModuleTemplateUrl+"/map/scaleselector.html"}),u.directive_=function(e){return{restrict:"A",scope:!0,controller:"NgeoScaleselectorController",templateUrl:e}},u.directive("ngeoScaleselector",u.directive_),u.ScaleselectorController_=function(e,t,i){var n=this,s=i.ngeoScaleselector;this.scales=e.$eval(s),goog.asserts.assert(void 0!==this.scales),this.zoomLevels,e.$watch(function(){return Object.keys(n.scales).length},function(e){n.zoomLevels=Object.keys(n.scales).map(Number),n.zoomLevels.sort(r.default.numberSafeCompareFunction)});var l=i.ngeoScaleselectorMap;this.map_=e.$eval(l),goog.asserts.assertInstanceof(this.map_,a.default);var d=i.ngeoScaleselectorOptions,h=e.$eval(d);if(this.options=u.ScaleselectorController_.getOptions_(h),this.$scope_=e,this.resolutionChangeKey_=null,this.currentScale=void 0,null!==this.map_.getView()){var c=this.map_.getView().getZoom();void 0!==c&&(this.currentScale=this.getScale(c))}o.default.listen(this.map_,"change:view",this.handleViewChange_,this),this.registerResolutionChangeListener_(),e.scaleselectorCtrl=this},u.ScaleselectorController_.getOptions_=function(e){var t=!1;return void 0!==e&&(t=1==e.dropup),{dropup:t}},u.ScaleselectorController_.prototype.getScale=function(e){return this.scales[e]},u.ScaleselectorController_.prototype.changeZoom=function(e){this.map_.getView().setZoom(e)},u.ScaleselectorController_.prototype.handleResolutionChange_=function(e){var t=this,i=this.map_.getView(),n=this.scales[i.getZoom()];void 0!==n&&this.$scope_.$applyAsync(function(){t.currentScale=n})},u.ScaleselectorController_.prototype.handleViewChange_=function(e){this.registerResolutionChangeListener_(),this.handleResolutionChange_(null)},u.ScaleselectorController_.prototype.registerResolutionChangeListener_=function(){null!==this.resolutionChangeKey_&&o.default.unlistenByKey(this.resolutionChangeKey_);var e=this.map_.getView();this.resolutionChangeKey_=o.default.listen(e,"change:resolution",this.handleResolutionChange_,this)},u.controller("NgeoScaleselectorController",u.ScaleselectorController_),t.default=u},48:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(49),a=function(e){var t,i=e||{};t=void 0!==i.attributions?i.attributions:[a.ATTRIBUTION];var n=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",o=void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";r.a.call(this,{attributions:t,cacheSize:i.cacheSize,crossOrigin:n,opaque:void 0===i.opaque||i.opaque,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,url:o,wrapX:i.wrapX})};Object(n.inherits)(a,r.a),a.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',t.default=a},49:function(e,t,i){"use strict";var n=i(0),r=i(41),a=i(71),o=function(e){var t=e||{},i=void 0!==t.projection?t.projection:"EPSG:3857",n=void 0!==t.tileGrid?t.tileGrid:a.a.createXYZ({extent:a.a.extentFromProjection(i),maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});r.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,opaque:t.opaque,projection:i,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition})};Object(n.inherits)(o,r.a),t.a=o},98:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(65),r=i(137),a=function(e){var t=e||{};this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.text_=t.text,this.textAlign_=t.textAlign,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new n.default({color:a.DEFAULT_FILL_COLOR_}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:r.a.POINT,this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding};a.DEFAULT_FILL_COLOR_="#333",a.prototype.clone=function(){return new a({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},a.prototype.getOverflow=function(){return this.overflow_},a.prototype.getFont=function(){return this.font_},a.prototype.getMaxAngle=function(){return this.maxAngle_},a.prototype.getPlacement=function(){return this.placement_},a.prototype.getOffsetX=function(){return this.offsetX_},a.prototype.getOffsetY=function(){return this.offsetY_},a.prototype.getFill=function(){return this.fill_},a.prototype.getRotateWithView=function(){return this.rotateWithView_},a.prototype.getRotation=function(){return this.rotation_},a.prototype.getScale=function(){return this.scale_},a.prototype.getStroke=function(){return this.stroke_},a.prototype.getText=function(){return this.text_},a.prototype.getTextAlign=function(){return this.textAlign_},a.prototype.getTextBaseline=function(){return this.textBaseline_},a.prototype.getBackgroundFill=function(){return this.backgroundFill_},a.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},a.prototype.getPadding=function(){return this.padding_},a.prototype.setOverflow=function(e){this.overflow_=e},a.prototype.setFont=function(e){this.font_=e},a.prototype.setMaxAngle=function(e){this.maxAngle_=e},a.prototype.setOffsetX=function(e){this.offsetX_=e},a.prototype.setOffsetY=function(e){this.offsetY_=e},a.prototype.setPlacement=function(e){this.placement_=e},a.prototype.setFill=function(e){this.fill_=e},a.prototype.setRotation=function(e){this.rotation_=e},a.prototype.setScale=function(e){this.scale_=e},a.prototype.setStroke=function(e){this.stroke_=e},a.prototype.setText=function(e){this.text_=e},a.prototype.setTextAlign=function(e){this.textAlign_=e},a.prototype.setTextBaseline=function(e){this.textBaseline_=e},a.prototype.setBackgroundFill=function(e){this.backgroundFill_=e},a.prototype.setBackgroundStroke=function(e){this.backgroundStroke_=e},a.prototype.setPadding=function(e){this.padding_=e},t.default=a}},[352]);
//# sourceMappingURL=rotate.min.js.map