{"version":3,"sources":["webpack:///./src/filters.js","webpack:///./src/misc/ToolActivate.js","webpack:///./node_modules/openlayers/src/ol/source/common.js","webpack:///./src/misc/btnComponent.js","webpack:///./src/utils.js","webpack:///./node_modules/openlayers/src/ol/source/WMSServerType.js","webpack:///./src/misc/decorate.js","webpack:///./src/interaction/MeasureAzimut.js","webpack:///./src/interaction/DrawAzimut.js","webpack:///./src/misc/ToolActivateMgr.js","webpack:///./node_modules/openlayers/src/ol/format/KML.js","webpack:///./node_modules/openlayers/src/ol/Image.js","webpack:///./node_modules/openlayers/src/ol/source/ImageWMS.js","webpack:///./src/misc/FeatureHelper.js","webpack:///./src/download/service.js","webpack:///./node_modules/openlayers/src/ol/format/GPX.js","webpack:///./src/interaction/MeasureArea.js","webpack:///./src/interaction/MeasureLength.js","webpack:///./src/draw/Controller.js","webpack:///./src/CustomEvent.js","webpack:///./node_modules/openlayers/src/ol/source/TileWMS.js","webpack:///./src/datasource/DataSources.js","webpack:///./src/draw/features.js","webpack:///./src/draw/point.js","webpack:///./src/draw/rectangle.js","webpack:///./src/datasource/DataSource.js","webpack:///./src/draw/text.js","webpack:///./src/map/FeatureOverlayMgr.js","webpack:///./src/goog.asserts.js","webpack:///./examples/drawfeature.js","webpack:///./src/draw/module.js","webpack:///./src/map/module.js","webpack:///./src/draw/component.js","webpack:///./src/measure/area.js","webpack:///./src/measure/azimut.js","webpack:///./src/measure/length.js","webpack:///./src/map/BackgroundLayerMgr.js","webpack:///./src/map/directive.js","webpack:///./src/datasource/SyncDataSourcesMap.js","webpack:///./src/map/FeatureOverlay.js","webpack:///./src/map/recenter.js","webpack:///./src/map/resizemap.js","webpack:///./src/map/scaleselector.js","webpack:///./node_modules/openlayers/src/ol/geom/MultiPoint.js","webpack:///./node_modules/openlayers/src/ol/source/OSM.js","webpack:///./node_modules/openlayers/src/ol/source/XYZ.js","webpack:///./node_modules/openlayers/src/ol/geom/MultiLineString.js","webpack:///./node_modules/openlayers/src/ol/geom/MultiPolygon.js","webpack:///./node_modules/openlayers/src/ol/geom/GeometryCollection.js","webpack:///./node_modules/openlayers/src/ol/interaction/DrawEventType.js","webpack:///./node_modules/openlayers/src/ol/interaction/Draw.js","webpack:///./node_modules/openlayers/src/ol/format/XSD.js","webpack:///./node_modules/openlayers/src/ol/geom/Circle.js","webpack:///./src/interaction/Measure.js","webpack:///./node_modules/openlayers/src/ol/format/XMLFeature.js","webpack:///./node_modules/openlayers/src/ol/style/Text.js"],"names":["__webpack_require__","olMath","_index2","default","Scalify","$filter","numberFilter","filterFn","scale","text","module","filter","Number","$locale","formats","NUMBER_FORMATS","number","opt_precision","groupSep","GROUP_SEP","decimalSep","DECIMAL_SEP","undefined","Infinity","sign","Math","abs","nb_decimal","floor","log","factor","pow","round","decimal","unit","str_number","length","substring","groups","str_unit","index","unshift","join","UnitPrefix","standardPrefix","binaryPrefix","opt_unit","opt_type","divisor","prefix","index_max","postfix","space","NumberCoordinates","coordinates","opt_fractionDigits","opt_template","template","x","y","fractionDigits","parseInt","replace","DMSCoordinates","degreesToStringHDMS","degrees","hemispheres","normalizedDegrees","modulo","dms","d","m","s","_string2","padNumber","charAt","xdms","ydms","trustHtmlFilter","$sce","input","trustAsHtml","_index","toolContext","activePropertyName","this","getActive","setActive","newVal","__webpack_exports__","exports","angular","requires","push","name","btnGroupComponent_","$parse","restrict","controller","link","scope","element","attrs","assign","$watch","buttons_","some","buttonModel","newValue","directive","BtnGroupController","$scope","scope_","prototype","activate","forEach","expressionFn","i","addButton","btnComponent_","require","ctrls","buttonsCtrl","ngModelCtrl","indexInGroup","ngModelGet","ngModelSet","on","$apply","$setViewValue","$viewValue","$render","toggleClass","geometry","multiGeom","_MultiPoint2","appendPoint","_MultiLineString2","appendLineString","_MultiPolygon2","appendPolygon","navigator","userAgent","indexOf","hex","rgb","r","g","b","Error","colorZeroPadding","toString","queryString","queryData","pairs","split","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","pair","value","indexOfEquals","decodeURIComponent","err","return","queryItem","key","encodeURIComponent","CARMENTA_SERVER","GEOSERVER","MAPSERVER","QGIS","interaction","_asserts2","assertInstanceof","_Interaction2","Object","defineProperty","get","set","val","layer","_Base2","configurable","getVisible","setVisible","getOpacity","setOpacity","source","incrementEvents","decrementEvents","incrementLoadCount_","increment_","load_count","parent","decrementLoadCount_","decrement_","getLayers","olEvent","getSource","fail","$applyAsync","unitPrefixFormat","numberFormat","opt_options","options","_Measure2","call","continueMsg","document","createElement","textContent","assert","ol","inherits","createDrawInteraction","style","_DrawAzimut2","handleMeasure","callback","geom","sketchFeature","getGeometry","_GeometryCollection2","line","getGeometries","_LineString2","getFormattedAzimutRadius","getMap","getView","getProjection","proj","Projection","decimals","precision","getLastCoordinate","projection","formatLength","formatAzimut","output","getFormattedAzimut","getFormattedLength","format","getAzimut","coords","getCoordinates","dx","dy","rad","acos","sqrt","PI","olFunctions","_Pointer2","handleDownEvent","handleDownEvent_","handleEvent","handleEvent_","handleUpEvent","handleUpEvent_","downPx_","source_","started_","sketchFeature_","sketchPoint_","squaredClickTolerance_","sketchLayer_","_Vector2","_Vector4","useSpatialIndex","wrapX","_Draw2","getDefaultStyleFunction","_events2","listen","updateState_","event","pixel","downPx","clickPx","pass","handlePointerMove_","finishDrawing_","startDrawing_","mapBrowserEvent","type","modifyDrawing_","createOrUpdateSketchPoint_","coordinate","slice","_Feature2","_Point2","updateSketchFeatures_","sketchPointGeom","setCoordinates","sketchFeatures","clear","addFeatures","start","circle","_Circle2","setGeometry","dispatchEvent","Event","geometries","getGeometriesArray","last","setRadius","getLength","abortDrawing_","shouldStopEvent","FALSE","map","active","setMap","addFeature","$rootScope","groups_","registerTool","groupName","tool","opt_defaultActivate","_this","entries","unlisten","oldVal","deactivateTools_","activateDefault_","defaultTool","ENABLE_ASSERTS","defaultTools","entry","unregisterTool","splice","unregisterGroup","activateTool","deactivateTool","hasActiveTool","service","__WEBPACK_IMPORTED_MODULE_26__xml_js__","KML","__WEBPACK_IMPORTED_MODULE_6__format_XMLFeature_js__","DEFAULT_STYLE_ARRAY_","createStyleDefaults_","defaultDataProjection","__WEBPACK_IMPORTED_MODULE_18__proj_js__","defaultStyle_","defaultStyle","extractStyles_","extractStyles","writeStyles_","writeStyles","sharedStyles_","showPointNames_","showPointNames","__WEBPACK_IMPORTED_MODULE_0__index_js__","GX_NAMESPACE_URIS_","NAMESPACE_URIS_","SCHEMA_LOCATION_","DEFAULT_COLOR_","DEFAULT_FILL_STYLE_","__WEBPACK_IMPORTED_MODULE_19__style_Fill_js__","color","DEFAULT_IMAGE_STYLE_ANCHOR_","DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_","__WEBPACK_IMPORTED_MODULE_21__style_IconAnchorUnits_js__","PIXELS","DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_","DEFAULT_IMAGE_STYLE_SIZE_","DEFAULT_IMAGE_STYLE_SRC_","DEFAULT_IMAGE_SCALE_MULTIPLIER_","DEFAULT_IMAGE_STYLE_","__WEBPACK_IMPORTED_MODULE_20__style_Icon_js__","anchor","anchorOrigin","__WEBPACK_IMPORTED_MODULE_22__style_IconOrigin_js__","BOTTOM_LEFT","anchorXUnits","anchorYUnits","crossOrigin","rotation","size","src","DEFAULT_NO_IMAGE_STYLE_","DEFAULT_STROKE_STYLE_","__WEBPACK_IMPORTED_MODULE_23__style_Stroke_js__","width","DEFAULT_TEXT_STROKE_STYLE_","DEFAULT_TEXT_STYLE_","__WEBPACK_IMPORTED_MODULE_25__style_Text_js__","font","fill","stroke","DEFAULT_STYLE_","__WEBPACK_IMPORTED_MODULE_24__style_Style_js__","image","zIndex","ICON_ANCHOR_UNITS_MAP_","fraction","FRACTION","pixels","insetPixels","createNameStyleFunction_","foundStyle","textStyle","textOffset","textAlign","getImage","imageSize","getImageSize","imageScale","getScale","getText","foundText","clone","setFont","getFont","setScale","setFill","getFill","setStroke","getStroke","setText","setOffsetX","setOffsetY","setTextAlign","createFeatureStyleFunction_","styleUrl","sharedStyles","resolution","nameStyle","drawName","getType","__WEBPACK_IMPORTED_MODULE_10__geom_GeometryType_js__","POINT","concat","findStyle_","styleValue","Array","isArray","readColor_","node","getAllTextContent","exec","hexColor","substr","readFlatCoordinates_","flatCoordinates","re","parseFloat","z","readURI_","trim","baseURI","window","location","href","URL","readVec2_","xunits","getAttribute","yunits","origin","TOP_LEFT","BOTTOM_RIGHT","TOP_RIGHT","readScale_","__WEBPACK_IMPORTED_MODULE_7__format_XSD_js__","readDecimal","readStyleMapValue_","objectStack","pushParseAndPop","STYLE_MAP_PARSERS_","IconStyleParser_","object","ICON_STYLE_PARSERS_","styleObject","IconObject","drawIcon","keys","hotSpot","offset","test","w","h","heading","__WEBPACK_IMPORTED_MODULE_17__math_js__","imageStyle","offsetOrigin","LabelStyleParser_","LABEL_STYLE_PARSERS_","LineStyleParser_","LINE_STYLE_PARSERS_","strokeStyle","PolyStyleParser_","POLY_STYLE_PARSERS_","fillStyle","outline","readFlatLinearRing_","FLAT_LINEAR_RING_PARSERS_","gxCoordParser_","readGxMultiTrack_","lineStrings","GX_MULTITRACK_GEOMETRY_PARSERS_","multiLineString","__WEBPACK_IMPORTED_MODULE_12__geom_MultiLineString_js__","setLineStrings","readGxTrack_","gxTrackObject","whens","GX_TRACK_PARSERS_","ii","min","lineString","__WEBPACK_IMPORTED_MODULE_11__geom_LineString_js__","setFlatCoordinates","__WEBPACK_IMPORTED_MODULE_9__geom_GeometryLayout_js__","XYZM","readIcon_","iconObject","ICON_PARSERS_","readFlatCoordinatesFromNode_","GEOMETRY_FLAT_COORDINATES_PARSERS_","readLineString_","properties","EXTRUDE_AND_ALTITUDE_MODE_PARSERS_","XYZ","setProperties","readLinearRing_","polygon","__WEBPACK_IMPORTED_MODULE_16__geom_Polygon_js__","readMultiGeometry_","MULTI_GEOMETRY_PARSERS_","__WEBPACK_IMPORTED_MODULE_8__geom_GeometryCollection_js__","multiGeometry","homogeneous","layout","point","getLayout","getFlatCoordinates","__WEBPACK_IMPORTED_MODULE_2__array_js__","__WEBPACK_IMPORTED_MODULE_13__geom_MultiPoint_js__","setCommonGeometryProperties_","LINE_STRING","POLYGON","__WEBPACK_IMPORTED_MODULE_14__geom_MultiPolygon_js__","setPolygons","GEOMETRY_COLLECTION","__WEBPACK_IMPORTED_MODULE_3__asserts_js__","readPoint_","__WEBPACK_IMPORTED_MODULE_15__geom_Point_js__","readPolygon_","flatLinearRings","FLAT_LINEAR_RINGS_PARSERS_","ends","readStyle_","STYLE_PARSERS_","extrudes","tessellates","altitudeModes","hasExtrude","hasTessellate","hasAltitudeMode","DataParser_","parseNode","DATA_PARSERS_","featureObject","displayName","ExtendedDataParser_","EXTENDED_DATA_PARSERS_","RegionParser_","REGION_PARSERS_","PairDataParser_","pairObject","PAIR_PARSERS_","Style","PlacemarkStyleMapParser_","styleMapValue","placemarkObject","SchemaDataParser_","SCHEMA_DATA_PARSERS_","SimpleDataParser_","data","readString","LatLonAltBoxParser_","LAT_LON_ALT_BOX_PARSERS_","regionObject","extent","LodParser_","LOD_PARSERS_","lodObject","innerBoundaryIsParser_","flatLinearRing","INNER_BOUNDARY_IS_PARSERS_","outerBoundaryIsParser_","OUTER_BOUNDARY_IS_PARSERS_","LinkParser_","LINK_PARSERS_","whenParser_","when","Date","parse","isNaN","makeStructureNS","makeObjectPropertySetter","Data","SchemaData","LatLonAltBox","Lod","altitudeMode","minAltitude","maxAltitude","north","south","east","west","minLodPixels","maxLodPixels","minFadeExtent","maxFadeExtent","extrude","readBoolean","tessellate","makeReplacer","innerBoundaryIs","outerBoundaryIs","coord","Icon","LinearRing","LineString","makeArrayPusher","MultiGeometry","Point","Polygon","Track","NETWORK_LINK_PARSERS_","ExtendedData","Region","Link","address","description","open","phoneNumber","visibility","PLACEMARK_PARSERS_","StyleMap","MultiTrack","SimpleData","IconStyle","LabelStyle","LineStyle","PolyStyle","Pair","readDocumentOrFolder_","parsersNS","Document","makeArrayExtender","Folder","Placemark","readPlacemark_","readSharedStyle_","bind","readSharedStyleMap_","features","feature","__WEBPACK_IMPORTED_MODULE_1__Feature_js__","id","setId","__WEBPACK_IMPORTED_MODULE_5__format_Feature_js__","styleFunction","setStyle","styleUri","readFeature","readFeatureFromNode","namespaceURI","getReadOptions","readFeatures","readFeaturesFromNode","localName","n","firstElementChild","nextElementSibling","fs","readName","isDocument","readNameFromDocument","isNode","readNameFromNode","doc","firstChild","nextSibling","nodeType","Node","ELEMENT_NODE","readNetworkLinks","networkLinks","readNetworkLinksFromDocument","readNetworkLinksFromNode","obj","readRegion","regions","readRegionFromDocument","readRegionFromNode","readProjection","writeColorTextNode_","rgba","__WEBPACK_IMPORTED_MODULE_4__color_js__","abgr","writeStringTextNode","writeCoordinatesTextNode_","context","stride","dimension","XY","XYM","writeDataNode_","setAttribute","pushSerializeAndPop","EXTENDEDDATA_NODE_SERIALIZERS_","OBJECT_PROPERTY_NODE_FACTORY","writeDataNodeName_","writeCDATASection","writeDataNodeValue_","writeDocument_","DOCUMENT_SERIALIZERS_","DOCUMENT_NODE_FACTORY_","writeExtendedData_","namesAndValues","names","values","DATA_NODE_FACTORY_","writeIcon_","icon","parentNode","orderedKeys","ICON_SEQUENCE_","makeSequence","ICON_SERIALIZERS_","GX_NODE_FACTORY_","writeIconStyle_","getSrc","getSize","iconImageSize","iconProperties","getAnchor","getOrigin","getRotation","ICON_STYLE_SEQUENCE_","ICON_STYLE_SERIALIZERS_","writeLabelStyle_","getColor","LABEL_STYLE_SEQUENCE_","LABEL_STYLE_SERIALIZERS_","writeLineStyle_","getWidth","LINE_STYLE_SEQUENCE_","LINE_STYLE_SERIALIZERS_","writeMultiGeometry_","factory","GEOMETRY_NODE_FACTORY_","MULTI_POINT","getPoints","POINT_NODE_FACTORY_","MULTI_LINE_STRING","getLineStrings","LINE_STRING_NODE_FACTORY_","MULTI_POLYGON","getPolygons","POLYGON_NODE_FACTORY_","MULTI_GEOMETRY_SERIALIZERS_","writeBoundaryIs_","linearRing","BOUNDARY_IS_SERIALIZERS_","LINEAR_RING_NODE_FACTORY_","writePlacemark_","getId","getProperties","getGeometryName","sort","v","PLACEMARK_SERIALIZERS_","EXTENDEDDATA_NODE_FACTORY_","getStyleFunction","styles","PLACEMARK_SEQUENCE_","writePrimitiveGeometry_","getStride","PRIMITIVE_GEOMETRY_SEQUENCE_","PRIMITIVE_GEOMETRY_SERIALIZERS_","writePolygon_","linearRings","getLinearRings","outerRing","shift","POLYGON_SERIALIZERS_","INNER_BOUNDARY_NODE_FACTORY_","OUTER_BOUNDARY_NODE_FACTORY_","writePolyStyle_","POLY_STYLE_SERIALIZERS_","COLOR_NODE_FACTORY_","writeScaleTextNode_","writeDecimalTextNode","writeStyle_","STYLE_SEQUENCE_","STYLE_SERIALIZERS_","writeVec2_","vec2","KML_SEQUENCE_","KML_SERIALIZERS_","makeChildAppender","GEOMETRY_TYPE_TO_NODENAME_","MultiPoint","MultiLineString","MultiPolygon","GeometryCollection","writeBooleanTextNode","opt_nodeName","createElementNS","makeSimpleNodeFactory","writeFeatures","writeFeaturesNode","adaptOptions","kml","xmlnsUri","xmlSchemaInstanceUri","setAttributeNS","_ol_Image_","pixelRatio","imageLoadFunction","ImageBase","ImageState","IDLE","src_","image_","Image","imageListenerKeys_","state","imageLoadFunction_","handleImageError_","ERROR","unlistenImage_","changed","handleImageLoad_","ol_extent","height","LOADED","load","LOADING","events","listenOnce","EventType","LOAD","setImage","unlistenByKey","ol_Image","ImageWMS","source_Image","attributions","resolutions","crossOrigin_","url_","url","defaultImageLoadFunction","params_","params","v13_","updateV13_","serverType_","hidpi_","hidpi","imageSize_","renderedRevision_","ratio_","ratio","GETFEATUREINFO_IMAGE_SIZE_","getGetFeatureInfoUrl","projectionObj","sourceProjectionObj","reproj","calculateSourceResolution","baseParams","SERVICE","VERSION","common","REQUEST","FORMAT","TRANSPARENT","QUERY_LAYERS","getRequestUrl_","getParams","getImageInternal","findNearestResolution","imageResolution","center","viewWidth","ceil","viewHeight","viewExtent","requestWidth","requestHeight","requestExtent","getRevision","getResolution","getPixelRatio","getExtent","CHANGE","handleImageChange","getImageLoadFunction","asserts","getCode","WMSServerType","dpi","axisOrientation","getAxisOrientation","bbox","uri","getUrl","setImageLoadFunction","setUrl","updateParams","version","string","compareVersions","olArray","olColor","olExtent","$injector","$filter_","decimals_","has","precision_","numberFormat_","unitPrefixFormat_","ngeoNumberCoordinates_","pointFilterFn_","pointFilterArgs_","filterElements","filterName","goog","assertFunction","projection_","download_","setProjection","opt_select","getStyle","supportsVertex_","getVertexStyle","getHaloStyle_","GeometryType","getLineStringStyle_","getPointStyle_","CIRCLE","RECTANGLE","getPolygonStyle_","TEXT","getTextStyle_","constructor","strokeWidth","getStrokeProperty","showLabel","getShowLabelProperty","showMeasure","getShowMeasureProperty","getRGBAColorProperty","_Style2","_Stroke2","textLabelValues","getMeasure","getNameProperty","textLabelValue","createTextStyle_","getSizeProperty","radius","_Fill2","offsetY","optNumber","attrib","assertNumber","getNumber","opacity","getOpacityProperty","fillColor","azimut","FeatureProperties","AZIMUT","getRadiusLine","angle","offsetX","cos","sin","getAngleProperty","createEditingStyles","white","blue","console","opt_incGeomFunc","incGeomFunc","_RegularShape2","points","innerMultiCoordinates","multiCoordinates","supported","includes","haloSize","getFilteredFeatureValues","ANGLE","getColorProperty","assertString","COLOR","fromString","NAME","OPACITY","SHOW_MEASURE","assertBoolean","SHOW_LABEL","SIZE","STROKE","export","formatType","FormatType","GPX","exportGPX","exportKML","_GPX2","export_","_KML2","fileName","opt_mimeType","mimeType","clones","writeOptions","dataProjection","featureProjection","_Text2","measure","_MeasureAzimut2","getFormattedArea","getFormattedPoint","args","apply","_toConsumableArray","IS_TEXT","IS_CIRCLE","IS_RECTANGLE","panMapToFeature","opt_panDuration","panDuration","assertArray","view","calculateExtent","intersectsExtent","mapCenter","getCenter","featureCenter","getCoordinateAt","getInteriorPoint","animate","duration","endPoint","getNonSpatialProperties","geometryName","nonSpatialProperties","clearNonSpatialProperties","_service2","factory_","content","opt_fileType","fileType","_utils2","isSafari","blob","Blob","saveAs","__WEBPACK_IMPORTED_MODULE_11__xml_js__","__WEBPACK_IMPORTED_MODULE_4__format_XMLFeature_js__","__WEBPACK_IMPORTED_MODULE_10__proj_js__","readExtensions_","readExtensions","NAMESPACE_URIS","FEATURE_READER","rte","readRte","trk","readTrk","wpt","readWpt","GPX_PARSERS","LINK_PARSERS","__WEBPACK_IMPORTED_MODULE_5__format_XSD_js__","RTE_PARSERS","cmt","desc","parseLink","readNonNegativeInteger","extensions","parseExtensions","rtept","RTEPT_PARSERS","rteValues","layoutOptions","appendCoordinate","ele","time","readDateTime","TRK_PARSERS","trkseg","TRKSEG_PARSERS","trkpt","TRKPT_PARSERS","trkValues","WPT_PARSERS","magvar","geoidheight","sym","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid","LINK_SEQUENCE","LINK_SERIALIZERS","RTE_SEQUENCE","RTE_SERIALIZERS","writeLink","writeNonNegativeIntegerTextNode","makeArraySerializer","writeWptType","RTEPT_TYPE_SEQUENCE","TRK_SEQUENCE","TRK_SERIALIZERS","geometryLayout","TRKSEG_SERIALIZERS","TRKSEG_NODE_FACTORY","WPT_TYPE_SEQUENCE","WPT_TYPE_SERIALIZERS","writeDateTimeTextNode","GEOMETRY_TYPE_TO_NODENAME","GPX_NODE_FACTORY","nodeName","GPX_SERIALIZERS","__WEBPACK_IMPORTED_MODULE_3__format_Feature_js__","hasZ","hasM","applyLayoutOptions_","__WEBPACK_IMPORTED_MODULE_7__geom_LineString_js__","__WEBPACK_IMPORTED_MODULE_8__geom_MultiLineString_js__","__WEBPACK_IMPORTED_MODULE_9__geom_Point_js__","__WEBPACK_IMPORTED_MODULE_6__geom_GeometryLayout_js__","handleReadExtensions_","extensionsNode","featureReader","gpx","br","appendChild","_Polygon2","gettextCatalog","ngeoFeatureHelper","ngeoFeatures","gettextCatalog_","getString","featureHelper_","ngeoFeatures_","interactions_","drawPoint","measureLength","measureArea","measureAzimut","drawRectangle","drawText","registerInteraction","_decorate2","addInteraction","handleActiveChange","handleDrawEnd","sketch","detail","prop","_features2","_FeatureHelper2","olBase","_Event","arguments","_Event2","__WEBPACK_IMPORTED_MODULE_13__uri_js__","TileWMS","transparent","__WEBPACK_IMPORTED_MODULE_9__source_TileImage_js__","cacheSize","opaque","reprojectionErrorThreshold","tileClass","tileGrid","tileLoadFunction","urls","transition","gutter_","gutter","tmpExtent_","__WEBPACK_IMPORTED_MODULE_3__extent_js__","setKey","getKeyForParams_","__WEBPACK_IMPORTED_MODULE_1__index_js__","__WEBPACK_IMPORTED_MODULE_6__proj_js__","getTileGrid","getTileGridForProjection","tileCoord","getTileCoordForCoordAndResolution","getResolutions","tileResolution","tileExtent","getTileCoordExtent","tileSize","__WEBPACK_IMPORTED_MODULE_8__size_js__","toSize","getTileSize","tmpSize","buffer","__WEBPACK_IMPORTED_MODULE_7__reproj_js__","__WEBPACK_IMPORTED_MODULE_0__common_js__","__WEBPACK_IMPORTED_MODULE_4__obj_js__","getGutterInternal","__WEBPACK_IMPORTED_MODULE_10__source_WMSServerType_js__","__WEBPACK_IMPORTED_MODULE_2__asserts_js__","tmp","__WEBPACK_IMPORTED_MODULE_5__math_js__","__WEBPACK_IMPORTED_MODULE_11__tilecoord_js__","hash","getTilePixelRatio","res","fixedTileUrlFunction","__WEBPACK_IMPORTED_MODULE_12__string_js__","_Collection2","directive_","drawFeatureCtrl","geometryFunction","end","maxPoints","_classCallCheck","inRange_","inRange","visible_","visible","attributes","id_","identifierAttribute_","identifierAttribute","maxResolution_","maxResolution","minResolution_","minResolution","name_","_createClass","olObj","featureUidToGroupIndex_","layer_","styleFunction_","updateWhileAnimating","updateWhileInteracting","groupIndex","featureUid","getUid","removeFeature","group","isEmpty","getLayer","getFeatureOverlay","defaultFunction","_FeatureOverlay2","init","createFunction","defaultMessage","defaultArgs","givenMessage","givenArgs","message","e","AssertionError","errorHandler_","errorHandler","condition","opt_message","var_args","doAssertFailure_","isNumber","typeOf","isString","isFunction","isObject","isBoolean","dom","NodeType","ELEMENT","getType_","Function","_typeof","app","ngeo","_module2","_module4","_ToolActivateMgr2","MainController","ngeoToolActivateMgr","vector","_Map2","layers","_Tile2","_OSM2","_View2","zoom","drawActive","drawToolActivate","_ToolActivate2","dummyActive","dummyToolActivate","_Controller2","_component2","_point2","_rectangle2","_text2","_BackgroundLayerMgr2","_directive2","_FeatureOverlayMgr2","_recenter2","_resizemap2","_scaleselector2","_area2","_azimut2","_length2","bindToController","$compile","helpMsg","contMsg","_MeasureArea2","startMsg","fromCircle","_MeasureLength2","_Observable2","mapUids_","item","mapUid","previous","setAt","removeAt","insertAt","_CustomEvent2","current","updateDimensions","dimensions","baseBgLayer","getArray","_Layer2","hasUpdates","updatedDimensions","refresh","_SyncDataSourcesMap2","$window","ngeoSyncDataSourcesMap","$eval","setTarget","manageResizeProp","resizeTransitionProp","resizeTransition","now","loop","adjustSize","updateSize","renderSync","requestAnimationFrame","ngeoDataSources","ngeoDataSources_","map_","listenerKeys_","handleDataSourcesAdd_","$inject","handleViewResolutionChange_","syncDataSourcesToResolution_","unByKey","evt","target","dataSource","syncDataSourceToResolution_","supportsDynamicInRange","_DataSource2","unbindMap_","bindMap_","_DataSources2","manager","manager_","features_","index_","setFeatures","handleFeatureAdd_","handleFeatureRemove_","$element","$attrs","mapExpr","recenter","attr","fit","setZoom","$","selected","selectedIndex","stateExpr","animationDelayKey","animationDelay","cancelAnimationFrame","templateUrl","baseModuleTemplateUrl","ngeoScaleselectorTemplateUrl","ScaleselectorController_","scalesExpr","scales","zoomLevels","newLength","numberSafeCompareFunction","optionsExpr","getOptions_","$scope_","resolutionChangeKey_","currentScale","currentZoom","getZoom","handleViewChange_","registerResolutionChangeListener_","dropup","changeZoom","handleResolutionChange_","_this2","__WEBPACK_IMPORTED_MODULE_9__math_js__","opt_layout","__WEBPACK_IMPORTED_MODULE_6__geom_SimpleGeometry_js__","__WEBPACK_IMPORTED_MODULE_1__array_js__","multiPoint","closestPointXY","closestPoint","minSquaredDistance","__WEBPACK_IMPORTED_MODULE_2__extent_js__","j","squaredDistance","__WEBPACK_IMPORTED_MODULE_8__geom_flat_inflate_js__","getPoint","__WEBPACK_IMPORTED_MODULE_5__geom_Point_js__","__WEBPACK_IMPORTED_MODULE_4__geom_GeometryType_js__","setLayout","__WEBPACK_IMPORTED_MODULE_7__geom_flat_deflate_js__","__WEBPACK_IMPORTED_MODULE_3__geom_GeometryLayout_js__","setFlatCoordinatesInternal","__WEBPACK_IMPORTED_MODULE_1__source_XYZ_js__","OSM","ATTRIBUTION","maxZoom","__WEBPACK_IMPORTED_MODULE_2__tilegrid_js__","createXYZ","extentFromProjection","minZoom","__WEBPACK_IMPORTED_MODULE_1__source_TileImage_js__","tilePixelRatio","tileUrlFunction","__WEBPACK_IMPORTED_MODULE_12__geom_flat_simplify_js__","ends_","maxDelta_","maxDeltaRevision_","__WEBPACK_IMPORTED_MODULE_7__geom_flat_closest_js__","getsMaxSquaredDelta","getsClosestPoint","getCoordinateAtM","opt_extrapolate","opt_interpolate","extrapolate","interpolate","__WEBPACK_IMPORTED_MODULE_10__geom_flat_interpolate_js__","lineStringsCoordinateAtM","__WEBPACK_IMPORTED_MODULE_9__geom_flat_inflate_js__","coordinatess","getEnds","getLineString","__WEBPACK_IMPORTED_MODULE_5__geom_LineString_js__","getFlatMidpoints","midpoints","midpoint","getSimplifiedGeometryInternal","squaredTolerance","simplifiedFlatCoordinates","simplifiedEnds","douglasPeuckers","simplifiedMultiLineString","__WEBPACK_IMPORTED_MODULE_11__geom_flat_intersectsextent_js__","__WEBPACK_IMPORTED_MODULE_8__geom_flat_deflate_js__","__WEBPACK_IMPORTED_MODULE_17__geom_flat_simplify_js__","__WEBPACK_IMPORTED_MODULE_7__geom_SimpleGeometry_js__","endss_","flatInteriorPointsRevision_","flatInteriorPoints_","orientedRevision_","orientedFlatCoordinates_","multiPolygon","len","newEndss","__WEBPACK_IMPORTED_MODULE_10__geom_flat_closest_js__","getssMaxSquaredDelta","getssClosestPoint","getOrientedFlatCoordinates","containsXY","__WEBPACK_IMPORTED_MODULE_11__geom_flat_contains_js__","linearRingssContainsXY","getArea","__WEBPACK_IMPORTED_MODULE_8__geom_flat_area_js__","linearRingss","opt_right","__WEBPACK_IMPORTED_MODULE_16__geom_flat_orient_js__","orientLinearRingss","__WEBPACK_IMPORTED_MODULE_13__geom_flat_inflate_js__","coordinatesss","getEndss","getFlatInteriorPoints","flatCenters","__WEBPACK_IMPORTED_MODULE_9__geom_flat_center_js__","__WEBPACK_IMPORTED_MODULE_14__geom_flat_interiorpoint_js__","getInteriorPoints","interiorPoints","__WEBPACK_IMPORTED_MODULE_5__geom_MultiPoint_js__","linearRingssAreOriented","simplifiedEndss","quantizess","simplifiedMultiPolygon","getPolygon","prevEnds","__WEBPACK_IMPORTED_MODULE_6__geom_Polygon_js__","endss","polygons","jj","__WEBPACK_IMPORTED_MODULE_15__geom_flat_intersectsextent_js__","__WEBPACK_IMPORTED_MODULE_12__geom_flat_deflate_js__","lastEnds","__WEBPACK_IMPORTED_MODULE_6__obj_js__","opt_geometries","__WEBPACK_IMPORTED_MODULE_4__geom_Geometry_js__","geometries_","listenGeometriesChange_","cloneGeometries_","clonedGeometries","unlistenGeometriesChange_","__WEBPACK_IMPORTED_MODULE_1__events_js__","__WEBPACK_IMPORTED_MODULE_2__events_EventType_js__","geometryCollection","setGeometries","computeExtent","getSimplifiedGeometry","simplifiedGeometryRevision","simplifiedGeometryCache","simplifiedGeometryMaxMinSquaredTolerance","hasOwnProperty","simplifiedGeometries","simplified","simplifiedGeometry","simplifiedGeometryCollection","setGeometriesArray","__WEBPACK_IMPORTED_MODULE_5__geom_GeometryType_js__","rotate","sx","opt_sy","opt_anchor","applyTransform","transformFn","translate","deltaX","deltaY","disposeInternal","DrawEventType","Draw","Pointer","shouldHandle_","downTimeout_","lastDragTime_","freehand_","snapTolerance_","snapTolerance","type_","mode_","getMode_","stopClick_","stopClick","minPoints_","minPoints","Mode_","maxPoints_","finishCondition_","finishCondition","functions","opt_geometry","Circle","NaN","squaredLength","ol_coordinate","setCenterAndRadius","Constructor","mode","geometryFunction_","dragVertexDelay_","dragVertexDelay","finishCoordinate_","sketchCoords_","sketchLine_","sketchLineCoords_","clickTolerance","overlay_","Vector","source_Vector","geometryName_","condition_","noModifierKeys","freehandCondition_","freehand","always","freehandCondition","shiftKeyOnly","ol_Object","getChangeEventType","Property","ACTIVE","createDefaultEditing","originalEvent","CONTEXTMENU","preventDefault","move","MapBrowserEventType","POINTERMOVE","POINTERDRAG","clearTimeout","addToDrawing_","POINTERDOWN","pointerEvent","pointerType","MouseSource","POINTER_TYPE","DBLCLICK","setTimeout","MapBrowserPointerEvent","frameState","circleMode","finishDrawing","atFinish_","stopPropagation","at","potentiallyDone","potentiallyFinishCoordinates","finishCoordinate","finishPixel","getPixelFromCoordinate","Feature","setGeometryName","sketchLineGeom","ring","getLinearRing","pop","removeLastPoint","extend","overlaySource","createRegularPolygon","opt_sides","opt_angle","atan","createBox","__WEBPACK_IMPORTED_MODULE_1__string_js__","XSD","__WEBPACK_IMPORTED_MODULE_0__xml_js__","readBooleanString","dateTime","readDecimalString","readNonNegativeIntegerString","bool","DOCUMENT","createCDATASection","date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","createTextNode","toPrecision","nonNegativeInteger","__WEBPACK_IMPORTED_MODULE_5__geom_flat_deflate_js__","opt_radius","__WEBPACK_IMPORTED_MODULE_4__geom_SimpleGeometry_js__","delta","getRadius","getRadiusSquared_","__WEBPACK_IMPORTED_MODULE_1__extent_js__","__WEBPACK_IMPORTED_MODULE_3__geom_GeometryType_js__","circleExtent","intersectsCoordinate","setCenter","__WEBPACK_IMPORTED_MODULE_2__geom_GeometryLayout_js__","transform","olDom","olSphere","MeasureBaseOptions","helpTooltipElement_","helpTooltipOverlay_","measureTooltipElement_","measureTooltipOverlay_","measureTooltipOverlayCoord_","displayHelpTooltip_","displayHelpTooltip","changeEventKey_","postcomposeEventKey_","vectorLayer_","drawInteraction_","sketchStyle","shouldHandleDrawInteractionActiveChange_","handleDrawInteractionActiveChange_","onDrawStart_","onDrawEnd_","SPHERE_WGS84","_EPSG2","RADIUS","geodesicArea","getFormattedCircleArea","c1","c2","haversineDistance","dragging","removeChildren","setPosition","getDrawInteraction","prevMap","removeInteraction","createMeasureTooltip_","innerHTML","classList","add","setOffset","unlistenerEvent_","createHelpTooltip_","removeHelpTooltip_","_Overlay2","positioning","addOverlay","removeOverlay","removeChild","removeMeasureTooltip_","stopEvent","getTooltipElement","__WEBPACK_IMPORTED_MODULE_4__xml_js__","XMLFeature","xmlSerializer_","XMLSerializer","__WEBPACK_IMPORTED_MODULE_2__format_Feature_js__","__WEBPACK_IMPORTED_MODULE_3__format_FormatType_js__","XML","readFeatureFromDocument","readFeaturesFromDocument","readGeometry","readGeometryFromDocument","readGeometryFromNode","readProjectionFromDocument","readProjectionFromNode","writeFeature","writeFeatureNode","serializeToString","writeGeometry","writeGeometryNode","__WEBPACK_IMPORTED_MODULE_1__style_TextPlacement_js__","Text","font_","rotation_","rotateWithView_","rotateWithView","scale_","text_","textAlign_","textBaseline_","textBaseline","fill_","__WEBPACK_IMPORTED_MODULE_0__style_Fill_js__","DEFAULT_FILL_COLOR_","maxAngle_","maxAngle","placement_","placement","overflow_","overflow","stroke_","offsetX_","offsetY_","backgroundFill_","backgroundFill","backgroundStroke_","backgroundStroke","padding_","padding","getPlacement","getMaxAngle","getOverflow","getRotateWithView","getTextAlign","getTextBaseline","getOffsetX","getOffsetY","getBackgroundFill","getBackgroundStroke","getPadding","setOverflow","setMaxAngle","setPlacement","setRotation","setTextBaseline","setBackgroundFill","setBackgroundStroke","setPadding"],"mappings":"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","file":"drawfeature.min.js","sourcesContent":["/**\n * @module ngeo.filters\n*/\nconst exports = {};\nimport ngeoBase from 'ngeo/index.js';\nimport * as olMath from 'ol/math.js';\nimport olString from 'ol/string.js';\n\n/**\n * Format a number as a localized scale.\n * For instance:\n *  - For 'fr-CH' the value 25000 will become '1 : 25 000'.\n *  - For 'en-US' the value 25000 will become '1 : 25,000'.\n *\n * Example:\n *\n *      <p>{{25000 | ngeoScalify}}</p>\n *\n *\n * @param {angular.$filter} $filter Angular filter\n * @return {function(number): string} A function to format number into a 'scale'\n *     string.\n *//* @ngInject\n * @ngdoc filter\n * @ngname ngeoScalify\n */\nngeoBase.Scalify = function($filter) {\n  const numberFilter = $filter('number');\n  const filterFn = function(scale) {\n    const text = numberFilter(scale, 0);\n    return text ? `1\\u00a0:\\u00a0${text}` : '';\n  };\n  filterFn['$stateful'] = true;\n  return filterFn;\n};\n\nngeoBase.module.filter('ngeoScalify', ngeoBase.Scalify);\n\n/**\n * A filter used to format a number with a precision, using the locale.\n *\n * Arguments:\n * - opt_precision: The used precision, default is 3.\n *\n * Examples:\n *\n *      {{0.1234 | ngeoNumber}} => 0.123\n *      {{1.234 | ngeoNumber}} => 1.23\n *      {{12.34 | ngeoNumber}} => 12.3\n *      {{123.4 | ngeoNumber}} => 123\n *      {{1234 | ngeoNumber}} => 1230\n *\n * @param {angular.$locale} $locale Angular locale\n * @return {ngeox.number} Function used to format number into a string.\n *//* @ngInject\n * @ngdoc filter\n * @ngname ngeoNumber\n */\nngeoBase.Number = function($locale) {\n  const formats = $locale.NUMBER_FORMATS;\n\n  /**\n   * @param {number} number The number to format.\n   * @param {number=} opt_precision The used precision, default is 3.\n   * @return {string} The formatted string.\n   */\n  const result = function(number, opt_precision) {\n    const groupSep = formats.GROUP_SEP;\n    const decimalSep = formats.DECIMAL_SEP;\n    if (opt_precision === undefined) {\n      opt_precision = 3;\n    }\n\n    if (number === Infinity) {\n      return '\\u221e';\n    } else if (number === -Infinity) {\n      return '-\\u221e';\n    } else if (number === 0) {\n      // 0 will creates infinity values\n      return '0';\n    }\n    const sign = number < 0;\n    number = Math.abs(number);\n\n    const nb_decimal = opt_precision - Math.floor(Math.log(number) / Math.log(10)) - 1;\n    const factor = Math.pow(10, nb_decimal);\n    number = Math.round(number * factor);\n    let decimal = '';\n    const unit = Math.floor(number / factor);\n\n    if (nb_decimal > 0) {\n      let str_number = `${number}`;\n      // 0 padding\n      while (str_number.length < nb_decimal) {\n        str_number = `0${str_number}`;\n      }\n      decimal = str_number.substring(str_number.length - nb_decimal);\n      while (decimal[decimal.length - 1] === '0') {\n        decimal = decimal.substring(0, decimal.length - 1);\n      }\n    }\n\n    const groups = [];\n    let str_unit = `${unit}`;\n    while (str_unit.length > 3) {\n      const index = str_unit.length - 3;\n      groups.unshift(str_unit.substring(index));\n      str_unit = str_unit.substring(0, index);\n    }\n    groups.unshift(str_unit);\n\n    return (sign ? '-' : '') + groups.join(groupSep) + (\n      decimal.length === 0 ? '' : decimalSep + decimal\n    );\n  };\n  return result;\n};\n\nngeoBase.module.filter('ngeoNumber', ngeoBase.Number);\n\n/**\n * A filter used to format a number with the prefix and unit\n *\n * Arguments:\n * - opt_unit: The unit to used, default is ''.\n * - opt_type: (unit|square|binary) the type of units, default is 'unit'.\n * - opt_precision: The used precision, default is 3.\n *\n * Examples:\n *\n *      {{25000 | ngeoUnitPrefix}} => 25 k\n *      {{25000 | ngeoUnitPrefix:'m'}} => 25 km\n *      {{25000000 | ngeoUnitPrefix:'m':'square'}} => 25 km\n *      {{2048 | ngeoUnitPrefix:'o':'binary'}} => 2 Kio\n *\n *\n * @param {angular.$filter} $filter Angular filter\n * @return {ngeox.unitPrefix} Function used to format number into a string.\n *//* @ngInject\n * @ngdoc filter\n * @ngname ngeoUnitPrefix\n */\nngeoBase.UnitPrefix = function($filter) {\n  const numberFilter = $filter('ngeoNumber');\n  const standardPrefix = ['', 'k', 'M', 'G', 'T', 'P'];\n  const binaryPrefix = ['', 'Ki', 'Mi', 'Gi', 'Ti', 'Pi'];\n  /**\n   * @param {number} number The number to format.\n   * @param {string=} opt_unit The unit to used, default is ''.\n   * @param {string=} opt_type (unit|square|binary) the type of units, default is 'unit'.\n   * @param {number=} opt_precision The used precision, default is 3.\n   * @return {string} The formatted string.\n   */\n  const result = function(number, opt_unit, opt_type, opt_precision) {\n    if (opt_unit === undefined) {\n      opt_unit = '';\n    }\n    let divisor = 1000;\n    let prefix = standardPrefix;\n    if (opt_type === 'square') {\n      divisor = 1000000;\n    } else if (opt_type === 'binary') {\n      divisor = 1024;\n      prefix = binaryPrefix;\n    }\n\n    let index = 0;\n    const index_max = prefix.length - 1;\n    while (number >= divisor && index < index_max) {\n      number = number / divisor;\n      index++;\n    }\n\n    const postfix = prefix[index] + opt_unit;\n    const space = postfix.length == 0 ? '' : '\\u00a0';\n    return numberFilter(number, opt_precision) + space + postfix;\n  };\n  return result;\n};\n\nngeoBase.module.filter('ngeoUnitPrefix', ngeoBase.UnitPrefix);\n\n/**\n * Format a couple of numbers as number coordinates.\n *\n * Example without parameters (en-US localization):\n *\n *      <p>{{[7.1234, 46.9876] | ngeoNumberCoordinates}}</p>\n *      <!-- will Become 7 47 -->\n *\n * Example with defined fractionDigits and template (en-US localization):\n *\n *      <p>{{[7.1234, 46.9876] | ngeoNumberCoordinates:2:'co {x} E; {y} N'}}</p>\n *      <!-- will Become co 7.12 E; 46.99 N -->\n *\n * Example without fractionDigits but with defined template and localize:\n *\n *      <!-- With en-US localization (opt_localize can be true or undefined) -->\n *      <p>{{[2600000, 1600000] | ngeoNumberCoordinates:0:'{x}, {y}'}}</p>\n *      <!-- will Become 2,600,000, 1,600,000 -->\n *      <br/>\n *      <!-- With fr-CH localization (opt_localize can be true or undefined) -->\n *      <p>{{[2600000, 1600000] | ngeoNumberCoordinates:0:'{x}, {y}'}}</p>\n *      <!-- will Become 2'600'000, 1'600'000 -->\n *      <br/>\n *      <!-- With en-US localization but with localization to false -->\n *      <p>{{[2600000, 1600000] | ngeoNumberCoordinates:0:'{x}, {y}'}}</p>\n *      <!-- will Become 2'600'000, 1'600'000 -->\n *\n * @param {angular.$filter} $filter Angular filter\n * @return {ngeox.numberCoordinates} A function to format numbers into coordinates string.\n *//* @ngInject\n * @ngdoc filter\n * @ngname ngeoNumberCoordinates\n */\nngeoBase.NumberCoordinates = function($filter) {\n  /**\n   * @param {ol.Coordinate} coordinates Array of two numbers.\n   * @param {(number|string)=} opt_fractionDigits Optional number of digit.\n   *     Default to 0.\n   * @param {string=} opt_template Optional template. Default to '{x} {y}'.\n   *     Where \"{x}\" will be replaced by the easting coordinate and \"{y}\" by the\n   *     northing one. Note: Use a html entity to use the semicolon symbol\n   *     into a template.\n   * @return {string} Number formatted coordinates.\n   */\n  const filterFn = function(coordinates, opt_fractionDigits, opt_template) {\n    const template = opt_template ? opt_template : '{x} {y}';\n    let x = coordinates[0];\n    let y = coordinates[1];\n    const fractionDigits = parseInt(opt_fractionDigits, 10) | 0;\n    x = $filter('number')(x, fractionDigits);\n    y = $filter('number')(y, fractionDigits);\n    return template.replace('{x}', x).replace('{y}', y);\n  };\n  return filterFn;\n};\n\nngeoBase.module.filter('ngeoNumberCoordinates', ngeoBase.NumberCoordinates);\n\n\n/**\n * Format coordinates as DMS coordinates.\n *\n * Example without parameters:\n *\n *      <p>{{[7.1234, 46.9876] | ngeoDMSCoordinates}}</p>\n *      <!-- will Become  7 07' 24'' E 46 59' 15'' N-->\n *\n * Example with defined fractionDigits and a template.\n *\n *      <p>{{[7.1234, 46.9876] | ngeoDMSCoordinates:2:'[{y}; {x]'}}</p>\n *      <!-- will Become [46 59' 15.36'' N; 7 07' 24.24'' E] -->\n *\n * @return {ngeox.dmsCoordinates} A function to format numbers into a DMS coordinates string.\n *//* @ngInject\n * @ngdoc filter\n * @ngname ngeoDMSCoordinates\n */\nngeoBase.DMSCoordinates = function() {\n  const degreesToStringHDMS = function(degrees, hemispheres, fractionDigits) {\n    const normalizedDegrees = olMath.modulo(degrees + 180, 360) - 180;\n    const dms = Math.abs(3600 * normalizedDegrees);\n    const d = Math.floor(dms / 3600);\n    const m = Math.floor((dms / 60) % 60);\n    const s = (dms % 60);\n    return `${d}\\u00b0 ${\n      olString.padNumber(m, 2)}\\u2032 ${\n      olString.padNumber(s, 2, fractionDigits)}\\u2033 ${\n      hemispheres.charAt(normalizedDegrees < 0 ? 1 : 0)}`;\n  };\n\n  /**\n   * @param {ol.Coordinate} coordinates Array of two numbers.\n   * @param {(number|string)=} opt_fractionDigits Optional number of digit.\n   *     Default to 0.\n   * @param {string=} opt_template Optional template. Default to\n   *     '{x} {y}'. Where \"{x}\" will be replaced by the easting\n   *     coordinate, {y} by the northing one. Note: Use a html entity to use the\n   *     semicolon symbol into a template.\n   * @return {string} DMS formatted coordinates.\n   */\n  const filterFn = function(coordinates, opt_fractionDigits, opt_template) {\n    const fractionDigits = parseInt(opt_fractionDigits, 10) | 0;\n\n    const template = opt_template ? opt_template : '{x} {y}';\n\n    const xdms = degreesToStringHDMS(coordinates[0], 'EW', fractionDigits);\n    const ydms = degreesToStringHDMS(coordinates[1], 'NS', fractionDigits);\n\n    return template.replace('{x}', xdms).replace('{y}', ydms);\n  };\n\n  return filterFn;\n};\n\nngeoBase.module.filter('ngeoDMSCoordinates', ngeoBase.DMSCoordinates);\n\n\n/**\n * A filter to mark a value as trusted HTML.\n *\n * Usage:\n *\n *    <p ng-bind-html=\"ctrl.someValue | ngeoTrustHtml\"></p>\n *\n * @return {function(?):string} The filter function.\n *//* @ngInject\n * @ngdoc filter\n * @param {angular.$sce} $sce Angular sce service.\n * @ngname ngeoTrustHtml\n */\nngeoBase.trustHtmlFilter = function($sce) {\n  return function(input) {\n    if (input !== undefined && input !== null) {\n      return $sce.trustAsHtml(`${input}`);\n    } else {\n      return $sce.trustAsHtml('&nbsp;');\n    }\n  };\n};\n\nngeoBase.module.filter('ngeoTrustHtml', ngeoBase.trustHtmlFilter);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters.js","/**\n * @module ngeo.misc.ToolActivate\n*/\nimport ngeoBase from 'ngeo/index.js';\n\n/**\n * A simple object that can be managed by `ngeo.misc.ToolActivateMgr`.\n *\n * See our live examples:\n * [../examples/mapquery.html](../examples/mapquery.html)\n * [../examples/toolActivate.html](../examples/toolActivate.html)\n *\n * @param {Object} toolContext An object which acts as the context for the tool.\n * @param {string} activePropertyName The name of a boolean property on\n *      `toolContext` which represents the active state of the tool.\n * @constructor\n * @struct\n * @ngname ngeoToolActivate\n * @export\n */\nconst exports = function(toolContext, activePropertyName) {\n\n  /**\n   * A getter function to get the active state of the tool.\n   * @return {boolean} Is active.\n   * @export\n   */\n  this.getActive = function() {\n    return toolContext[activePropertyName];\n  };\n\n  /**\n   * A setter function to set the active state of the tool.\n   * @param {boolean} newVal New active state.\n   * @export\n   */\n  this.setActive = function(newVal) {\n    toolContext[activePropertyName] = newVal;\n  };\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/misc/ToolActivate.js","/**\n * @type {string} Default WMS version.\n */\nexport const DEFAULT_WMS_VERSION = '1.3.0';\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/common.js\n// module id = 11\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31","/**\n * @module ngeo.misc.btnComponent\n*/\nimport ngeoBase from 'ngeo/index.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoBtnComponent', []);\n\nngeoBase.module.requires.push(exports.name);\n\n\n/**\n * Provides two directives: ngeo-btn-group and ngeo-btn.\n *\n * The ngeo-btn-group directive allows creating \"toggle\" groups. It works with\n * the ngeo-btn directive.\n *\n * Example:\n *\n *     <div ngeo-btn-group>\n *       <button ngeo-btn class=\"btn\" ng-model=\"ctrl.drawPoint.active\"></button>\n *       <button ngeo-btn class=\"btn\" ng-model=\"ctrl.drawLine.active\"></button>\n *     </div>\n *\n * In that example the ngeo-btn are combined together in a \"toggle group\",\n * where activating a button will deactivate the others.\n *\n * One can use `ng-model` directive at the group level in order to know if\n * a button is active.\n *\n * Example:\n *\n *     <div ngeo-btn-group ngeo-btn-group-active=\"ctrl.drawToolActive\">\n *\n * See our live example: [../examples/interactionbtngroup.html](../examples/interactionbtngroup.html)\n *\n * @htmlAttribute {*} ngeo-btn-group-active Any property of the scope.\n * Tells whether at least one button of the group is active.\n * @param {angular.$parse} $parse Angular parse service.\n * @return {angular.Directive} The directive specs.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoBtnGroup\n */\nexports.btnGroupComponent_ = function($parse) {\n  return {\n    restrict: 'A',\n    controller: 'ngeoBtnGroupController',\n    /**\n     * @param {!angular.Scope} scope Scope.\n     * @param {!angular.JQLite=} element Element.\n     * @param {!angular.Attributes=} attrs Atttributes.\n     * @param {!ngeo.misc.btnComponent.BtnGroupController=} controller Controller.\n     */\n    link: (scope, element, attrs, controller) => {\n      const setActive = $parse(attrs['ngeoBtnGroupActive']).assign;\n\n      if (setActive) {\n        scope.$watch(\n          // return true if at least one button is active otherwise false\n          () => controller.buttons_.some(buttonModel => buttonModel(scope) === true),\n          (newValue) => {\n            setActive(scope, newValue);\n          }\n        );\n      }\n    }\n  };\n};\n\n\nexports.directive('ngeoBtnGroup', exports.btnGroupComponent_);\n\n\n/**\n * @param {!angular.Scope} $scope Scope.\n * @constructor\n * @struct\n *//* @ngInject\n * @ngdoc controller\n * @ngname ngeoBtnGroupController\n */\nexports.BtnGroupController = function($scope) {\n  /**\n   * @type {!Array.<!angular.parse.Expression>}\n   * @private\n   */\n  this.buttons_ = [];\n\n  /**\n   * @type {!angular.Scope}\n   * @private\n   */\n  this.scope_ = $scope;\n};\n\n\n/**\n * @param {number} index Index of the button in buttons array.\n */\nexports.BtnGroupController.prototype.activate = function(index) {\n  this.buttons_.forEach(function(expressionFn, i) {\n    if (i != index) {\n      expressionFn.assign(this.scope_, false);\n    }\n  }, this);\n};\n\n\n/**\n * @param {angular.parse.Expression} expressionFn Expression function.\n * @return {number} Index of the pushed setter.\n */\nexports.BtnGroupController.prototype.addButton = function(expressionFn) {\n  this.buttons_.push(expressionFn);\n  return this.buttons_.length - 1;\n};\n\n\nexports.controller('ngeoBtnGroupController',\n  exports.BtnGroupController);\n\n\n/**\n * The ngeo-btn allows creating toggle buttons working with ng-model. It is\n * typically used with Bootstrap buttons (`btn`).\n *\n * Example:\n *\n *     <button ngeo-btn class=\"btn\" ng-model=\"ctrl.interaction.active\"></button>\n *\n * This example is about creating a Bootstrap button that can pressed/depressed\n * to activate/deactivate an OpenLayers interaction.\n *\n * @htmlAttribute {*} ng-model Any property on the scope. Ideally a boolean.\n * @param {angular.$parse} $parse Angular parse service.\n * @return {angular.Directive} The directive specs.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoBtn\n */\nexports.btnComponent_ = function($parse) {\n  return {\n    require: ['?^ngeoBtnGroup', 'ngModel'],\n    restrict: 'A',\n    /**\n     * @param {!angular.Scope} scope Scope.\n     * @param {!angular.JQLite=} element Element.\n     * @param {!angular.Attributes=} attrs Atttributes.\n     * @param {!Array.<!Object>=} ctrls Controller.\n     */\n    link: (scope, element, attrs, ctrls) => {\n      const buttonsCtrl = ctrls[0];\n      const ngModelCtrl = ctrls[1];\n      let indexInGroup = -1;\n\n      const ngModelGet = $parse(attrs['ngModel']);\n      const ngModelSet = ngModelGet.assign;\n\n      // Set ng-model value to false if undefined\n      if (ngModelGet(scope) === undefined) {\n        ngModelSet(scope, false);\n      }\n      if (buttonsCtrl !== null) {\n        indexInGroup = buttonsCtrl.addButton(ngModelGet);\n      }\n\n      // UI -> model\n      element.on('click', () => {\n        scope.$apply(() => {\n          ngModelCtrl.$setViewValue(!ngModelCtrl.$viewValue);\n          ngModelCtrl.$render();\n        });\n      });\n\n      // model -> UI\n      ngModelCtrl.$render = function() {\n        if (ngModelCtrl.$viewValue && buttonsCtrl !== null) {\n          buttonsCtrl.activate(indexInGroup);\n        }\n        element.toggleClass('active', ngModelCtrl.$viewValue);\n      };\n    }\n  };\n};\n\n\nexports.directive('ngeoBtn', exports.btnComponent_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/misc/btnComponent.js","/**\n * @module ngeo.utils\n*/\nconst exports = {};\nimport olGeomLineString from 'ol/geom/LineString.js';\nimport olGeomMultiPoint from 'ol/geom/MultiPoint.js';\nimport olGeomMultiLineString from 'ol/geom/MultiLineString.js';\nimport olGeomMultiPolygon from 'ol/geom/MultiPolygon.js';\nimport olGeomPoint from 'ol/geom/Point.js';\nimport olGeomPolygon from 'ol/geom/Polygon.js';\n\n\n/**\n * Utility method that converts a simple geometry to its multi equivalent. If\n * the geometry itself is already multi, it is returned as-is.\n * @param {ol.geom.Geometry} geometry A geometry\n * @return {ol.geom.Geometry} A multi geometry\n */\nexports.toMulti = function(geometry) {\n  let multiGeom;\n  if (geometry instanceof olGeomPoint) {\n    multiGeom = new olGeomMultiPoint([]);\n    multiGeom.appendPoint(geometry);\n  } else if (geometry instanceof olGeomLineString) {\n    multiGeom = new olGeomMultiLineString([]);\n    multiGeom.appendLineString(geometry);\n  } else if (geometry instanceof olGeomPolygon) {\n    multiGeom = new olGeomMultiPolygon([]);\n    multiGeom.appendPolygon(geometry);\n  } else {\n    multiGeom = geometry;\n  }\n  return multiGeom;\n};\n\n/**\n * Checks if on Safari.\n * @return {boolean} True if on Safari.\n */\nexports.isSafari = function() {\n  return navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1;\n};\n\n/**\n * Takes a hex value and prepends a zero if it's a single digit.\n * @param {string} hex Hex value to prepend if single digit.\n * @return {string} hex value prepended with zero if it was single digit,\n *     otherwise the same value that was passed in.\n */\nexports.colorZeroPadding = function(hex) {\n  return hex.length == 1 ? `0${hex}` : hex;\n};\n\n/**\n * Converts a color from RGB to hex representation.\n * @param {!Array.<number>} rgb rgb representation of the color.\n * @return {string} hex representation of the color.\n */\nexports.rgbArrayToHex = function(rgb) {\n  const r = rgb[0];\n  const g = rgb[1];\n  const b = rgb[2];\n  if (r != (r & 255) || g != (g & 255) || b != (b & 255)) {\n    throw Error(`\"(${r},${g},${b})\" is not a valid RGB color`);\n  }\n  const hexR = exports.colorZeroPadding(r.toString(16));\n  const hexG = exports.colorZeroPadding(g.toString(16));\n  const hexB = exports.colorZeroPadding(b.toString(16));\n  return `#${hexR}${hexG}${hexB}`;\n};\n\n/**\n * Decode the encoded query string into a query data dictionary.\n * @param {string|undefined} queryString The queryString.\n * @return {!Object.<string, string>} The result.\n */\nexports.decodeQueryString = function(queryString) {\n  const queryData = {};\n  if (queryString) {\n    const pairs = queryString.substring(1).split('&');\n    for (const pair of pairs) {\n      const indexOfEquals = pair.indexOf('=');\n      if (indexOfEquals >= 0) {\n        const name = pair.substring(0, indexOfEquals);\n        const value = pair.substring(indexOfEquals + 1);\n        queryData[decodeURIComponent(name)] = decodeURIComponent(value);\n      } else {\n        queryData[pair] = '';\n      }\n    }\n  }\n  return queryData;\n};\n\n/**\n * Encode the query data dictionary into an encoded query string.\n * @param {!Object.<string, string>} queryData The queryData,\n * @return {string} The result.\n */\nexports.encodeQueryString = function(queryData) {\n  const queryItem = [];\n  for (const key in queryData) {\n    const value = queryData[key];\n    queryItem.push(`${encodeURIComponent(key)}=${encodeURIComponent(value)}`);\n  }\n  return queryItem.join('&');\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","/**\n * @module ol/source/WMSServerType\n */\n\n/**\n * Available server types: `'carmentaserver'`, `'geoserver'`, `'mapserver'`,\n *     `'qgis'`. These are servers that have vendor parameters beyond the WMS\n *     specification that OpenLayers can make use of.\n * @enum {string}\n */\nexport default {\n  CARMENTA_SERVER: 'carmentaserver',\n  GEOSERVER: 'geoserver',\n  MAPSERVER: 'mapserver',\n  QGIS: 'qgis'\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/WMSServerType.js\n// module id = 12\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31","/**\n * @module ngeo.misc.decorate\n*/\nconst exports = {};\nimport googAsserts from 'goog/asserts.js';\nimport ngeoBase from 'ngeo/index.js';\nimport olInteractionInteraction from 'ol/interaction/Interaction.js';\nimport olLayerBase from 'ol/layer/Base.js';\nimport olLayerGroup from 'ol/layer/Group.js';\nimport olLayerLayer from 'ol/layer/Layer.js';\nimport olSourceImage from 'ol/source/Image.js';\nimport olSourceTile from 'ol/source/Tile.js';\n\n\n/**\n * Provides a function that adds an \"active\" property (using\n * `Object.defineProperty`) to an interaction, making it possible to use ngModel\n * to activate/deactivate interactions.\n *\n * Example:\n *\n *      <input type=\"checkbox\" ngModel=\"interaction.active\" />\n *\n * @param {ol.interaction.Interaction} interaction Interaction to decorate.\n */\nexports.interaction = function(interaction) {\n  googAsserts.assertInstanceof(interaction, olInteractionInteraction);\n\n  Object.defineProperty(interaction, 'active', {\n    get: () => interaction.getActive(),\n    set: (val) => {\n      interaction.setActive(val);\n    }\n  });\n};\n\n\n/**\n * Provides a function that adds properties (using\n * `Object.defineProperty`) to the layer, making it possible to control layer\n * properties with ngModel.\n *\n * Example:\n *\n *      <input type=\"checkbox\" ngModel=\"layer.visible\" />\n *\n * @param {ol.layer.Base} layer Layer to decorate.\n */\nexports.layer = function(layer) {\n  googAsserts.assertInstanceof(layer, olLayerBase);\n\n  Object.defineProperty(layer, 'visible', {\n    configurable: true,\n    /**\n     * @return {boolean} Visible.\n     */\n    get: () => layer.getVisible(),\n    /**\n     * @param {boolean} val Visible.\n     */\n    set: (val) => {\n      layer.setVisible(val);\n    }\n  });\n\n  Object.defineProperty(layer, 'opacity', {\n    configurable: true,\n    /**\n     * @return {number} Opacity.\n     */\n    get: () => layer.getOpacity(),\n    /**\n     * @param {number} val Opacity.\n     */\n    set: (val) => {\n      layer.setOpacity(val);\n    }\n  });\n};\n\n\n/**\n * Provides a function that adds a 'loading 'property (using\n * `Object.defineProperty`) to an ol.layer.Group or a layer with\n * an ol.source.Tile or an ol.source.Image source.\n * This property is true when the layer is loading and false otherwise.\n *\n * Example:\n *\n *      <span ng-if=\"layer.loading\">please wait</span>\n *\n * @param {ol.layer.Base} layer layer.\n * @param {angular.Scope} $scope Scope.\n */\nexports.layerLoading = function(layer, $scope) {\n\n  let source;\n\n  /**\n   * @type {Array<string>|null}\n   */\n  let incrementEvents = null;\n\n  /**\n   * @type {Array<string>|null}\n   */\n  let decrementEvents = null;\n\n  /**\n   * @function\n   * @private\n   */\n  const incrementLoadCount_ = increment_;\n\n  /**\n   * @function\n   * @private\n   */\n  const decrementLoadCount_ = decrement_;\n\n  layer.set('load_count', 0, true);\n\n  if (layer instanceof olLayerGroup) {\n    layer.getLayers().on('add', (olEvent) => {\n      const newLayer = olEvent.element;\n      newLayer.set('parent_group', layer);\n    });\n  }\n\n  if (layer instanceof olLayerLayer) {\n    source = layer.getSource();\n    if (source === null) {\n      return;\n    } else if (source instanceof olSourceTile) {\n      incrementEvents = ['tileloadstart'];\n      decrementEvents = ['tileloadend', 'tileloaderror'];\n    } else if (source instanceof olSourceImage) {\n      incrementEvents = ['imageloadstart'];\n      decrementEvents = ['imageloadend', 'imageloaderror'];\n    } else {\n      googAsserts.fail('unsupported source type');\n    }\n\n    source.on(incrementEvents, () => {\n      incrementLoadCount_(layer);\n      $scope.$applyAsync();\n    });\n\n    source.on(decrementEvents, () => {\n      decrementLoadCount_(layer);\n      $scope.$applyAsync();\n    });\n  }\n\n  Object.defineProperty(layer, 'loading', {\n    configurable: true,\n    get: () => /** @type {number} */ (layer.get('load_count')) > 0\n  });\n\n  /**\n   * @function\n   * @param {ol.layer.Base} layer Layer\n   * @private\n   */\n  function increment_(layer) {\n    let load_count = /** @type {number} */ (layer.get('load_count'));\n    const parent = /** @type {ol.layer.Base} */ (layer.get('parent_group'));\n    layer.set('load_count', ++load_count, true);\n    if (parent) {\n      increment_(parent);\n    }\n  }\n\n  /**\n   * @function\n   * @param {ol.layer.Base} layer Layer\n   * @private\n   */\n  function decrement_(layer) {\n    let load_count = /** @type {number} */ (layer.get('load_count'));\n    const parent = /** @type {ol.layer.Base} */ (layer.get('parent_group'));\n    layer.set('load_count', --load_count, true);\n    if (parent) {\n      decrement_(parent);\n    }\n  }\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/misc/decorate.js","/**\n * @module ngeo.interaction.MeasureAzimut\n*/\nimport googAsserts from 'goog/asserts.js';\nimport ngeoInteractionDrawAzimut from 'ngeo/interaction/DrawAzimut.js';\nimport ngeoInteractionMeasure from 'ngeo/interaction/Measure.js';\nimport olGeomGeometryCollection from 'ol/geom/GeometryCollection.js';\nimport olGeomLineString from 'ol/geom/LineString.js';\n\n/**\n * @classdesc\n * Interaction dedicated to measure length.\n *\n * See our live example: [../examples/measure.html](../examples/measure.html)\n *\n * @constructor\n * @struct\n * @fires ol.interaction.Draw.Event\n * @extends {ngeo.interaction.Measure}\n * @param {!ngeox.unitPrefix} unitPrefixFormat The format function\n * @param {!ngeox.number} numberFormat The format function\n * @param {!ngeox.interaction.MeasureOptions=} opt_options Options\n */\nconst exports = function(unitPrefixFormat, numberFormat, opt_options) {\n\n  const options = opt_options || {};\n\n  ngeoInteractionMeasure.call(this, options);\n\n\n  /**\n   * Message to show after the first point is clicked.\n   * @type {Element}\n   */\n  this.continueMsg;\n  if (options.continueMsg !== undefined) {\n    this.continueMsg = options.continueMsg;\n  } else {\n    this.continueMsg = document.createElement('span');\n    this.continueMsg.textContent = 'Click to finish.';\n  }\n\n  /**\n   * The format function\n   * @type {ngeox.number}\n   */\n  this.numberFormat = googAsserts.assert(numberFormat);\n\n  /**\n   * The format function\n   * @type {ngeox.unitPrefix}\n   */\n  this.unitPrefixFormat = googAsserts.assert(unitPrefixFormat);\n\n};\n\nol.inherits(exports, ngeoInteractionMeasure);\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.createDrawInteraction = function(style,\n  source) {\n\n  return new ngeoInteractionDrawAzimut({\n    source,\n    style\n  });\n\n\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.handleMeasure = function(callback) {\n  const geom = googAsserts.assertInstanceof(this.sketchFeature.getGeometry(), olGeomGeometryCollection);\n  const line = googAsserts.assertInstanceof(geom.getGeometries()[0], olGeomLineString);\n  const output = exports.getFormattedAzimutRadius(\n    line, googAsserts.assertInstanceof(this.getMap().getView().getProjection(), ol.proj.Projection),\n    this.decimals, this.precision, this.unitPrefixFormat, this.numberFormat);\n  callback(output, line.getLastCoordinate());\n};\n\n\n/**\n * Format measure output of azimut and radius.\n * @param {!ol.geom.LineString} line LineString.\n * @param {!ol.proj.Projection} projection Projection of the polygon coords.\n * @param {number|undefined} decimals Decimals.\n * @param {number|undefined} precision Precision.\n * @param {!ngeox.unitPrefix} formatLength The format function.\n * @param {!ngeox.number} formatAzimut The format function.\n * @return {string} Formatted measure.\n */\nexports.getFormattedAzimutRadius = function(\n  line, projection, decimals, precision, formatLength, formatAzimut) {\n\n  let output = exports.getFormattedAzimut(line, decimals, formatAzimut);\n\n  output += `, ${ngeoInteractionMeasure.getFormattedLength(\n    line, projection, precision, formatLength)}`;\n\n  return output;\n};\n\n\n/**\n * Format measure output of azimut.\n * @param {!ol.geom.LineString} line LineString.\n * @param {number|undefined} decimals Decimals.\n * @param {!ngeox.number} format The format function.\n * @return {string} Formatted measure.\n */\nexports.getFormattedAzimut = function(line, decimals, format) {\n  const azimut = exports.getAzimut(line);\n  return `${format(azimut, decimals)}`;\n};\n\n\n/**\n * Compute azimut from a 2 points line.\n * @param {ol.geom.LineString} line LineString.\n * @return {number} Azimut value.\n */\nexports.getAzimut = function(line) {\n  const coords = line.getCoordinates();\n  const dx = coords[1][0] - coords[0][0];\n  const dy = coords[1][1] - coords[0][1];\n  const rad = Math.acos(dy / Math.sqrt(dx * dx + dy * dy));\n  const factor = dx > 0 ? 1 : -1;\n  return (factor * rad * 180 / Math.PI) % 360;\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/interaction/MeasureAzimut.js","/**\n * @module ngeo.interaction.DrawAzimut\n*/\nimport googAsserts from 'goog/asserts.js';\nimport olFeature from 'ol/Feature.js';\nimport olMapBrowserEvent from 'ol/MapBrowserEvent.js';\nimport olEvents from 'ol/events.js';\nimport * as olFunctions from 'ol/functions.js';\nimport olGeomCircle from 'ol/geom/Circle.js';\nimport olGeomGeometryCollection from 'ol/geom/GeometryCollection.js';\nimport olGeomLineString from 'ol/geom/LineString.js';\nimport olGeomPoint from 'ol/geom/Point.js';\nimport olInteractionDraw from 'ol/interaction/Draw.js';\nimport olInteractionPointer from 'ol/interaction/Pointer.js';\nimport olLayerVector from 'ol/layer/Vector.js';\nimport olSourceVector from 'ol/source/Vector.js';\n\n/**\n * @classdesc\n * Interaction dedicated to measure azimut.\n *\n * @constructor\n * @struct\n * @extends {ol.interaction.Pointer}\n * @param {olx.interaction.PointerOptions} options Options.\n */\nconst exports = function(options) {\n\n  olInteractionPointer.call(this, {\n    handleDownEvent: exports.handleDownEvent_,\n    handleEvent: exports.handleEvent_,\n    handleUpEvent: exports.handleUpEvent_\n  });\n\n  /**\n   * @type {ol.Pixel}\n   * @private\n   */\n  this.downPx_ = null;\n\n  /**\n   * Target source for drawn features.\n   * @type {ol.source.Vector}\n   * @private\n   */\n  this.source_ = options.source !== undefined ? options.source : null;\n\n  /**\n   * Tglls whether the drawing has started or not.\n   * @type {boolean}\n   * @private\n   */\n  this.started_ = false;\n\n  /**\n   * Sketch feature.\n   * @type {ol.Feature}\n   * @private\n   */\n  this.sketchFeature_ = null;\n\n  /**\n   * Sketch point.\n   * @type {ol.Feature}\n   * @private\n   */\n  this.sketchPoint_ = null;\n\n\n  /**\n   * Squared tolerance for handling up events.  If the squared distance\n   * between a down and up event is greater than this tolerance, up events\n   * will not be handled.\n   * @type {number}\n   * @private\n   */\n  this.squaredClickTolerance_ = 4;\n\n\n  /**\n   * Vector layer where our sketch features are drawn.\n   * @type {ol.layer.Vector}\n   * @private\n   */\n  this.sketchLayer_ = new olLayerVector({\n    source: new olSourceVector({\n      useSpatialIndex: false,\n      wrapX: false\n    }),\n    style: options.style !== undefined ?\n      options.style : olInteractionDraw.getDefaultStyleFunction()\n  });\n\n  olEvents.listen(this, 'change:active', this.updateState_, this);\n};\n\nol.inherits(exports, olInteractionPointer);\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} event Event.\n * @return {boolean} Start drag sequence?\n * @this {ngeo.interaction.DrawAzimut}\n * @private\n */\nexports.handleDownEvent_ = function(event) {\n  this.downPx_ = event.pixel;\n  return true;\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} event Event.\n * @return {boolean} Stop drag sequence?\n * @this {ngeo.interaction.DrawAzimut}\n * @private\n */\nexports.handleUpEvent_ = function(event) {\n  const downPx = this.downPx_;\n  const clickPx = event.pixel;\n  const dx = downPx[0] - clickPx[0];\n  const dy = downPx[1] - clickPx[1];\n  const squaredDistance = dx * dx + dy * dy;\n  let pass = true;\n  if (squaredDistance <= this.squaredClickTolerance_) {\n    this.handlePointerMove_(event);\n    if (!this.started_) {\n      this.startDrawing_(event);\n    } else {\n      this.finishDrawing_();\n    }\n    pass = false;\n  }\n  return pass;\n};\n\n\n/**\n * @param {ol.MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {ngeo.interaction.DrawAzimut}\n * @private\n */\nexports.handleEvent_ = function(mapBrowserEvent) {\n  let pass = true;\n  if (mapBrowserEvent.type === 'pointermove') {\n    pass = this.handlePointerMove_(mapBrowserEvent);\n  } else if (mapBrowserEvent.type === 'dblclick') {\n    pass = false;\n  }\n  return olInteractionPointer.handleEvent.call(this, mapBrowserEvent) && pass;\n};\n\n\n/**\n * Handle move events.\n * @param {ol.MapBrowserEvent} event A move event.\n * @return {boolean} Pass the event to other interactions.\n * @private\n */\nexports.prototype.handlePointerMove_ = function(event) {\n  if (this.started_) {\n    this.modifyDrawing_(event);\n  } else {\n    this.createOrUpdateSketchPoint_(event);\n  }\n  return true;\n};\n\n\n/**\n * @param {ol.MapBrowserEvent} event Event.\n * @private\n */\nexports.prototype.createOrUpdateSketchPoint_ = function(event) {\n  const coordinates = event.coordinate.slice();\n  if (this.sketchPoint_ === null) {\n    this.sketchPoint_ = new olFeature(new olGeomPoint(coordinates));\n    this.updateSketchFeatures_();\n  } else {\n    const sketchPointGeom = this.sketchPoint_.getGeometry();\n    googAsserts.assertInstanceof(sketchPointGeom, olGeomPoint);\n    sketchPointGeom.setCoordinates(coordinates);\n  }\n};\n\n\n/**\n * Redraw the skecth features.\n * @private\n */\nexports.prototype.updateSketchFeatures_ = function() {\n  const sketchFeatures = [];\n  if (this.sketchFeature_ !== null) {\n    sketchFeatures.push(this.sketchFeature_);\n  }\n  if (this.sketchPoint_ !== null) {\n    sketchFeatures.push(this.sketchPoint_);\n  }\n  const source = this.sketchLayer_.getSource();\n  source.clear(true);\n  source.addFeatures(sketchFeatures);\n};\n\n\n/**\n * Start the drawing.\n * @param {ol.MapBrowserEvent} event Event.\n * @private\n */\nexports.prototype.startDrawing_ = function(event) {\n  const start = event.coordinate;\n  this.started_ = true;\n  const line = new olGeomLineString([start.slice(), start.slice()]);\n  const circle = new olGeomCircle(start, 0);\n  const geometry = new olGeomGeometryCollection([line, circle]);\n  googAsserts.assert(geometry !== undefined);\n  this.sketchFeature_ = new olFeature();\n  this.sketchFeature_.setGeometry(geometry);\n  this.updateSketchFeatures_();\n  this.dispatchEvent(new olInteractionDraw.Event(\n    /** @type {ol.interaction.DrawEventType} */ ('drawstart'), this.sketchFeature_));\n};\n\n\n/**\n * Modify the drawing.\n * @param {ol.MapBrowserEvent} event Event.\n * @private\n */\nexports.prototype.modifyDrawing_ = function(event) {\n  const coordinate = event.coordinate;\n  const geometry = googAsserts.assertInstanceof(\n    this.sketchFeature_.getGeometry(), olGeomGeometryCollection);\n  const geometries = geometry.getGeometriesArray();\n  const line = geometries[0];\n  googAsserts.assertInstanceof(line, olGeomLineString);\n  const coordinates = line.getCoordinates();\n  const sketchPointGeom = this.sketchPoint_.getGeometry();\n  googAsserts.assertInstanceof(sketchPointGeom, olGeomPoint);\n  sketchPointGeom.setCoordinates(coordinate);\n  const last = coordinates[coordinates.length - 1];\n  last[0] = coordinate[0];\n  last[1] = coordinate[1];\n  googAsserts.assertInstanceof(line, olGeomLineString);\n  line.setCoordinates(coordinates);\n  const circle = googAsserts.assertInstanceof(geometries[1], olGeomCircle);\n  circle.setRadius(line.getLength());\n  this.updateSketchFeatures_();\n};\n\n\n/**\n * Stop drawing without adding the sketch feature to the target layer.\n * @return {ol.Feature} The sketch feature (or null if none).\n * @private\n */\nexports.prototype.abortDrawing_ = function() {\n  this.started_ = false;\n  const sketchFeature = this.sketchFeature_;\n  if (sketchFeature !== null) {\n    this.sketchFeature_ = null;\n    this.sketchPoint_ = null;\n    this.sketchLayer_.getSource().clear(true);\n  }\n  return sketchFeature;\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.shouldStopEvent = olFunctions.FALSE;\n\n\n/**\n * @private\n */\nexports.prototype.updateState_ = function() {\n  const map = this.getMap();\n  const active = this.getActive();\n  if (map === null || !active) {\n    this.abortDrawing_();\n  }\n  this.sketchLayer_.setMap(active ? map : null);\n};\n\n\n/**\n * Stop drawing and add the sketch feature to the target layer.\n * @private\n */\nexports.prototype.finishDrawing_ = function() {\n  const sketchFeature = this.abortDrawing_();\n  googAsserts.assert(sketchFeature !== null);\n\n  if (this.source_ !== null) {\n    this.source_.addFeature(sketchFeature);\n  }\n\n  this.dispatchEvent(new olInteractionDraw.Event(\n    /** @type {ol.interaction.DrawEventType} */ ('drawend'), sketchFeature));\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.setMap = function(map) {\n  olInteractionPointer.prototype.setMap.call(this, map);\n  this.updateState_();\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/interaction/DrawAzimut.js","/**\n * @module ngeo.misc.ToolActivateMgr\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport googAsserts from 'goog/asserts.js';\nimport ngeoMiscToolActivate from 'ngeo/misc/ToolActivate.js';\n\n/**\n * Provides a service to manage the activation of `ngeo.misc.ToolActivate` objects.\n *\n * Example:\n *\n * Each tool must be registered before using it.\n *\n *     let tool = new ngeo.misc.ToolActivate(interaction, 'active');\n *     ngeoToolActivateMgr.registerTool('mapTools', tool);\n *\n * A tool will be registered in a group identified by a group name.\n * Once registered a tool can be activated and deactivated. When activating a\n * tool, all others tools in the same group will be deactivated.\n *\n *     ngeoToolActivateMgr.activateTool(tool);\n *     ngeoToolActivateMgr.deactivateTool(tool);\n *\n * See our live examples:\n * [../examples/mapquery.html](../examples/mapquery.html)\n * [../examples/toolActivate.html](../examples/toolActivate.html)\n *\n * @param {angular.Scope} $rootScope The rootScope provider.\n * @constructor\n * @struct\n * @ngdoc service\n * @ngname ngeoToolActivateMgr\n *//* @ngInject\n */\nconst exports = function($rootScope) {\n\n  /**\n   * @type {!Object.<string, Array.<ngeox.miscToolActivateMgrEntry>>}\n   * @private\n   */\n  this.groups_ = {};\n\n  /**\n   * The scope.\n   * @type {angular.Scope}\n   * @private\n   */\n  this.scope_ = $rootScope;\n};\n\n\n/**\n * Register a tool.\n * @param {string} groupName Name of the group of this tool.\n * @param {ngeo.misc.ToolActivate} tool Tool to register.\n * @param {boolean=} opt_defaultActivate If true, this tool will be activated\n *     when all other tools in the group are deactivated.\n * @export\n */\nexports.prototype.registerTool = function(groupName, tool,\n  opt_defaultActivate) {\n  let entries = this.groups_[groupName];\n  if (!entries) {\n    entries = this.groups_[groupName] = [];\n  }\n\n  const unlisten = this.scope_.$watch(\n    tool.getActive,\n    (newVal, oldVal) => {\n      if (newVal === oldVal) {\n        return;\n      }\n      if (newVal) {\n        this.deactivateTools_(groupName, tool);\n      } else {\n        this.activateDefault_(groupName);\n      }\n    });\n\n  entries.push({\n    tool: tool,\n    defaultTool: opt_defaultActivate || false,\n    unlisten: unlisten\n  });\n\n  if (googAsserts.ENABLE_ASSERTS) {\n    // check that only one default tool per group exists\n    let defaultTools = 0;\n    entries.forEach((entry) => {\n      if (entry.defaultTool) {\n        defaultTools++;\n      }\n    });\n    googAsserts.assert(\n      defaultTools <= 1, `more than one default tool in group ${groupName}`);\n  }\n};\n\n\n/**\n * Unregister a tool from a group.\n * @param {string} groupName Name of the group of this tool.\n * @param {ngeo.misc.ToolActivate} tool Tool to unregister.\n * @export\n */\nexports.prototype.unregisterTool = function(groupName, tool) {\n  const entries = this.groups_[groupName];\n  if (entries) {\n    for (let i = 0; i < entries.length; i++) {\n      if (entries[i].tool == tool) {\n        entries[i].unlisten();\n        entries.splice(i, 1);\n        break;\n      }\n    }\n  }\n};\n\n\n/**\n * Unregister each tool from a group.\n * @param {string} groupName Name of the group of tools to unregister.\n * @export\n */\nexports.prototype.unregisterGroup = function(groupName) {\n  const entries = this.groups_[groupName];\n  if (entries) {\n    for (let i = 0; i < entries.length; i++) {\n      entries[i].unlisten();\n    }\n    delete this.groups_[groupName];\n  }\n};\n\n\n/**\n * Activate a tool.\n * @param {ngeo.misc.ToolActivate} tool Tool to activate.\n * @export\n */\nexports.prototype.activateTool = function(tool) {\n  tool.setActive(true);\n};\n\n\n/**\n * Deactivate a tool.\n * @param {ngeo.misc.ToolActivate} tool Tool to deactivate.\n * @export\n */\nexports.prototype.deactivateTool = function(tool) {\n  tool.setActive(false);\n};\n\n\n/**\n * Deactivate all tools except the given one.\n *\n * @param {string} groupName Name of the group.\n * @param {ngeo.misc.ToolActivate} tool Tool to activate.\n * @private\n */\nexports.prototype.deactivateTools_ = function(groupName, tool) {\n  const entries = this.groups_[groupName];\n  for (let i = 0; i < entries.length; i++) {\n    if (tool != entries[i].tool) {\n      entries[i].tool.setActive(false);\n    }\n  }\n};\n\n\n/**\n * Activate the default tool in the given group if no other tool is active.\n *\n * @param {string} groupName Name of the group.\n * @private\n */\nexports.prototype.activateDefault_ = function(groupName) {\n  const entries = this.groups_[groupName];\n  let defaultTool = null;\n  let hasActiveTool = false;\n\n  for (let i = 0; i < entries.length; i++) {\n    hasActiveTool = hasActiveTool || entries[i].tool.getActive();\n\n    if (entries[i].defaultTool) {\n      defaultTool = entries[i].tool;\n    }\n  }\n\n  if (!hasActiveTool && defaultTool !== null) {\n    defaultTool.setActive(true);\n  }\n};\n\n\nexports.module = angular.module('ngeoToolActivateMgr', []);\nexports.module.service('ngeoToolActivateMgr', exports);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/misc/ToolActivateMgr.js","/**\n * @module ol/format/KML\n */\nimport {inherits} from '../index.js';\nimport Feature from '../Feature.js';\nimport {extend, includes} from '../array.js';\nimport {assert} from '../asserts.js';\nimport {asArray} from '../color.js';\nimport {transformWithOptions} from '../format/Feature.js';\nimport XMLFeature from '../format/XMLFeature.js';\nimport XSD from '../format/XSD.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {toRadians} from '../math.js';\nimport {get as getProjection} from '../proj.js';\nimport Fill from '../style/Fill.js';\nimport Icon from '../style/Icon.js';\nimport IconAnchorUnits from '../style/IconAnchorUnits.js';\nimport IconOrigin from '../style/IconOrigin.js';\nimport Stroke from '../style/Stroke.js';\nimport Style from '../style/Style.js';\nimport Text from '../style/Text.js';\nimport _ol_xml_ from '../xml.js';\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the KML format.\n *\n * Note that the KML format uses the URL() constructor. Older browsers such as IE\n * which do not support this will need a URL polyfill to be loaded before use.\n *\n * @constructor\n * @extends {ol.format.XMLFeature}\n * @param {olx.format.KMLOptions=} opt_options Options.\n * @api\n */\nconst KML = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  XMLFeature.call(this);\n\n  if (!KML.DEFAULT_STYLE_ARRAY_) {\n    KML.createStyleDefaults_();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  this.defaultDataProjection = getProjection('EPSG:4326');\n\n  /**\n   * @private\n   * @type {Array.<ol.style.Style>}\n   */\n  this.defaultStyle_ = options.defaultStyle ?\n    options.defaultStyle : KML.DEFAULT_STYLE_ARRAY_;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.extractStyles_ = options.extractStyles !== undefined ?\n    options.extractStyles : true;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.writeStyles_ = options.writeStyles !== undefined ?\n    options.writeStyles : true;\n\n  /**\n   * @private\n   * @type {Object.<string, (Array.<ol.style.Style>|string)>}\n   */\n  this.sharedStyles_ = {};\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.showPointNames_ = options.showPointNames !== undefined ?\n    options.showPointNames : true;\n\n};\n\ninherits(KML, XMLFeature);\n\n\n/**\n * @const\n * @type {Array.<string>}\n * @private\n */\nKML.GX_NAMESPACE_URIS_ = [\n  'http://www.google.com/kml/ext/2.2'\n];\n\n\n/**\n * @const\n * @type {Array.<string>}\n * @private\n */\nKML.NAMESPACE_URIS_ = [\n  null,\n  'http://earth.google.com/kml/2.0',\n  'http://earth.google.com/kml/2.1',\n  'http://earth.google.com/kml/2.2',\n  'http://www.opengis.net/kml/2.2'\n];\n\n\n/**\n * @const\n * @type {string}\n * @private\n */\nKML.SCHEMA_LOCATION_ = 'http://www.opengis.net/kml/2.2 ' +\n    'https://developers.google.com/kml/schema/kml22gx.xsd';\n\n\n/**\n * @return {Array.<ol.style.Style>} Default style.\n * @private\n */\nKML.createStyleDefaults_ = function() {\n  /**\n   * @const\n   * @type {ol.Color}\n   * @private\n   */\n  KML.DEFAULT_COLOR_ = [255, 255, 255, 1];\n\n  /**\n   * @const\n   * @type {ol.style.Fill}\n   * @private\n   */\n  KML.DEFAULT_FILL_STYLE_ = new Fill({\n    color: KML.DEFAULT_COLOR_\n  });\n\n  /**\n   * @const\n   * @type {ol.Size}\n   * @private\n   */\n  KML.DEFAULT_IMAGE_STYLE_ANCHOR_ = [20, 2]; // FIXME maybe [8, 32] ?\n\n  /**\n   * @const\n   * @type {ol.style.IconAnchorUnits}\n   * @private\n   */\n  KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_ = IconAnchorUnits.PIXELS;\n\n  /**\n   * @const\n   * @type {ol.style.IconAnchorUnits}\n   * @private\n   */\n  KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_ = IconAnchorUnits.PIXELS;\n\n  /**\n   * @const\n   * @type {ol.Size}\n   * @private\n   */\n  KML.DEFAULT_IMAGE_STYLE_SIZE_ = [64, 64];\n\n  /**\n   * @const\n   * @type {string}\n   * @private\n   */\n  KML.DEFAULT_IMAGE_STYLE_SRC_ =\n      'https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png';\n\n  /**\n   * @const\n   * @type {number}\n   * @private\n   */\n  KML.DEFAULT_IMAGE_SCALE_MULTIPLIER_ = 0.5;\n\n  /**\n   * @const\n   * @type {ol.style.Image}\n   * @private\n   */\n  KML.DEFAULT_IMAGE_STYLE_ = new Icon({\n    anchor: KML.DEFAULT_IMAGE_STYLE_ANCHOR_,\n    anchorOrigin: IconOrigin.BOTTOM_LEFT,\n    anchorXUnits: KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_,\n    anchorYUnits: KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_,\n    crossOrigin: 'anonymous',\n    rotation: 0,\n    scale: KML.DEFAULT_IMAGE_SCALE_MULTIPLIER_,\n    size: KML.DEFAULT_IMAGE_STYLE_SIZE_,\n    src: KML.DEFAULT_IMAGE_STYLE_SRC_\n  });\n\n  /**\n   * @const\n   * @type {string}\n   * @private\n   */\n  KML.DEFAULT_NO_IMAGE_STYLE_ = 'NO_IMAGE';\n\n  /**\n   * @const\n   * @type {ol.style.Stroke}\n   * @private\n   */\n  KML.DEFAULT_STROKE_STYLE_ = new Stroke({\n    color: KML.DEFAULT_COLOR_,\n    width: 1\n  });\n\n  /**\n   * @const\n   * @type {ol.style.Stroke}\n   * @private\n   */\n  KML.DEFAULT_TEXT_STROKE_STYLE_ = new Stroke({\n    color: [51, 51, 51, 1],\n    width: 2\n  });\n\n  /**\n   * @const\n   * @type {ol.style.Text}\n   * @private\n   */\n  KML.DEFAULT_TEXT_STYLE_ = new Text({\n    font: 'bold 16px Helvetica',\n    fill: KML.DEFAULT_FILL_STYLE_,\n    stroke: KML.DEFAULT_TEXT_STROKE_STYLE_,\n    scale: 0.8\n  });\n\n  /**\n   * @const\n   * @type {ol.style.Style}\n   * @private\n   */\n  KML.DEFAULT_STYLE_ = new Style({\n    fill: KML.DEFAULT_FILL_STYLE_,\n    image: KML.DEFAULT_IMAGE_STYLE_,\n    text: KML.DEFAULT_TEXT_STYLE_,\n    stroke: KML.DEFAULT_STROKE_STYLE_,\n    zIndex: 0\n  });\n\n  /**\n   * @const\n   * @type {Array.<ol.style.Style>}\n   * @private\n   */\n  KML.DEFAULT_STYLE_ARRAY_ = [KML.DEFAULT_STYLE_];\n\n  return KML.DEFAULT_STYLE_ARRAY_;\n};\n\n\n/**\n * @const\n * @type {Object.<string, ol.style.IconAnchorUnits>}\n * @private\n */\nKML.ICON_ANCHOR_UNITS_MAP_ = {\n  'fraction': IconAnchorUnits.FRACTION,\n  'pixels': IconAnchorUnits.PIXELS,\n  'insetPixels': IconAnchorUnits.PIXELS\n};\n\n\n/**\n * @param {ol.style.Style|undefined} foundStyle Style.\n * @param {string} name Name.\n * @return {ol.style.Style} style Style.\n * @private\n */\nKML.createNameStyleFunction_ = function(foundStyle, name) {\n  let textStyle = null;\n  const textOffset = [0, 0];\n  let textAlign = 'start';\n  if (foundStyle.getImage()) {\n    let imageSize = foundStyle.getImage().getImageSize();\n    if (imageSize === null) {\n      imageSize = KML.DEFAULT_IMAGE_STYLE_SIZE_;\n    }\n    if (imageSize.length == 2) {\n      const imageScale = foundStyle.getImage().getScale();\n      // Offset the label to be centered to the right of the icon, if there is\n      // one.\n      textOffset[0] = imageScale * imageSize[0] / 2;\n      textOffset[1] = -imageScale * imageSize[1] / 2;\n      textAlign = 'left';\n    }\n  }\n  if (foundStyle.getText() !== null) {\n    // clone the text style, customizing it with name, alignments and offset.\n    // Note that kml does not support many text options that OpenLayers does (rotation, textBaseline).\n    const foundText = foundStyle.getText();\n    textStyle = foundText.clone();\n    textStyle.setFont(foundText.getFont() || KML.DEFAULT_TEXT_STYLE_.getFont());\n    textStyle.setScale(foundText.getScale() || KML.DEFAULT_TEXT_STYLE_.getScale());\n    textStyle.setFill(foundText.getFill() || KML.DEFAULT_TEXT_STYLE_.getFill());\n    textStyle.setStroke(foundText.getStroke() || KML.DEFAULT_TEXT_STROKE_STYLE_);\n  } else {\n    textStyle = KML.DEFAULT_TEXT_STYLE_.clone();\n  }\n  textStyle.setText(name);\n  textStyle.setOffsetX(textOffset[0]);\n  textStyle.setOffsetY(textOffset[1]);\n  textStyle.setTextAlign(textAlign);\n\n  const nameStyle = new Style({\n    text: textStyle\n  });\n  return nameStyle;\n};\n\n\n/**\n * @param {Array.<ol.style.Style>|undefined} style Style.\n * @param {string} styleUrl Style URL.\n * @param {Array.<ol.style.Style>} defaultStyle Default style.\n * @param {Object.<string, (Array.<ol.style.Style>|string)>} sharedStyles Shared\n *          styles.\n * @param {boolean|undefined} showPointNames true to show names for point\n *          placemarks.\n * @return {ol.FeatureStyleFunction} Feature style function.\n * @private\n */\nKML.createFeatureStyleFunction_ = function(style, styleUrl,\n  defaultStyle, sharedStyles, showPointNames) {\n\n  return (\n    /**\n         * @param {number} resolution Resolution.\n         * @return {Array.<ol.style.Style>} Style.\n         * @this {ol.Feature}\n         */\n    function(resolution) {\n      let drawName = showPointNames;\n      /** @type {ol.style.Style|undefined} */\n      let nameStyle;\n      let name = '';\n      if (drawName) {\n        if (this.getGeometry()) {\n          drawName = (this.getGeometry().getType() ===\n                        GeometryType.POINT);\n        }\n      }\n\n      if (drawName) {\n        name = /** @type {string} */ (this.get('name'));\n        drawName = drawName && name;\n      }\n\n      if (style) {\n        if (drawName) {\n          nameStyle = KML.createNameStyleFunction_(style[0],\n            name);\n          return style.concat(nameStyle);\n        }\n        return style;\n      }\n      if (styleUrl) {\n        const foundStyle = KML.findStyle_(styleUrl, defaultStyle,\n          sharedStyles);\n        if (drawName) {\n          nameStyle = KML.createNameStyleFunction_(foundStyle[0],\n            name);\n          return foundStyle.concat(nameStyle);\n        }\n        return foundStyle;\n      }\n      if (drawName) {\n        nameStyle = KML.createNameStyleFunction_(defaultStyle[0],\n          name);\n        return defaultStyle.concat(nameStyle);\n      }\n      return defaultStyle;\n    }\n  );\n};\n\n\n/**\n * @param {Array.<ol.style.Style>|string|undefined} styleValue Style value.\n * @param {Array.<ol.style.Style>} defaultStyle Default style.\n * @param {Object.<string, (Array.<ol.style.Style>|string)>} sharedStyles\n * Shared styles.\n * @return {Array.<ol.style.Style>} Style.\n * @private\n */\nKML.findStyle_ = function(styleValue, defaultStyle, sharedStyles) {\n  if (Array.isArray(styleValue)) {\n    return styleValue;\n  } else if (typeof styleValue === 'string') {\n    // KML files in the wild occasionally forget the leading `#` on styleUrls\n    // defined in the same document.  Add a leading `#` if it enables to find\n    // a style.\n    if (!(styleValue in sharedStyles) && ('#' + styleValue in sharedStyles)) {\n      styleValue = '#' + styleValue;\n    }\n    return KML.findStyle_(\n      sharedStyles[styleValue], defaultStyle, sharedStyles);\n  } else {\n    return defaultStyle;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @private\n * @return {ol.Color|undefined} Color.\n */\nKML.readColor_ = function(node) {\n  const s = _ol_xml_.getAllTextContent(node, false);\n  // The KML specification states that colors should not include a leading `#`\n  // but we tolerate them.\n  const m = /^\\s*#?\\s*([0-9A-Fa-f]{8})\\s*$/.exec(s);\n  if (m) {\n    const hexColor = m[1];\n    return [\n      parseInt(hexColor.substr(6, 2), 16),\n      parseInt(hexColor.substr(4, 2), 16),\n      parseInt(hexColor.substr(2, 2), 16),\n      parseInt(hexColor.substr(0, 2), 16) / 255\n    ];\n\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @private\n * @return {Array.<number>|undefined} Flat coordinates.\n */\nKML.readFlatCoordinates_ = function(node) {\n  let s = _ol_xml_.getAllTextContent(node, false);\n  const flatCoordinates = [];\n  // The KML specification states that coordinate tuples should not include\n  // spaces, but we tolerate them.\n  const re =\n      /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*,\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)(?:\\s*,\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?))?\\s*/i;\n  let m;\n  while ((m = re.exec(s))) {\n    const x = parseFloat(m[1]);\n    const y = parseFloat(m[2]);\n    const z = m[3] ? parseFloat(m[3]) : 0;\n    flatCoordinates.push(x, y, z);\n    s = s.substr(m[0].length);\n  }\n  if (s !== '') {\n    return undefined;\n  }\n  return flatCoordinates;\n};\n\n\n/**\n * @param {Node} node Node.\n * @private\n * @return {string} URI.\n */\nKML.readURI_ = function(node) {\n  const s = _ol_xml_.getAllTextContent(node, false).trim();\n  let baseURI = node.baseURI;\n  if (!baseURI || baseURI == 'about:blank') {\n    baseURI = window.location.href;\n  }\n  if (baseURI) {\n    const url = new URL(s, baseURI);\n    return url.href;\n  } else {\n    return s;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @private\n * @return {ol.KMLVec2_} Vec2.\n */\nKML.readVec2_ = function(node) {\n  const xunits = node.getAttribute('xunits');\n  const yunits = node.getAttribute('yunits');\n  let origin;\n  if (xunits !== 'insetPixels') {\n    if (yunits !== 'insetPixels') {\n      origin = IconOrigin.BOTTOM_LEFT;\n    } else {\n      origin = IconOrigin.TOP_LEFT;\n    }\n  } else {\n    if (yunits !== 'insetPixels') {\n      origin = IconOrigin.BOTTOM_RIGHT;\n    } else {\n      origin = IconOrigin.TOP_RIGHT;\n    }\n  }\n  return {\n    x: parseFloat(node.getAttribute('x')),\n    xunits: KML.ICON_ANCHOR_UNITS_MAP_[xunits],\n    y: parseFloat(node.getAttribute('y')),\n    yunits: KML.ICON_ANCHOR_UNITS_MAP_[yunits],\n    origin: origin\n  };\n};\n\n\n/**\n * @param {Node} node Node.\n * @private\n * @return {number|undefined} Scale.\n */\nKML.readScale_ = function(node) {\n  return XSD.readDecimal(node);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Array.<ol.style.Style>|string|undefined} StyleMap.\n */\nKML.readStyleMapValue_ = function(node, objectStack) {\n  return _ol_xml_.pushParseAndPop(undefined,\n    KML.STYLE_MAP_PARSERS_, node, objectStack);\n};\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.IconStyleParser_ = function(node, objectStack) {\n  // FIXME refreshMode\n  // FIXME refreshInterval\n  // FIXME viewRefreshTime\n  // FIXME viewBoundScale\n  // FIXME viewFormat\n  // FIXME httpQuery\n  const object = _ol_xml_.pushParseAndPop(\n    {}, KML.ICON_STYLE_PARSERS_, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const IconObject = 'Icon' in object ? object['Icon'] : {};\n  const drawIcon = (!('Icon' in object) || Object.keys(IconObject).length > 0);\n  let src;\n  const href = /** @type {string|undefined} */\n      (IconObject['href']);\n  if (href) {\n    src = href;\n  } else if (drawIcon) {\n    src = KML.DEFAULT_IMAGE_STYLE_SRC_;\n  }\n  let anchor, anchorXUnits, anchorYUnits;\n  let anchorOrigin = IconOrigin.BOTTOM_LEFT;\n  const hotSpot = /** @type {ol.KMLVec2_|undefined} */\n      (object['hotSpot']);\n  if (hotSpot) {\n    anchor = [hotSpot.x, hotSpot.y];\n    anchorXUnits = hotSpot.xunits;\n    anchorYUnits = hotSpot.yunits;\n    anchorOrigin = hotSpot.origin;\n  } else if (src === KML.DEFAULT_IMAGE_STYLE_SRC_) {\n    anchor = KML.DEFAULT_IMAGE_STYLE_ANCHOR_;\n    anchorXUnits = KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_;\n    anchorYUnits = KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_;\n  } else if (/^http:\\/\\/maps\\.(?:google|gstatic)\\.com\\//.test(src)) {\n    anchor = [0.5, 0];\n    anchorXUnits = IconAnchorUnits.FRACTION;\n    anchorYUnits = IconAnchorUnits.FRACTION;\n  }\n\n  let offset;\n  const x = /** @type {number|undefined} */\n      (IconObject['x']);\n  const y = /** @type {number|undefined} */\n      (IconObject['y']);\n  if (x !== undefined && y !== undefined) {\n    offset = [x, y];\n  }\n\n  let size;\n  const w = /** @type {number|undefined} */\n      (IconObject['w']);\n  const h = /** @type {number|undefined} */\n      (IconObject['h']);\n  if (w !== undefined && h !== undefined) {\n    size = [w, h];\n  }\n\n  let rotation;\n  const heading = /** @type {number} */\n      (object['heading']);\n  if (heading !== undefined) {\n    rotation = toRadians(heading);\n  }\n\n  let scale = /** @type {number|undefined} */\n      (object['scale']);\n\n  if (drawIcon) {\n    if (src == KML.DEFAULT_IMAGE_STYLE_SRC_) {\n      size = KML.DEFAULT_IMAGE_STYLE_SIZE_;\n      if (scale === undefined) {\n        scale = KML.DEFAULT_IMAGE_SCALE_MULTIPLIER_;\n      }\n    }\n\n    const imageStyle = new Icon({\n      anchor: anchor,\n      anchorOrigin: anchorOrigin,\n      anchorXUnits: anchorXUnits,\n      anchorYUnits: anchorYUnits,\n      crossOrigin: 'anonymous', // FIXME should this be configurable?\n      offset: offset,\n      offsetOrigin: IconOrigin.BOTTOM_LEFT,\n      rotation: rotation,\n      scale: scale,\n      size: size,\n      src: src\n    });\n    styleObject['imageStyle'] = imageStyle;\n  } else {\n    // handle the case when we explicitly want to draw no icon.\n    styleObject['imageStyle'] = KML.DEFAULT_NO_IMAGE_STYLE_;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.LabelStyleParser_ = function(node, objectStack) {\n  // FIXME colorMode\n  const object = _ol_xml_.pushParseAndPop(\n    {}, KML.LABEL_STYLE_PARSERS_, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const textStyle = new Text({\n    fill: new Fill({\n      color: /** @type {ol.Color} */\n          ('color' in object ? object['color'] : KML.DEFAULT_COLOR_)\n    }),\n    scale: /** @type {number|undefined} */\n        (object['scale'])\n  });\n  styleObject['textStyle'] = textStyle;\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.LineStyleParser_ = function(node, objectStack) {\n  // FIXME colorMode\n  // FIXME gx:outerColor\n  // FIXME gx:outerWidth\n  // FIXME gx:physicalWidth\n  // FIXME gx:labelVisibility\n  const object = _ol_xml_.pushParseAndPop(\n    {}, KML.LINE_STYLE_PARSERS_, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const strokeStyle = new Stroke({\n    color: /** @type {ol.Color} */\n        ('color' in object ? object['color'] : KML.DEFAULT_COLOR_),\n    width: /** @type {number} */ ('width' in object ? object['width'] : 1)\n  });\n  styleObject['strokeStyle'] = strokeStyle;\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.PolyStyleParser_ = function(node, objectStack) {\n  // FIXME colorMode\n  const object = _ol_xml_.pushParseAndPop(\n    {}, KML.POLY_STYLE_PARSERS_, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const fillStyle = new Fill({\n    color: /** @type {ol.Color} */\n        ('color' in object ? object['color'] : KML.DEFAULT_COLOR_)\n  });\n  styleObject['fillStyle'] = fillStyle;\n  const fill = /** @type {boolean|undefined} */ (object['fill']);\n  if (fill !== undefined) {\n    styleObject['fill'] = fill;\n  }\n  const outline =\n      /** @type {boolean|undefined} */ (object['outline']);\n  if (outline !== undefined) {\n    styleObject['outline'] = outline;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Array.<number>} LinearRing flat coordinates.\n */\nKML.readFlatLinearRing_ = function(node, objectStack) {\n  return _ol_xml_.pushParseAndPop(null,\n    KML.FLAT_LINEAR_RING_PARSERS_, node, objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.gxCoordParser_ = function(node, objectStack) {\n  const gxTrackObject = /** @type {ol.KMLGxTrackObject_} */\n      (objectStack[objectStack.length - 1]);\n  const flatCoordinates = gxTrackObject.flatCoordinates;\n  const s = _ol_xml_.getAllTextContent(node, false);\n  const re =\n      /^\\s*([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s+([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s+([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s*$/i;\n  const m = re.exec(s);\n  if (m) {\n    const x = parseFloat(m[1]);\n    const y = parseFloat(m[2]);\n    const z = parseFloat(m[3]);\n    flatCoordinates.push(x, y, z, 0);\n  } else {\n    flatCoordinates.push(0, 0, 0, 0);\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {ol.geom.MultiLineString|undefined} MultiLineString.\n */\nKML.readGxMultiTrack_ = function(node, objectStack) {\n  const lineStrings = _ol_xml_.pushParseAndPop([],\n    KML.GX_MULTITRACK_GEOMETRY_PARSERS_, node, objectStack);\n  if (!lineStrings) {\n    return undefined;\n  }\n  const multiLineString = new MultiLineString(null);\n  multiLineString.setLineStrings(lineStrings);\n  return multiLineString;\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {ol.geom.LineString|undefined} LineString.\n */\nKML.readGxTrack_ = function(node, objectStack) {\n  const gxTrackObject = _ol_xml_.pushParseAndPop(\n    /** @type {ol.KMLGxTrackObject_} */ ({\n      flatCoordinates: [],\n      whens: []\n    }), KML.GX_TRACK_PARSERS_, node, objectStack);\n  if (!gxTrackObject) {\n    return undefined;\n  }\n  const flatCoordinates = gxTrackObject.flatCoordinates;\n  const whens = gxTrackObject.whens;\n  let i, ii;\n  for (i = 0, ii = Math.min(flatCoordinates.length, whens.length); i < ii;\n    ++i) {\n    flatCoordinates[4 * i + 3] = whens[i];\n  }\n  const lineString = new LineString(null);\n  lineString.setFlatCoordinates(GeometryLayout.XYZM, flatCoordinates);\n  return lineString;\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Object} Icon object.\n */\nKML.readIcon_ = function(node, objectStack) {\n  const iconObject = _ol_xml_.pushParseAndPop(\n    {}, KML.ICON_PARSERS_, node, objectStack);\n  if (iconObject) {\n    return iconObject;\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Array.<number>} Flat coordinates.\n */\nKML.readFlatCoordinatesFromNode_ = function(node, objectStack) {\n  return _ol_xml_.pushParseAndPop(null,\n    KML.GEOMETRY_FLAT_COORDINATES_PARSERS_, node, objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {ol.geom.LineString|undefined} LineString.\n */\nKML.readLineString_ = function(node, objectStack) {\n  const properties = _ol_xml_.pushParseAndPop({},\n    KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_, node,\n    objectStack);\n  const flatCoordinates =\n      KML.readFlatCoordinatesFromNode_(node, objectStack);\n  if (flatCoordinates) {\n    const lineString = new LineString(null);\n    lineString.setFlatCoordinates(GeometryLayout.XYZ, flatCoordinates);\n    lineString.setProperties(properties);\n    return lineString;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {ol.geom.Polygon|undefined} Polygon.\n */\nKML.readLinearRing_ = function(node, objectStack) {\n  const properties = _ol_xml_.pushParseAndPop({},\n    KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_, node,\n    objectStack);\n  const flatCoordinates =\n      KML.readFlatCoordinatesFromNode_(node, objectStack);\n  if (flatCoordinates) {\n    const polygon = new Polygon(null);\n    polygon.setFlatCoordinates(GeometryLayout.XYZ, flatCoordinates,\n      [flatCoordinates.length]);\n    polygon.setProperties(properties);\n    return polygon;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {ol.geom.Geometry} Geometry.\n */\nKML.readMultiGeometry_ = function(node, objectStack) {\n  const geometries = _ol_xml_.pushParseAndPop([],\n    KML.MULTI_GEOMETRY_PARSERS_, node, objectStack);\n  if (!geometries) {\n    return null;\n  }\n  if (geometries.length === 0) {\n    return new GeometryCollection(geometries);\n  }\n  /** @type {ol.geom.Geometry} */\n  let multiGeometry;\n  let homogeneous = true;\n  const type = geometries[0].getType();\n  let geometry, i, ii;\n  for (i = 1, ii = geometries.length; i < ii; ++i) {\n    geometry = geometries[i];\n    if (geometry.getType() != type) {\n      homogeneous = false;\n      break;\n    }\n  }\n  if (homogeneous) {\n    let layout;\n    let flatCoordinates;\n    if (type == GeometryType.POINT) {\n      const point = geometries[0];\n      layout = point.getLayout();\n      flatCoordinates = point.getFlatCoordinates();\n      for (i = 1, ii = geometries.length; i < ii; ++i) {\n        geometry = geometries[i];\n        extend(flatCoordinates, geometry.getFlatCoordinates());\n      }\n      multiGeometry = new MultiPoint(null);\n      multiGeometry.setFlatCoordinates(layout, flatCoordinates);\n      KML.setCommonGeometryProperties_(multiGeometry, geometries);\n    } else if (type == GeometryType.LINE_STRING) {\n      multiGeometry = new MultiLineString(null);\n      multiGeometry.setLineStrings(geometries);\n      KML.setCommonGeometryProperties_(multiGeometry, geometries);\n    } else if (type == GeometryType.POLYGON) {\n      multiGeometry = new MultiPolygon(null);\n      multiGeometry.setPolygons(geometries);\n      KML.setCommonGeometryProperties_(multiGeometry, geometries);\n    } else if (type == GeometryType.GEOMETRY_COLLECTION) {\n      multiGeometry = new GeometryCollection(geometries);\n    } else {\n      assert(false, 37); // Unknown geometry type found\n    }\n  } else {\n    multiGeometry = new GeometryCollection(geometries);\n  }\n  return /** @type {ol.geom.Geometry} */ (multiGeometry);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {ol.geom.Point|undefined} Point.\n */\nKML.readPoint_ = function(node, objectStack) {\n  const properties = _ol_xml_.pushParseAndPop({},\n    KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_, node,\n    objectStack);\n  const flatCoordinates =\n      KML.readFlatCoordinatesFromNode_(node, objectStack);\n  if (flatCoordinates) {\n    const point = new Point(null);\n    point.setFlatCoordinates(GeometryLayout.XYZ, flatCoordinates);\n    point.setProperties(properties);\n    return point;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {ol.geom.Polygon|undefined} Polygon.\n */\nKML.readPolygon_ = function(node, objectStack) {\n  const properties = _ol_xml_.pushParseAndPop(/** @type {Object<string,*>} */ ({}),\n    KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_, node,\n    objectStack);\n  const flatLinearRings = _ol_xml_.pushParseAndPop([null],\n    KML.FLAT_LINEAR_RINGS_PARSERS_, node, objectStack);\n  if (flatLinearRings && flatLinearRings[0]) {\n    const polygon = new Polygon(null);\n    const flatCoordinates = flatLinearRings[0];\n    const ends = [flatCoordinates.length];\n    let i, ii;\n    for (i = 1, ii = flatLinearRings.length; i < ii; ++i) {\n      extend(flatCoordinates, flatLinearRings[i]);\n      ends.push(flatCoordinates.length);\n    }\n    polygon.setFlatCoordinates(\n      GeometryLayout.XYZ, flatCoordinates, ends);\n    polygon.setProperties(properties);\n    return polygon;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Array.<ol.style.Style>} Style.\n */\nKML.readStyle_ = function(node, objectStack) {\n  const styleObject = _ol_xml_.pushParseAndPop(\n    {}, KML.STYLE_PARSERS_, node, objectStack);\n  if (!styleObject) {\n    return null;\n  }\n  let fillStyle = /** @type {ol.style.Fill} */\n      ('fillStyle' in styleObject ?\n        styleObject['fillStyle'] : KML.DEFAULT_FILL_STYLE_);\n  const fill = /** @type {boolean|undefined} */ (styleObject['fill']);\n  if (fill !== undefined && !fill) {\n    fillStyle = null;\n  }\n  let imageStyle = /** @type {ol.style.Image} */\n      ('imageStyle' in styleObject ?\n        styleObject['imageStyle'] : KML.DEFAULT_IMAGE_STYLE_);\n  if (imageStyle == KML.DEFAULT_NO_IMAGE_STYLE_) {\n    imageStyle = undefined;\n  }\n  const textStyle = /** @type {ol.style.Text} */\n      ('textStyle' in styleObject ?\n        styleObject['textStyle'] : KML.DEFAULT_TEXT_STYLE_);\n  let strokeStyle = /** @type {ol.style.Stroke} */\n      ('strokeStyle' in styleObject ?\n        styleObject['strokeStyle'] : KML.DEFAULT_STROKE_STYLE_);\n  const outline = /** @type {boolean|undefined} */\n      (styleObject['outline']);\n  if (outline !== undefined && !outline) {\n    strokeStyle = null;\n  }\n  return [new Style({\n    fill: fillStyle,\n    image: imageStyle,\n    stroke: strokeStyle,\n    text: textStyle,\n    zIndex: undefined // FIXME\n  })];\n};\n\n\n/**\n * Reads an array of geometries and creates arrays for common geometry\n * properties. Then sets them to the multi geometry.\n * @param {ol.geom.MultiPoint|ol.geom.MultiLineString|ol.geom.MultiPolygon}\n *     multiGeometry A multi-geometry.\n * @param {Array.<ol.geom.Geometry>} geometries List of geometries.\n * @private\n */\nKML.setCommonGeometryProperties_ = function(multiGeometry,\n  geometries) {\n  const ii = geometries.length;\n  const extrudes = new Array(geometries.length);\n  const tessellates = new Array(geometries.length);\n  const altitudeModes = new Array(geometries.length);\n  let geometry, i, hasExtrude, hasTessellate, hasAltitudeMode;\n  hasExtrude = hasTessellate = hasAltitudeMode = false;\n  for (i = 0; i < ii; ++i) {\n    geometry = geometries[i];\n    extrudes[i] = geometry.get('extrude');\n    tessellates[i] = geometry.get('tessellate');\n    altitudeModes[i] = geometry.get('altitudeMode');\n    hasExtrude = hasExtrude || extrudes[i] !== undefined;\n    hasTessellate = hasTessellate || tessellates[i] !== undefined;\n    hasAltitudeMode = hasAltitudeMode || altitudeModes[i];\n  }\n  if (hasExtrude) {\n    multiGeometry.set('extrude', extrudes);\n  }\n  if (hasTessellate) {\n    multiGeometry.set('tessellate', tessellates);\n  }\n  if (hasAltitudeMode) {\n    multiGeometry.set('altitudeMode', altitudeModes);\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.DataParser_ = function(node, objectStack) {\n  const name = node.getAttribute('name');\n  _ol_xml_.parseNode(KML.DATA_PARSERS_, node, objectStack);\n  const featureObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  if (name !== null) {\n    featureObject[name] = featureObject.value;\n  } else if (featureObject.displayName !== null) {\n    featureObject[featureObject.displayName] = featureObject.value;\n  }\n  delete featureObject['value'];\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.ExtendedDataParser_ = function(node, objectStack) {\n  _ol_xml_.parseNode(KML.EXTENDED_DATA_PARSERS_, node, objectStack);\n};\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.RegionParser_ = function(node, objectStack) {\n  _ol_xml_.parseNode(KML.REGION_PARSERS_, node, objectStack);\n};\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.PairDataParser_ = function(node, objectStack) {\n  const pairObject = _ol_xml_.pushParseAndPop(\n    {}, KML.PAIR_PARSERS_, node, objectStack);\n  if (!pairObject) {\n    return;\n  }\n  const key = /** @type {string|undefined} */\n      (pairObject['key']);\n  if (key && key == 'normal') {\n    const styleUrl = /** @type {string|undefined} */\n        (pairObject['styleUrl']);\n    if (styleUrl) {\n      objectStack[objectStack.length - 1] = styleUrl;\n    }\n    const Style = /** @type {ol.style.Style} */\n        (pairObject['Style']);\n    if (Style) {\n      objectStack[objectStack.length - 1] = Style;\n    }\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.PlacemarkStyleMapParser_ = function(node, objectStack) {\n  const styleMapValue = KML.readStyleMapValue_(node, objectStack);\n  if (!styleMapValue) {\n    return;\n  }\n  const placemarkObject = objectStack[objectStack.length - 1];\n  if (Array.isArray(styleMapValue)) {\n    placemarkObject['Style'] = styleMapValue;\n  } else if (typeof styleMapValue === 'string') {\n    placemarkObject['styleUrl'] = styleMapValue;\n  } else {\n    assert(false, 38); // `styleMapValue` has an unknown type\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.SchemaDataParser_ = function(node, objectStack) {\n  _ol_xml_.parseNode(KML.SCHEMA_DATA_PARSERS_, node, objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.SimpleDataParser_ = function(node, objectStack) {\n  const name = node.getAttribute('name');\n  if (name !== null) {\n    const data = XSD.readString(node);\n    const featureObject =\n        /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    featureObject[name] = data;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.LatLonAltBoxParser_ = function(node, objectStack) {\n  const object = _ol_xml_.pushParseAndPop({}, KML.LAT_LON_ALT_BOX_PARSERS_, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const regionObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const extent = [\n    parseFloat(object['west']),\n    parseFloat(object['south']),\n    parseFloat(object['east']),\n    parseFloat(object['north'])\n  ];\n  regionObject['extent'] = extent;\n  regionObject['altitudeMode'] = object['altitudeMode'];\n  regionObject['minAltitude'] = parseFloat(object['minAltitude']);\n  regionObject['maxAltitude'] = parseFloat(object['maxAltitude']);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.LodParser_ = function(node, objectStack) {\n  const object = _ol_xml_.pushParseAndPop({}, KML.LOD_PARSERS_, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const lodObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  lodObject['minLodPixels'] = parseFloat(object['minLodPixels']);\n  lodObject['maxLodPixels'] = parseFloat(object['maxLodPixels']);\n  lodObject['minFadeExtent'] = parseFloat(object['minFadeExtent']);\n  lodObject['maxFadeExtent'] = parseFloat(object['maxFadeExtent']);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.innerBoundaryIsParser_ = function(node, objectStack) {\n  /** @type {Array.<number>|undefined} */\n  const flatLinearRing = _ol_xml_.pushParseAndPop(undefined,\n    KML.INNER_BOUNDARY_IS_PARSERS_, node, objectStack);\n  if (flatLinearRing) {\n    const flatLinearRings = /** @type {Array.<Array.<number>>} */\n        (objectStack[objectStack.length - 1]);\n    flatLinearRings.push(flatLinearRing);\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.outerBoundaryIsParser_ = function(node, objectStack) {\n  /** @type {Array.<number>|undefined} */\n  const flatLinearRing = _ol_xml_.pushParseAndPop(undefined,\n    KML.OUTER_BOUNDARY_IS_PARSERS_, node, objectStack);\n  if (flatLinearRing) {\n    const flatLinearRings = /** @type {Array.<Array.<number>>} */\n        (objectStack[objectStack.length - 1]);\n    flatLinearRings[0] = flatLinearRing;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.LinkParser_ = function(node, objectStack) {\n  _ol_xml_.parseNode(KML.LINK_PARSERS_, node, objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.whenParser_ = function(node, objectStack) {\n  const gxTrackObject = /** @type {ol.KMLGxTrackObject_} */\n      (objectStack[objectStack.length - 1]);\n  const whens = gxTrackObject.whens;\n  const s = _ol_xml_.getAllTextContent(node, false);\n  const when = Date.parse(s);\n  whens.push(isNaN(when) ? 0 : when);\n};\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.DATA_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'displayName': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'value': _ol_xml_.makeObjectPropertySetter(XSD.readString)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.EXTENDED_DATA_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'Data': KML.DataParser_,\n    'SchemaData': KML.SchemaDataParser_\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.REGION_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'LatLonAltBox': KML.LatLonAltBoxParser_,\n    'Lod': KML.LodParser_\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.LAT_LON_ALT_BOX_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'altitudeMode': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'minAltitude': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'maxAltitude': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'north': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'south': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'east': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'west': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.LOD_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'minLodPixels': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'maxLodPixels': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'minFadeExtent': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'maxFadeExtent': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'extrude': _ol_xml_.makeObjectPropertySetter(XSD.readBoolean),\n    'tessellate': _ol_xml_.makeObjectPropertySetter(XSD.readBoolean),\n    'altitudeMode': _ol_xml_.makeObjectPropertySetter(XSD.readString)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.FLAT_LINEAR_RING_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'coordinates': _ol_xml_.makeReplacer(KML.readFlatCoordinates_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.FLAT_LINEAR_RINGS_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'innerBoundaryIs': KML.innerBoundaryIsParser_,\n    'outerBoundaryIs': KML.outerBoundaryIsParser_\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.GX_TRACK_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'when': KML.whenParser_\n  }, _ol_xml_.makeStructureNS(\n    KML.GX_NAMESPACE_URIS_, {\n      'coord': KML.gxCoordParser_\n    }));\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.GEOMETRY_FLAT_COORDINATES_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'coordinates': _ol_xml_.makeReplacer(KML.readFlatCoordinates_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.ICON_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'href': _ol_xml_.makeObjectPropertySetter(KML.readURI_)\n  }, _ol_xml_.makeStructureNS(\n    KML.GX_NAMESPACE_URIS_, {\n      'x': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n      'y': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n      'w': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n      'h': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal)\n    }));\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.ICON_STYLE_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'Icon': _ol_xml_.makeObjectPropertySetter(KML.readIcon_),\n    'heading': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'hotSpot': _ol_xml_.makeObjectPropertySetter(KML.readVec2_),\n    'scale': _ol_xml_.makeObjectPropertySetter(KML.readScale_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.INNER_BOUNDARY_IS_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'LinearRing': _ol_xml_.makeReplacer(KML.readFlatLinearRing_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.LABEL_STYLE_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'color': _ol_xml_.makeObjectPropertySetter(KML.readColor_),\n    'scale': _ol_xml_.makeObjectPropertySetter(KML.readScale_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.LINE_STYLE_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'color': _ol_xml_.makeObjectPropertySetter(KML.readColor_),\n    'width': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.MULTI_GEOMETRY_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'LineString': _ol_xml_.makeArrayPusher(KML.readLineString_),\n    'LinearRing': _ol_xml_.makeArrayPusher(KML.readLinearRing_),\n    'MultiGeometry': _ol_xml_.makeArrayPusher(KML.readMultiGeometry_),\n    'Point': _ol_xml_.makeArrayPusher(KML.readPoint_),\n    'Polygon': _ol_xml_.makeArrayPusher(KML.readPolygon_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.GX_MULTITRACK_GEOMETRY_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.GX_NAMESPACE_URIS_, {\n    'Track': _ol_xml_.makeArrayPusher(KML.readGxTrack_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.NETWORK_LINK_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'ExtendedData': KML.ExtendedDataParser_,\n    'Region': KML.RegionParser_,\n    'Link': KML.LinkParser_,\n    'address': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'description': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'name': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'open': _ol_xml_.makeObjectPropertySetter(XSD.readBoolean),\n    'phoneNumber': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'visibility': _ol_xml_.makeObjectPropertySetter(XSD.readBoolean)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.LINK_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'href': _ol_xml_.makeObjectPropertySetter(KML.readURI_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.OUTER_BOUNDARY_IS_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'LinearRing': _ol_xml_.makeReplacer(KML.readFlatLinearRing_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.PAIR_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'Style': _ol_xml_.makeObjectPropertySetter(KML.readStyle_),\n    'key': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'styleUrl': _ol_xml_.makeObjectPropertySetter(KML.readURI_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.PLACEMARK_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'ExtendedData': KML.ExtendedDataParser_,\n    'Region': KML.RegionParser_,\n    'MultiGeometry': _ol_xml_.makeObjectPropertySetter(\n      KML.readMultiGeometry_, 'geometry'),\n    'LineString': _ol_xml_.makeObjectPropertySetter(\n      KML.readLineString_, 'geometry'),\n    'LinearRing': _ol_xml_.makeObjectPropertySetter(\n      KML.readLinearRing_, 'geometry'),\n    'Point': _ol_xml_.makeObjectPropertySetter(\n      KML.readPoint_, 'geometry'),\n    'Polygon': _ol_xml_.makeObjectPropertySetter(\n      KML.readPolygon_, 'geometry'),\n    'Style': _ol_xml_.makeObjectPropertySetter(KML.readStyle_),\n    'StyleMap': KML.PlacemarkStyleMapParser_,\n    'address': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'description': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'name': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'open': _ol_xml_.makeObjectPropertySetter(XSD.readBoolean),\n    'phoneNumber': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'styleUrl': _ol_xml_.makeObjectPropertySetter(KML.readURI_),\n    'visibility': _ol_xml_.makeObjectPropertySetter(XSD.readBoolean)\n  }, _ol_xml_.makeStructureNS(\n    KML.GX_NAMESPACE_URIS_, {\n      'MultiTrack': _ol_xml_.makeObjectPropertySetter(\n        KML.readGxMultiTrack_, 'geometry'),\n      'Track': _ol_xml_.makeObjectPropertySetter(\n        KML.readGxTrack_, 'geometry')\n    }\n  ));\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.POLY_STYLE_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'color': _ol_xml_.makeObjectPropertySetter(KML.readColor_),\n    'fill': _ol_xml_.makeObjectPropertySetter(XSD.readBoolean),\n    'outline': _ol_xml_.makeObjectPropertySetter(XSD.readBoolean)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.SCHEMA_DATA_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'SimpleData': KML.SimpleDataParser_\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.STYLE_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'IconStyle': KML.IconStyleParser_,\n    'LabelStyle': KML.LabelStyleParser_,\n    'LineStyle': KML.LineStyleParser_,\n    'PolyStyle': KML.PolyStyleParser_\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n * @private\n */\nKML.STYLE_MAP_PARSERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'Pair': KML.PairDataParser_\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Array.<ol.Feature>|undefined} Features.\n */\nKML.prototype.readDocumentOrFolder_ = function(node, objectStack) {\n  // FIXME use scope somehow\n  const parsersNS = _ol_xml_.makeStructureNS(\n    KML.NAMESPACE_URIS_, {\n      'Document': _ol_xml_.makeArrayExtender(this.readDocumentOrFolder_, this),\n      'Folder': _ol_xml_.makeArrayExtender(this.readDocumentOrFolder_, this),\n      'Placemark': _ol_xml_.makeArrayPusher(this.readPlacemark_, this),\n      'Style': this.readSharedStyle_.bind(this),\n      'StyleMap': this.readSharedStyleMap_.bind(this)\n    });\n  /** @type {Array.<ol.Feature>} */\n  const features = _ol_xml_.pushParseAndPop([], parsersNS, node, objectStack, this);\n  if (features) {\n    return features;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {ol.Feature|undefined} Feature.\n */\nKML.prototype.readPlacemark_ = function(node, objectStack) {\n  const object = _ol_xml_.pushParseAndPop({'geometry': null},\n    KML.PLACEMARK_PARSERS_, node, objectStack);\n  if (!object) {\n    return undefined;\n  }\n  const feature = new Feature();\n  const id = node.getAttribute('id');\n  if (id !== null) {\n    feature.setId(id);\n  }\n  const options = /** @type {olx.format.ReadOptions} */ (objectStack[0]);\n\n  const geometry = object['geometry'];\n  if (geometry) {\n    transformWithOptions(geometry, false, options);\n  }\n  feature.setGeometry(geometry);\n  delete object['geometry'];\n\n  if (this.extractStyles_) {\n    const style = object['Style'];\n    const styleUrl = object['styleUrl'];\n    const styleFunction = KML.createFeatureStyleFunction_(\n      style, styleUrl, this.defaultStyle_, this.sharedStyles_,\n      this.showPointNames_);\n    feature.setStyle(styleFunction);\n  }\n  delete object['Style'];\n  // we do not remove the styleUrl property from the object, so it\n  // gets stored on feature when setProperties is called\n\n  feature.setProperties(object);\n\n  return feature;\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.prototype.readSharedStyle_ = function(node, objectStack) {\n  const id = node.getAttribute('id');\n  if (id !== null) {\n    const style = KML.readStyle_(node, objectStack);\n    if (style) {\n      let styleUri;\n      let baseURI = node.baseURI;\n      if (!baseURI || baseURI == 'about:blank') {\n        baseURI = window.location.href;\n      }\n      if (baseURI) {\n        const url = new URL('#' + id, baseURI);\n        styleUri = url.href;\n      } else {\n        styleUri = '#' + id;\n      }\n      this.sharedStyles_[styleUri] = style;\n    }\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.prototype.readSharedStyleMap_ = function(node, objectStack) {\n  const id = node.getAttribute('id');\n  if (id === null) {\n    return;\n  }\n  const styleMapValue = KML.readStyleMapValue_(node, objectStack);\n  if (!styleMapValue) {\n    return;\n  }\n  let styleUri;\n  let baseURI = node.baseURI;\n  if (!baseURI || baseURI == 'about:blank') {\n    baseURI = window.location.href;\n  }\n  if (baseURI) {\n    const url = new URL('#' + id, baseURI);\n    styleUri = url.href;\n  } else {\n    styleUri = '#' + id;\n  }\n  this.sharedStyles_[styleUri] = styleMapValue;\n};\n\n\n/**\n * Read the first feature from a KML source. MultiGeometries are converted into\n * GeometryCollections if they are a mix of geometry types, and into MultiPoint/\n * MultiLineString/MultiPolygon if they are all of the same type.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @return {ol.Feature} Feature.\n * @api\n */\nKML.prototype.readFeature;\n\n\n/**\n * @inheritDoc\n */\nKML.prototype.readFeatureFromNode = function(node, opt_options) {\n  if (!includes(KML.NAMESPACE_URIS_, node.namespaceURI)) {\n    return null;\n  }\n  const feature = this.readPlacemark_(\n    node, [this.getReadOptions(node, opt_options)]);\n  if (feature) {\n    return feature;\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * Read all features from a KML source. MultiGeometries are converted into\n * GeometryCollections if they are a mix of geometry types, and into MultiPoint/\n * MultiLineString/MultiPolygon if they are all of the same type.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @return {Array.<ol.Feature>} Features.\n * @api\n */\nKML.prototype.readFeatures;\n\n\n/**\n * @inheritDoc\n */\nKML.prototype.readFeaturesFromNode = function(node, opt_options) {\n  if (!includes(KML.NAMESPACE_URIS_, node.namespaceURI)) {\n    return [];\n  }\n  let features;\n  const localName = node.localName;\n  if (localName == 'Document' || localName == 'Folder') {\n    features = this.readDocumentOrFolder_(\n      node, [this.getReadOptions(node, opt_options)]);\n    if (features) {\n      return features;\n    } else {\n      return [];\n    }\n  } else if (localName == 'Placemark') {\n    const feature = this.readPlacemark_(\n      node, [this.getReadOptions(node, opt_options)]);\n    if (feature) {\n      return [feature];\n    } else {\n      return [];\n    }\n  } else if (localName == 'kml') {\n    features = [];\n    let n;\n    for (n = node.firstElementChild; n; n = n.nextElementSibling) {\n      const fs = this.readFeaturesFromNode(n, opt_options);\n      if (fs) {\n        extend(features, fs);\n      }\n    }\n    return features;\n  } else {\n    return [];\n  }\n};\n\n\n/**\n * Read the name of the KML.\n *\n * @param {Document|Node|string} source Souce.\n * @return {string|undefined} Name.\n * @api\n */\nKML.prototype.readName = function(source) {\n  if (_ol_xml_.isDocument(source)) {\n    return this.readNameFromDocument(/** @type {Document} */ (source));\n  } else if (_ol_xml_.isNode(source)) {\n    return this.readNameFromNode(/** @type {Node} */ (source));\n  } else if (typeof source === 'string') {\n    const doc = _ol_xml_.parse(source);\n    return this.readNameFromDocument(doc);\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Document} doc Document.\n * @return {string|undefined} Name.\n */\nKML.prototype.readNameFromDocument = function(doc) {\n  let n;\n  for (n = doc.firstChild; n; n = n.nextSibling) {\n    if (n.nodeType == Node.ELEMENT_NODE) {\n      const name = this.readNameFromNode(n);\n      if (name) {\n        return name;\n      }\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @param {Node} node Node.\n * @return {string|undefined} Name.\n */\nKML.prototype.readNameFromNode = function(node) {\n  let n;\n  for (n = node.firstElementChild; n; n = n.nextElementSibling) {\n    if (includes(KML.NAMESPACE_URIS_, n.namespaceURI) &&\n        n.localName == 'name') {\n      return XSD.readString(n);\n    }\n  }\n  for (n = node.firstElementChild; n; n = n.nextElementSibling) {\n    const localName = n.localName;\n    if (includes(KML.NAMESPACE_URIS_, n.namespaceURI) &&\n        (localName == 'Document' ||\n         localName == 'Folder' ||\n         localName == 'Placemark' ||\n         localName == 'kml')) {\n      const name = this.readNameFromNode(n);\n      if (name) {\n        return name;\n      }\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * Read the network links of the KML.\n *\n * @param {Document|Node|string} source Source.\n * @return {Array.<Object>} Network links.\n * @api\n */\nKML.prototype.readNetworkLinks = function(source) {\n  const networkLinks = [];\n  if (_ol_xml_.isDocument(source)) {\n    extend(networkLinks, this.readNetworkLinksFromDocument(\n      /** @type {Document} */ (source)));\n  } else if (_ol_xml_.isNode(source)) {\n    extend(networkLinks, this.readNetworkLinksFromNode(\n      /** @type {Node} */ (source)));\n  } else if (typeof source === 'string') {\n    const doc = _ol_xml_.parse(source);\n    extend(networkLinks, this.readNetworkLinksFromDocument(doc));\n  }\n  return networkLinks;\n};\n\n\n/**\n * @param {Document} doc Document.\n * @return {Array.<Object>} Network links.\n */\nKML.prototype.readNetworkLinksFromDocument = function(doc) {\n  const networkLinks = [];\n  for (let n = doc.firstChild; n; n = n.nextSibling) {\n    if (n.nodeType == Node.ELEMENT_NODE) {\n      extend(networkLinks, this.readNetworkLinksFromNode(n));\n    }\n  }\n  return networkLinks;\n};\n\n\n/**\n * @param {Node} node Node.\n * @return {Array.<Object>} Network links.\n */\nKML.prototype.readNetworkLinksFromNode = function(node) {\n  const networkLinks = [];\n  for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n    if (includes(KML.NAMESPACE_URIS_, n.namespaceURI) &&\n        n.localName == 'NetworkLink') {\n      const obj = _ol_xml_.pushParseAndPop({}, KML.NETWORK_LINK_PARSERS_,\n        n, []);\n      networkLinks.push(obj);\n    }\n  }\n  for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n    const localName = n.localName;\n    if (includes(KML.NAMESPACE_URIS_, n.namespaceURI) &&\n        (localName == 'Document' ||\n         localName == 'Folder' ||\n         localName == 'kml')) {\n      extend(networkLinks, this.readNetworkLinksFromNode(n));\n    }\n  }\n  return networkLinks;\n};\n\n\n/**\n * Read the regions of the KML.\n *\n * @param {Document|Node|string} source Source.\n * @return {Array.<Object>} Regions.\n * @api\n */\nKML.prototype.readRegion = function(source) {\n  const regions = [];\n  if (_ol_xml_.isDocument(source)) {\n    extend(regions, this.readRegionFromDocument(\n      /** @type {Document} */ (source)));\n  } else if (_ol_xml_.isNode(source)) {\n    extend(regions, this.readRegionFromNode(\n      /** @type {Node} */ (source)));\n  } else if (typeof source === 'string') {\n    const doc = _ol_xml_.parse(source);\n    extend(regions, this.readRegionFromDocument(doc));\n  }\n  return regions;\n};\n\n\n/**\n * @param {Document} doc Document.\n * @return {Array.<Object>} Region.\n */\nKML.prototype.readRegionFromDocument = function(doc) {\n  const regions = [];\n  for (let n = doc.firstChild; n; n = n.nextSibling) {\n    if (n.nodeType == Node.ELEMENT_NODE) {\n      extend(regions, this.readRegionFromNode(n));\n    }\n  }\n  return regions;\n};\n\n\n/**\n * @param {Node} node Node.\n * @return {Array.<Object>} Region.\n * @api\n */\nKML.prototype.readRegionFromNode = function(node) {\n  const regions = [];\n  for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n    if (includes(KML.NAMESPACE_URIS_, n.namespaceURI) &&\n        n.localName == 'Region') {\n      const obj = _ol_xml_.pushParseAndPop({}, KML.REGION_PARSERS_,\n        n, []);\n      regions.push(obj);\n    }\n  }\n  for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n    const localName = n.localName;\n    if (includes(KML.NAMESPACE_URIS_, n.namespaceURI) &&\n        (localName == 'Document' ||\n         localName == 'Folder' ||\n         localName == 'kml')) {\n      extend(regions, this.readRegionFromNode(n));\n    }\n  }\n  return regions;\n};\n\n\n/**\n * Read the projection from a KML source.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @return {ol.proj.Projection} Projection.\n * @api\n */\nKML.prototype.readProjection;\n\n\n/**\n * @param {Node} node Node to append a TextNode with the color to.\n * @param {ol.Color|string} color Color.\n * @private\n */\nKML.writeColorTextNode_ = function(node, color) {\n  const rgba = asArray(color);\n  const opacity = (rgba.length == 4) ? rgba[3] : 1;\n  const abgr = [opacity * 255, rgba[2], rgba[1], rgba[0]];\n  let i;\n  for (i = 0; i < 4; ++i) {\n    const hex = parseInt(abgr[i], 10).toString(16);\n    abgr[i] = (hex.length == 1) ? '0' + hex : hex;\n  }\n  XSD.writeStringTextNode(node, abgr.join(''));\n};\n\n\n/**\n * @param {Node} node Node to append a TextNode with the coordinates to.\n * @param {Array.<number>} coordinates Coordinates.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.writeCoordinatesTextNode_ = function(node, coordinates, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n\n  const layout = context['layout'];\n  const stride = context['stride'];\n\n  let dimension;\n  if (layout == GeometryLayout.XY ||\n      layout == GeometryLayout.XYM) {\n    dimension = 2;\n  } else if (layout == GeometryLayout.XYZ ||\n      layout == GeometryLayout.XYZM) {\n    dimension = 3;\n  } else {\n    assert(false, 34); // Invalid geometry layout\n  }\n\n  let d, i;\n  const ii = coordinates.length;\n  let text = '';\n  if (ii > 0) {\n    text += coordinates[0];\n    for (d = 1; d < dimension; ++d) {\n      text += ',' + coordinates[d];\n    }\n    for (i = stride; i < ii; i += stride) {\n      text += ' ' + coordinates[i];\n      for (d = 1; d < dimension; ++d) {\n        text += ',' + coordinates[i + d];\n      }\n    }\n  }\n  XSD.writeStringTextNode(node, text);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {{name: *, value: *}} pair Name value pair.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.writeDataNode_ = function(node, pair, objectStack) {\n  node.setAttribute('name', pair.name);\n  const /** @type {ol.XmlNodeStackItem} */ context = {node: node};\n  const value = pair.value;\n\n  if (typeof value == 'object') {\n    if (value !== null && value.displayName) {\n      _ol_xml_.pushSerializeAndPop(context, KML.EXTENDEDDATA_NODE_SERIALIZERS_,\n        _ol_xml_.OBJECT_PROPERTY_NODE_FACTORY, [value.displayName], objectStack, ['displayName']);\n    }\n\n    if (value !== null && value.value) {\n      _ol_xml_.pushSerializeAndPop(context, KML.EXTENDEDDATA_NODE_SERIALIZERS_,\n        _ol_xml_.OBJECT_PROPERTY_NODE_FACTORY, [value.value], objectStack, ['value']);\n    }\n  } else {\n    _ol_xml_.pushSerializeAndPop(context, KML.EXTENDEDDATA_NODE_SERIALIZERS_,\n      _ol_xml_.OBJECT_PROPERTY_NODE_FACTORY, [value], objectStack, ['value']);\n  }\n};\n\n\n/**\n * @param {Node} node Node to append a TextNode with the name to.\n * @param {string} name DisplayName.\n * @private\n */\nKML.writeDataNodeName_ = function(node, name) {\n  XSD.writeCDATASection(node, name);\n};\n\n\n/**\n * @param {Node} node Node to append a CDATA Section with the value to.\n * @param {string} value Value.\n * @private\n */\nKML.writeDataNodeValue_ = function(node, value) {\n  XSD.writeStringTextNode(node, value);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<ol.Feature>} features Features.\n * @param {Array.<*>} objectStack Object stack.\n * @this {ol.format.KML}\n * @private\n */\nKML.writeDocument_ = function(node, features, objectStack) {\n  const /** @type {ol.XmlNodeStackItem} */ context = {node: node};\n  _ol_xml_.pushSerializeAndPop(context, KML.DOCUMENT_SERIALIZERS_,\n    KML.DOCUMENT_NODE_FACTORY_, features, objectStack, undefined,\n    this);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {{names: Array<string>, values: (Array<*>)}} namesAndValues Names and values.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.writeExtendedData_ = function(node, namesAndValues, objectStack) {\n  const /** @type {ol.XmlNodeStackItem} */ context = {node: node};\n  const names = namesAndValues.names;\n  const values = namesAndValues.values;\n  const length = names.length;\n\n  for (let i = 0; i < length; i++) {\n    _ol_xml_.pushSerializeAndPop(context, KML.EXTENDEDDATA_NODE_SERIALIZERS_,\n      KML.DATA_NODE_FACTORY_, [{name: names[i], value: values[i]}], objectStack);\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Object} icon Icon object.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.writeIcon_ = function(node, icon, objectStack) {\n  const /** @type {ol.XmlNodeStackItem} */ context = {node: node};\n  const parentNode = objectStack[objectStack.length - 1].node;\n  let orderedKeys = KML.ICON_SEQUENCE_[parentNode.namespaceURI];\n  let values = _ol_xml_.makeSequence(icon, orderedKeys);\n  _ol_xml_.pushSerializeAndPop(context,\n    KML.ICON_SERIALIZERS_, _ol_xml_.OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n  orderedKeys =\n      KML.ICON_SEQUENCE_[KML.GX_NAMESPACE_URIS_[0]];\n  values = _ol_xml_.makeSequence(icon, orderedKeys);\n  _ol_xml_.pushSerializeAndPop(context, KML.ICON_SERIALIZERS_,\n    KML.GX_NODE_FACTORY_, values, objectStack, orderedKeys);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {ol.style.Icon} style Icon style.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.writeIconStyle_ = function(node, style, objectStack) {\n  const /** @type {ol.XmlNodeStackItem} */ context = {node: node};\n  const properties = {};\n  const src = style.getSrc();\n  const size = style.getSize();\n  const iconImageSize = style.getImageSize();\n  const iconProperties = {\n    'href': src\n  };\n\n  if (size) {\n    iconProperties['w'] = size[0];\n    iconProperties['h'] = size[1];\n    const anchor = style.getAnchor(); // top-left\n    const origin = style.getOrigin(); // top-left\n\n    if (origin && iconImageSize && origin[0] !== 0 && origin[1] !== size[1]) {\n      iconProperties['x'] = origin[0];\n      iconProperties['y'] = iconImageSize[1] - (origin[1] + size[1]);\n    }\n\n    if (anchor && (anchor[0] !== size[0] / 2 || anchor[1] !== size[1] / 2)) {\n      const /** @type {ol.KMLVec2_} */ hotSpot = {\n        x: anchor[0],\n        xunits: IconAnchorUnits.PIXELS,\n        y: size[1] - anchor[1],\n        yunits: IconAnchorUnits.PIXELS\n      };\n      properties['hotSpot'] = hotSpot;\n    }\n  }\n\n  properties['Icon'] = iconProperties;\n\n  const scale = style.getScale();\n  if (scale !== 1) {\n    properties['scale'] = scale;\n  }\n\n  const rotation = style.getRotation();\n  if (rotation !== 0) {\n    properties['heading'] = rotation; // 0-360\n  }\n\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = KML.ICON_STYLE_SEQUENCE_[parentNode.namespaceURI];\n  const values = _ol_xml_.makeSequence(properties, orderedKeys);\n  _ol_xml_.pushSerializeAndPop(context, KML.ICON_STYLE_SERIALIZERS_,\n    _ol_xml_.OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {ol.style.Text} style style.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.writeLabelStyle_ = function(node, style, objectStack) {\n  const /** @type {ol.XmlNodeStackItem} */ context = {node: node};\n  const properties = {};\n  const fill = style.getFill();\n  if (fill) {\n    properties['color'] = fill.getColor();\n  }\n  const scale = style.getScale();\n  if (scale && scale !== 1) {\n    properties['scale'] = scale;\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys =\n      KML.LABEL_STYLE_SEQUENCE_[parentNode.namespaceURI];\n  const values = _ol_xml_.makeSequence(properties, orderedKeys);\n  _ol_xml_.pushSerializeAndPop(context, KML.LABEL_STYLE_SERIALIZERS_,\n    _ol_xml_.OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {ol.style.Stroke} style style.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.writeLineStyle_ = function(node, style, objectStack) {\n  const /** @type {ol.XmlNodeStackItem} */ context = {node: node};\n  const properties = {\n    'color': style.getColor(),\n    'width': style.getWidth()\n  };\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = KML.LINE_STYLE_SEQUENCE_[parentNode.namespaceURI];\n  const values = _ol_xml_.makeSequence(properties, orderedKeys);\n  _ol_xml_.pushSerializeAndPop(context, KML.LINE_STYLE_SERIALIZERS_,\n    _ol_xml_.OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {ol.geom.Geometry} geometry Geometry.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.writeMultiGeometry_ = function(node, geometry, objectStack) {\n  /** @type {ol.XmlNodeStackItem} */\n  const context = {node: node};\n  const type = geometry.getType();\n  /** @type {Array.<ol.geom.Geometry>} */\n  let geometries;\n  /** @type {function(*, Array.<*>, string=): (Node|undefined)} */\n  let factory;\n  if (type == GeometryType.GEOMETRY_COLLECTION) {\n    geometries = /** @type {ol.geom.GeometryCollection} */ (geometry).getGeometries();\n    factory = KML.GEOMETRY_NODE_FACTORY_;\n  } else if (type == GeometryType.MULTI_POINT) {\n    geometries = /** @type {ol.geom.MultiPoint} */ (geometry).getPoints();\n    factory = KML.POINT_NODE_FACTORY_;\n  } else if (type == GeometryType.MULTI_LINE_STRING) {\n    geometries =\n        (/** @type {ol.geom.MultiLineString} */ (geometry)).getLineStrings();\n    factory = KML.LINE_STRING_NODE_FACTORY_;\n  } else if (type == GeometryType.MULTI_POLYGON) {\n    geometries =\n        (/** @type {ol.geom.MultiPolygon} */ (geometry)).getPolygons();\n    factory = KML.POLYGON_NODE_FACTORY_;\n  } else {\n    assert(false, 39); // Unknown geometry type\n  }\n  _ol_xml_.pushSerializeAndPop(context,\n    KML.MULTI_GEOMETRY_SERIALIZERS_, factory,\n    geometries, objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {ol.geom.LinearRing} linearRing Linear ring.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.writeBoundaryIs_ = function(node, linearRing, objectStack) {\n  const /** @type {ol.XmlNodeStackItem} */ context = {node: node};\n  _ol_xml_.pushSerializeAndPop(context,\n    KML.BOUNDARY_IS_SERIALIZERS_,\n    KML.LINEAR_RING_NODE_FACTORY_, [linearRing], objectStack);\n};\n\n\n/**\n * FIXME currently we do serialize arbitrary/custom feature properties\n * (ExtendedData).\n * @param {Node} node Node.\n * @param {ol.Feature} feature Feature.\n * @param {Array.<*>} objectStack Object stack.\n * @this {ol.format.KML}\n * @private\n */\nKML.writePlacemark_ = function(node, feature, objectStack) {\n  const /** @type {ol.XmlNodeStackItem} */ context = {node: node};\n\n  // set id\n  if (feature.getId()) {\n    node.setAttribute('id', feature.getId());\n  }\n\n  // serialize properties (properties unknown to KML are not serialized)\n  const properties = feature.getProperties();\n\n  // don't export these to ExtendedData\n  const filter = {'address': 1, 'description': 1, 'name': 1, 'open': 1,\n    'phoneNumber': 1, 'styleUrl': 1, 'visibility': 1};\n  filter[feature.getGeometryName()] = 1;\n  const keys = Object.keys(properties || {}).sort().filter(function(v) {\n    return !filter[v];\n  });\n\n  if (keys.length > 0) {\n    const sequence = _ol_xml_.makeSequence(properties, keys);\n    const namesAndValues = {names: keys, values: sequence};\n    _ol_xml_.pushSerializeAndPop(context, KML.PLACEMARK_SERIALIZERS_,\n      KML.EXTENDEDDATA_NODE_FACTORY_, [namesAndValues], objectStack);\n  }\n\n  const styleFunction = feature.getStyleFunction();\n  if (styleFunction) {\n    // FIXME the styles returned by the style function are supposed to be\n    // resolution-independent here\n    const styles = styleFunction.call(feature, 0);\n    if (styles) {\n      const style = Array.isArray(styles) ? styles[0] : styles;\n      if (this.writeStyles_) {\n        properties['Style'] = style;\n      }\n      const textStyle = style.getText();\n      if (textStyle) {\n        properties['name'] = textStyle.getText();\n      }\n    }\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = KML.PLACEMARK_SEQUENCE_[parentNode.namespaceURI];\n  const values = _ol_xml_.makeSequence(properties, orderedKeys);\n  _ol_xml_.pushSerializeAndPop(context, KML.PLACEMARK_SERIALIZERS_,\n    _ol_xml_.OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n\n  // serialize geometry\n  const options = /** @type {olx.format.WriteOptions} */ (objectStack[0]);\n  let geometry = feature.getGeometry();\n  if (geometry) {\n    geometry = transformWithOptions(geometry, true, options);\n  }\n  _ol_xml_.pushSerializeAndPop(context, KML.PLACEMARK_SERIALIZERS_,\n    KML.GEOMETRY_NODE_FACTORY_, [geometry], objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {ol.geom.SimpleGeometry} geometry Geometry.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.writePrimitiveGeometry_ = function(node, geometry, objectStack) {\n  const flatCoordinates = geometry.getFlatCoordinates();\n  const /** @type {ol.XmlNodeStackItem} */ context = {node: node};\n  context['layout'] = geometry.getLayout();\n  context['stride'] = geometry.getStride();\n\n  // serialize properties (properties unknown to KML are not serialized)\n  const properties = geometry.getProperties();\n  properties.coordinates = flatCoordinates;\n\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = KML.PRIMITIVE_GEOMETRY_SEQUENCE_[parentNode.namespaceURI];\n  const values = _ol_xml_.makeSequence(properties, orderedKeys);\n  _ol_xml_.pushSerializeAndPop(context, KML.PRIMITIVE_GEOMETRY_SERIALIZERS_,\n    _ol_xml_.OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {ol.geom.Polygon} polygon Polygon.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.writePolygon_ = function(node, polygon, objectStack) {\n  const linearRings = polygon.getLinearRings();\n  const outerRing = linearRings.shift();\n  const /** @type {ol.XmlNodeStackItem} */ context = {node: node};\n  // inner rings\n  _ol_xml_.pushSerializeAndPop(context,\n    KML.POLYGON_SERIALIZERS_,\n    KML.INNER_BOUNDARY_NODE_FACTORY_,\n    linearRings, objectStack);\n  // outer ring\n  _ol_xml_.pushSerializeAndPop(context,\n    KML.POLYGON_SERIALIZERS_,\n    KML.OUTER_BOUNDARY_NODE_FACTORY_,\n    [outerRing], objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {ol.style.Fill} style Style.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.writePolyStyle_ = function(node, style, objectStack) {\n  const /** @type {ol.XmlNodeStackItem} */ context = {node: node};\n  _ol_xml_.pushSerializeAndPop(context, KML.POLY_STYLE_SERIALIZERS_,\n    KML.COLOR_NODE_FACTORY_, [style.getColor()], objectStack);\n};\n\n\n/**\n * @param {Node} node Node to append a TextNode with the scale to.\n * @param {number|undefined} scale Scale.\n * @private\n */\nKML.writeScaleTextNode_ = function(node, scale) {\n  // the Math is to remove any excess decimals created by float arithmetic\n  XSD.writeDecimalTextNode(node,\n    Math.round(scale * 1e6) / 1e6);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {ol.style.Style} style Style.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.writeStyle_ = function(node, style, objectStack) {\n  const /** @type {ol.XmlNodeStackItem} */ context = {node: node};\n  const properties = {};\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  const imageStyle = style.getImage();\n  const textStyle = style.getText();\n  if (imageStyle instanceof Icon) {\n    properties['IconStyle'] = imageStyle;\n  }\n  if (textStyle) {\n    properties['LabelStyle'] = textStyle;\n  }\n  if (strokeStyle) {\n    properties['LineStyle'] = strokeStyle;\n  }\n  if (fillStyle) {\n    properties['PolyStyle'] = fillStyle;\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = KML.STYLE_SEQUENCE_[parentNode.namespaceURI];\n  const values = _ol_xml_.makeSequence(properties, orderedKeys);\n  _ol_xml_.pushSerializeAndPop(context, KML.STYLE_SERIALIZERS_,\n    _ol_xml_.OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n};\n\n\n/**\n * @param {Node} node Node to append a TextNode with the Vec2 to.\n * @param {ol.KMLVec2_} vec2 Vec2.\n * @private\n */\nKML.writeVec2_ = function(node, vec2) {\n  node.setAttribute('x', vec2.x);\n  node.setAttribute('y', vec2.y);\n  node.setAttribute('xunits', vec2.xunits);\n  node.setAttribute('yunits', vec2.yunits);\n};\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n * @private\n */\nKML.KML_SEQUENCE_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, [\n    'Document', 'Placemark'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n * @private\n */\nKML.KML_SERIALIZERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'Document': _ol_xml_.makeChildAppender(KML.writeDocument_),\n    'Placemark': _ol_xml_.makeChildAppender(KML.writePlacemark_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n * @private\n */\nKML.DOCUMENT_SERIALIZERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'Placemark': _ol_xml_.makeChildAppender(KML.writePlacemark_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n * @private\n */\nKML.EXTENDEDDATA_NODE_SERIALIZERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'Data': _ol_xml_.makeChildAppender(KML.writeDataNode_),\n    'value': _ol_xml_.makeChildAppender(KML.writeDataNodeValue_),\n    'displayName': _ol_xml_.makeChildAppender(KML.writeDataNodeName_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, string>}\n * @private\n */\nKML.GEOMETRY_TYPE_TO_NODENAME_ = {\n  'Point': 'Point',\n  'LineString': 'LineString',\n  'LinearRing': 'LinearRing',\n  'Polygon': 'Polygon',\n  'MultiPoint': 'MultiGeometry',\n  'MultiLineString': 'MultiGeometry',\n  'MultiPolygon': 'MultiGeometry',\n  'GeometryCollection': 'MultiGeometry'\n};\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n * @private\n */\nKML.ICON_SEQUENCE_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, [\n    'href'\n  ],\n  _ol_xml_.makeStructureNS(KML.GX_NAMESPACE_URIS_, [\n    'x', 'y', 'w', 'h'\n  ]));\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n * @private\n */\nKML.ICON_SERIALIZERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'href': _ol_xml_.makeChildAppender(XSD.writeStringTextNode)\n  }, _ol_xml_.makeStructureNS(\n    KML.GX_NAMESPACE_URIS_, {\n      'x': _ol_xml_.makeChildAppender(XSD.writeDecimalTextNode),\n      'y': _ol_xml_.makeChildAppender(XSD.writeDecimalTextNode),\n      'w': _ol_xml_.makeChildAppender(XSD.writeDecimalTextNode),\n      'h': _ol_xml_.makeChildAppender(XSD.writeDecimalTextNode)\n    }));\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n * @private\n */\nKML.ICON_STYLE_SEQUENCE_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, [\n    'scale', 'heading', 'Icon', 'hotSpot'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n * @private\n */\nKML.ICON_STYLE_SERIALIZERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'Icon': _ol_xml_.makeChildAppender(KML.writeIcon_),\n    'heading': _ol_xml_.makeChildAppender(XSD.writeDecimalTextNode),\n    'hotSpot': _ol_xml_.makeChildAppender(KML.writeVec2_),\n    'scale': _ol_xml_.makeChildAppender(KML.writeScaleTextNode_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n * @private\n */\nKML.LABEL_STYLE_SEQUENCE_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, [\n    'color', 'scale'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n * @private\n */\nKML.LABEL_STYLE_SERIALIZERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'color': _ol_xml_.makeChildAppender(KML.writeColorTextNode_),\n    'scale': _ol_xml_.makeChildAppender(KML.writeScaleTextNode_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n * @private\n */\nKML.LINE_STYLE_SEQUENCE_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, [\n    'color', 'width'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n * @private\n */\nKML.LINE_STYLE_SERIALIZERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'color': _ol_xml_.makeChildAppender(KML.writeColorTextNode_),\n    'width': _ol_xml_.makeChildAppender(XSD.writeDecimalTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n * @private\n */\nKML.BOUNDARY_IS_SERIALIZERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'LinearRing': _ol_xml_.makeChildAppender(\n      KML.writePrimitiveGeometry_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n * @private\n */\nKML.MULTI_GEOMETRY_SERIALIZERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'LineString': _ol_xml_.makeChildAppender(\n      KML.writePrimitiveGeometry_),\n    'Point': _ol_xml_.makeChildAppender(\n      KML.writePrimitiveGeometry_),\n    'Polygon': _ol_xml_.makeChildAppender(KML.writePolygon_),\n    'GeometryCollection': _ol_xml_.makeChildAppender(\n      KML.writeMultiGeometry_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n * @private\n */\nKML.PLACEMARK_SEQUENCE_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, [\n    'name', 'open', 'visibility', 'address', 'phoneNumber', 'description',\n    'styleUrl', 'Style'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n * @private\n */\nKML.PLACEMARK_SERIALIZERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'ExtendedData': _ol_xml_.makeChildAppender(\n      KML.writeExtendedData_),\n    'MultiGeometry': _ol_xml_.makeChildAppender(\n      KML.writeMultiGeometry_),\n    'LineString': _ol_xml_.makeChildAppender(\n      KML.writePrimitiveGeometry_),\n    'LinearRing': _ol_xml_.makeChildAppender(\n      KML.writePrimitiveGeometry_),\n    'Point': _ol_xml_.makeChildAppender(\n      KML.writePrimitiveGeometry_),\n    'Polygon': _ol_xml_.makeChildAppender(KML.writePolygon_),\n    'Style': _ol_xml_.makeChildAppender(KML.writeStyle_),\n    'address': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'description': _ol_xml_.makeChildAppender(\n      XSD.writeStringTextNode),\n    'name': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'open': _ol_xml_.makeChildAppender(XSD.writeBooleanTextNode),\n    'phoneNumber': _ol_xml_.makeChildAppender(\n      XSD.writeStringTextNode),\n    'styleUrl': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'visibility': _ol_xml_.makeChildAppender(\n      XSD.writeBooleanTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n * @private\n */\nKML.PRIMITIVE_GEOMETRY_SEQUENCE_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, [\n    'extrude', 'tessellate', 'altitudeMode', 'coordinates'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n * @private\n */\nKML.PRIMITIVE_GEOMETRY_SERIALIZERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'extrude': _ol_xml_.makeChildAppender(XSD.writeBooleanTextNode),\n    'tessellate': _ol_xml_.makeChildAppender(XSD.writeBooleanTextNode),\n    'altitudeMode': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'coordinates': _ol_xml_.makeChildAppender(\n      KML.writeCoordinatesTextNode_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n * @private\n */\nKML.POLYGON_SERIALIZERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'outerBoundaryIs': _ol_xml_.makeChildAppender(\n      KML.writeBoundaryIs_),\n    'innerBoundaryIs': _ol_xml_.makeChildAppender(\n      KML.writeBoundaryIs_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n * @private\n */\nKML.POLY_STYLE_SERIALIZERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'color': _ol_xml_.makeChildAppender(KML.writeColorTextNode_)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n * @private\n */\nKML.STYLE_SEQUENCE_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, [\n    'IconStyle', 'LabelStyle', 'LineStyle', 'PolyStyle'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n * @private\n */\nKML.STYLE_SERIALIZERS_ = _ol_xml_.makeStructureNS(\n  KML.NAMESPACE_URIS_, {\n    'IconStyle': _ol_xml_.makeChildAppender(KML.writeIconStyle_),\n    'LabelStyle': _ol_xml_.makeChildAppender(KML.writeLabelStyle_),\n    'LineStyle': _ol_xml_.makeChildAppender(KML.writeLineStyle_),\n    'PolyStyle': _ol_xml_.makeChildAppender(KML.writePolyStyle_)\n  });\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array.<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n * @private\n */\nKML.GX_NODE_FACTORY_ = function(value, objectStack, opt_nodeName) {\n  return _ol_xml_.createElementNS(KML.GX_NAMESPACE_URIS_[0],\n    'gx:' + opt_nodeName);\n};\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array.<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n * @private\n */\nKML.DOCUMENT_NODE_FACTORY_ = function(value, objectStack,\n  opt_nodeName) {\n  const parentNode = objectStack[objectStack.length - 1].node;\n  return _ol_xml_.createElementNS(parentNode.namespaceURI, 'Placemark');\n};\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array.<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n * @private\n */\nKML.GEOMETRY_NODE_FACTORY_ = function(value, objectStack,\n  opt_nodeName) {\n  if (value) {\n    const parentNode = objectStack[objectStack.length - 1].node;\n    return _ol_xml_.createElementNS(parentNode.namespaceURI,\n      KML.GEOMETRY_TYPE_TO_NODENAME_[/** @type {ol.geom.Geometry} */ (value).getType()]);\n  }\n};\n\n\n/**\n * A factory for creating coordinates nodes.\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n * @private\n */\nKML.COLOR_NODE_FACTORY_ = _ol_xml_.makeSimpleNodeFactory('color');\n\n\n/**\n * A factory for creating Data nodes.\n * @const\n * @type {function(*, Array.<*>): (Node|undefined)}\n * @private\n */\nKML.DATA_NODE_FACTORY_ =\n    _ol_xml_.makeSimpleNodeFactory('Data');\n\n\n/**\n * A factory for creating ExtendedData nodes.\n * @const\n * @type {function(*, Array.<*>): (Node|undefined)}\n * @private\n */\nKML.EXTENDEDDATA_NODE_FACTORY_ =\n    _ol_xml_.makeSimpleNodeFactory('ExtendedData');\n\n\n/**\n * A factory for creating innerBoundaryIs nodes.\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n * @private\n */\nKML.INNER_BOUNDARY_NODE_FACTORY_ =\n    _ol_xml_.makeSimpleNodeFactory('innerBoundaryIs');\n\n\n/**\n * A factory for creating Point nodes.\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n * @private\n */\nKML.POINT_NODE_FACTORY_ =\n    _ol_xml_.makeSimpleNodeFactory('Point');\n\n\n/**\n * A factory for creating LineString nodes.\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n * @private\n */\nKML.LINE_STRING_NODE_FACTORY_ =\n    _ol_xml_.makeSimpleNodeFactory('LineString');\n\n\n/**\n * A factory for creating LinearRing nodes.\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n * @private\n */\nKML.LINEAR_RING_NODE_FACTORY_ =\n    _ol_xml_.makeSimpleNodeFactory('LinearRing');\n\n\n/**\n * A factory for creating Polygon nodes.\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n * @private\n */\nKML.POLYGON_NODE_FACTORY_ =\n    _ol_xml_.makeSimpleNodeFactory('Polygon');\n\n\n/**\n * A factory for creating outerBoundaryIs nodes.\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n * @private\n */\nKML.OUTER_BOUNDARY_NODE_FACTORY_ =\n    _ol_xml_.makeSimpleNodeFactory('outerBoundaryIs');\n\n\n/**\n * Encode an array of features in the KML format. GeometryCollections, MultiPoints,\n * MultiLineStrings, and MultiPolygons are output as MultiGeometries.\n *\n * @function\n * @param {Array.<ol.Feature>} features Features.\n * @param {olx.format.WriteOptions=} opt_options Options.\n * @return {string} Result.\n * @api\n */\nKML.prototype.writeFeatures;\n\n\n/**\n * Encode an array of features in the KML format as an XML node. GeometryCollections,\n * MultiPoints, MultiLineStrings, and MultiPolygons are output as MultiGeometries.\n *\n * @param {Array.<ol.Feature>} features Features.\n * @param {olx.format.WriteOptions=} opt_options Options.\n * @return {Node} Node.\n * @override\n * @api\n */\nKML.prototype.writeFeaturesNode = function(features, opt_options) {\n  opt_options = this.adaptOptions(opt_options);\n  const kml = _ol_xml_.createElementNS(KML.NAMESPACE_URIS_[4], 'kml');\n  const xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n  const xmlSchemaInstanceUri = 'http://www.w3.org/2001/XMLSchema-instance';\n  _ol_xml_.setAttributeNS(kml, xmlnsUri, 'xmlns:gx',\n    KML.GX_NAMESPACE_URIS_[0]);\n  _ol_xml_.setAttributeNS(kml, xmlnsUri, 'xmlns:xsi', xmlSchemaInstanceUri);\n  _ol_xml_.setAttributeNS(kml, xmlSchemaInstanceUri, 'xsi:schemaLocation',\n    KML.SCHEMA_LOCATION_);\n\n  const /** @type {ol.XmlNodeStackItem} */ context = {node: kml};\n  const properties = {};\n  if (features.length > 1) {\n    properties['Document'] = features;\n  } else if (features.length == 1) {\n    properties['Placemark'] = features[0];\n  }\n  const orderedKeys = KML.KML_SEQUENCE_[kml.namespaceURI];\n  const values = _ol_xml_.makeSequence(properties, orderedKeys);\n  _ol_xml_.pushSerializeAndPop(context, KML.KML_SERIALIZERS_,\n    _ol_xml_.OBJECT_PROPERTY_NODE_FACTORY, values, [opt_options], orderedKeys,\n    this);\n  return kml;\n};\nexport default KML;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/format/KML.js\n// module id = 151\n// module chunks = 0 1 2 10","/**\n * @module ol/Image\n */\nimport {inherits} from './index.js';\nimport _ol_ImageBase_ from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport _ol_events_ from './events.js';\nimport EventType from './events/EventType.js';\nimport {getHeight} from './extent.js';\n\n/**\n * @constructor\n * @extends {ol.ImageBase}\n * @param {ol.Extent} extent Extent.\n * @param {number|undefined} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {string} src Image source URI.\n * @param {?string} crossOrigin Cross origin.\n * @param {ol.ImageLoadFunctionType} imageLoadFunction Image load function.\n */\nconst _ol_Image_ = function(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n\n  _ol_ImageBase_.call(this, extent, resolution, pixelRatio, ImageState.IDLE);\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.src_ = src;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement|Image|HTMLVideoElement}\n   */\n  this.image_ = new Image();\n  if (crossOrigin !== null) {\n    this.image_.crossOrigin = crossOrigin;\n  }\n\n  /**\n   * @private\n   * @type {Array.<ol.EventsKey>}\n   */\n  this.imageListenerKeys_ = null;\n\n  /**\n   * @protected\n   * @type {ol.ImageState}\n   */\n  this.state = ImageState.IDLE;\n\n  /**\n   * @private\n   * @type {ol.ImageLoadFunctionType}\n   */\n  this.imageLoadFunction_ = imageLoadFunction;\n\n};\n\ninherits(_ol_Image_, _ol_ImageBase_);\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_Image_.prototype.getImage = function() {\n  return this.image_;\n};\n\n\n/**\n * Tracks loading or read errors.\n *\n * @private\n */\n_ol_Image_.prototype.handleImageError_ = function() {\n  this.state = ImageState.ERROR;\n  this.unlistenImage_();\n  this.changed();\n};\n\n\n/**\n * Tracks successful image load.\n *\n * @private\n */\n_ol_Image_.prototype.handleImageLoad_ = function() {\n  if (this.resolution === undefined) {\n    this.resolution = getHeight(this.extent) / this.image_.height;\n  }\n  this.state = ImageState.LOADED;\n  this.unlistenImage_();\n  this.changed();\n};\n\n\n/**\n * Load the image or retry if loading previously failed.\n * Loading is taken care of by the tile queue, and calling this method is\n * only needed for preloading or for reloading in case of an error.\n * @override\n * @api\n */\n_ol_Image_.prototype.load = function() {\n  if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n    this.state = ImageState.LOADING;\n    this.changed();\n    this.imageListenerKeys_ = [\n      _ol_events_.listenOnce(this.image_, EventType.ERROR,\n        this.handleImageError_, this),\n      _ol_events_.listenOnce(this.image_, EventType.LOAD,\n        this.handleImageLoad_, this)\n    ];\n    this.imageLoadFunction_(this, this.src_);\n  }\n};\n\n\n/**\n * @param {HTMLCanvasElement|Image|HTMLVideoElement} image Image.\n */\n_ol_Image_.prototype.setImage = function(image) {\n  this.image_ = image;\n};\n\n\n/**\n * Discards event handlers which listen for load completion or errors.\n *\n * @private\n */\n_ol_Image_.prototype.unlistenImage_ = function() {\n  this.imageListenerKeys_.forEach(_ol_events_.unlistenByKey);\n  this.imageListenerKeys_ = null;\n};\nexport default _ol_Image_;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/Image.js\n// module id = null\n// module chunks = ","/**\n * @module ol/source/ImageWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\nimport {inherits} from '../index.js';\nimport _ol_Image_ from '../Image.js';\nimport {assert} from '../asserts.js';\nimport _ol_events_ from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {containsExtent, getCenter, getForViewAndSize, getHeight, getWidth} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {get as getProjection, transform} from '../proj.js';\nimport _ol_reproj_ from '../reproj.js';\nimport ImageSource from '../source/Image.js';\nimport WMSServerType from '../source/WMSServerType.js';\nimport _ol_string_ from '../string.js';\nimport {appendParams} from '../uri.js';\n\n/**\n * @classdesc\n * Source for WMS servers providing single, untiled images.\n *\n * @constructor\n * @fires ol.source.Image.Event\n * @extends {ol.source.Image}\n * @param {olx.source.ImageWMSOptions=} opt_options Options.\n * @api\n */\nconst ImageWMS = function(opt_options) {\n\n  const options = opt_options || {};\n\n  ImageSource.call(this, {\n    attributions: options.attributions,\n    projection: options.projection,\n    resolutions: options.resolutions\n  });\n\n  /**\n   * @private\n   * @type {?string}\n   */\n  this.crossOrigin_ =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.url_ = options.url;\n\n  /**\n   * @private\n   * @type {ol.ImageLoadFunctionType}\n   */\n  this.imageLoadFunction_ = options.imageLoadFunction !== undefined ?\n    options.imageLoadFunction : ImageSource.defaultImageLoadFunction;\n\n  /**\n   * @private\n   * @type {!Object}\n   */\n  this.params_ = options.params || {};\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.v13_ = true;\n  this.updateV13_();\n\n  /**\n   * @private\n   * @type {ol.source.WMSServerType|undefined}\n   */\n  this.serverType_ = /** @type {ol.source.WMSServerType|undefined} */ (options.serverType);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n  /**\n   * @private\n   * @type {ol.Image}\n   */\n  this.image_ = null;\n\n  /**\n   * @private\n   * @type {ol.Size}\n   */\n  this.imageSize_ = [0, 0];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedRevision_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.ratio_ = options.ratio !== undefined ? options.ratio : 1.5;\n\n};\n\ninherits(ImageWMS, ImageSource);\n\n\n/**\n * @const\n * @type {ol.Size}\n * @private\n */\nImageWMS.GETFEATUREINFO_IMAGE_SIZE_ = [101, 101];\n\n\n/**\n * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n * constructed.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {ol.ProjectionLike} projection Projection.\n * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n *     in the `LAYERS` parameter will be used. `VERSION` should not be\n *     specified here.\n * @return {string|undefined} GetFeatureInfo URL.\n * @api\n */\nImageWMS.prototype.getGetFeatureInfoUrl = function(coordinate, resolution, projection, params) {\n  if (this.url_ === undefined) {\n    return undefined;\n  }\n  const projectionObj = getProjection(projection);\n  const sourceProjectionObj = this.getProjection();\n\n  if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n    resolution = _ol_reproj_.calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, resolution);\n    coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n  }\n\n  const extent = getForViewAndSize(coordinate, resolution, 0,\n    ImageWMS.GETFEATUREINFO_IMAGE_SIZE_);\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetFeatureInfo',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true,\n    'QUERY_LAYERS': this.params_['LAYERS']\n  };\n  assign(baseParams, this.params_, params);\n\n  const x = Math.floor((coordinate[0] - extent[0]) / resolution);\n  const y = Math.floor((extent[3] - coordinate[1]) / resolution);\n  baseParams[this.v13_ ? 'I' : 'X'] = x;\n  baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n  return this.getRequestUrl_(\n    extent, ImageWMS.GETFEATUREINFO_IMAGE_SIZE_,\n    1, sourceProjectionObj || projectionObj, baseParams);\n};\n\n\n/**\n * Get the user-provided params, i.e. those passed to the constructor through\n * the \"params\" option, and possibly updated using the updateParams method.\n * @return {Object} Params.\n * @api\n */\nImageWMS.prototype.getParams = function() {\n  return this.params_;\n};\n\n\n/**\n * @inheritDoc\n */\nImageWMS.prototype.getImageInternal = function(extent, resolution, pixelRatio, projection) {\n\n  if (this.url_ === undefined) {\n    return null;\n  }\n\n  resolution = this.findNearestResolution(resolution);\n\n  if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n    pixelRatio = 1;\n  }\n\n  const imageResolution = resolution / pixelRatio;\n\n  const center = getCenter(extent);\n  const viewWidth = Math.ceil(getWidth(extent) / imageResolution);\n  const viewHeight = Math.ceil(getHeight(extent) / imageResolution);\n  const viewExtent = getForViewAndSize(center, imageResolution, 0,\n    [viewWidth, viewHeight]);\n  const requestWidth = Math.ceil(this.ratio_ * getWidth(extent) / imageResolution);\n  const requestHeight = Math.ceil(this.ratio_ * getHeight(extent) / imageResolution);\n  const requestExtent = getForViewAndSize(center, imageResolution, 0,\n    [requestWidth, requestHeight]);\n\n  const image = this.image_;\n  if (image &&\n      this.renderedRevision_ == this.getRevision() &&\n      image.getResolution() == resolution &&\n      image.getPixelRatio() == pixelRatio &&\n      containsExtent(image.getExtent(), viewExtent)) {\n    return image;\n  }\n\n  const params = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetMap',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true\n  };\n  assign(params, this.params_);\n\n  this.imageSize_[0] = Math.round(getWidth(requestExtent) / imageResolution);\n  this.imageSize_[1] = Math.round(getHeight(requestExtent) / imageResolution);\n\n  const url = this.getRequestUrl_(requestExtent, this.imageSize_, pixelRatio,\n    projection, params);\n\n  this.image_ = new _ol_Image_(requestExtent, resolution, pixelRatio,\n    url, this.crossOrigin_, this.imageLoadFunction_);\n\n  this.renderedRevision_ = this.getRevision();\n\n  _ol_events_.listen(this.image_, EventType.CHANGE,\n    this.handleImageChange, this);\n\n  return this.image_;\n\n};\n\n\n/**\n * Return the image load function of the source.\n * @return {ol.ImageLoadFunctionType} The image load function.\n * @api\n */\nImageWMS.prototype.getImageLoadFunction = function() {\n  return this.imageLoadFunction_;\n};\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {ol.Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.proj.Projection} projection Projection.\n * @param {Object} params Params.\n * @return {string} Request URL.\n * @private\n */\nImageWMS.prototype.getRequestUrl_ = function(extent, size, pixelRatio, projection, params) {\n\n  assert(this.url_ !== undefined, 9); // `url` must be configured or set using `#setUrl()`\n\n  params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n  if (!('STYLES' in this.params_)) {\n    params['STYLES'] = '';\n  }\n\n  if (pixelRatio != 1) {\n    switch (this.serverType_) {\n      case WMSServerType.GEOSERVER:\n        const dpi = (90 * pixelRatio + 0.5) | 0;\n        if ('FORMAT_OPTIONS' in params) {\n          params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n        } else {\n          params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n        }\n        break;\n      case WMSServerType.MAPSERVER:\n        params['MAP_RESOLUTION'] = 90 * pixelRatio;\n        break;\n      case WMSServerType.CARMENTA_SERVER:\n      case WMSServerType.QGIS:\n        params['DPI'] = 90 * pixelRatio;\n        break;\n      default:\n        assert(false, 8); // Unknown `serverType` configured\n        break;\n    }\n  }\n\n  params['WIDTH'] = size[0];\n  params['HEIGHT'] = size[1];\n\n  const axisOrientation = projection.getAxisOrientation();\n  let bbox;\n  if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n    bbox = [extent[1], extent[0], extent[3], extent[2]];\n  } else {\n    bbox = extent;\n  }\n  params['BBOX'] = bbox.join(',');\n\n  return appendParams(/** @type {string} */ (this.url_), params);\n};\n\n\n/**\n * Return the URL used for this WMS source.\n * @return {string|undefined} URL.\n * @api\n */\nImageWMS.prototype.getUrl = function() {\n  return this.url_;\n};\n\n\n/**\n * Set the image load function of the source.\n * @param {ol.ImageLoadFunctionType} imageLoadFunction Image load function.\n * @api\n */\nImageWMS.prototype.setImageLoadFunction = function(\n  imageLoadFunction) {\n  this.image_ = null;\n  this.imageLoadFunction_ = imageLoadFunction;\n  this.changed();\n};\n\n\n/**\n * Set the URL to use for requests.\n * @param {string|undefined} url URL.\n * @api\n */\nImageWMS.prototype.setUrl = function(url) {\n  if (url != this.url_) {\n    this.url_ = url;\n    this.image_ = null;\n    this.changed();\n  }\n};\n\n\n/**\n * Update the user-provided params.\n * @param {Object} params Params.\n * @api\n */\nImageWMS.prototype.updateParams = function(params) {\n  assign(this.params_, params);\n  this.updateV13_();\n  this.image_ = null;\n  this.changed();\n};\n\n\n/**\n * @private\n */\nImageWMS.prototype.updateV13_ = function() {\n  const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n  this.v13_ = _ol_string_.compareVersions(version, '1.3') >= 0;\n};\nexport default ImageWMS;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/ImageWMS.js\n// module id = null\n// module chunks = ","/**\n * @module ngeo.misc.FeatureHelper\n*/\nimport ngeoBase from 'ngeo/index.js';\n\n/** @suppress {extraRequire} */\nimport ngeoFilters from 'ngeo/filters.js';\n\n/** @suppress {extraRequire} */\nimport ngeoDownloadService from 'ngeo/download/service.js';\n\nimport ngeoInteractionMeasure from 'ngeo/interaction/Measure.js';\nimport ngeoInteractionMeasureAzimut from 'ngeo/interaction/MeasureAzimut.js';\nimport * as olArray from 'ol/array.js';\nimport * as olColor from 'ol/color.js';\nimport * as olExtent from 'ol/extent.js';\nimport olFeature from 'ol/Feature.js';\nimport olGeomLineString from 'ol/geom/LineString.js';\nimport olGeomMultiLineString from 'ol/geom/MultiLineString.js';\nimport olGeomMultiPoint from 'ol/geom/MultiPoint.js';\nimport olGeomPoint from 'ol/geom/Point.js';\nimport olGeomPolygon from 'ol/geom/Polygon.js';\nimport olGeomMultiPolygon from 'ol/geom/MultiPolygon.js';\nimport olFormatGPX from 'ol/format/GPX.js';\nimport olFormatKML from 'ol/format/KML.js';\nimport olStyleCircle from 'ol/style/Circle.js';\nimport olStyleFill from 'ol/style/Fill.js';\nimport olStyleRegularShape from 'ol/style/RegularShape.js';\nimport olStyleStroke from 'ol/style/Stroke.js';\nimport olStyleStyle from 'ol/style/Style.js';\nimport olStyleText from 'ol/style/Text.js';\n\n/**\n * Provides methods for features, such as:\n *  - style setting / getting\n *  - measurement\n *  - export\n *\n * @constructor\n * @struct\n * @param {!angular.$injector} $injector Main injector.\n * @param {!angular.$filter} $filter Angular filter.\n * @ngdoc service\n * @ngname ngeoFeatureHelper\n *//* @ngInject\n */\nconst exports = function($injector, $filter) {\n\n  /**\n   * @type {!angular.$filter}\n   * @private\n   */\n  this.$filter_ = $filter;\n\n  /**\n   * @type {number|undefined}\n   * @private\n   */\n  this.decimals_ = undefined;\n  if ($injector.has('ngeoMeasureDecimals')) {\n    this.decimals_ = $injector.get('ngeoMeasureDecimals');\n  }\n\n\n  /**\n   * @type {number|undefined}\n   * @private\n   */\n  this.precision_ = undefined;\n  if ($injector.has('ngeoMeasurePrecision')) {\n    this.precision_ = $injector.get('ngeoMeasurePrecision');\n  }\n\n  /**\n   * @type {!ngeox.number}\n   */\n  this.numberFormat_ = /** @type {ngeox.number} */ ($filter('number'));\n\n  /**\n   * @type {!ngeox.unitPrefix}\n   */\n  this.unitPrefixFormat_ = /** @type {ngeox.unitPrefix} */ ($filter('ngeoUnitPrefix'));\n\n  /**\n   * @type {!ngeox.numberCoordinates}\n   */\n  this.ngeoNumberCoordinates_ = /** @type {ngeox.numberCoordinates} */ ($filter('ngeoNumberCoordinates'));\n\n  /**\n   * Filter function to display point coordinates or null to don't use any filter.\n   * @type {function(*):string|null}\n   * @private\n   */\n  this.pointFilterFn_ = null;\n\n  /**\n   * Arguments to apply to the point filter function.\n   * @type {Array.<*>}\n   * @private\n   */\n  this.pointFilterArgs_ = [];\n\n  if ($injector.has('ngeoPointfilter')) {\n    const filterElements = $injector.get('ngeoPointfilter').split(':');\n    const filterName = filterElements.shift();\n    const filter = this.$filter_(filterName);\n    goog.asserts.assertFunction(filter);\n    this.pointFilterFn_ = filter;\n    this.pointFilterArgs_ = filterElements;\n  } else {\n    this.pointFilterFn_ = null;\n  }\n\n  /**\n   * @type {!ol.proj.Projection}\n   * @private\n   */\n  this.projection_;\n\n  /**\n   * Download service.\n   * @type {ngeox.Download}\n   * @private\n   */\n  this.download_ = $injector.get('ngeoDownload');\n\n};\n\n\n/**\n * @param {!ol.proj.Projection} projection Projection.\n * @export\n */\nexports.prototype.setProjection = function(projection) {\n  this.projection_ = projection;\n};\n\n\n// === STYLE METHODS ===\n\n\n/**\n * Set the style of a feature using its inner properties and depending on\n * its geometry type.\n * @param {!ol.Feature} feature Feature.\n * @param {boolean=} opt_select Whether the feature should be rendered as\n *     selected, which includes additional vertex and halo styles.\n * @export\n */\nexports.prototype.setStyle = function(feature, opt_select) {\n  const styles = this.getStyle(feature);\n  if (opt_select) {\n    if (this.supportsVertex_(feature)) {\n      styles.push(this.getVertexStyle());\n    }\n    styles.unshift(this.getHaloStyle_(feature));\n  }\n  feature.setStyle(styles);\n};\n\n\n/**\n * Create and return a style object from a given feature using its inner\n * properties and depending on its geometry type.\n * @param {!ol.Feature} feature Feature.\n * @return {!Array.<!ol.style.Style>} The style object.\n * @export\n */\nexports.prototype.getStyle = function(feature) {\n  const type = this.getType(feature);\n  let style;\n\n  switch (type) {\n    case ngeoBase.GeometryType.LINE_STRING:\n      style = this.getLineStringStyle_(feature);\n      break;\n    case ngeoBase.GeometryType.POINT:\n      style = this.getPointStyle_(feature);\n      break;\n    case ngeoBase.GeometryType.CIRCLE:\n    case ngeoBase.GeometryType.POLYGON:\n    case ngeoBase.GeometryType.RECTANGLE:\n      style = this.getPolygonStyle_(feature);\n      break;\n    case ngeoBase.GeometryType.TEXT:\n      style = this.getTextStyle_(feature);\n      break;\n    default:\n      break;\n  }\n\n  goog.asserts.assert(style, 'Style should be thruthy');\n\n  let styles;\n  if (style.constructor === Array) {\n    styles = /** @type {!Array.<!ol.style.Style>}*/ (style);\n  } else {\n    styles = [style];\n  }\n\n  return styles;\n};\n\n\n/**\n * @param {!ol.Feature} feature Feature with linestring geometry.\n * @return {!Array.<!ol.style.Style>} Style.\n * @private\n */\nexports.prototype.getLineStringStyle_ = function(feature) {\n  const strokeWidth = this.getStrokeProperty(feature);\n  const showLabel = this.getShowLabelProperty(feature);\n  const showMeasure = this.getShowMeasureProperty(feature);\n  const color = this.getRGBAColorProperty(feature);\n\n  const styles = [new olStyleStyle({\n    stroke: new olStyleStroke({\n      color: color,\n      width: strokeWidth\n    })\n  })];\n  //Label Style\n  const textLabelValues = [];\n  if (showMeasure) {\n    textLabelValues.push(this.getMeasure(feature));\n  }\n  if (showLabel) {\n    textLabelValues.push(this.getNameProperty(feature));\n  }\n  if (showLabel ||  showMeasure) {\n    // display both label using  \\n\n    const textLabelValue = textLabelValues.join('\\n');\n    styles.push(new olStyleStyle({\n      text: this.createTextStyle_({\n        text: textLabelValue\n      })\n    }));\n  }\n  return styles;\n};\n\n\n/**\n * @param {!ol.Feature} feature Feature with point geometry.\n * @return {!Array.<!ol.style.Style>} Style.\n * @private\n */\nexports.prototype.getPointStyle_ = function(feature) {\n  const size = this.getSizeProperty(feature);\n  const color = this.getRGBAColorProperty(feature);\n  const showLabel = this.getShowLabelProperty(feature);\n  const showMeasure = this.getShowMeasureProperty(feature);\n  const styles = [new olStyleStyle({\n    image: new olStyleCircle({\n      radius: size,\n      fill: new olStyleFill({\n        color: color\n      })\n    })\n  })];\n  //Label Style\n  const textLabelValues = [];\n  if (showMeasure) {\n    textLabelValues.push(this.getMeasure(feature));\n  }\n  if (showLabel) {\n    textLabelValues.push(this.getNameProperty(feature));\n  }\n  if (showLabel ||  showMeasure) {\n    // display both label using  \\n\n    const textLabelValue = textLabelValues.join('\\n');\n    styles.push(new olStyleStyle({\n      text: this.createTextStyle_({\n        text: textLabelValue,\n        offsetY: -(size + 10 / 2 + 4)\n      })\n    }));\n  }\n  return styles;\n};\n\n\n/**\n * Get an optional number feature attribute.\n *\n * @param {!ol.Feature} feature Feature.\n * @param {string} attrib The attribute name.\n * @return {number|undefined}, The attribute value\n */\nexports.prototype.optNumber = function(feature, attrib) {\n  const value = feature.get(attrib);\n  if (value !== undefined) {\n    if (typeof value == 'string') {\n      return +value;\n    } else {\n      return goog.asserts.assertNumber(value);\n    }\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * Get a number feature attribute.\n *\n * @param {!ol.Feature} feature Feature.\n * @param {string} attrib The attribute name.\n * @return {number}, The attribute value\n */\nexports.prototype.getNumber = function(feature, attrib) {\n  const value = feature.get(attrib);\n  if (typeof value == 'string') {\n    return +value;\n  } else {\n    return goog.asserts.assertNumber(value);\n  }\n};\n\n\n/**\n * @param {!ol.Feature} feature Feature with polygon geometry.\n * @return {!Array.<!ol.style.Style>} Style.\n * @private\n */\nexports.prototype.getPolygonStyle_ = function(feature) {\n  const strokeWidth = this.getStrokeProperty(feature);\n  const opacity = this.getOpacityProperty(feature);\n  const color = this.getRGBAColorProperty(feature);\n  const showLabel = this.getShowLabelProperty(feature);\n  const showMeasure = this.getShowMeasureProperty(feature);\n\n  // fill color with opacity\n  const fillColor = color.slice();\n  fillColor[3] = opacity;\n\n  const azimut = this.optNumber(feature, ngeoBase.FeatureProperties.AZIMUT);\n\n  const styles = [new olStyleStyle({\n    fill: new olStyleFill({\n      color: fillColor\n    }),\n    stroke: new olStyleStroke({\n      color: color,\n      width: strokeWidth\n    })\n  })];\n  if (showMeasure || showLabel) {\n    if (azimut !== undefined) {\n      // Radius style:\n      const line = this.getRadiusLine(feature, azimut);\n      const length = ngeoInteractionMeasure.getFormattedLength(\n        line, this.projection_, this.precision_, this.unitPrefixFormat_);\n\n      styles.push(new olStyleStyle({\n        geometry: line,\n        fill: new olStyleFill({\n          color: fillColor\n        }),\n        stroke: new olStyleStroke({\n          color: color,\n          width: strokeWidth\n        }),\n        text: this.createTextStyle_({\n          text: length,\n          angle: ((azimut % 180) + 180) % 180 - 90\n        })\n      }));\n\n      // Azimut style\n      styles.push(new olStyleStyle({\n        geometry: new olGeomPoint(line.getLastCoordinate()),\n        text: this.createTextStyle_({\n          text: `${this.numberFormat_(azimut, this.decimals_)}`,\n          size: 10,\n          offsetX: Math.cos((azimut - 90) * Math.PI / 180) * 20,\n          offsetY: Math.sin((azimut - 90) * Math.PI / 180) * 20\n        })\n      }));\n    } else {\n      //Label Style\n      const textLabelValues = [];\n      if (showMeasure) {\n        textLabelValues.push(this.getMeasure(feature));\n      }\n      if (showLabel) {\n        textLabelValues.push(this.getNameProperty(feature));\n      }\n      if (showLabel ||  showMeasure) {\n        // display both label using  \\n\n        const textLabelValue = textLabelValues.join('\\n');\n        styles.push(new olStyleStyle({\n          text: this.createTextStyle_({\n            text: textLabelValue,\n            offsetY: -(8 / 2 + 4)\n          })\n        }));\n      }\n    }\n  }\n  return styles;\n};\n\n\n/**\n * @param {!ol.Feature} feature Feature with point geometry, rendered as text.\n * @return {!ol.style.Style} Style.\n * @private\n */\nexports.prototype.getTextStyle_ = function(feature) {\n\n  return new olStyleStyle({\n    text: this.createTextStyle_({\n      text: this.getNameProperty(feature),\n      size: this.getSizeProperty(feature),\n      angle: this.getAngleProperty(feature),\n      color: this.getRGBAColorProperty(feature),\n      width: this.getStrokeProperty(feature)\n    })\n  });\n};\n\n\n/**\n * @param {!ol.Feature} feature Feature to create the editing styles with.\n * @return {!Array.<!ol.style.Style>} List of style.\n * @export\n */\nexports.prototype.createEditingStyles = function(feature) {\n  // (1) Style definition depends on geometry type\n  const white = [255, 255, 255, 1];\n  const blue = [0, 153, 255, 1];\n  const width = 3;\n  const styles = [];\n\n  const geom = feature.getGeometry();\n  console.assert(geom);\n  const type = geom.getType();\n\n  if (type === 'Point') {\n    styles.push(\n      new olStyleStyle({\n        image: new olStyleCircle({\n          radius: width * 2,\n          fill: new olStyleFill({\n            color: blue\n          }),\n          stroke: new olStyleStroke({\n            color: white,\n            width: width / 2\n          })\n        }),\n        zIndex: Infinity\n      })\n    );\n  } else {\n    if (type === 'LineString') {\n      styles.push(\n        new olStyleStyle({\n          stroke: new olStyleStroke({\n            color: white,\n            width: width + 2\n          })\n        })\n      );\n      styles.push(\n        new olStyleStyle({\n          stroke: new olStyleStroke({\n            color: blue,\n            width: width\n          })\n        })\n      );\n    } else {\n      styles.push(\n        new olStyleStyle({\n          stroke: new olStyleStroke({\n            color: blue,\n            width: width / 2\n          }),\n          fill: new olStyleFill({\n            color: [255, 255, 255, 0.5]\n          })\n        })\n      );\n    }\n\n    // (2) Anything else than 'Point' requires the vertex style as well\n    styles.push(this.getVertexStyle(true));\n  }\n\n  return styles;\n};\n\n\n/**\n * Create and return a style object to be used for vertex.\n * @param {boolean=} opt_incGeomFunc Whether to include the geometry function\n *     or not. One wants to use the geometry function when you want to draw\n *     the vertex of features that don't have point geometries. One doesn't\n *     want to include the geometry function if you just want to have the\n *     style object itself to be used to draw features that have point\n *     geometries. Defaults to `true`.\n * @return {!ol.style.Style} Style.\n * @export\n */\nexports.prototype.getVertexStyle = function(opt_incGeomFunc) {\n  const incGeomFunc = opt_incGeomFunc !== undefined ? opt_incGeomFunc : true;\n\n  const options = {\n    image: new olStyleRegularShape({\n      radius: 6,\n      points: 4,\n      angle: Math.PI / 4,\n      fill: new olStyleFill({\n        color: [255, 255, 255, 0.5]\n      }),\n      stroke: new olStyleStroke({\n        color: [0, 0, 0, 1]\n      })\n    })\n  };\n\n  if (incGeomFunc) {\n    options.geometry = function(feature) {\n      const geom = feature.getGeometry();\n\n      if (geom.getType() == 'Point') {\n        return;\n      }\n\n      let innerMultiCoordinates;\n      let multiCoordinates = [];\n      let coordinates = [];\n      let i, ii;\n      if (geom instanceof olGeomLineString) {\n        coordinates = geom.getCoordinates();\n      } else if (geom instanceof olGeomMultiLineString) {\n        multiCoordinates = geom.getCoordinates();\n      } else if (geom instanceof olGeomPolygon) {\n        coordinates = geom.getCoordinates()[0];\n      } else if (geom instanceof olGeomMultiPolygon) {\n        innerMultiCoordinates = geom.getCoordinates();\n      }\n\n      if (innerMultiCoordinates) {\n        for (i = 0, ii = innerMultiCoordinates.length; i < ii; i++) {\n          multiCoordinates = multiCoordinates.concat(innerMultiCoordinates[i]);\n        }\n      }\n      for (i = 0, ii = multiCoordinates.length; i < ii; i++) {\n        coordinates = coordinates.concat(multiCoordinates[i]);\n      }\n\n      if (coordinates.length) {\n        return new olGeomMultiPoint(coordinates);\n      } else {\n        return geom;\n      }\n    };\n  }\n\n  return new olStyleStyle(options);\n};\n\n\n/**\n * @param {!ol.Feature} feature Feature.\n * @return {boolean} Whether the feature supports vertex or not.\n * @private\n */\nexports.prototype.supportsVertex_ = function(feature) {\n  const supported = [\n    ngeoBase.GeometryType.LINE_STRING,\n    ngeoBase.GeometryType.POLYGON,\n    ngeoBase.GeometryType.RECTANGLE\n  ];\n  const type = this.getType(feature);\n  return olArray.includes(supported, type);\n};\n\n\n/**\n * @param {!ol.Feature} feature Feature.\n * @return {!ol.style.Style} Style.\n * @private\n */\nexports.prototype.getHaloStyle_ = function(feature) {\n  const type = this.getType(feature);\n  let style;\n  const haloSize = 3;\n\n  switch (type) {\n    case ngeoBase.GeometryType.POINT:\n      const size = this.getSizeProperty(feature);\n      style = new olStyleStyle({\n        image: new olStyleCircle({\n          radius: size + haloSize,\n          fill: new olStyleFill({\n            color: [255, 255, 255, 1]\n          })\n        })\n      });\n      break;\n    case ngeoBase.GeometryType.LINE_STRING:\n    case ngeoBase.GeometryType.CIRCLE:\n    case ngeoBase.GeometryType.POLYGON:\n    case ngeoBase.GeometryType.RECTANGLE:\n      const strokeWidth = this.getStrokeProperty(feature);\n      style = new olStyleStyle({\n        stroke: new olStyleStroke({\n          color: [255, 255, 255, 1],\n          width: strokeWidth + haloSize * 2\n        })\n      });\n      break;\n    case ngeoBase.GeometryType.TEXT:\n      style = new olStyleStyle({\n        text: this.createTextStyle_({\n          text: this.getNameProperty(feature),\n          size: this.getSizeProperty(feature),\n          angle: this.getAngleProperty(feature),\n          width: haloSize * 3\n        })\n      });\n      break;\n    default:\n      break;\n  }\n\n  goog.asserts.assert(style, 'Style should be thruthy');\n\n  return style;\n};\n\n\n// === PROPERTY GETTERS ===\n\n/**\n * Delete the unwanted ol3 properties from the current feature then return the\n * properties.\n * Also delete the 'ngeo_feature_type_' from the ngeo query system.\n * @param {!ol.Feature} feature Feature.\n * @return {!Object.<string, *>} Filtered properties of the current feature.\n * @export\n */\nexports.getFilteredFeatureValues = function(feature) {\n  const properties = feature.getProperties();\n  delete properties['boundedBy'];\n  delete properties[feature.getGeometryName()];\n  delete properties['ngeo_feature_type_'];\n  return properties;\n};\n\n/**\n * @param {ol.Feature} feature Feature.\n * @return {number} Angle.\n * @export\n */\nexports.prototype.getAngleProperty = function(feature) {\n  const angle = +(/** @type {string} */ (\n    feature.get(ngeoBase.FeatureProperties.ANGLE)));\n  goog.asserts.assertNumber(angle);\n  return angle;\n};\n\n\n/**\n * @param {!ol.Feature} feature Feature.\n * @return {string} Color.\n * @export\n */\nexports.prototype.getColorProperty = function(feature) {\n\n  const color = goog.asserts.assertString(feature.get(ngeoBase.FeatureProperties.COLOR));\n\n  goog.asserts.assertString(color);\n\n  return color;\n};\n\n\n/**\n * @param {!ol.Feature} feature Feature.\n * @return {ol.Color} Color.\n * @export\n */\nexports.prototype.getRGBAColorProperty = function(feature) {\n  return olColor.fromString(this.getColorProperty(feature));\n};\n\n\n/**\n * @param {!ol.Feature} feature Feature.\n * @return {string} Name.\n * @export\n */\nexports.prototype.getNameProperty = function(feature) {\n  const name = goog.asserts.assertString(feature.get(ngeoBase.FeatureProperties.NAME));\n  goog.asserts.assertString(name);\n  return name;\n};\n\n\n/**\n * @param {!ol.Feature} feature Feature.\n * @return {number} Opacity.\n * @export\n */\nexports.prototype.getOpacityProperty = function(feature) {\n  return this.getNumber(feature, ngeoBase.FeatureProperties.OPACITY);\n};\n\n\n/**\n * @param {!ol.Feature} feature Feature.\n * @return {boolean} Show measure.\n * @export\n */\nexports.prototype.getShowMeasureProperty = function(feature) {\n  let showMeasure = feature.get(ngeoBase.FeatureProperties.SHOW_MEASURE);\n  if (showMeasure === undefined) {\n    showMeasure = false;\n  } else if (typeof showMeasure === 'string') {\n    showMeasure = (showMeasure === 'true') ? true : false;\n  }\n  return goog.asserts.assertBoolean(showMeasure);\n};\n\n/**\n * @param {!ol.Feature} feature Feature.\n * @return {boolean} Show feature label.\n * @export\n */\nexports.prototype.getShowLabelProperty = function(feature) {\n  let showLabel = feature.get(ngeoBase.FeatureProperties.SHOW_LABEL);\n  if (showLabel === undefined) {\n    showLabel = false;\n  } else if (typeof showLabel === 'string') {\n    showLabel = (showLabel === 'true') ? true : false;\n  }\n  return goog.asserts.assertBoolean(showLabel);\n};\n\n/**\n * @param {!ol.Feature} feature Feature.\n * @return {number} Size.\n * @export\n */\nexports.prototype.getSizeProperty = function(feature) {\n  return this.getNumber(feature, ngeoBase.FeatureProperties.SIZE);\n};\n\n\n/**\n * @param {!ol.Feature} feature Feature.\n * @return {number} Stroke.\n * @export\n */\nexports.prototype.getStrokeProperty = function(feature) {\n  return this.getNumber(feature, ngeoBase.FeatureProperties.STROKE);\n};\n\n\n// === EXPORT ===\n\n\n/**\n * Export features in the given format. The projection of the exported features\n * is: `EPSG:4326`.\n * @param {!Array.<!ol.Feature>} features Array of vector features.\n * @param {string} formatType Format type to export the features.\n * @export\n */\nexports.prototype.export = function(features, formatType) {\n  switch (formatType) {\n    case exports.FormatType.GPX:\n      this.exportGPX(features);\n      break;\n    case exports.FormatType.KML:\n      this.exportKML(features);\n      break;\n    default:\n      break;\n  }\n};\n\n\n/**\n * Export features in GPX and download the result to the browser. The\n * projection of the exported features is: `EPSG:4326`.\n * @param {!Array.<!ol.Feature>} features Array of vector features.\n * @export\n */\nexports.prototype.exportGPX = function(features) {\n  const format = new olFormatGPX();\n  const mimeType = 'application/gpx+xml';\n  const fileName = 'export.gpx';\n  this.export_(features, format, fileName, mimeType);\n};\n\n\n/**\n * Export features in KML and download the result to the browser. The\n * projection of the exported features is: `EPSG:4326`.\n * @param {!Array.<!ol.Feature>} features Array of vector features.\n * @export\n */\nexports.prototype.exportKML = function(features) {\n  const format = new olFormatKML();\n  const mimeType = 'application/vnd.google-earth.kml+xml';\n  const fileName = 'export.kml';\n  this.export_(features, format, fileName, mimeType);\n};\n\n\n/**\n * Export features using a given format to a specific filename and download\n * the result to the browser. The projection of the exported features is:\n * `EPSG:4326`.\n * @param {!Array.<!ol.Feature>} features Array of vector features.\n * @param {!ol.format.Feature} format Format\n * @param {string} fileName Name of the file.\n * @param {string=} opt_mimeType Mime type. Defaults to 'text/plain'.\n * @private\n */\nexports.prototype.export_ = function(features, format, fileName, opt_mimeType) {\n  const mimeType = opt_mimeType !== undefined ? opt_mimeType : 'text/plain';\n\n  // clone the features to apply the original style to the clone\n  // (the original may have select style active)\n  const clones = [];\n  let clone;\n  features.forEach((feature) => {\n    clone = new olFeature(feature.getProperties());\n    this.setStyle(clone, false);\n    clones.push(clone);\n  });\n\n  const writeOptions = this.projection_ ? {\n    dataProjection: 'EPSG:4326',\n    featureProjection: this.projection_\n  } : {};\n\n  const data = format.writeFeatures(clones, writeOptions);\n  this.download_(\n    data, fileName, `${mimeType};charset=utf-8`);\n};\n\n\n// === OTHER UTILITY METHODS ===\n\n\n/**\n * @param {!ngeox.style.TextOptions} options Options.\n * @return {!ol.style.Text} Style.\n * @private\n */\nexports.prototype.createTextStyle_ = function(options) {\n  if (options.angle) {\n    const angle = options.angle !== undefined ? options.angle : 0;\n    const rotation = angle * Math.PI / 180;\n    options.rotation = rotation;\n    delete options.angle;\n  }\n\n  options.font = ['normal', `${options.size || 10}pt`, 'Arial'].join(' ');\n\n  if (options.color) {\n    options.fill = new olStyleFill({color: options.color || [0, 0, 0, 1]});\n    delete options.color;\n  }\n\n  options.stroke = new olStyleStroke({\n    color: [255, 255, 255, 1],\n    width: options.width || 3\n  });\n  delete options.width;\n\n  return new olStyleText(options);\n};\n\n\n/**\n * Get the measure of the given feature as a string. For points, you can format\n * the result by setting a filter to apply on the coordinate with the function\n * {@link ngeo.misc.FeatureHelper.prototype.setPointFilterFn}.\n * @param {!ol.Feature} feature Feature.\n * @return {string} Measure.\n * @export\n */\nexports.prototype.getMeasure = function(feature) {\n\n  const geometry = feature.getGeometry();\n  goog.asserts.assert(geometry, 'Geometry should be truthy');\n\n  let measure = '';\n\n  if (geometry instanceof olGeomPolygon) {\n    if (this.getType(feature) === ngeoBase.GeometryType.CIRCLE) {\n      const azimut = this.optNumber(feature, ngeoBase.FeatureProperties.AZIMUT);\n      goog.asserts.assertNumber(azimut);\n      const line = this.getRadiusLine(feature, azimut);\n\n      measure = ngeoInteractionMeasureAzimut.getFormattedAzimutRadius(\n        line, this.projection_, this.decimals_, this.precision_, this.unitPrefixFormat_, this.numberFormat_);\n    } else {\n      measure = ngeoInteractionMeasure.getFormattedArea(\n        geometry, this.projection_, this.precision_, this.unitPrefixFormat_);\n    }\n  } else if (geometry instanceof olGeomLineString) {\n    measure = ngeoInteractionMeasure.getFormattedLength(\n      geometry, this.projection_, this.precision_, this.unitPrefixFormat_);\n  } else if (geometry instanceof olGeomPoint) {\n    if (this.pointFilterFn_ === null) {\n      measure = ngeoInteractionMeasure.getFormattedPoint(\n        geometry, this.decimals_, this.ngeoNumberCoordinates_);\n    } else {\n      const coordinates = geometry.getCoordinates();\n      const args = this.pointFilterArgs_.slice(0);\n      args.unshift(coordinates);\n      measure = this.pointFilterFn_(...args);\n    }\n  }\n\n  return measure;\n};\n\n\n/**\n * Return the type of geometry of a feature using its geometry property and\n * some inner properties.\n * @param {!ol.Feature} feature Feature.\n * @return {string} The type of geometry.\n * @export\n */\nexports.prototype.getType = function(feature) {\n  const geometry = feature.getGeometry();\n  goog.asserts.assert(geometry, 'Geometry should be thruthy');\n\n  let type;\n\n  if (geometry instanceof olGeomPoint) {\n    if (feature.get(ngeoBase.FeatureProperties.IS_TEXT)) {\n      type = ngeoBase.GeometryType.TEXT;\n    } else {\n      type = ngeoBase.GeometryType.POINT;\n    }\n  } else if (geometry instanceof olGeomMultiPoint) {\n    type = ngeoBase.GeometryType.MULTI_POINT;\n  } else if (geometry instanceof olGeomPolygon) {\n    if (feature.get(ngeoBase.FeatureProperties.IS_CIRCLE)) {\n      type = ngeoBase.GeometryType.CIRCLE;\n    } else if (feature.get(ngeoBase.FeatureProperties.IS_RECTANGLE)) {\n      type = ngeoBase.GeometryType.RECTANGLE;\n    } else {\n      type = ngeoBase.GeometryType.POLYGON;\n    }\n  } else if (geometry instanceof olGeomMultiPolygon) {\n    type = ngeoBase.GeometryType.MULTI_POLYGON;\n  } else if (geometry instanceof olGeomLineString) {\n    type = ngeoBase.GeometryType.LINE_STRING;\n  } else if (geometry instanceof olGeomMultiLineString) {\n    type = ngeoBase.GeometryType.MULTI_LINE_STRING;\n  }\n\n  goog.asserts.assert(type, 'Type should be thruthy');\n\n  return type;\n};\n\n\n/**\n * This method first checks if a feature's extent intersects with the map view\n * extent. If it doesn't, then the view gets recentered with an animation to\n * the center of the feature.\n * @param {!ol.Feature} feature Feature.\n * @param {!ol.Map} map Map.\n * @param {number=} opt_panDuration Pan animation duration. Defaults to `250`.\n * @export\n */\nexports.prototype.panMapToFeature = function(feature, map,\n  opt_panDuration) {\n\n  const panDuration = opt_panDuration !== undefined ? opt_panDuration : 250;\n  const size = map.getSize();\n  goog.asserts.assertArray(size);\n  const view = map.getView();\n  const extent = view.calculateExtent(size);\n  const geometry = feature.getGeometry();\n\n  if (!geometry.intersectsExtent(extent)) {\n    const mapCenter = view.getCenter();\n    goog.asserts.assertArray(mapCenter);\n\n    let featureCenter;\n    if (geometry instanceof olGeomLineString) {\n      featureCenter = geometry.getCoordinateAt(0.5);\n    } else if (geometry instanceof olGeomPolygon) {\n      featureCenter = geometry.getInteriorPoint().getCoordinates();\n    } else if (geometry instanceof olGeomPoint) {\n      featureCenter = geometry.getCoordinates();\n    } else {\n      featureCenter = olExtent.getCenter(geometry.getExtent());\n    }\n\n    view.animate({\n      center: mapCenter,\n      duration: panDuration\n    }, {\n      center: featureCenter,\n      duration: panDuration\n    });\n  }\n};\n\n\n/**\n * This method generates a line string geometry that represents the radius for\n * a given azimut. It expects the input geometry to be a circle.\n * @param {!ol.Feature} feature Feature.\n * @param {number} azimut Azimut in degrees.\n * @return {!ol.geom.LineString} The line geometry.\n */\nexports.prototype.getRadiusLine = function(feature, azimut) {\n  const geometry = feature.getGeometry();\n  // Determine the radius for the circle\n  const extent = geometry.getExtent();\n  const radius = (extent[3] - extent[1]) / 2;\n\n  const center = olExtent.getCenter(geometry.getExtent());\n\n  const x = Math.cos((azimut - 90) * Math.PI / 180) * radius;\n  const y = -Math.sin((azimut - 90) * Math.PI / 180) * radius;\n  const endPoint = [x + center[0], y + center[1]];\n  return new olGeomLineString([center, endPoint]);\n};\n\n\n/**\n * Return the properties of a feature, with the exception of the geometry.\n * @param {!ol.Feature} feature Feature.\n * @return {!Object.<string, *>} Object.\n * @export\n */\nexports.prototype.getNonSpatialProperties = function(feature) {\n  const geometryName = feature.getGeometryName();\n  const nonSpatialProperties = {};\n  const properties = feature.getProperties();\n  for (const key in properties) {\n    if (key !== geometryName) {\n      nonSpatialProperties[key] = properties[key];\n    }\n  }\n  return nonSpatialProperties;\n};\n\n\n/**\n * Clear all properties of a feature, with the exception of the geometry.\n * @param {!ol.Feature} feature Feature.\n * @export\n */\nexports.prototype.clearNonSpatialProperties = function(feature) {\n  const geometryName = feature.getGeometryName();\n  const properties = feature.getProperties();\n  for (const key in properties) {\n    if (key !== geometryName) {\n      feature.set(key, undefined);\n    }\n  }\n};\n\n\n// === FORMAT TYPES ===\n\n\n/**\n * @enum {string}\n * @export\n */\nexports.FormatType = {\n  /**\n   * @type {string}\n   * @export\n   */\n  GPX: 'GPX',\n  /**\n   * @type {string}\n   * @export\n   */\n  KML: 'KML'\n};\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoFeatureHelper', [\n  ngeoDownloadService.name\n]);\nexports.module.service('ngeoFeatureHelper', exports);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/misc/FeatureHelper.js","/**\n * @module ngeo.download.service\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoUtils from 'ngeo/utils.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoDownload', []);\n\nngeoBase.module.requires.push(exports.name);\n\n/**\n * A service to start a download for a file.\n *\n * @return {ngeox.Download} The download function.\n * @ngdoc service\n * @ngname ngeoDownload\n */\nexports.factory_ = function() {\n  /**\n   * @param {string} content The file content.\n   * @param {string} fileName The file name.\n   * @param {string=} opt_fileType The file type. If not given,\n   *    `text/plain;charset=utf-8` is used.\n   */\n  function download(content, fileName, opt_fileType) {\n    // Safari does not properly work with FileSaver. Using the the type 'text/plain'\n    // makes it a least possible to show the file content so that users can\n    // do a manual download with \"Save as\".\n    // See also: https://github.com/eligrey/FileSaver.js/issues/12\n    /** @type {string} */\n    const fileType = opt_fileType !== undefined && !ngeoUtils.isSafari() ?\n      opt_fileType : 'text/plain;charset=utf-8';\n\n    const blob = new Blob([content], {type: fileType});\n    saveAs(blob, fileName);\n  }\n\n  return download;\n};\n\nexports.factory('ngeoDownload', exports.factory_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/download/service.js","/**\n * @module ol/format/GPX\n */\nimport {inherits} from '../index.js';\nimport Feature from '../Feature.js';\nimport {includes} from '../array.js';\nimport {transformWithOptions} from '../format/Feature.js';\nimport XMLFeature from '../format/XMLFeature.js';\nimport XSD from '../format/XSD.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport Point from '../geom/Point.js';\nimport {get as getProjection} from '../proj.js';\nimport _ol_xml_ from '../xml.js';\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GPX format.\n *\n * @constructor\n * @extends {ol.format.XMLFeature}\n * @param {olx.format.GPXOptions=} opt_options Options.\n * @api\n */\nconst GPX = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  XMLFeature.call(this);\n\n  /**\n   * @inheritDoc\n   */\n  this.defaultDataProjection = getProjection('EPSG:4326');\n\n  /**\n   * @type {function(ol.Feature, Node)|undefined}\n   * @private\n   */\n  this.readExtensions_ = options.readExtensions;\n};\n\ninherits(GPX, XMLFeature);\n\n\n/**\n * @const\n * @type {Array.<string>}\n */\nconst NAMESPACE_URIS = [\n  null,\n  'http://www.topografix.com/GPX/1/0',\n  'http://www.topografix.com/GPX/1/1'\n];\n\n\n/**\n * @const\n * @type {string}\n */\nconst SCHEMA_LOCATION = 'http://www.topografix.com/GPX/1/1 ' +\n    'http://www.topografix.com/GPX/1/1/gpx.xsd';\n\n\n/**\n * @const\n * @type {Object.<string, function(Node, Array.<*>): (ol.Feature|undefined)>}\n */\nconst FEATURE_READER = {\n  'rte': readRte,\n  'trk': readTrk,\n  'wpt': readWpt\n};\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n */\nconst GPX_PARSERS = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, {\n    'rte': _ol_xml_.makeArrayPusher(readRte),\n    'trk': _ol_xml_.makeArrayPusher(readTrk),\n    'wpt': _ol_xml_.makeArrayPusher(readWpt)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n */\nconst LINK_PARSERS = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, {\n    'text': _ol_xml_.makeObjectPropertySetter(XSD.readString, 'linkText'),\n    'type': _ol_xml_.makeObjectPropertySetter(XSD.readString, 'linkType')\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n */\nconst RTE_PARSERS = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'cmt': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'desc': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'src': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'link': parseLink,\n    'number': _ol_xml_.makeObjectPropertySetter(XSD.readNonNegativeInteger),\n    'extensions': parseExtensions,\n    'type': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'rtept': parseRtePt\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n */\nconst RTEPT_PARSERS = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'time': _ol_xml_.makeObjectPropertySetter(XSD.readDateTime)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n */\nconst TRK_PARSERS = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'cmt': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'desc': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'src': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'link': parseLink,\n    'number': _ol_xml_.makeObjectPropertySetter(XSD.readNonNegativeInteger),\n    'type': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'extensions': parseExtensions,\n    'trkseg': parseTrkSeg\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n */\nconst TRKSEG_PARSERS = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, {\n    'trkpt': parseTrkPt\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n */\nconst TRKPT_PARSERS = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'time': _ol_xml_.makeObjectPropertySetter(XSD.readDateTime)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlParser>>}\n */\nconst WPT_PARSERS = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'time': _ol_xml_.makeObjectPropertySetter(XSD.readDateTime),\n    'magvar': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'geoidheight': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'name': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'cmt': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'desc': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'src': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'link': parseLink,\n    'sym': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'type': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'fix': _ol_xml_.makeObjectPropertySetter(XSD.readString),\n    'sat': _ol_xml_.makeObjectPropertySetter(XSD.readNonNegativeInteger),\n    'hdop': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'vdop': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'pdop': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'ageofdgpsdata': _ol_xml_.makeObjectPropertySetter(XSD.readDecimal),\n    'dgpsid': _ol_xml_.makeObjectPropertySetter(XSD.readNonNegativeInteger),\n    'extensions': parseExtensions\n  });\n\n\n/**\n * @const\n * @type {Array.<string>}\n */\nconst LINK_SEQUENCE = ['text', 'type'];\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n */\nconst LINK_SERIALIZERS = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, {\n    'text': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'type': _ol_xml_.makeChildAppender(XSD.writeStringTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n */\nconst RTE_SEQUENCE = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'rtept'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n */\nconst RTE_SERIALIZERS = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'cmt': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'desc': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'src': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'link': _ol_xml_.makeChildAppender(writeLink),\n    'number': _ol_xml_.makeChildAppender(XSD.writeNonNegativeIntegerTextNode),\n    'type': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'rtept': _ol_xml_.makeArraySerializer(_ol_xml_.makeChildAppender(writeWptType))\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n */\nconst RTEPT_TYPE_SEQUENCE = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, [\n    'ele', 'time'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n */\nconst TRK_SEQUENCE = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'trkseg'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n */\nconst TRK_SERIALIZERS = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'cmt': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'desc': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'src': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'link': _ol_xml_.makeChildAppender(writeLink),\n    'number': _ol_xml_.makeChildAppender(XSD.writeNonNegativeIntegerTextNode),\n    'type': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'trkseg': _ol_xml_.makeArraySerializer(_ol_xml_.makeChildAppender(writeTrkSeg))\n  });\n\n\n/**\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n */\nconst TRKSEG_NODE_FACTORY = _ol_xml_.makeSimpleNodeFactory('trkpt');\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n */\nconst TRKSEG_SERIALIZERS = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, {\n    'trkpt': _ol_xml_.makeChildAppender(writeWptType)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n */\nconst WPT_TYPE_SEQUENCE = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, [\n    'ele', 'time', 'magvar', 'geoidheight', 'name', 'cmt', 'desc', 'src',\n    'link', 'sym', 'type', 'fix', 'sat', 'hdop', 'vdop', 'pdop',\n    'ageofdgpsdata', 'dgpsid'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n */\nconst WPT_TYPE_SERIALIZERS = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': _ol_xml_.makeChildAppender(XSD.writeDecimalTextNode),\n    'time': _ol_xml_.makeChildAppender(XSD.writeDateTimeTextNode),\n    'magvar': _ol_xml_.makeChildAppender(XSD.writeDecimalTextNode),\n    'geoidheight': _ol_xml_.makeChildAppender(XSD.writeDecimalTextNode),\n    'name': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'cmt': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'desc': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'src': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'link': _ol_xml_.makeChildAppender(writeLink),\n    'sym': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'type': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'fix': _ol_xml_.makeChildAppender(XSD.writeStringTextNode),\n    'sat': _ol_xml_.makeChildAppender(XSD.writeNonNegativeIntegerTextNode),\n    'hdop': _ol_xml_.makeChildAppender(XSD.writeDecimalTextNode),\n    'vdop': _ol_xml_.makeChildAppender(XSD.writeDecimalTextNode),\n    'pdop': _ol_xml_.makeChildAppender(XSD.writeDecimalTextNode),\n    'ageofdgpsdata': _ol_xml_.makeChildAppender(XSD.writeDecimalTextNode),\n    'dgpsid': _ol_xml_.makeChildAppender(XSD.writeNonNegativeIntegerTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, string>}\n */\nconst GEOMETRY_TYPE_TO_NODENAME = {\n  'Point': 'wpt',\n  'LineString': 'rte',\n  'MultiLineString': 'trk'\n};\n\n\n/**\n * @param {*} value Value.\n * @param {Array.<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nfunction GPX_NODE_FACTORY(value, objectStack, opt_nodeName) {\n  const geometry = /** @type {ol.Feature} */ (value).getGeometry();\n  if (geometry) {\n    const nodeName = GEOMETRY_TYPE_TO_NODENAME[geometry.getType()];\n    if (nodeName) {\n      const parentNode = objectStack[objectStack.length - 1].node;\n      return _ol_xml_.createElementNS(parentNode.namespaceURI, nodeName);\n    }\n  }\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, ol.XmlSerializer>>}\n */\nconst GPX_SERIALIZERS = _ol_xml_.makeStructureNS(\n  NAMESPACE_URIS, {\n    'rte': _ol_xml_.makeChildAppender(writeRte),\n    'trk': _ol_xml_.makeChildAppender(writeTrk),\n    'wpt': _ol_xml_.makeChildAppender(writeWpt)\n  });\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {ol.LayoutOptions} layoutOptions Layout options.\n * @param {Node} node Node.\n * @param {Object} values Values.\n * @return {Array.<number>} Flat coordinates.\n */\nfunction appendCoordinate(flatCoordinates, layoutOptions, node, values) {\n  flatCoordinates.push(\n    parseFloat(node.getAttribute('lon')),\n    parseFloat(node.getAttribute('lat')));\n  if ('ele' in values) {\n    flatCoordinates.push(/** @type {number} */ (values['ele']));\n    delete values['ele'];\n    layoutOptions.hasZ = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  if ('time' in values) {\n    flatCoordinates.push(/** @type {number} */ (values['time']));\n    delete values['time'];\n    layoutOptions.hasM = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  return flatCoordinates;\n}\n\n\n/**\n * Choose GeometryLayout based on flags in layoutOptions and adjust flatCoordinates\n * and ends arrays by shrinking them accordingly (removing unused zero entries).\n *\n * @param {ol.LayoutOptions} layoutOptions Layout options.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<number>=} ends Ends.\n * @return {ol.geom.GeometryLayout} Layout.\n */\nGPX.applyLayoutOptions_ = function(layoutOptions, flatCoordinates, ends) {\n  let layout = GeometryLayout.XY;\n  let stride = 2;\n  if (layoutOptions.hasZ && layoutOptions.hasM) {\n    layout = GeometryLayout.XYZM;\n    stride = 4;\n  } else if (layoutOptions.hasZ) {\n    layout = GeometryLayout.XYZ;\n    stride = 3;\n  } else if (layoutOptions.hasM) {\n    layout = GeometryLayout.XYM;\n    stride = 3;\n  }\n  if (stride !== 4) {\n    let i, ii;\n    for (i = 0, ii = flatCoordinates.length / 4; i < ii; i++) {\n      flatCoordinates[i * stride] = flatCoordinates[i * 4];\n      flatCoordinates[i * stride + 1] = flatCoordinates[i * 4 + 1];\n      if (layoutOptions.hasZ) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 2];\n      }\n      if (layoutOptions.hasM) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 3];\n      }\n    }\n    flatCoordinates.length = flatCoordinates.length / 4 * stride;\n    if (ends) {\n      for (i = 0, ii = ends.length; i < ii; i++) {\n        ends[i] = ends[i] / 4 * stride;\n      }\n    }\n  }\n  return layout;\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction parseLink(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const href = node.getAttribute('href');\n  if (href !== null) {\n    values['link'] = href;\n  }\n  _ol_xml_.parseNode(LINK_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction parseExtensions(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  values['extensionsNode_'] = node;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction parseRtePt(node, objectStack) {\n  const values = _ol_xml_.pushParseAndPop(\n    {}, RTEPT_PARSERS, node, objectStack);\n  if (values) {\n    const rteValues = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    const flatCoordinates = /** @type {Array.<number>} */\n        (rteValues['flatCoordinates']);\n    const layoutOptions = /** @type {ol.LayoutOptions} */\n        (rteValues['layoutOptions']);\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction parseTrkPt(node, objectStack) {\n  const values = _ol_xml_.pushParseAndPop({}, TRKPT_PARSERS, node, objectStack);\n  if (values) {\n    const trkValues = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    const flatCoordinates = /** @type {Array.<number>} */\n        (trkValues['flatCoordinates']);\n    const layoutOptions = /** @type {ol.LayoutOptions} */\n        (trkValues['layoutOptions']);\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction parseTrkSeg(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  _ol_xml_.parseNode(TRKSEG_PARSERS, node, objectStack);\n  const flatCoordinates = /** @type {Array.<number>} */\n      (values['flatCoordinates']);\n  const ends = /** @type {Array.<number>} */ (values['ends']);\n  ends.push(flatCoordinates.length);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {ol.Feature|undefined} Track.\n */\nfunction readRte(node, objectStack) {\n  const options = /** @type {olx.format.ReadOptions} */ (objectStack[0]);\n  const values = _ol_xml_.pushParseAndPop({\n    'flatCoordinates': [],\n    'layoutOptions': {}\n  }, RTE_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const flatCoordinates = /** @type {Array.<number>} */\n      (values['flatCoordinates']);\n  delete values['flatCoordinates'];\n  const layoutOptions = /** @type {ol.LayoutOptions} */ (values['layoutOptions']);\n  delete values['layoutOptions'];\n  const layout = GPX.applyLayoutOptions_(layoutOptions, flatCoordinates);\n  const geometry = new LineString(null);\n  geometry.setFlatCoordinates(layout, flatCoordinates);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {ol.Feature|undefined} Track.\n */\nfunction readTrk(node, objectStack) {\n  const options = /** @type {olx.format.ReadOptions} */ (objectStack[0]);\n  const values = _ol_xml_.pushParseAndPop({\n    'flatCoordinates': [],\n    'ends': [],\n    'layoutOptions': {}\n  }, TRK_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const flatCoordinates = /** @type {Array.<number>} */\n      (values['flatCoordinates']);\n  delete values['flatCoordinates'];\n  const ends = /** @type {Array.<number>} */ (values['ends']);\n  delete values['ends'];\n  const layoutOptions = /** @type {ol.LayoutOptions} */ (values['layoutOptions']);\n  delete values['layoutOptions'];\n  const layout = GPX.applyLayoutOptions_(layoutOptions, flatCoordinates, ends);\n  const geometry = new MultiLineString(null);\n  geometry.setFlatCoordinates(layout, flatCoordinates, ends);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {ol.Feature|undefined} Waypoint.\n */\nfunction readWpt(node, objectStack) {\n  const options = /** @type {olx.format.ReadOptions} */ (objectStack[0]);\n  const values = _ol_xml_.pushParseAndPop({}, WPT_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const layoutOptions = /** @type {ol.LayoutOptions} */ ({});\n  const coordinates = appendCoordinate([], layoutOptions, node, values);\n  const layout = GPX.applyLayoutOptions_(layoutOptions, coordinates);\n  const geometry = new Point(coordinates, layout);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Array.<ol.Feature>} features List of features.\n * @private\n */\nGPX.prototype.handleReadExtensions_ = function(features) {\n  if (!features) {\n    features = [];\n  }\n  for (let i = 0, ii = features.length; i < ii; ++i) {\n    const feature = features[i];\n    if (this.readExtensions_) {\n      const extensionsNode = feature.get('extensionsNode_') || null;\n      this.readExtensions_(feature, extensionsNode);\n    }\n    feature.set('extensionsNode_', undefined);\n  }\n};\n\n\n/**\n * Read the first feature from a GPX source.\n * Routes (`<rte>`) are converted into LineString geometries, and tracks (`<trk>`)\n * into MultiLineString. Any properties on route and track waypoints are ignored.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @return {ol.Feature} Feature.\n * @api\n */\nGPX.prototype.readFeature;\n\n\n/**\n * @inheritDoc\n */\nGPX.prototype.readFeatureFromNode = function(node, opt_options) {\n  if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n    return null;\n  }\n  const featureReader = FEATURE_READER[node.localName];\n  if (!featureReader) {\n    return null;\n  }\n  const feature = featureReader(node, [this.getReadOptions(node, opt_options)]);\n  if (!feature) {\n    return null;\n  }\n  this.handleReadExtensions_([feature]);\n  return feature;\n};\n\n\n/**\n * Read all features from a GPX source.\n * Routes (`<rte>`) are converted into LineString geometries, and tracks (`<trk>`)\n * into MultiLineString. Any properties on route and track waypoints are ignored.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {olx.format.ReadOptions=} opt_options Read options.\n * @return {Array.<ol.Feature>} Features.\n * @api\n */\nGPX.prototype.readFeatures;\n\n\n/**\n * @inheritDoc\n */\nGPX.prototype.readFeaturesFromNode = function(node, opt_options) {\n  if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n    return [];\n  }\n  if (node.localName == 'gpx') {\n    /** @type {Array.<ol.Feature>} */\n    const features = _ol_xml_.pushParseAndPop([], GPX_PARSERS,\n      node, [this.getReadOptions(node, opt_options)]);\n    if (features) {\n      this.handleReadExtensions_(features);\n      return features;\n    } else {\n      return [];\n    }\n  }\n  return [];\n};\n\n\n/**\n * Read the projection from a GPX source.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @return {ol.proj.Projection} Projection.\n * @api\n */\nGPX.prototype.readProjection;\n\n\n/**\n * @param {Node} node Node.\n * @param {string} value Value for the link's `href` attribute.\n * @param {Array.<*>} objectStack Node stack.\n */\nfunction writeLink(node, value, objectStack) {\n  node.setAttribute('href', value);\n  const context = objectStack[objectStack.length - 1];\n  const properties = context['properties'];\n  const link = [\n    properties['linkText'],\n    properties['linkType']\n  ];\n  _ol_xml_.pushSerializeAndPop(/** @type {ol.XmlNodeStackItem} */ ({node: node}),\n    LINK_SERIALIZERS, _ol_xml_.OBJECT_PROPERTY_NODE_FACTORY,\n    link, objectStack, LINK_SEQUENCE);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeWptType(node, coordinate, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const parentNode = context.node;\n  const namespaceURI = parentNode.namespaceURI;\n  const properties = context['properties'];\n  //FIXME Projection handling\n  _ol_xml_.setAttributeNS(node, null, 'lat', coordinate[1]);\n  _ol_xml_.setAttributeNS(node, null, 'lon', coordinate[0]);\n  const geometryLayout = context['geometryLayout'];\n  switch (geometryLayout) {\n    case GeometryLayout.XYZM:\n      if (coordinate[3] !== 0) {\n        properties['time'] = coordinate[3];\n      }\n      // fall through\n    case GeometryLayout.XYZ:\n      if (coordinate[2] !== 0) {\n        properties['ele'] = coordinate[2];\n      }\n      break;\n    case GeometryLayout.XYM:\n      if (coordinate[2] !== 0) {\n        properties['time'] = coordinate[2];\n      }\n      break;\n    default:\n      // pass\n  }\n  const orderedKeys = (node.nodeName == 'rtept') ?\n    RTEPT_TYPE_SEQUENCE[namespaceURI] :\n    WPT_TYPE_SEQUENCE[namespaceURI];\n  const values = _ol_xml_.makeSequence(properties, orderedKeys);\n  _ol_xml_.pushSerializeAndPop(/** @type {ol.XmlNodeStackItem} */\n    ({node: node, 'properties': properties}),\n    WPT_TYPE_SERIALIZERS, _ol_xml_.OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {ol.Feature} feature Feature.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeRte(node, feature, objectStack) {\n  const options = /** @type {olx.format.WriteOptions} */ (objectStack[0]);\n  const properties = feature.getProperties();\n  const context = {node: node, 'properties': properties};\n  let geometry = feature.getGeometry();\n  if (geometry) {\n    geometry = /** @type {ol.geom.LineString} */ (transformWithOptions(geometry, true, options));\n    context['geometryLayout'] = geometry.getLayout();\n    properties['rtept'] = geometry.getCoordinates();\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = RTE_SEQUENCE[parentNode.namespaceURI];\n  const values = _ol_xml_.makeSequence(properties, orderedKeys);\n  _ol_xml_.pushSerializeAndPop(context,\n    RTE_SERIALIZERS, _ol_xml_.OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {ol.Feature} feature Feature.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeTrk(node, feature, objectStack) {\n  const options = /** @type {olx.format.WriteOptions} */ (objectStack[0]);\n  const properties = feature.getProperties();\n  /** @type {ol.XmlNodeStackItem} */\n  const context = {node: node, 'properties': properties};\n  let geometry = feature.getGeometry();\n  if (geometry) {\n    geometry = /** @type {ol.geom.MultiLineString} */\n      (transformWithOptions(geometry, true, options));\n    properties['trkseg'] = geometry.getLineStrings();\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = TRK_SEQUENCE[parentNode.namespaceURI];\n  const values = _ol_xml_.makeSequence(properties, orderedKeys);\n  _ol_xml_.pushSerializeAndPop(context,\n    TRK_SERIALIZERS, _ol_xml_.OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {ol.geom.LineString} lineString LineString.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeTrkSeg(node, lineString, objectStack) {\n  /** @type {ol.XmlNodeStackItem} */\n  const context = {node: node, 'geometryLayout': lineString.getLayout(),\n    'properties': {}};\n  _ol_xml_.pushSerializeAndPop(context,\n    TRKSEG_SERIALIZERS, TRKSEG_NODE_FACTORY,\n    lineString.getCoordinates(), objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {ol.Feature} feature Feature.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeWpt(node, feature, objectStack) {\n  const options = /** @type {olx.format.WriteOptions} */ (objectStack[0]);\n  const context = objectStack[objectStack.length - 1];\n  context['properties'] = feature.getProperties();\n  let geometry = feature.getGeometry();\n  if (geometry) {\n    geometry = /** @type {ol.geom.Point} */\n      (transformWithOptions(geometry, true, options));\n    context['geometryLayout'] = geometry.getLayout();\n    writeWptType(node, geometry.getCoordinates(), objectStack);\n  }\n}\n\n\n/**\n * Encode an array of features in the GPX format.\n * LineString geometries are output as routes (`<rte>`), and MultiLineString\n * as tracks (`<trk>`).\n *\n * @function\n * @param {Array.<ol.Feature>} features Features.\n * @param {olx.format.WriteOptions=} opt_options Write options.\n * @return {string} Result.\n * @api\n */\nGPX.prototype.writeFeatures;\n\n\n/**\n * Encode an array of features in the GPX format as an XML node.\n * LineString geometries are output as routes (`<rte>`), and MultiLineString\n * as tracks (`<trk>`).\n *\n * @param {Array.<ol.Feature>} features Features.\n * @param {olx.format.WriteOptions=} opt_options Options.\n * @return {Node} Node.\n * @override\n * @api\n */\nGPX.prototype.writeFeaturesNode = function(features, opt_options) {\n  opt_options = this.adaptOptions(opt_options);\n  //FIXME Serialize metadata\n  const gpx = _ol_xml_.createElementNS('http://www.topografix.com/GPX/1/1', 'gpx');\n  const xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n  const xmlSchemaInstanceUri = 'http://www.w3.org/2001/XMLSchema-instance';\n  _ol_xml_.setAttributeNS(gpx, xmlnsUri, 'xmlns:xsi', xmlSchemaInstanceUri);\n  _ol_xml_.setAttributeNS(gpx, xmlSchemaInstanceUri, 'xsi:schemaLocation',\n    SCHEMA_LOCATION);\n  gpx.setAttribute('version', '1.1');\n  gpx.setAttribute('creator', 'OpenLayers');\n\n  _ol_xml_.pushSerializeAndPop(/** @type {ol.XmlNodeStackItem} */\n    ({node: gpx}), GPX_SERIALIZERS, GPX_NODE_FACTORY, features, [opt_options]);\n  return gpx;\n};\nexport default GPX;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/format/GPX.js\n// module id = 171\n// module chunks = 0 1 2","/**\n * @module ngeo.interaction.MeasureArea\n*/\nimport ngeoInteractionMeasure from 'ngeo/interaction/Measure.js';\nimport olGeomPolygon from 'ol/geom/Polygon.js';\nimport olInteractionDraw from 'ol/interaction/Draw.js';\n\n/**\n * @classdesc\n * Interaction dedicated to measure length.\n *\n * See our live example: [../examples/measure.html](../examples/measure.html)\n *\n * @constructor\n * @struct\n * @extends {ngeo.interaction.Measure}\n * @param {ngeox.unitPrefix} format The format function\n * @param {ngeox.interaction.MeasureOptions=} opt_options Options\n */\nconst exports = function(format, opt_options) {\n\n  const options = opt_options !== undefined ? opt_options : {};\n\n  ngeoInteractionMeasure.call(this, options);\n\n\n  /**\n   * Message to show after the first point is clicked.\n   * @type {Element}\n   */\n  this.continueMsg;\n  if (options.continueMsg !== undefined) {\n    this.continueMsg = options.continueMsg;\n  } else {\n    this.continueMsg = document.createElement('span');\n    this.continueMsg.textContent = 'Click to continue drawing the polygon.';\n    const br = document.createElement('br');\n    br.textContent = 'Double-click or click starting point to finish.';\n    this.continueMsg.appendChild(br);\n  }\n\n  /**\n   * The format function\n   * @type {ngeox.unitPrefix}\n   */\n  this.format = format;\n\n};\n\nol.inherits(exports, ngeoInteractionMeasure);\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.createDrawInteraction = function(style, source) {\n  return new olInteractionDraw({\n    type: /** @type {ol.geom.GeometryType} */ ('Polygon'),\n    source: source,\n    style: style\n  });\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.handleMeasure = function(callback) {\n  const geom = goog.asserts.assertInstanceof(this.sketchFeature.getGeometry(), olGeomPolygon);\n  const proj = this.getMap().getView().getProjection();\n  goog.asserts.assert(proj);\n  const output = ngeoInteractionMeasure.getFormattedArea(geom, proj, this.precision, this.format);\n  const verticesCount = geom.getCoordinates()[0].length;\n  let coord = null;\n  if (verticesCount > 3) {\n    coord = geom.getInteriorPoint().getCoordinates();\n  }\n  callback(output, coord);\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/interaction/MeasureArea.js","/**\n * @module ngeo.interaction.MeasureLength\n*/\nimport ngeoInteractionMeasure from 'ngeo/interaction/Measure.js';\nimport olGeomLineString from 'ol/geom/LineString.js';\nimport olInteractionDraw from 'ol/interaction/Draw.js';\n\n/**\n * @classdesc\n * Interaction dedicated to measure length.\n *\n * See our live example: [../examples/measure.html](../examples/measure.html)\n *\n * @constructor\n * @struct\n * @extends {ngeo.interaction.Measure}\n * @param {ngeox.unitPrefix} format The format function\n * @param {ngeox.interaction.MeasureOptions=} opt_options Options\n */\nconst exports = function(format, opt_options) {\n\n  const options = opt_options !== undefined ? opt_options : {};\n\n  ngeoInteractionMeasure.call(this, options);\n\n\n  /**\n   * Message to show after the first point is clicked.\n   * @type {Element}\n   */\n  this.continueMsg;\n  if (options.continueMsg !== undefined) {\n    this.continueMsg = options.continueMsg;\n  } else {\n    this.continueMsg = document.createElement('span');\n    this.continueMsg.textContent = 'Click to continue drawing the line.';\n    const br = document.createElement('br');\n    br.textContent = 'Double-click or click last point to finish.';\n    this.continueMsg.appendChild(br);\n  }\n\n  /**\n   * The format function\n   * @type {ngeox.unitPrefix}\n   */\n  this.format = format;\n\n};\n\nol.inherits(exports, ngeoInteractionMeasure);\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.createDrawInteraction = function(style, source) {\n  return new olInteractionDraw({\n    type: /** @type {ol.geom.GeometryType} */ ('LineString'),\n    source: source,\n    style: style\n  });\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.handleMeasure = function(callback) {\n  const geom = goog.asserts.assertInstanceof(this.sketchFeature.getGeometry(), olGeomLineString);\n  const proj = this.getMap().getView().getProjection();\n  goog.asserts.assert(proj);\n  const output = ngeoInteractionMeasure.getFormattedLength(geom, proj, this.precision, this.format);\n  const coord = geom.getLastCoordinate();\n  callback(output, coord);\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/interaction/MeasureLength.js","/**\n * @module ngeo.draw.Controller\n*/\nimport ngeoBase from 'ngeo/index.js';\n\n/** @suppress {extraRequire} */\nimport ngeoDrawFeatures from 'ngeo/draw/features.js';\n\n/** @suppress {extraRequire} */\nimport ngeoMiscBtnComponent from 'ngeo/misc/btnComponent.js';\n\nimport ngeoMiscDecorate from 'ngeo/misc/decorate.js';\nimport ngeoMiscFeatureHelper from 'ngeo/misc/FeatureHelper.js';\nimport olFeature from 'ol/Feature.js';\n\n/**\n * @param {!angular.Scope} $scope Scope.\n * @param {angular.$sce} $sce Angular sce service.\n * @param {angularGettext.Catalog} gettextCatalog Gettext service.\n * @param {ngeo.misc.FeatureHelper} ngeoFeatureHelper Ngeo feature helper service.\n * @param {ol.Collection.<ol.Feature>} ngeoFeatures Collection of features.\n * @constructor\n * @private\n * @struct\n *//* @ngInject\n * @ngdoc controller\n * @ngname ngeoDrawfeatureController\n */\nconst exports = function($scope, $sce, gettextCatalog,\n  ngeoFeatureHelper, ngeoFeatures) {\n\n  /**\n   * @type {boolean}\n   * @export\n   */\n  this.active;\n\n  if (this.active === undefined) {\n    this.active = false;\n  }\n\n  /**\n   * Alternate collection of features in which to push the drawn features.\n   * If not defined, then `ngeoFeatures` is used instead.\n   * @type {!ol.Collection.<!ol.Feature>|undefined}\n   * @export\n   */\n  this.features;\n\n  /**\n   * @type {ol.Map}\n   * @export\n   */\n  this.map;\n\n  /**\n   * @type {boolean}\n   * @export\n   */\n  this.showMeasure;\n\n  /**\n   * @type {angularGettext.Catalog}\n   * @private\n   */\n  this.gettextCatalog_ = gettextCatalog;\n  // Fill the string collection\n  gettextCatalog.getString('Point');\n  gettextCatalog.getString('LineString');\n  gettextCatalog.getString('Polygon');\n  gettextCatalog.getString('Circle');\n  gettextCatalog.getString('Rectangle');\n  gettextCatalog.getString('Text');\n\n  /**\n   * @type {ngeo.misc.FeatureHelper}\n   * @private\n   */\n  this.featureHelper_ = ngeoFeatureHelper;\n\n  /**\n   * @type {ol.Collection.<ol.Feature>}\n   * @private\n   */\n  this.ngeoFeatures_ = ngeoFeatures;\n\n  /**\n   * @type {Array.<ol.interaction.Interaction>}\n   * @private\n   */\n  this.interactions_ = [];\n\n  /**\n   * @type {ol.interaction.Draw}\n   * @export\n   */\n  this.drawPoint;\n\n  /**\n   * @type {ngeo.interaction.MeasureLength}\n   * @export\n   */\n  this.measureLength;\n\n  /**\n   * @type {ngeo.interaction.MeasureArea}\n   * @export\n   */\n  this.measureArea;\n\n  /**\n   * @type {ngeo.interaction.MeasureAzimut}\n   * @export\n   */\n  this.measureAzimut;\n\n  /**\n   * @type {ol.interaction.Draw}\n   * @export\n   */\n  this.drawRectangle;\n\n  /**\n   * @type {ol.interaction.Draw}\n   * @export\n   */\n  this.drawText;\n\n\n  // Watch the \"active\" property, and disable the draw interactions\n  // when \"active\" gets set to false.\n  $scope.$watch(\n    () => this.active,\n    (newVal) => {\n      if (newVal === false) {\n        this.interactions_.forEach((interaction) => {\n          interaction.setActive(false);\n        }, this);\n      }\n    }\n  );\n\n};\n\n\n/**\n * Register a draw|measure interaction by setting it inactive, decorating it\n * and adding it to the map\n * @param {ol.interaction.Interaction} interaction Interaction to register.\n * @export\n */\nexports.prototype.registerInteraction = function(\n  interaction) {\n  this.interactions_.push(interaction);\n  interaction.setActive(false);\n  ngeoMiscDecorate.interaction(interaction);\n  this.map.addInteraction(interaction);\n};\n\n\n/**\n * Called when any of the draw or measure interaction active property changes.\n * Set the active property of this directive accordingly, i.e. if at least\n * one of the draw or measure is active then the active property is set to true.\n * @param {ol.Object.Event} event Event.\n * @export\n */\nexports.prototype.handleActiveChange = function(event) {\n  this.active = this.interactions_.some(interaction => interaction.getActive(), this);\n};\n\n\n/**\n * Called when a feature is finished being drawn. Set the default properties\n * for its style, then set its style and add it to the features collection.\n * @param {string} type Type of geometry being drawn.\n * @param {ol.interaction.Draw.Event|ngeox.MeasureEvent} event Event.\n * @export\n */\nexports.prototype.handleDrawEnd = function(type, event) {\n  let sketch;\n  if (event.feature) {\n    // ol.interaction.Draw.Event\n    sketch = event.feature;\n  } else {\n    // ngeox.MeasureEvent\n    sketch = event.detail.feature;\n  }\n  goog.asserts.assert(sketch);\n\n  const azimut = sketch.get('azimut');\n\n  const features = this.features || this.ngeoFeatures_;\n\n  const feature = new olFeature(sketch.getGeometry());\n\n  const prop = ngeoBase.FeatureProperties;\n\n  switch (type) {\n    case ngeoBase.GeometryType.CIRCLE:\n      feature.set(prop.IS_CIRCLE, true);\n      if (azimut !== undefined) {\n        feature.set(prop.AZIMUT, azimut);\n      }\n      break;\n    case ngeoBase.GeometryType.TEXT:\n      feature.set(prop.IS_TEXT, true);\n      break;\n    case ngeoBase.GeometryType.RECTANGLE:\n      feature.set(prop.IS_RECTANGLE, true);\n      break;\n    default:\n      break;\n  }\n\n  /**\n   * @type {string}\n   */\n  const name = this.gettextCatalog_.getString(type);\n  feature.set(prop.NAME, `${name} ${features.getLength() + 1}`);\n\n  /**\n   * @type {string}\n   */\n  const color = type !== ngeoBase.GeometryType.TEXT ? '#DB4436' : '#000000';\n  feature.set(prop.COLOR, color);\n\n  feature.set(prop.ANGLE, 0);\n  feature.set(prop.OPACITY, 0.2);\n  feature.set(prop.SHOW_MEASURE, this.showMeasure ? true : false);\n  feature.set(prop.SHOW_LABEL, false);\n  feature.set(prop.SIZE, 10);\n  feature.set(prop.STROKE, 2);\n\n  // set style\n  this.featureHelper_.setStyle(feature);\n\n  // push in collection\n  features.push(feature);\n};\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoDrawfeatureController', [\n  ngeoDrawFeatures.name,\n  ngeoMiscFeatureHelper.module.name,\n]);\nexports.module.controller('ngeoDrawfeatureController', exports);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/draw/Controller.js","/**\n * @module ngeo.CustomEvent\n*/\nimport * as olBase from 'ol/index.js';\nimport olEventsEvent from 'ol/events/Event.js';\n\n/**\n * @constructor\n * @extends {ol.events.Event}\n * @param {string} type Event type.\n * @param {T} detail Event Detail.\n * @template T\n */\nconst exports = function(type, detail = {}) {\n\n  olEventsEvent.call(this, type);\n\n  /**\n   * @type {T}\n   */\n  this.detail = detail;\n\n};\n\nolBase.inherits(exports, olEventsEvent);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/CustomEvent.js","/**\n * @module ol/source/TileWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\nimport {inherits} from '../index.js';\nimport {assert} from '../asserts.js';\nimport {buffer, createEmpty} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {modulo} from '../math.js';\nimport {get as getProjection, transform, transformExtent} from '../proj.js';\nimport _ol_reproj_ from '../reproj.js';\nimport _ol_size_ from '../size.js';\nimport TileImage from '../source/TileImage.js';\nimport WMSServerType from '../source/WMSServerType.js';\nimport _ol_tilecoord_ from '../tilecoord.js';\nimport _ol_string_ from '../string.js';\nimport {appendParams} from '../uri.js';\n\n/**\n * @classdesc\n * Layer source for tile data from WMS servers.\n *\n * @constructor\n * @extends {ol.source.TileImage}\n * @param {olx.source.TileWMSOptions=} opt_options Tile WMS options.\n * @api\n */\nconst TileWMS = function(opt_options) {\n\n  const options = opt_options || {};\n\n  const params = options.params || {};\n\n  const transparent = 'TRANSPARENT' in params ? params['TRANSPARENT'] : true;\n\n  TileImage.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: options.crossOrigin,\n    opaque: !transparent,\n    projection: options.projection,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileClass: options.tileClass,\n    tileGrid: options.tileGrid,\n    tileLoadFunction: options.tileLoadFunction,\n    url: options.url,\n    urls: options.urls,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true,\n    transition: options.transition\n  });\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.gutter_ = options.gutter !== undefined ? options.gutter : 0;\n\n  /**\n   * @private\n   * @type {!Object}\n   */\n  this.params_ = params;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.v13_ = true;\n\n  /**\n   * @private\n   * @type {ol.source.WMSServerType|undefined}\n   */\n  this.serverType_ = /** @type {ol.source.WMSServerType|undefined} */ (options.serverType);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n  /**\n   * @private\n   * @type {ol.Extent}\n   */\n  this.tmpExtent_ = createEmpty();\n\n  this.updateV13_();\n  this.setKey(this.getKeyForParams_());\n\n};\n\ninherits(TileWMS, TileImage);\n\n\n/**\n * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n * constructed.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {ol.ProjectionLike} projection Projection.\n * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n *     in the `LAYERS` parameter will be used. `VERSION` should not be\n *     specified here.\n * @return {string|undefined} GetFeatureInfo URL.\n * @api\n */\nTileWMS.prototype.getGetFeatureInfoUrl = function(coordinate, resolution, projection, params) {\n  const projectionObj = getProjection(projection);\n  const sourceProjectionObj = this.getProjection();\n\n  let tileGrid = this.getTileGrid();\n  if (!tileGrid) {\n    tileGrid = this.getTileGridForProjection(projectionObj);\n  }\n\n  const tileCoord = tileGrid.getTileCoordForCoordAndResolution(coordinate, resolution);\n\n  if (tileGrid.getResolutions().length <= tileCoord[0]) {\n    return undefined;\n  }\n\n  let tileResolution = tileGrid.getResolution(tileCoord[0]);\n  let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n  let tileSize = _ol_size_.toSize(tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n\n  const gutter = this.gutter_;\n  if (gutter !== 0) {\n    tileSize = _ol_size_.buffer(tileSize, gutter, this.tmpSize);\n    tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n  }\n\n  if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n    tileResolution = _ol_reproj_.calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, tileResolution);\n    tileExtent = transformExtent(tileExtent, projectionObj, sourceProjectionObj);\n    coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n  }\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetFeatureInfo',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true,\n    'QUERY_LAYERS': this.params_['LAYERS']\n  };\n  assign(baseParams, this.params_, params);\n\n  const x = Math.floor((coordinate[0] - tileExtent[0]) / tileResolution);\n  const y = Math.floor((tileExtent[3] - coordinate[1]) / tileResolution);\n\n  baseParams[this.v13_ ? 'I' : 'X'] = x;\n  baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n  return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n    1, sourceProjectionObj || projectionObj, baseParams);\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.getGutterInternal = function() {\n  return this.gutter_;\n};\n\n\n/**\n * Get the user-provided params, i.e. those passed to the constructor through\n * the \"params\" option, and possibly updated using the updateParams method.\n * @return {Object} Params.\n * @api\n */\nTileWMS.prototype.getParams = function() {\n  return this.params_;\n};\n\n\n/**\n * @param {ol.TileCoord} tileCoord Tile coordinate.\n * @param {ol.Size} tileSize Tile size.\n * @param {ol.Extent} tileExtent Tile extent.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.proj.Projection} projection Projection.\n * @param {Object} params Params.\n * @return {string|undefined} Request URL.\n * @private\n */\nTileWMS.prototype.getRequestUrl_ = function(tileCoord, tileSize, tileExtent,\n  pixelRatio, projection, params) {\n\n  const urls = this.urls;\n  if (!urls) {\n    return undefined;\n  }\n\n  params['WIDTH'] = tileSize[0];\n  params['HEIGHT'] = tileSize[1];\n\n  params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n  if (!('STYLES' in this.params_)) {\n    params['STYLES'] = '';\n  }\n\n  if (pixelRatio != 1) {\n    switch (this.serverType_) {\n      case WMSServerType.GEOSERVER:\n        const dpi = (90 * pixelRatio + 0.5) | 0;\n        if ('FORMAT_OPTIONS' in params) {\n          params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n        } else {\n          params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n        }\n        break;\n      case WMSServerType.MAPSERVER:\n        params['MAP_RESOLUTION'] = 90 * pixelRatio;\n        break;\n      case WMSServerType.CARMENTA_SERVER:\n      case WMSServerType.QGIS:\n        params['DPI'] = 90 * pixelRatio;\n        break;\n      default:\n        assert(false, 52); // Unknown `serverType` configured\n        break;\n    }\n  }\n\n  const axisOrientation = projection.getAxisOrientation();\n  const bbox = tileExtent;\n  if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n    let tmp;\n    tmp = tileExtent[0];\n    bbox[0] = tileExtent[1];\n    bbox[1] = tmp;\n    tmp = tileExtent[2];\n    bbox[2] = tileExtent[3];\n    bbox[3] = tmp;\n  }\n  params['BBOX'] = bbox.join(',');\n\n  let url;\n  if (urls.length == 1) {\n    url = urls[0];\n  } else {\n    const index = modulo(_ol_tilecoord_.hash(tileCoord), urls.length);\n    url = urls[index];\n  }\n  return appendParams(url, params);\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.getTilePixelRatio = function(pixelRatio) {\n  return (!this.hidpi_ || this.serverType_ === undefined) ? 1 :\n  /** @type {number} */ (pixelRatio);\n};\n\n\n/**\n * @private\n * @return {string} The key for the current params.\n */\nTileWMS.prototype.getKeyForParams_ = function() {\n  let i = 0;\n  const res = [];\n  for (const key in this.params_) {\n    res[i++] = key + '-' + this.params_[key];\n  }\n  return res.join('/');\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.fixedTileUrlFunction = function(tileCoord, pixelRatio, projection) {\n\n  let tileGrid = this.getTileGrid();\n  if (!tileGrid) {\n    tileGrid = this.getTileGridForProjection(projection);\n  }\n\n  if (tileGrid.getResolutions().length <= tileCoord[0]) {\n    return undefined;\n  }\n\n  if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n    pixelRatio = 1;\n  }\n\n  const tileResolution = tileGrid.getResolution(tileCoord[0]);\n  let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n  let tileSize = _ol_size_.toSize(\n    tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n  const gutter = this.gutter_;\n  if (gutter !== 0) {\n    tileSize = _ol_size_.buffer(tileSize, gutter, this.tmpSize);\n    tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n  }\n\n  if (pixelRatio != 1) {\n    tileSize = _ol_size_.scale(tileSize, pixelRatio, this.tmpSize);\n  }\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetMap',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true\n  };\n  assign(baseParams, this.params_);\n\n  return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n    pixelRatio, projection, baseParams);\n};\n\n/**\n * Update the user-provided params.\n * @param {Object} params Params.\n * @api\n */\nTileWMS.prototype.updateParams = function(params) {\n  assign(this.params_, params);\n  this.updateV13_();\n  this.setKey(this.getKeyForParams_());\n};\n\n\n/**\n * @private\n */\nTileWMS.prototype.updateV13_ = function() {\n  const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n  this.v13_ = _ol_string_.compareVersions(version, '1.3') >= 0;\n};\nexport default TileWMS;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/TileWMS.js\n// module id = 23\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31","/**\n * @module ngeo.datasource.DataSources\n*/\nconst exports = {};\nimport ngeoBase from 'ngeo/index.js';\nimport olCollection from 'ol/Collection.js';\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoDataSources', []);\n// DataSources with the ngeox.datasource.DataSources type.\nexports.module.value('ngeoDataSources', new olCollection());\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datasource/DataSources.js","/**\n * @module ngeo.draw.features\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport olCollection from 'ol/Collection.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoFeatures', []);\n\nngeoBase.module.requires.push(exports.name);\n\nexports.value('ngeoFeatures', new olCollection());\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/draw/features.js","/**\n * @module ngeo.draw.point\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport olEvents from 'ol/events.js';\nimport olInteractionDraw from 'ol/interaction/Draw.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoDrawpoint', []);\n\nngeoBase.module.requires.push(exports.name);\n\n\n/**\n * @return {angular.Directive} The directive specs.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoDrawpoint\n */\nexports.directive_ = function() {\n  return {\n    restrict: 'A',\n    require: '^^ngeoDrawfeature',\n    /**\n     * @param {!angular.Scope} $scope Scope.\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Attributes.\n     * @param {ngeo.draw.Controller} drawFeatureCtrl Controller.\n     */\n    link: ($scope, element, attrs, drawFeatureCtrl) => {\n\n      const drawPoint = new olInteractionDraw({\n        type: /** @type {ol.geom.GeometryType} */ ('Point')\n      });\n\n      drawFeatureCtrl.registerInteraction(drawPoint);\n      drawFeatureCtrl.drawPoint = drawPoint;\n\n      olEvents.listen(\n        drawPoint,\n        'drawend',\n        drawFeatureCtrl.handleDrawEnd.bind(\n          drawFeatureCtrl, ngeoBase.GeometryType.POINT),\n        drawFeatureCtrl\n      );\n      olEvents.listen(\n        drawPoint,\n        'change:active',\n        drawFeatureCtrl.handleActiveChange,\n        drawFeatureCtrl\n      );\n    }\n  };\n};\n\n\nexports.directive('ngeoDrawpoint', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/draw/point.js","/**\n * @module ngeo.draw.rectangle\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport olEvents from 'ol/events.js';\nimport olInteractionDraw from 'ol/interaction/Draw.js';\nimport olGeomPolygon from 'ol/geom/Polygon.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoDrawrectangle', []);\n\nngeoBase.module.requires.push(exports.name);\n\n\n/**\n * @return {angular.Directive} The directive specs.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoDrawrectangle\n */\nexports.directive_ = function() {\n  return {\n    restrict: 'A',\n    require: '^^ngeoDrawfeature',\n    /**\n     * @param {!angular.Scope} $scope Scope.\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Attributes.\n     * @param {ngeo.draw.Controller} drawFeatureCtrl Controller.\n     */\n    link: ($scope, element, attrs, drawFeatureCtrl) => {\n\n      const drawRectangle = new olInteractionDraw({\n        type: /** @type {ol.geom.GeometryType} */ ('LineString'),\n        geometryFunction: (coordinates, geometry) => {\n          if (!geometry) {\n            geometry = new olGeomPolygon(null);\n          }\n          const start = coordinates[0];\n          const end = coordinates[1];\n          geometry.setCoordinates([\n            [start, [start[0], end[1]], end, [end[0], start[1]], start]\n          ]);\n          return geometry;\n        },\n        maxPoints: 2\n      });\n\n      drawFeatureCtrl.registerInteraction(drawRectangle);\n      drawFeatureCtrl.drawRectangle = drawRectangle;\n\n      olEvents.listen(\n        drawRectangle,\n        'drawend',\n        drawFeatureCtrl.handleDrawEnd.bind(\n          drawFeatureCtrl, ngeoBase.GeometryType.RECTANGLE),\n        drawFeatureCtrl\n      );\n      olEvents.listen(\n        drawRectangle,\n        'change:active',\n        drawFeatureCtrl.handleActiveChange,\n        drawFeatureCtrl\n      );\n    }\n  };\n};\n\n\nexports.directive('ngeoDrawrectangle', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/draw/rectangle.js","/**\n * @module ngeo.datasource.DataSource\n*/\nimport ngeoBase from 'ngeo/index.js';\n\n/**\n * @implements {ngeox.datasource.DataSource}\n */\nconst exports = class {\n\n  /**\n   * A `ngeo.datasource.DataSource` represents a single source of data, which\n   * can combine different type of servers to display or fetch the data. It can\n   * serve as a point of entry to get all the information about a single data\n   * source.\n   *\n   * You can use the information in a data source to do all sorts of things:\n   *  - create `ol.layer.Layer` objects using the WMS, WMTS or even WFS\n   *    information\n   *  - issue WMS/WFS queries\n   *  - know whether the data is visible or not\n   *  - apply filter rules on it\n   *\n   * @struct\n   * @param {ngeox.datasource.DataSourceOptions} options Options.\n   */\n  constructor(options) {\n\n    // === DYNAMIC properties (i.e. that can change / be watched ===\n\n    /**\n     * A data source is considered 'in range' when it is synchronized to\n     * a map view and the resolution of that view is within the range of\n     * the `maxResolution` and `minResolution`. These 2 properties are\n     * required for the `inRange` property to be dynamic, otherwise its\n     * value is always `true` by default.\n     *\n     * The synchronization is made in the `ngeo.datasource.SyncDataSourcesMap`\n     * service.\n     *\n     * @type {boolean}\n     * @private\n     */\n    this.inRange_ = options.inRange !== false;\n\n    /**\n     * Whether the data source is visible or not, i.e. whether its is ON or OFF.\n     * Defaults to `false`.\n     * @type {boolean}\n     * @private\n     */\n    this.visible_ = options.visible === true;\n\n\n    // === STATIC properties (i.e. that never change) ===\n\n    /**\n     * The attributes of the data source.\n     *\n     * Note: `attributes` is not using the conventionnal getter/setter due\n     * to:  See: https://github.com/google/closure-compiler/issues/1089\n     *\n     * @type {?Array.<ngeox.Attribute>}\n     * @export\n     */\n    this.attributes = options.attributes || null;\n\n    /**\n     * (Required) The data source id.\n     * @type {number}\n     * @private\n     */\n    this.id_ = options.id;\n\n    /**\n     * The name of an attribute among the attributes of the data source.\n     * The value of that attribute, in records, can be used to identify\n     * each record individually.\n     * @type {string|undefined}\n     * @private\n     */\n    this.identifierAttribute_ = options.identifierAttribute;\n\n    /**\n     * Maximum resolution where the data source can be displayed or queried.\n     * @type {number|undefined}\n     * @private\n     */\n    this.maxResolution_ = options.maxResolution;\n\n    /**\n     * Minimum resolution where the data source can be displayed or queried.\n     * @type {number|undefined}\n     * @private\n     */\n    this.minResolution_ = options.minResolution;\n\n    /**\n     * (Required) A human-readable name for the data source.\n     * @type {string}\n     * @private\n     */\n    this.name_ = options.name;\n  }\n\n  // ========================================\n  // === Dynamic property getters/setters ===\n  // ========================================\n\n  /**\n   * @return {boolean} In range\n   * @export\n   */\n  get inRange() {\n    return this.inRange_;\n  }\n\n  /**\n   * @param {boolean} inRange In range\n   * @export\n   */\n  set inRange(inRange) {\n    this.inRange_ = inRange;\n  }\n\n  /**\n   * @return {boolean} Visible\n   * @export\n   */\n  get visible() {\n    return this.visible_;\n  }\n\n  /**\n   * @param {boolean} visible Visible\n   * @export\n   */\n  set visible(visible) {\n    this.visible_ = visible;\n  }\n\n  // =======================================\n  // === Static property getters/setters ===\n  // =======================================\n\n  /**\n   * @return {?Array.<ngeox.Attribute>} Attributes\n   * @export\n   */\n  getAttributes() {\n    return this.attributes;\n  }\n\n  /**\n   * @param {?Array.<ngeox.Attribute>} attributes Attributes\n   * @export\n   */\n  setAttributes(attributes) {\n    this.attributes = attributes;\n  }\n\n  /**\n   * @return {number} Id\n   * @export\n   */\n  get id() {\n    return this.id_;\n  }\n\n  /**\n   * @return {string|undefined} Identifier attribute\n   * @export\n   */\n  get identifierAttribute() {\n    return this.identifierAttribute_;\n  }\n\n  /**\n   * @return {number|undefined} Maximum resolution\n   * @export\n   */\n  get maxResolution() {\n    return this.maxResolution_;\n  }\n\n  /**\n   * @return {number|undefined} Minimum resolution\n   * @export\n   */\n  get minResolution() {\n    return this.minResolution_;\n  }\n\n  /**\n   * @return {string} Name\n   * @export\n   */\n  get name() {\n    return this.name_;\n  }\n\n\n  // ===================================\n  // === Calculated property getters ===\n  // ===================================\n\n  /**\n   * Whether the data source is queryable or not.\n   * @return {boolean} Whether the data source is queryable or not.\n   * @export\n   */\n  get queryable() {\n    return false;\n  }\n\n  /**\n   * @return {boolean} Whether the data source supports a dynamic `inRange`\n   *     property or not, i.e. whether it can be calculated.\n   * @export\n   */\n  get supportsDynamicInRange() {\n    return this.maxResolution !== null || this.minResolution !== null;\n  }\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datasource/DataSource.js","/**\n * @module ngeo.draw.text\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport olEvents from 'ol/events.js';\nimport olInteractionDraw from 'ol/interaction/Draw.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoDrawtext', []);\n\nngeoBase.module.requires.push(exports.name);\n\n\n/**\n * @return {angular.Directive} The directive specs.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoDrawtext\n */\nexports.directive_ = function() {\n  return {\n    restrict: 'A',\n    require: '^^ngeoDrawfeature',\n    /**\n     * @param {!angular.Scope} $scope Scope.\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Attributes.\n     * @param {ngeo.draw.Controller} drawFeatureCtrl Controller.\n     */\n    link: ($scope, element, attrs, drawFeatureCtrl) => {\n\n      const drawText = new olInteractionDraw({\n        type: /** @type {ol.geom.GeometryType} */ ('Point')\n      });\n\n      drawFeatureCtrl.registerInteraction(drawText);\n      drawFeatureCtrl.drawText = drawText;\n\n      olEvents.listen(\n        drawText,\n        'drawend',\n        drawFeatureCtrl.handleDrawEnd.bind(\n          drawFeatureCtrl, ngeoBase.GeometryType.TEXT),\n        drawFeatureCtrl\n      );\n      olEvents.listen(\n        drawText,\n        'change:active',\n        drawFeatureCtrl.handleActiveChange,\n        drawFeatureCtrl\n      );\n    }\n  };\n};\n\n\nexports.directive('ngeoDrawtext', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/draw/text.js","/**\n * @module ngeo.map.FeatureOverlayMgr\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport * as olBase from 'ol/index.js';\nimport olLayerVector from 'ol/layer/Vector.js';\nimport * as olObj from 'ol/obj.js';\nimport olSourceVector from 'ol/source/Vector.js';\nimport olStyleStyle from 'ol/style/Style.js';\nimport googAsserts from 'goog/asserts.js';\nimport ngeoMapFeatureOverlay from 'ngeo/map/FeatureOverlay.js';\n\n/**\n * Provides a service that wraps an \"unmanaged\" vector layer,\n * used as a shared vector layer across the application.\n *\n * Example:\n *\n * The application's main component/controller initializes the feature\n * overlay manager with the map:\n *\n *     ngeoFeatureOverlayMgr.init(map);\n *\n * Once initialized, components of the application can use the manager to\n * create a feature overlay, configuring it with specific styles:\n *\n *     let featureOverlay = ngeoFeatureOverlayMgr.getFeatureOverlay();\n *     featureOverlay.setStyle(myStyle);\n *     featureOverlay.addFeature(myFeature);\n *\n * @constructor\n * @struct\n * @ngdoc service\n * @ngname ngeoFeatureOverlayMgr\n */\nconst exports = function() {\n\n  /**\n   * @type {Object.<string, number>}\n   * @private\n   */\n  this.featureUidToGroupIndex_ = {};\n\n  /**\n   * @type {Array.<ngeox.MapFeatureOverlayGroup>}\n   * @private\n   */\n  this.groups_ = [];\n\n  /**\n   * @type {ol.source.Vector}\n   * @private\n   */\n  this.source_ = new olSourceVector({\n    useSpatialIndex: false\n  });\n\n  /**\n   * @type {ol.layer.Vector}\n   * @private\n   */\n  this.layer_ = new olLayerVector({\n    source: this.source_,\n    style: this.styleFunction_.bind(this),\n    updateWhileAnimating: true,\n    updateWhileInteracting: true\n  });\n\n};\n\n\n/**\n * @param {ol.Feature} feature The feature to add.\n * @param {number} groupIndex The group groupIndex.\n * @export\n */\nexports.prototype.addFeature = function(feature, groupIndex) {\n  googAsserts.assert(groupIndex >= 0);\n  googAsserts.assert(groupIndex < this.groups_.length);\n  const featureUid = olBase.getUid(feature).toString();\n  this.featureUidToGroupIndex_[featureUid] = groupIndex;\n  this.groups_[groupIndex].features[featureUid] = feature;\n  this.source_.addFeature(feature);\n};\n\n\n/**\n * @param {ol.Feature} feature The feature to add.\n * @param {number} groupIndex The group groupIndex.\n * @export\n */\nexports.prototype.removeFeature = function(feature, groupIndex) {\n  googAsserts.assert(groupIndex >= 0);\n  googAsserts.assert(groupIndex < this.groups_.length);\n  const featureUid = olBase.getUid(feature).toString();\n  delete this.featureUidToGroupIndex_[featureUid];\n  delete this.groups_[groupIndex].features[featureUid];\n  this.source_.removeFeature(feature);\n};\n\n\n/**\n * @param {number} groupIndex The group groupIndex.\n * @export\n */\nexports.prototype.clear = function(groupIndex) {\n  googAsserts.assert(groupIndex >= 0);\n  googAsserts.assert(groupIndex < this.groups_.length);\n  const group = this.groups_[groupIndex];\n  for (const featureUid in group.features) {\n    this.removeFeature(group.features[featureUid], groupIndex);\n  }\n  googAsserts.assert(olObj.isEmpty(group.features));\n};\n\n\n/**\n * @return {ol.layer.Vector} The vector layer used internally.\n * @export\n */\nexports.prototype.getLayer = function() {\n  return this.layer_;\n};\n\n\n/**\n * @return {ngeo.map.FeatureOverlay} Feature overlay.\n * @export\n */\nexports.prototype.getFeatureOverlay = function() {\n  const groupIndex = this.groups_.length;\n  this.groups_.push({\n    styleFunction: olStyleStyle.defaultFunction,\n    features: {}\n  });\n  return new ngeoMapFeatureOverlay(this, groupIndex);\n};\n\n\n/**\n * @param {ol.Map} map Map.\n * @export\n */\nexports.prototype.init = function(map) {\n  this.layer_.setMap(map);\n};\n\n\n/**\n * @param {ol.style.Style|Array.<ol.style.Style>|ol.StyleFunction} style\n * Style.\n * @param {number} groupIndex Group index.\n * @export\n */\nexports.prototype.setStyle = function(style, groupIndex) {\n  googAsserts.assert(groupIndex >= 0);\n  googAsserts.assert(groupIndex < this.groups_.length);\n  this.groups_[groupIndex].styleFunction = style === null ?\n    olStyleStyle.defaultFunction : olStyleStyle.createFunction(style);\n};\n\n\n/**\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array.<ol.style.Style>|ol.style.Style} Styles.\n * @private\n */\nexports.prototype.styleFunction_ = function(feature, resolution) {\n  const featureUid = olBase.getUid(feature).toString();\n  googAsserts.assert(featureUid in this.featureUidToGroupIndex_);\n  const groupIndex = this.featureUidToGroupIndex_[featureUid];\n  const group = this.groups_[groupIndex];\n  return group.styleFunction(feature, resolution);\n};\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoFeatureOverlayMgr', [\n  ngeoMapFeatureOverlay.module.name\n]);\nexports.module.service('ngeoFeatureOverlayMgr', exports);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/FeatureOverlayMgr.js","/* eslint valid-jsdoc: 0, prefer-rest-params: 0,  */\n// Copyright 2008 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * Utilities to check the preconditions, postconditions and\n * invariants runtime.\n *\n * Methods in this package should be given special treatment by the compiler\n * for type-inference. For example, <code>goog.asserts.assert(foo)</code>\n * will restrict <code>foo</code> to a truthy value.\n *\n * The compiler has an option to disable asserts. So code like:\n * <code>\n * var x = goog.asserts.assert(foo()); goog.asserts.assert(bar());\n * </code>\n * will be transformed into:\n * <code>\n * var x = foo();\n * </code>\n * The compiler will leave in foo() (because its return value is used),\n * but it will remove bar() because it assumes it does not have side-effects.\n *\n * @author agrieve@google.com (Andrew Grieve)\n */\n\nconst exports = {};\n\n/**\n * Throws an exception with the given message and \"Assertion failed\" prefixed\n * onto it.\n * @param {string} defaultMessage The message to use if givenMessage is empty.\n * @param {Array<*>} defaultArgs The substitution arguments for defaultMessage.\n * @param {string|undefined} givenMessage Message supplied by the caller.\n * @param {Array<*>} givenArgs The substitution arguments for givenMessage.\n * @throws {goog.asserts.AssertionError} When the value is not a number.\n * @private\n */\nexports.doAssertFailure_ = function(\n  defaultMessage, defaultArgs, givenMessage, givenArgs) {\n  let message = 'Assertion failed';\n  let args;\n  if (givenMessage) {\n    message += `: ${givenMessage}`;\n    args = givenArgs;\n  } else if (defaultMessage) {\n    message += `: ${defaultMessage}`;\n    args = defaultArgs;\n  }\n  // The '' + works around an Opera 10 bug in the unit tests. Without it,\n  // a stack trace is added to var message above. With this, a stack trace is\n  // not added until this line (it causes the extra garbage to be added after\n  // the assertion message instead of in the middle of it).\n  const e = new exports.AssertionError(`${message}`, args || []);\n  exports.errorHandler_(e);\n};\n\n\n/**\n * Sets a custom error handler that can be used to customize the behavior of\n * assertion failures, for example by turning all assertion failures into log\n * messages.\n * @param {function(!goog.asserts.AssertionError)} errorHandler\n */\nexports.setErrorHandler = function(errorHandler) {\n  if (exports.ENABLE_ASSERTS) {\n    exports.errorHandler_ = errorHandler;\n  }\n};\n\n\n/**\n * Checks if the condition evaluates to true if goog.asserts.ENABLE_ASSERTS is\n * true.\n * @template T\n * @param {T} condition The condition to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {T} The value of the condition.\n * @throws {goog.asserts.AssertionError} When the condition evaluates to false.\n */\nexports.assert = function(condition, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !condition) {\n    exports.doAssertFailure_(\n      '', null, opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return condition;\n};\n\n\n/**\n * Fails if goog.asserts.ENABLE_ASSERTS is true. This function is useful in case\n * when we want to add a check in the unreachable area like switch-case\n * statement:\n *\n * <pre>\n *  switch(type) {\n *    case FOO: doSomething(); break;\n *    case BAR: doSomethingElse(); break;\n *    default: goog.asserts.fail('Unrecognized type: ' + type);\n *      // We have only 2 types - \"default:\" section is unreachable code.\n *  }\n * </pre>\n *\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @throws {goog.asserts.AssertionError} Failure.\n */\nexports.fail = function(opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS) {\n    exports.errorHandler_(\n      new exports.AssertionError(\n        `Failure${opt_message ? `: ${opt_message}` : ''}`,\n        Array.prototype.slice.call(arguments, 1)));\n  }\n};\n\n\n/**\n * Checks if the value is a number if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {number} The value, guaranteed to be a number when asserts enabled.\n * @throws {goog.asserts.AssertionError} When the value is not a number.\n */\nexports.assertNumber = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isNumber(value)) {\n    exports.doAssertFailure_(\n      'Expected number but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {number} */ (value);\n};\n\n\n/**\n * Checks if the value is a string if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {string} The value, guaranteed to be a string when asserts enabled.\n * @throws {goog.asserts.AssertionError} When the value is not a string.\n */\nexports.assertString = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isString(value)) {\n    exports.doAssertFailure_(\n      'Expected string but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {string} */ (value);\n};\n\n\n/**\n * Checks if the value is a function if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {!Function} The value, guaranteed to be a function when asserts\n *     enabled.\n * @throws {goog.asserts.AssertionError} When the value is not a function.\n */\nexports.assertFunction = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isFunction(value)) {\n    exports.doAssertFailure_(\n      'Expected function but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {!Function} */ (value);\n};\n\n\n/**\n * Checks if the value is an Object if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {!Object} The value, guaranteed to be a non-null object.\n * @throws {goog.asserts.AssertionError} When the value is not an object.\n */\nexports.assertObject = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isObject(value)) {\n    exports.doAssertFailure_(\n      'Expected object but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {!Object} */ (value);\n};\n\n\n/**\n * Checks if the value is an Array if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {!Array<?>} The value, guaranteed to be a non-null array.\n * @throws {goog.asserts.AssertionError} When the value is not an array.\n */\nexports.assertArray = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isArray(value)) {\n    exports.doAssertFailure_(\n      'Expected array but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {!Array<?>} */ (value);\n};\n\n\n/**\n * Checks if the value is a boolean if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {boolean} The value, guaranteed to be a boolean when asserts are\n *     enabled.\n * @throws {goog.asserts.AssertionError} When the value is not a boolean.\n */\nexports.assertBoolean = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isBoolean(value)) {\n    exports.doAssertFailure_(\n      'Expected boolean but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {boolean} */ (value);\n};\n\n\n/**\n * Checks if the value is a DOM Element if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {!Element} The value, likely to be a DOM Element when asserts are\n *     enabled.\n * @throws {goog.asserts.AssertionError} When the value is not an Element.\n */\nexports.assertElement = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS &&\n      (!goog.isObject(value) || value.nodeType != goog.dom.NodeType.ELEMENT)) {\n    exports.doAssertFailure_(\n      'Expected Element but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {!Element} */ (value);\n};\n\n\n/**\n * Checks if the value is an instance of the user-defined type if\n * goog.asserts.ENABLE_ASSERTS is true.\n *\n * The compiler may tighten the type returned by this function.\n *\n * @param {?} value The value to check.\n * @param {function(new: T, ...)} type A user-defined constructor.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @throws {goog.asserts.AssertionError} When the value is not an instance of\n *     type.\n * @return {T}\n * @template T\n */\nexports.assertInstanceof = function(value, type, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !(value instanceof type)) {\n    exports.doAssertFailure_(\n      'Expected instanceof %s but got %s.',\n      [exports.getType_(type), exports.getType_(value)],\n      opt_message, Array.prototype.slice.call(arguments, 3));\n  }\n  return value;\n};\n\n\n/**\n * Checks that no enumerable keys are present in Object.prototype. Such keys\n * would break most code that use {@code for (var ... in ...)} loops.\n */\nexports.assertObjectPrototypeIsIntact = function() {\n  for (const key in Object.prototype) {\n    exports.fail(`${key} should not be enumerable in Object.prototype.`);\n  }\n};\n\n\n/**\n * Returns the type of a value. If a constructor is passed, and a suitable\n * string cannot be found, 'unknown type name' will be returned.\n * @param {*} value A constructor, object, or primitive.\n * @return {string} The best display name for the value, or 'unknown type name'.\n * @private\n */\nexports.getType_ = function(value) {\n  if (value instanceof Function) {\n    return value.displayName || value.name || 'unknown type name';\n  } else if (value instanceof Object) {\n    return value.constructor.displayName || value.constructor.name ||\n        Object.prototype.toString.call(value);\n  } else {\n    return value === null ? 'null' : typeof value;\n  }\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/goog.asserts.js","/**\n * @module app.drawfeature\n*/\nconst exports = {};\n\nimport './drawfeature.css';\nimport './common_dependencies.js';\nimport ngeoDrawModule from 'ngeo/draw/module.js';\n\nimport ngeoMapModule from 'ngeo/map/module.js';\nimport ngeoMiscToolActivate from 'ngeo/misc/ToolActivate.js';\nimport ngeoMiscToolActivateMgr from 'ngeo/misc/ToolActivateMgr.js';\nimport olMap from 'ol/Map.js';\nimport olView from 'ol/View.js';\nimport olLayerTile from 'ol/layer/Tile.js';\nimport olLayerVector from 'ol/layer/Vector.js';\nimport olSourceOSM from 'ol/source/OSM.js';\nimport olSourceVector from 'ol/source/Vector.js';\n\n\n/** @type {!angular.Module} **/\napp.module = angular.module('app', [\n  ngeo.module.name,\n  ngeoDrawModule.name,\n  ngeoMapModule.name,\n  ngeoMiscToolActivateMgr.module.name,\n]);\n\n\n/**\n * @param {!angular.Scope} $scope Angular scope.\n * @param {ol.Collection.<ol.Feature>} ngeoFeatures Collection of features.\n * @param {ngeo.misc.ToolActivateMgr} ngeoToolActivateMgr Ngeo ToolActivate manager\n *     service.\n *//* @ngInject\n * @constructor\n */\napp.MainController = function($scope, ngeoFeatures, ngeoToolActivateMgr) {\n\n  /**\n   * @type {!angular.Scope}\n   * @private\n   */\n  this.scope_ = $scope;\n\n  const vector = new olLayerVector({\n    source: new olSourceVector({\n      wrapX: false,\n      features: ngeoFeatures\n    })\n  });\n\n  /**\n   * @type {ol.Map}\n   * @export\n   */\n  this.map = new olMap({\n    layers: [\n      new olLayerTile({\n        source: new olSourceOSM()\n      }),\n      vector\n    ],\n    view: new olView({\n      center: [0, 0],\n      zoom: 3\n    })\n  });\n\n  /**\n   * @type {boolean}\n   * @export\n   */\n  this.drawActive = false;\n\n  const drawToolActivate = new ngeoMiscToolActivate(this, 'drawActive');\n  ngeoToolActivateMgr.registerTool('mapTools', drawToolActivate, false);\n\n  /**\n   * @type {boolean}\n   * @export\n   */\n  this.dummyActive = true;\n\n  const dummyToolActivate = new ngeoMiscToolActivate(this, 'dummyActive');\n  ngeoToolActivateMgr.registerTool('mapTools', dummyToolActivate, true);\n};\n\n\napp.module.controller('MainController', app.MainController);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./examples/drawfeature.js","/**\n * @module ngeo.draw.module\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoDrawComponent from 'ngeo/draw/component.js';\nimport ngeoDrawController from 'ngeo/draw/Controller.js';\nimport ngeoDrawFeatures from 'ngeo/draw/features.js';\nimport ngeoDrawPoint from 'ngeo/draw/point.js';\nimport ngeoDrawRectangle from 'ngeo/draw/rectangle.js';\nimport ngeoDrawText from 'ngeo/draw/text.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoDrawModule', [\n  ngeoBase.module.name, // Change me when all dependencies are in a module.\n  ngeoDrawController.module.name,\n  ngeoDrawComponent.name,\n  ngeoDrawFeatures.name,\n  ngeoDrawPoint.name,\n  ngeoDrawRectangle.name,\n  ngeoDrawText.name,\n]);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/draw/module.js","/**\n * @module ngeo.map.module\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoMapBackgroundLayerMgr from 'ngeo/map/BackgroundLayerMgr.js';\nimport ngeoMapDirective from 'ngeo/map/directive.js';\nimport ngeoMapFeatureOverlayMgr from 'ngeo/map/FeatureOverlayMgr.js';\nimport ngeoMapRecenter from 'ngeo/map/recenter.js';\nimport ngeoMapResizemap from 'ngeo/map/resizemap.js';\nimport ngeoMapScaleselector from 'ngeo/map/scaleselector.js';\n\n/**\n * Also related to the map but not included in the module:\n *  - ngeo.map.FeatureOverlay (already required by ngeo.map.FeatureOverlayMgr)\n *\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoMapModule', [\n  ngeoBase.module.name, // Change me when all dependencies are in a module.\n  ngeoMapBackgroundLayerMgr.module.name,\n  ngeoMapDirective.name,\n  ngeoMapFeatureOverlayMgr.module.name,\n  ngeoMapRecenter.name,\n  ngeoMapResizemap.name,\n  ngeoMapScaleselector.name\n]);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/module.js","/**\n * @module ngeo.draw.component\n*/\nimport ngeoDrawController from 'ngeo/draw/Controller.js';\n\n/** @suppress {extraRequire} */\nimport ngeoDrawPoint from 'ngeo/draw/point.js';\n\n/** @suppress {extraRequire} */\nimport ngeoDrawRectangle from 'ngeo/draw/rectangle.js';\n\n/** @suppress {extraRequire} */\nimport ngeoDrawText from 'ngeo/draw/text.js';\n\n/** @suppress {extraRequire} */\nimport ngeoMeasureArea from 'ngeo/measure/area.js';\n\n/** @suppress {extraRequire} */\nimport ngeoMeasureAzimut from 'ngeo/measure/azimut.js';\n\n/** @suppress {extraRequire} */\nimport ngeoMeasureLength from 'ngeo/measure/length.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoDrawfeature', [\n  ngeoDrawController.module.name,\n  ngeoDrawPoint.name,\n  ngeoDrawRectangle.name,\n  ngeoDrawText.name,\n  ngeoMeasureArea.name,\n  ngeoMeasureAzimut.name,\n  ngeoMeasureLength.name,\n]);\n\nngeo.module.requires.push(exports.name);\n\n/**\n * Directive used to draw vector features on a map.\n * Example:\n *\n *     <ngeo-drawfeature\n *         ngeo-btn-group\n *         class=\"btn-group\"\n *         ngeo-drawfeature-active=\"ctrl.drawActive\"\n *         ngeo-drawfeature-map=\"::ctrl.map\">\n *       <a\n *         href\n *         translate\n *         ngeo-btn\n *         ngeo-drawpoint\n *         class=\"btn btn-default ngeo-drawfeature-point\"\n *         ng-class=\"{active: dfCtrl.drawPoint.active}\"\n *         ng-model=\"dfCtrl.drawPoint.active\"></a>\n *       <a\n *         href\n *         translate\n *         ngeo-btn\n *         ngeo-measurelength\n *         class=\"btn btn-default ngeo-drawfeature-linestring\"\n *         ng-class=\"{active: dfCtrl.measureLength.active}\"\n *         ng-model=\"dfCtrl.measureLength.active\"></a>\n *       <a\n *         href\n *         translate\n *         ngeo-btn\n *         ngeo-measurearea\n *         class=\"btn btn-default ngeo-drawfeature-polygon\"\n *         ng-class=\"{active: dfCtrl.measureArea.active}\"\n *         ng-model=\"dfCtrl.measureArea.active\"></a>\n *       <a\n *         href\n *         translate\n *         ngeo-btn\n *         ngeo-measureazimut\n *         class=\"btn btn-default ngeo-drawfeature-circle\"\n *         ng-class=\"{active: dfCtrl.measureAzimut.active}\"\n *         ng-model=\"dfCtrl.measureAzimut.active\"></a>\n *       <a\n *         href\n *         translate\n *         ngeo-btn\n *         ngeo-drawrectangle\n *         class=\"btn btn-default ngeo-drawfeature-rectangle\"\n *         ng-class=\"{active: dfCtrl.drawRectangle.active}\"\n *         ng-model=\"dfCtrl.drawRectangle.active\"></a>\n *       <a\n *         href\n *         translate\n *         ngeo-btn\n *         ngeo-drawtext\n *         class=\"btn btn-default ngeo-drawfeature-text\"\n *         ng-class=\"{active: dfCtrl.drawText.active}\"\n *         ng-model=\"dfCtrl.drawText.active\"></a>\n *     </ngeo-drawfeature>\n *\n * @htmlAttribute {boolean} ngeo-drawfeature-active Whether the directive is\n *     active or not.\n * @htmlAttribute {!ol.Collection=} ngeo-drawfeature-features The features\n *     collection in which to push the drawn features. If none is provided,\n *     then the `ngeoFeatures` collection is used.\n * @htmlAttribute {ol.Map} ngeo-drawfeature-map The map.\n * @htmlAttribute {boolean} ngeo-drawfeature-showmeasure. Checks the\n *      checkbox in order to display the feature measurements as a label.\n *      Default to false.\n * @return {angular.Directive} The directive specs.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoDrawfeature\n */\nexports.directive_ = function() {\n  return {\n    controller: 'ngeoDrawfeatureController as dfCtrl',\n    scope: true,\n    bindToController: {\n      'active': '=ngeoDrawfeatureActive',\n      'features': '=?ngeoDrawfeatureFeatures',\n      'map': '=ngeoDrawfeatureMap',\n      'showMeasure': '=?ngeoDrawfeatureShowmeasure'\n    }\n  };\n};\n\nexports.directive('ngeoDrawfeature', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/draw/component.js","/**\n * @module ngeo.measure.area\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport olEvents from 'ol/events.js';\nimport olStyleStyle from 'ol/style/Style.js';\nimport ngeoInteractionMeasureArea from 'ngeo/interaction/MeasureArea.js';\nimport ngeoDrawController from 'ngeo/draw/Controller.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoMeasurearea', [\n  ngeoDrawController.module.name\n]);\n\nngeoBase.module.requires.push(exports.name);\n\n\n/**\n * @param {!angular.$compile} $compile Angular compile service.\n * @param {!angularGettext.Catalog} gettextCatalog Gettext service.\n * @param {!angular.$filter} $filter Angular filter\n * @param {!angular.$injector} $injector Main injector.\n * @return {!angular.Directive} The directive specs.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoDrawpoint\n */\nexports.directive_ = function($compile, gettextCatalog, $filter, $injector) {\n  return {\n    restrict: 'A',\n    require: '^^ngeoDrawfeature',\n    /**\n     * @param {!angular.Scope} $scope Scope.\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Attributes.\n     * @param {ngeo.draw.Controller} drawFeatureCtrl Controller.\n     */\n    link: ($scope, element, attrs, drawFeatureCtrl) => {\n\n      const helpMsg = gettextCatalog.getString('Click to start drawing polygon');\n      const contMsg = gettextCatalog.getString('Click to continue drawing<br/>' +\n          'Double-click or click starting point to finish');\n\n      const measureArea = new ngeoInteractionMeasureArea($filter('ngeoUnitPrefix'), {\n        style: new olStyleStyle(),\n        startMsg: $compile(`<div translate>${helpMsg}</div>`)($scope)[0],\n        continueMsg: $compile(`<div translate>${contMsg}</div>`)($scope)[0],\n        precision: $injector.has('ngeoMeasurePrecision') ? $injector.get('ngeoMeasurePrecision') : undefined\n      });\n\n      drawFeatureCtrl.registerInteraction(measureArea);\n      drawFeatureCtrl.measureArea = measureArea;\n\n      olEvents.listen(\n        measureArea,\n        'measureend',\n        drawFeatureCtrl.handleDrawEnd.bind(\n          drawFeatureCtrl, ngeoBase.GeometryType.POLYGON),\n        drawFeatureCtrl\n      );\n      olEvents.listen(\n        measureArea,\n        'change:active',\n        drawFeatureCtrl.handleActiveChange,\n        drawFeatureCtrl\n      );\n    }\n  };\n};\n\n\nexports.directive('ngeoMeasurearea', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/measure/area.js","/**\n * @module ngeo.measure.azimut\n*/\nimport ngeoBase from 'ngeo/index.js';\n\n/** @suppress {extraRequire} */\nimport ngeoFilters from 'ngeo/filters.js';\n\nimport olEvents from 'ol/events.js';\nimport olFeature from 'ol/Feature.js';\nimport olGeomPolygon from 'ol/geom/Polygon.js';\nimport olStyleStyle from 'ol/style/Style.js';\nimport ngeoInteractionMeasureAzimut from 'ngeo/interaction/MeasureAzimut.js';\nimport ngeoDrawController from 'ngeo/draw/Controller.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoMeasureazimut', [\n  ngeoDrawController.module.name\n]);\n\nngeoBase.module.requires.push(exports.name);\n\n\n/**\n * @param {!angular.$compile} $compile Angular compile service.\n * @param {!angularGettext.Catalog} gettextCatalog Gettext catalog.\n * @param {!angular.$filter} $filter Angular filter\n * @param {!angular.$injector} $injector Main injector.\n * @return {!angular.Directive} The directive specs.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoDrawpoint\n */\nexports.directive_ = function($compile, gettextCatalog, $filter, $injector) {\n  return {\n    restrict: 'A',\n    require: '^^ngeoDrawfeature',\n    /**\n     * @param {!angular.Scope} $scope Scope.\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Attributes.\n     * @param {ngeo.draw.Controller} drawFeatureCtrl Controller.\n     */\n    link: ($scope, element, attrs, drawFeatureCtrl) => {\n\n      const helpMsg = gettextCatalog.getString('Click to start drawing circle');\n      const contMsg = gettextCatalog.getString('Click to finish');\n\n      const measureAzimut = new ngeoInteractionMeasureAzimut(\n        $filter('ngeoUnitPrefix'), $filter('number'), {\n          style: new olStyleStyle(),\n          startMsg: $compile(`<div translate>${helpMsg}</div>`)($scope)[0],\n          continueMsg: $compile(`<div translate>${contMsg}</div>`)($scope)[0],\n          precision: $injector.has('ngeoMeasurePrecision') ? $injector.get('ngeoMeasurePrecision') : undefined,\n          decimals: $injector.has('ngeoMeasureDecimals') ? $injector.get('ngeoMeasureDecimals') : undefined\n        });\n\n      drawFeatureCtrl.registerInteraction(measureAzimut);\n      drawFeatureCtrl.measureAzimut = measureAzimut;\n\n      olEvents.listen(\n        measureAzimut,\n        'measureend',\n        /**\n         * @param {ngeox.MeasureEvent} event Event.\n         */\n        (event) => {\n          // In the case of azimut measure interaction, the feature's\n          // geometry is actually a collection (line + circle)\n          // For our purpose here, we only need the circle, which gets\n          // transformed into a polygon with 64 sides.\n          const geometry = /** @type {ol.geom.GeometryCollection} */\n                (event.detail.feature.getGeometry());\n          const circle = /** @type {ol.geom.Circle} */ (\n            geometry.getGeometries()[1]);\n          const polygon = olGeomPolygon.fromCircle(circle, 64);\n          event.feature = new olFeature(polygon);\n          const azimut = ngeoInteractionMeasureAzimut.getAzimut(\n            /** @type {ol.geom.LineString} */ (geometry.getGeometries()[0])\n          );\n          event.detail.feature.set('azimut', azimut);\n\n          drawFeatureCtrl.handleDrawEnd(ngeoBase.GeometryType.CIRCLE, event);\n        },\n        drawFeatureCtrl\n      );\n\n      olEvents.listen(\n        measureAzimut,\n        'change:active',\n        drawFeatureCtrl.handleActiveChange,\n        drawFeatureCtrl\n      );\n    }\n  };\n};\n\n\nexports.directive('ngeoMeasureazimut', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/measure/azimut.js","/**\n * @module ngeo.measure.length\n*/\nimport ngeoBase from 'ngeo/index.js';\n\n/** @suppress {extraRequire} */\nimport ngeoFilters from 'ngeo/filters.js';\n\nimport olEvents from 'ol/events.js';\nimport olStyleStyle from 'ol/style/Style.js';\nimport ngeoInteractionMeasureLength from 'ngeo/interaction/MeasureLength.js';\nimport ngeoDrawController from 'ngeo/draw/Controller.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoMeasurelength', [\n  ngeoDrawController.module.name\n]);\n\nngeoBase.module.requires.push(exports.name);\n\n\n/**\n * @param {!angular.$compile} $compile Angular compile service.\n * @param {!angularGettext.Catalog} gettextCatalog Gettext catalog.\n * @param {!angular.$filter} $filter Angular filter.\n * @param {!angular.$injector} $injector Main injector.\n * @return {!angular.Directive} The directive specs.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoDrawpoint\n */\nexports.directive_ = function($compile, gettextCatalog, $filter, $injector) {\n  return {\n    restrict: 'A',\n    require: '^^ngeoDrawfeature',\n    /**\n     * @param {!angular.Scope} $scope Scope.\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Attributes.\n     * @param {ngeo.draw.Controller} drawFeatureCtrl Controller.\n     */\n    link: ($scope, element, attrs, drawFeatureCtrl) => {\n\n      const helpMsg = gettextCatalog.getString('Click to start drawing line');\n      const contMsg = gettextCatalog.getString('Click to continue drawing<br/>' +\n          'Double-click or click last point to finish');\n\n      const measureLength = new ngeoInteractionMeasureLength($filter('ngeoUnitPrefix'), {\n        style: new olStyleStyle(),\n        startMsg: $compile(`<div translate>${helpMsg}</div>`)($scope)[0],\n        continueMsg: $compile(`<div translate>${contMsg}</div>`)($scope)[0],\n        precision: $injector.has('ngeoMeasurePrecision') ? $injector.get('ngeoMeasurePrecision') : undefined\n      });\n\n      drawFeatureCtrl.registerInteraction(measureLength);\n      drawFeatureCtrl.measureLength = measureLength;\n\n      olEvents.listen(\n        measureLength,\n        'measureend',\n        drawFeatureCtrl.handleDrawEnd.bind(\n          drawFeatureCtrl, ngeoBase.GeometryType.LINE_STRING),\n        drawFeatureCtrl\n      );\n      olEvents.listen(\n        measureLength,\n        'change:active',\n        drawFeatureCtrl.handleActiveChange,\n        drawFeatureCtrl\n      );\n    }\n  };\n};\n\n\nexports.directive('ngeoMeasurelength', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/measure/length.js","/**\n * @module ngeo.map.BackgroundLayerMgr\n*/\nimport googAsserts from 'goog/asserts.js';\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoCustomEvent from 'ngeo/CustomEvent.js';\nimport * as olBase from 'ol/index.js';\nimport olObservable from 'ol/Observable.js';\nimport olLayerGroup from 'ol/layer/Group.js';\nimport olLayerLayer from 'ol/layer/Layer.js';\nimport olSourceImageWMS from 'ol/source/ImageWMS.js';\nimport olSourceTileWMS from 'ol/source/TileWMS.js';\nimport olSourceWMTS from 'ol/source/WMTS.js';\n\n/**\n * Provides a service for setting/unsetting background layers\n * in maps.\n *\n * The notion of background/base layers doesn't exist in OpenLayers. This\n * service adds that notion.\n *\n * Setting a background layer to map is done with the `set` function:\n *\n *     ngeoBackgroundLayerMgr.set(map, layer);\n *\n * To unset the background layer pass `null` as the `layer` argument:\n *\n *     ngeoBackgroundLayerMgr.set(map, null);\n *\n * The `get` function returns the current background layer of the map passed\n * as an argument. `null` is returned if the map doesn't have a background\n * layer.\n *\n * The background layer is always added at index 0 in the map's layers\n * collection. When a background layer is set it is inserted (at index 0)\n * if the map does not already have a background layer, otherwise the\n * new background layer replaces the previous one at index 0.\n *\n * Users can subscribe to a 'change' event to get notified when the background\n * layer changes:\n *\n *     ngeoBackgroundLayerMgr.on('change', function(e) {\n *       // do something with the layer\n *       let layer = ngeoBackgroundLayerMgr.get();\n *       // know which layer was used before\n *       let previous = e.previous\n *     });\n *\n * See our live examples:\n * [../examples/backgroundlayer.html](../examples/backgroundlayer.html)\n * [../examples/backgroundlayerdropdown.html](../examples/backgroundlayerdropdown.html)\n *\n * @extends {ol.Observable}\n * @constructor\n * @struct\n * @ngdoc service\n * @ngname ngeoBackgroundLayerMgr\n */\nconst exports = function() {\n\n  olObservable.call(this);\n\n  /**\n   * Object used to track if maps have background layers.\n   * @type {Object.<string, boolean>}\n   * @private\n   */\n  this.mapUids_ = {};\n};\n\nolBase.inherits(exports, olObservable);\n\n\n/**\n * Return the current background layer of a given map. `null` is returned if\n * the map does not have a background layer.\n * @param {ol.Map} map Map.\n * @return {ol.layer.Base} layer The background layer.\n * @export\n */\nexports.prototype.get = function(map) {\n  const mapUid = olBase.getUid(map).toString();\n  return mapUid in this.mapUids_ ? map.getLayers().item(0) : null;\n};\n\n\n/**\n * Set the background layer of a map. If `layer` is `null` the background layer\n * is removed.\n * @param {ol.Map} map The map.\n * @param {ol.layer.Base} layer The new background layer.\n * @return {ol.layer.Base} The previous background layer.\n * @export\n */\nexports.prototype.set = function(map, layer) {\n  const mapUid = olBase.getUid(map).toString();\n  const previous = this.get(map);\n  if (previous !== null) {\n    googAsserts.assert(mapUid in this.mapUids_);\n    if (layer !== null) {\n      map.getLayers().setAt(0, layer);\n    } else {\n      map.getLayers().removeAt(0);\n      delete this.mapUids_[mapUid];\n    }\n  } else if (layer !== null) {\n    map.getLayers().insertAt(0, layer);\n    this.mapUids_[mapUid] = true;\n  }\n  /** @type {ngeox.BackgroundEvent} */\n  const event = new ngeoCustomEvent('change', {\n    current: layer,\n    previous: previous\n  });\n  this.dispatchEvent(event);\n\n  return previous;\n};\n\n/**\n * @param {ol.Map} map The map.\n * @param {Object.<string, string>} dimensions The global dimensions object.\n * @export\n */\nexports.prototype.updateDimensions = function(map, dimensions) {\n  const baseBgLayer = this.get(map);\n  if (baseBgLayer) {\n    let layers = [baseBgLayer];\n    if (baseBgLayer instanceof olLayerGroup) {\n      // Handle the first level of layers of the base background layer.\n      layers = baseBgLayer.getLayers().getArray();\n    }\n\n    layers.forEach((layer) => {\n      googAsserts.assertInstanceof(layer, olLayerLayer);\n      if (layer) {\n        let hasUpdates = false;\n        const updatedDimensions = {};\n        for (const key in layer.get('dimensions')) {\n          const value = dimensions[key];\n          if (value !== undefined) {\n            updatedDimensions[key] = value;\n            hasUpdates = true;\n          }\n        }\n        if (hasUpdates) {\n          const source = layer.getSource();\n          if (source instanceof olSourceWMTS) {\n            source.updateDimensions(updatedDimensions);\n            source.refresh();\n          } else if (source instanceof olSourceTileWMS || source instanceof olSourceImageWMS) {\n            source.updateParams(updatedDimensions);\n            source.refresh();\n          }\n        }\n      }\n    });\n  }\n};\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoBackgroundLayerMgr', []);\nexports.module.service('ngeoBackgroundLayerMgr', exports);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/BackgroundLayerMgr.js","/**\n * @module ngeo.map.directive\n*/\nimport googAsserts from 'goog/asserts.js';\nimport ngeoBase from 'ngeo/index.js';\n\n// TODO Remove me, there should not be a dependency on datasources from the map.\nimport ngeoDatasourceSyncDataSourcesMap from 'ngeo/datasource/SyncDataSourcesMap.js';\n\nimport olEvents from 'ol/events.js';\nimport olMap from 'ol/Map.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoMap', [\n  ngeoDatasourceSyncDataSourcesMap.module.name\n]);\n\nngeoBase.module.requires.push(exports.name);\n\n\n/**\n * Provides a directive used to insert a user-defined OpenLayers\n * map in the DOM. The directive does not create an isolate scope.\n *\n * Examples:\n *\n *   Simple:\n *\n *      <div ngeo-map=\"ctrl.map\"></div>\n *\n *   Manage window resizing:\n *\n *      <div\n *        ngeo-map=\"ctrl.map\"\n *        ngeo-map-manage-resize=\"ctrl.manageResize\"\n *        ngeo-map-resize-transition=\"ctrl.resizeTransition\">\n *      </div>\n *\n * See our live examples:\n * [../examples/permalink.html](../examples/permalink.html)\n * [../examples/simple.html](../examples/simple.html)\n *\n * @htmlAttribute {ol.Map} ngeo-map The map.\n * @param {angular.$window} $window The Angular $window service.\n * @param {ngeo.datasource.SyncDataSourcesMap} ngeoSyncDataSourcesMap Ngeo sync\n *     data sources map service.\n * @return {angular.Directive} Directive Definition Object.\n * @ngdoc directive\n * @ngname ngeoMap\n *//* @ngInject\n */\nexports.directive_ = function($window, ngeoSyncDataSourcesMap) {\n  return {\n    restrict: 'A',\n    /**\n     * @param {angular.Scope} scope Scope.\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Atttributes.\n     */\n    link: (scope, element, attrs) => {\n      // Get the 'ol.Map' object from attributes and manage it accordingly\n      const attr = 'ngeoMap';\n      const prop = attrs[attr];\n\n      const map = scope.$eval(prop);\n      googAsserts.assertInstanceof(map, olMap);\n\n      map.setTarget(element[0]);\n\n      ngeoSyncDataSourcesMap.map = map;\n\n\n      // Get the 'window resize' attributes, which are optionnal. If defined,\n      // the browser window 'resize' event is listened to update the size of\n      // the map when fired. A transition option is also available to let any\n      // animation that may occur on the div of the map to smootly resize the\n      // map while in progress.\n      const manageResizeAttr = 'ngeoMapManageResize';\n      const manageResizeProp = attrs[manageResizeAttr];\n      const manageResize = scope.$eval(manageResizeProp);\n\n      if (manageResize) {\n        const resizeTransitionAttr = 'ngeoMapResizeTransition';\n        const resizeTransitionProp = attrs[resizeTransitionAttr];\n\n        const resizeTransition = /** @type {number|undefined} */ (\n          scope.$eval(resizeTransitionProp));\n\n        olEvents.listen(\n          $window,\n          'resize',\n          () => {\n            if (resizeTransition) {\n              // Resize with transition\n              const start = Date.now();\n              let loop = true;\n              const adjustSize = function() {\n                map.updateSize();\n                map.renderSync();\n                if (loop) {\n                  $window.requestAnimationFrame(adjustSize);\n                }\n                if (Date.now() - start > resizeTransition) {\n                  loop = false;\n                }\n              };\n              adjustSize();\n            } else {\n              // A single plain resize\n              map.updateSize();\n            }\n          }\n        );\n      }\n    }\n  };\n};\n\n// Register the directive in the module\nexports.directive('ngeoMap', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/directive.js","/**\n * @module ngeo.datasource.SyncDataSourcesMap\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoDatasourceDataSource from 'ngeo/datasource/DataSource.js';\n\n/** @suppress {extraRequire} */\nimport ngeoDatasourceDataSources from 'ngeo/datasource/DataSources.js';\n\nimport olEvents from 'ol/events.js';\nimport olObservable from 'ol/Observable.js';\nimport olView from 'ol/View.js';\nimport googAsserts from 'goog/asserts.js';\n\nconst exports = class {\n\n  /**\n   * This service is responsible of the synchronization between the ngeo\n   * collection of data sources and a specific map. It listens to events\n   * that come directly or indirectly from the map and update the inner\n   * properties of the data sources.\n   *\n   * The following data sources properties are synchronized here:\n   *\n   * - inRange: The map view 'change:resolution' event is listened and the\n   *   property is updated depending on the current resolution.\n   *\n   * @param {ngeox.datasource.DataSources} ngeoDataSources Ngeo collection of\n   *     data sources objects.\n   *\n   * @struct\n   * @ngdoc service\n   * @ngname ngeoSyncDataSourcesMap\n   *//* @ngInject\n   */\n  constructor(ngeoDataSources) {\n\n    /**\n     * @type {ngeox.datasource.DataSources}\n     * @private\n     */\n    this.ngeoDataSources_ = ngeoDataSources;\n\n    /**\n     * @type {ol.Map}\n     * @private\n     */\n    this.map_ = null;\n\n    /**\n     * @type {!Array.<!ol.EventsKey>}\n     * @private\n     */\n    this.listenerKeys_ = [];\n\n    olEvents.listen(this.ngeoDataSources_, 'add', this.handleDataSourcesAdd_, this);\n  }\n\n  /**\n   * Set a map to this service. Null can be given to unset the map.\n   * @param {?ol.Map} map Map.\n   */\n  set map(map) {\n    if (this.map_) {\n      this.unbindMap_(this.map_);\n    }\n\n    this.map_ = map;\n\n    if (map) {\n      this.bindMap_(map);\n    }\n  }\n\n  /**\n   * Bind a map to this service.\n   * @param {ol.Map} map Map.\n   * @private\n   */\n  bindMap_(map) {\n\n    // (1) Event listeners\n    const view = map.getView();\n    this.listenerKeys_.push(\n      olEvents.listen(view, 'change:resolution', this.handleViewResolutionChange_, this)\n    );\n\n    // (2) Sync resolution with existing data sources\n    const resolution = view.getResolution();\n    googAsserts.assertNumber(resolution);\n    this.syncDataSourcesToResolution_(resolution);\n  }\n\n  /**\n   * Unbind a map to this service.\n   * @param {ol.Map} map Map.\n   * @private\n   */\n  unbindMap_(map) {\n    olObservable.unByKey(this.listenerKeys_);\n    this.listenerKeys_ = [];\n  }\n\n  /**\n   * Called when the resolution of the map view changes. Synchronize the\n   * datasources to current resolution of the view.\n   * @param {Event} evt Event.\n   * @private\n   */\n  handleViewResolutionChange_(evt) {\n    const view = evt.target;\n    googAsserts.assertInstanceof(view, olView);\n    const resolution = view.getResolution();\n    googAsserts.assertNumber(resolution);\n    this.syncDataSourcesToResolution_(resolution);\n  }\n\n  /**\n   * Synchronize all datasources in the ngeo collection with a given resolution.\n   * @param {number} resolution Resolution\n   * @private\n   */\n  syncDataSourcesToResolution_(resolution) {\n    this.ngeoDataSources_.forEach((dataSource) => {\n      this.syncDataSourceToResolution_(dataSource, resolution);\n    });\n  }\n\n  /**\n   * Synchronize a data source `inRange` property with a given resolution.\n   * @param {ngeo.datasource.DataSource} dataSource Data source\n   * @param {number} resolution Resolution\n   * @private\n   */\n  syncDataSourceToResolution_(dataSource, resolution) {\n    // No need to do anything if the data source doesn't support dynamic\n    // setting of inRange\n    if (!dataSource.supportsDynamicInRange) {\n      return;\n    }\n\n    const maxResolution = dataSource.maxResolution;\n    const minResolution = dataSource.minResolution;\n\n    const inMinRange = minResolution === null ||\n        minResolution === undefined ||\n        resolution >= minResolution;\n    const inMaxRange = maxResolution === null ||\n        maxResolution === undefined ||\n        resolution <= maxResolution;\n    const inRange = inMinRange && inMaxRange;\n\n    dataSource.inRange = inRange;\n  }\n\n  /**\n   * Called when a new data source is added to the ngeo collection. If there's\n   * map bound, update its `inRange` right away.\n   * @param {!ol.Collection.Event} event Event\n   * @private\n   */\n  handleDataSourcesAdd_(event) {\n    const dataSource = googAsserts.assertInstanceof(\n      event.element, ngeoDatasourceDataSource);\n    if (this.map_) {\n      const resolution = this.map_.getView().getResolution();\n      googAsserts.assertNumber(resolution);\n      this.syncDataSourceToResolution_(dataSource, resolution);\n    }\n  }\n\n};\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoSyncDataSourcesMap', [\n  ngeoDatasourceDataSources.module.name,\n]);\nexports.module.service('ngeoSyncDataSourcesMap', exports);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datasource/SyncDataSourcesMap.js","/**\n * @module ngeo.map.FeatureOverlay\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport * as olBase from 'ol/index.js';\nimport olEvents from 'ol/events.js';\n\n/**\n * @constructor\n * @param {ngeo.map.FeatureOverlayMgr} manager The feature overlay manager.\n * @param {number} index This feature overlay's index.\n */\nconst exports = function(manager, index) {\n\n  /**\n   * @type {ngeo.map.FeatureOverlayMgr}\n   * @private\n   */\n  this.manager_ = manager;\n\n  /**\n   * @type {ol.Collection.<ol.Feature>}\n   * @private\n   */\n  this.features_ = null;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.index_ = index;\n};\n\n\n/**\n * Add a feature to the feature overlay.\n * @param {ol.Feature} feature The feature to add.\n * @export\n */\nexports.prototype.addFeature = function(feature) {\n  this.manager_.addFeature(feature, this.index_);\n};\n\n\n/**\n * Remove a feature from the feature overlay.\n * @param {ol.Feature} feature The feature to remove.\n * @export\n */\nexports.prototype.removeFeature = function(feature) {\n  this.manager_.removeFeature(feature, this.index_);\n};\n\n\n/**\n * Remove all the features from the feature overlay.\n * @export\n */\nexports.prototype.clear = function() {\n  this.manager_.clear(this.index_);\n};\n\n\n/**\n * Configure this feature overlay with a feature collection. Features added\n * to the collection are also added to the overlay. Same for removal. If you\n * configure the feature overlay with a feature collection you will use the\n * collection to add and remove features instead of using the overlay's\n * `addFeature`, `removeFeature` and `clear` functions.\n * @param {ol.Collection.<ol.Feature>} features Feature collection.\n * @export\n */\nexports.prototype.setFeatures = function(features) {\n  if (this.features_ !== null) {\n    this.features_.clear();\n    olEvents.unlisten(this.features_, 'add', this.handleFeatureAdd_, this);\n    olEvents.unlisten(this.features_, 'remove', this.handleFeatureRemove_, this);\n  }\n  if (features !== null) {\n    features.forEach(function(feature) {\n      this.addFeature(feature);\n    }, this);\n    olEvents.listen(features, 'add', this.handleFeatureAdd_, this);\n    olEvents.listen(features, 'remove', this.handleFeatureRemove_, this);\n  }\n  this.features_ = features;\n};\n\n\n/**\n * Set a style for the feature overlay.\n * @param {ol.style.Style|Array.<ol.style.Style>|ol.StyleFunction} style\n * Style.\n * @export\n */\nexports.prototype.setStyle = function(style) {\n  this.manager_.setStyle(style, this.index_);\n};\n\n\n/**\n * @param {ol.Collection.Event} evt Feature collection event.\n * @private\n */\nexports.prototype.handleFeatureAdd_ = function(evt) {\n  const feature = /** @type {ol.Feature} */ (evt.element);\n  this.addFeature(feature);\n};\n\n\n/**\n * @param {ol.Collection.Event} evt Feature collection event.\n * @private\n */\nexports.prototype.handleFeatureRemove_ = function(evt) {\n  const feature = /** @type {ol.Feature} */ (evt.element);\n  this.removeFeature(feature);\n};\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoFeatureOverlay', []);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/FeatureOverlay.js","/**\n * @module ngeo.map.recenter\n*/\nimport ngeoBase from 'ngeo/index.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoRecenter', []);\n\nngeoBase.module.requires.push(exports.name);\n\n/**\n * Provides the \"ngeoRecenter\" directive, a widget for recentering a map\n * to a specific extent (by using `ngeo-extent`) or a specific zoom level\n * (by using `ngeo-zoom`).\n *\n * Example:\n *\n *      <div ngeo-recenter ngeo-recenter-map=\"::ctrl.map\">\n *        <a href=\"#\" ngeo-extent=\"[-1898084, 4676723, 3972279, 8590299]\">A</a>\n *        <a href=\"#\" ngeo-extent=\"[727681, 5784754, 1094579, 6029353]\">B</a>\n *        <a href=\"#\" ngeo-zoom=\"1\">Zoom to level 1</a>\n *      </div>\n *\n * Or with a select:\n *\n *      <select ngeo-recenter ngeo-recenter-map=\"::ctrl.map\">\n *        <option ngeo-extent=\"[-1898084, 4676723, 3972279, 8590299]\">A</option>\n *        <option ngeo-extent=\"[727681, 5784754, 1094579, 6029353]\">B</option>\n *      </select>\n *\n * See our live example: [../examples/recenter.html](../examples/recenter.html)\n *\n * @htmlAttribute {ol.Map} ngeo-recenter-map The map.\n * @return {angular.Directive} Directive Definition Object.\n * @ngdoc directive\n * @ngname ngeoRecenter\n */\nexports.directive_ = function() {\n  return {\n    restrict: 'A',\n    link: ($scope, $element, $attrs) => {\n      const mapExpr = $attrs['ngeoRecenterMap'];\n      const map = /** @type {ol.Map} */ ($scope.$eval(mapExpr));\n\n      function recenter(element) {\n        const extent = element.attr('ngeo-extent');\n        if (extent !== undefined) {\n          const size = /** @type {ol.Size} */ (map.getSize());\n          map.getView().fit($scope.$eval(extent), {size});\n        }\n        const zoom = element.attr('ngeo-zoom');\n        if (zoom !== undefined) {\n          map.getView().setZoom($scope.$eval(zoom));\n        }\n      }\n\n      // if the children is a link or button\n      $element.on('click', '*', function(event) {\n        recenter(angular.element($(this)));\n      });\n\n      // if the children is an option inside a select\n      $element.on('change', (event) => {\n        const selected = event.target.options[event.target.selectedIndex];\n        recenter(angular.element(selected));\n      });\n\n    }\n  };\n};\n\n// Register the directive in the module\nexports.directive('ngeoRecenter', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/recenter.js","/**\n * @module ngeo.map.resizemap\n*/\nimport googAsserts from 'goog/asserts.js';\nimport ngeoBase from 'ngeo/index.js';\nimport olMap from 'ol/Map.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoResizemap', []);\n\nngeoBase.module.requires.push(exports.name);\n\n/**\n * Provides a directive that resizes the map in an animation loop\n * during 1 second when the value of \"state\" changes. This is especially useful\n * when changing the size of other elements with a transition leads to a change\n * of the map size.\n *\n * Example:\n *\n *      <div ng-class=\"ctrl.open ? 'open' : 'close' ngeo-resizemap=\"ctrl.map\"\n *        ngeo-resizemap-state=\"open\">\n *      <div>\n *      <input type=\"checkbox\" ng-model=\"ctrl.open\" />\n *\n * See our live example: [../examples/animation.html](../examples/animation.html)\n *\n * @param {angular.$window} $window Angular window service.\n * @return {angular.Directive} The directive specs.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoResizemap\n */\nexports.directive_ = function($window) {\n  const /** @type {number} */ duration = 1000;\n\n  return {\n    restrict: 'A',\n    /**\n     * @param {angular.Scope} scope Scope.\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Atttributes.\n     */\n    link: (scope, element, attrs) => {\n      const attr = 'ngeoResizemap';\n      const prop = attrs[attr];\n      const map = scope.$eval(prop);\n      googAsserts.assertInstanceof(map, olMap);\n\n      const stateExpr = attrs['ngeoResizemapState'];\n      googAsserts.assert(stateExpr !== undefined);\n\n      let start;\n      let animationDelayKey;\n\n      const animationDelay = () => {\n        map.updateSize();\n        map.renderSync();\n\n        if (Date.now() - start < duration) {\n          animationDelayKey = $window.requestAnimationFrame(animationDelay);\n        }\n      };\n\n      // Make sure the map is resized when the animation ends.\n      // It may help in case the animation didn't start correctly.\n      element.on('transitionend', () => {\n        map.updateSize();\n        map.renderSync();\n      });\n\n      scope.$watch(stateExpr, (newVal, oldVal) => {\n        if (newVal != oldVal) {\n          start = Date.now();\n          $window.cancelAnimationFrame(animationDelayKey);\n          animationDelayKey = $window.requestAnimationFrame(animationDelay);\n        }\n      });\n    }\n  };\n};\n\n\nexports.directive('ngeoResizemap', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/resizemap.js","/**\n * @module ngeo.map.scaleselector\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport * as olArray from 'ol/array.js';\nimport olMap from 'ol/Map.js';\nimport olEvents from 'ol/events.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoScaleselector', []);\n\nngeoBase.module.requires.push(exports.name);\n\n\nexports.value('ngeoScaleselectorTemplateUrl',\n  /**\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Attributes.\n     * @return {string} Template URL.\n     */\n  (element, attrs) => {\n    const templateUrl = attrs['ngeoScaleselectorTemplateurl'];\n    return templateUrl !== undefined ? templateUrl :\n      `${ngeoBase.baseModuleTemplateUrl}/map/scaleselector.html`;\n  });\n\n\n/**\n * Provides the \"ngeoScaleselector\" directive, a widget for\n * selecting map scales.\n *\n * Example:\n *\n *     <div ngeo-scaleselector=\"ctrl.scales\" ngeo-scaleselector-map=\"ctrl.map\">\n *     </div>\n *\n * The expression passed to the ngeo-scaleselector attribute should return an\n * array of this form:\n *\n *    [20000, 10000, 5000, 2500]\n *\n * That directive's partial uses Bootstrap's `dropdown` and `dropdown-menu`\n * classes, and `data-toggle=\"dropdown\"`, so it is meant to be used with\n * Bootstrap's \"dropdown\" jQuery plugin.\n *\n * You can pass options to configure the behaviors of this element. Options is\n * a {@link ngeox.ScaleselectorOptions} object.\n *\n * Example:\n *\n *     <div ngeo-scaleselector=\"ctrl.scales\"\n *       ngeo-scaleselector-map=\"ctrl.map\"\n *       ngeo-scaleselector-options=\"ctrl.scaleSelectorOptions\">\n *     </div>\n *\n * By default the directive uses \"scaleselector.html\" as its templateUrl. This\n * can be changed by redefining the \"ngeoScaleselectorTemplateUrl\" value.\n *\n * The directive has its own scope, but it is not isolate scope. That scope\n * includes a reference to the directive's controller: the \"scaleselectorCtrl\"\n * scope property.\n *\n * The directive doesn't create any watcher. In particular the object including\n * the scales information is now watched.\n *\n * See our live example: [../examples/scaleselector.html](../examples/scaleselector.html)\n *\n * @htmlAttribute {!Array.<number>} ngeo-scaleselector The available scales.\n * @htmlAttribute {ol.Map} ngeo-scaleselector-map The map.\n * @htmlAttribute {ngeox.ScaleselectorOptions} ngeo-scaleselector-options\n *     Optionnal. The configuration options.\n * @param {string|function(!angular.JQLite=, !angular.Attributes=)}\n *     ngeoScaleselectorTemplateUrl Template URL for the directive.\n * @return {angular.Directive} Directive Definition Object.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoScaleselector\n */\nexports.directive_ = function(ngeoScaleselectorTemplateUrl) {\n  return {\n    restrict: 'A',\n    scope: true,\n    controller: 'NgeoScaleselectorController',\n    templateUrl: ngeoScaleselectorTemplateUrl\n  };\n};\n\n\nexports.directive('ngeoScaleselector', exports.directive_);\n\n\n/**\n * @constructor\n * @private\n * @struct\n * @param {angular.Scope} $scope Directive scope.\n * @param {angular.JQLite} $element Element.\n * @param {angular.Attributes} $attrs Attributes.\n *//* @ngInject\n * @ngdoc controller\n * @ngname NgeoScaleselectorController\n */\nexports.ScaleselectorController_ = function($scope, $element, $attrs) {\n\n  const scalesExpr = $attrs['ngeoScaleselector'];\n\n  /**\n   * The zoom level/scale map object.\n   * @type {!Array.<number>}\n   * @export\n   */\n  this.scales = /** @type {!Array.<number>} */\n    ($scope.$eval(scalesExpr));\n  goog.asserts.assert(this.scales !== undefined);\n\n  /**\n   * @type {Array.<number>}\n   * @export\n   */\n  this.zoomLevels;\n\n  $scope.$watch(() => Object.keys(this.scales).length, (newLength) => {\n    this.zoomLevels = Object.keys(this.scales).map(Number);\n    this.zoomLevels.sort(olArray.numberSafeCompareFunction);\n  });\n\n  const mapExpr = $attrs['ngeoScaleselectorMap'];\n\n  /**\n   * @type {ol.Map}\n   * @private\n   */\n  this.map_ = /** @type {ol.Map} */ ($scope.$eval(mapExpr));\n  goog.asserts.assertInstanceof(this.map_, olMap);\n\n  const optionsExpr = $attrs['ngeoScaleselectorOptions'];\n  const options = $scope.$eval(optionsExpr);\n\n  /**\n   * @type {!ngeox.ScaleselectorOptions}\n   * @export\n   */\n  this.options = exports.ScaleselectorController_.getOptions_(options);\n\n  /**\n   * @type {angular.Scope}\n   * @private\n   */\n  this.$scope_ = $scope;\n\n  /**\n   * @type {?ol.EventsKey}\n   * @private\n   */\n  this.resolutionChangeKey_ = null;\n\n  /**\n   * @type {number|undefined}\n   * @export\n   */\n  this.currentScale = undefined;\n\n  const view = this.map_.getView();\n  if (view !== null) {\n    const currentZoom = this.map_.getView().getZoom();\n    if (currentZoom !== undefined) {\n      this.currentScale = this.getScale(currentZoom);\n    }\n  }\n\n  olEvents.listen(this.map_, 'change:view', this.handleViewChange_, this);\n\n  this.registerResolutionChangeListener_();\n\n  $scope['scaleselectorCtrl'] = this;\n\n};\n\n\n/**\n * @param {?} options Options after expression evaluation.\n * @return {!ngeox.ScaleselectorOptions} Options object.\n * @private\n */\nexports.ScaleselectorController_.getOptions_ = function(options) {\n  let dropup = false;\n  if (options !== undefined) {\n    dropup = options['dropup'] == true;\n  }\n  return /** @type {ngeox.ScaleselectorOptions} */ ({\n    dropup: dropup\n  });\n};\n\n\n/**\n * @param {number} zoom Zoom level.\n * @return {number} Scale.\n * @export\n */\nexports.ScaleselectorController_.prototype.getScale = function(zoom) {\n  return this.scales[zoom];\n};\n\n\n/**\n * @param {number} zoom Zoom level.\n * @export\n */\nexports.ScaleselectorController_.prototype.changeZoom = function(zoom) {\n  this.map_.getView().setZoom(zoom);\n};\n\n\n/**\n * @param {ol.Object.Event} e OpenLayers object event.\n * @private\n */\nexports.ScaleselectorController_.prototype.handleResolutionChange_ = function(e) {\n  const view = this.map_.getView();\n  const currentScale = this.scales[/** @type {number} */ (view.getZoom())];\n\n  // handleResolutionChange_ is a change:resolution listener. The listener\n  // may be executed outside the Angular context, for example when the user\n  // double-clicks to zoom on the map.\n  //\n  // But it may also be executed inside the Angular context, when a function\n  // in Angular context calls setZoom or setResolution on the view, which\n  // is for example what happens when this controller's changeZoom function\n  // is called.\n  //\n  // For that reason we use $applyAsync instead of $apply here.\n\n  if (currentScale !== undefined) {\n    this.$scope_.$applyAsync(() => {\n      this.currentScale = currentScale;\n    });\n  }\n};\n\n\n/**\n * @param {ol.Object.Event} e OpenLayers object event.\n * @private\n */\nexports.ScaleselectorController_.prototype.handleViewChange_ = function(e) {\n  this.registerResolutionChangeListener_();\n  this.handleResolutionChange_(null);\n};\n\n\n/**\n * @private\n */\nexports.ScaleselectorController_.prototype.registerResolutionChangeListener_ = function() {\n  if (this.resolutionChangeKey_ !== null) {\n    olEvents.unlistenByKey(this.resolutionChangeKey_);\n  }\n  const view = this.map_.getView();\n  this.resolutionChangeKey_ = olEvents.listen(view,\n    'change:resolution', this.handleResolutionChange_,\n    this);\n};\n\n\nexports.controller('NgeoScaleselectorController',\n  exports.ScaleselectorController_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/scaleselector.js","/**\n * @module ol/geom/MultiPoint\n */\nimport {inherits} from '../index.js';\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY, containsXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport Point from '../geom/Point.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\nimport _ol_geom_flat_inflate_ from '../geom/flat/inflate.js';\nimport {squaredDistance as squaredDx} from '../math.js';\n\n/**\n * @classdesc\n * Multi-point geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst MultiPoint = function(coordinates, opt_layout) {\n  SimpleGeometry.call(this);\n  this.setCoordinates(coordinates, opt_layout);\n};\n\ninherits(MultiPoint, SimpleGeometry);\n\n\n/**\n * Append the passed point to this multipoint.\n * @param {ol.geom.Point} point Point.\n * @api\n */\nMultiPoint.prototype.appendPoint = function(point) {\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = point.getFlatCoordinates().slice();\n  } else {\n    extend(this.flatCoordinates, point.getFlatCoordinates());\n  }\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.MultiPoint} Clone.\n * @override\n * @api\n */\nMultiPoint.prototype.clone = function() {\n  const multiPoint = new MultiPoint(null);\n  multiPoint.setFlatCoordinates(this.layout, this.flatCoordinates.slice());\n  return multiPoint;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiPoint.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  const flatCoordinates = this.flatCoordinates;\n  const stride = this.stride;\n  let i, ii, j;\n  for (i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n    const squaredDistance = squaredDx(\n      x, y, flatCoordinates[i], flatCoordinates[i + 1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (j = 0; j < stride; ++j) {\n        closestPoint[j] = flatCoordinates[i + j];\n      }\n      closestPoint.length = stride;\n    }\n  }\n  return minSquaredDistance;\n};\n\n\n/**\n * Return the coordinates of the multipoint.\n * @return {Array.<ol.Coordinate>} Coordinates.\n * @override\n * @api\n */\nMultiPoint.prototype.getCoordinates = function() {\n  return _ol_geom_flat_inflate_.coordinates(\n    this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n};\n\n\n/**\n * Return the point at the specified index.\n * @param {number} index Index.\n * @return {ol.geom.Point} Point.\n * @api\n */\nMultiPoint.prototype.getPoint = function(index) {\n  const n = !this.flatCoordinates ?\n    0 : this.flatCoordinates.length / this.stride;\n  if (index < 0 || n <= index) {\n    return null;\n  }\n  const point = new Point(null);\n  point.setFlatCoordinates(this.layout, this.flatCoordinates.slice(\n    index * this.stride, (index + 1) * this.stride));\n  return point;\n};\n\n\n/**\n * Return the points of this multipoint.\n * @return {Array.<ol.geom.Point>} Points.\n * @api\n */\nMultiPoint.prototype.getPoints = function() {\n  const flatCoordinates = this.flatCoordinates;\n  const layout = this.layout;\n  const stride = this.stride;\n  /** @type {Array.<ol.geom.Point>} */\n  const points = [];\n  let i, ii;\n  for (i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n    const point = new Point(null);\n    point.setFlatCoordinates(layout, flatCoordinates.slice(i, i + stride));\n    points.push(point);\n  }\n  return points;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiPoint.prototype.getType = function() {\n  return GeometryType.MULTI_POINT;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiPoint.prototype.intersectsExtent = function(extent) {\n  const flatCoordinates = this.flatCoordinates;\n  const stride = this.stride;\n  let i, ii, x, y;\n  for (i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n    x = flatCoordinates[i];\n    y = flatCoordinates[i + 1];\n    if (containsXY(extent, x, y)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * Set the coordinates of the multipoint.\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\nMultiPoint.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(GeometryLayout.XY, null);\n  } else {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = _ol_geom_flat_deflate_.coordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n */\nMultiPoint.prototype.setFlatCoordinates = function(layout, flatCoordinates) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.changed();\n};\nexport default MultiPoint;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/geom/MultiPoint.js\n// module id = 45\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 14","/**\n * @module ol/source/OSM\n */\nimport {inherits} from '../index.js';\nimport XYZ from '../source/XYZ.js';\n\n/**\n * @classdesc\n * Layer source for the OpenStreetMap tile server.\n *\n * @constructor\n * @extends {ol.source.XYZ}\n * @param {olx.source.OSMOptions=} opt_options Open Street Map options.\n * @api\n */\nconst OSM = function(opt_options) {\n\n  const options = opt_options || {};\n\n  let attributions;\n  if (options.attributions !== undefined) {\n    attributions = options.attributions;\n  } else {\n    attributions = [OSM.ATTRIBUTION];\n  }\n\n  const crossOrigin = options.crossOrigin !== undefined ?\n    options.crossOrigin : 'anonymous';\n\n  const url = options.url !== undefined ?\n    options.url : 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n  XYZ.call(this, {\n    attributions: attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: crossOrigin,\n    opaque: options.opaque !== undefined ? options.opaque : true,\n    maxZoom: options.maxZoom !== undefined ? options.maxZoom : 19,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileLoadFunction: options.tileLoadFunction,\n    url: url,\n    wrapX: options.wrapX\n  });\n\n};\n\ninherits(OSM, XYZ);\n\n\n/**\n * The attribution containing a link to the OpenStreetMap Copyright and License\n * page.\n * @const\n * @type {string}\n * @api\n */\nOSM.ATTRIBUTION = '&copy; ' +\n      '<a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> ' +\n      'contributors.';\nexport default OSM;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/OSM.js\n// module id = 48\n// module chunks = 0 1 2 3 4 6 7 8 9 10 11 14 15 16 19 21 22 23 24 25 26 27 28 29 30","/**\n * @module ol/source/XYZ\n */\nimport {inherits} from '../index.js';\nimport TileImage from '../source/TileImage.js';\nimport _ol_tilegrid_ from '../tilegrid.js';\n\n/**\n * @classdesc\n * Layer source for tile data with URLs in a set XYZ format that are\n * defined in a URL template. By default, this follows the widely-used\n * Google grid where `x` 0 and `y` 0 are in the top left. Grids like\n * TMS where `x` 0 and `y` 0 are in the bottom left can be used by\n * using the `{-y}` placeholder in the URL template, so long as the\n * source does not have a custom tile grid. In this case,\n * {@link ol.source.TileImage} can be used with a `tileUrlFunction`\n * such as:\n *\n *  tileUrlFunction: function(coordinate) {\n *    return 'http://mapserver.com/' + coordinate[0] + '/' +\n *        coordinate[1] + '/' + coordinate[2] + '.png';\n *    }\n *\n *\n * @constructor\n * @extends {ol.source.TileImage}\n * @param {olx.source.XYZOptions=} opt_options XYZ options.\n * @api\n */\nconst XYZ = function(opt_options) {\n  const options = opt_options || {};\n  const projection = options.projection !== undefined ?\n    options.projection : 'EPSG:3857';\n\n  const tileGrid = options.tileGrid !== undefined ? options.tileGrid :\n    _ol_tilegrid_.createXYZ({\n      extent: _ol_tilegrid_.extentFromProjection(projection),\n      maxZoom: options.maxZoom,\n      minZoom: options.minZoom,\n      tileSize: options.tileSize\n    });\n\n  TileImage.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: options.crossOrigin,\n    opaque: options.opaque,\n    projection: projection,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileGrid: tileGrid,\n    tileLoadFunction: options.tileLoadFunction,\n    tilePixelRatio: options.tilePixelRatio,\n    tileUrlFunction: options.tileUrlFunction,\n    url: options.url,\n    urls: options.urls,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true,\n    transition: options.transition\n  });\n\n};\n\ninherits(XYZ, TileImage);\nexport default XYZ;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/XYZ.js\n// module id = 49\n// module chunks = 0 1 2 3 4 6 7 8 9 10 11 14 15 16 19 21 22 23 24 25 26 27 28 29 30","/**\n * @module ol/geom/MultiLineString\n */\nimport {inherits} from '../index.js';\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport _ol_geom_flat_closest_ from '../geom/flat/closest.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\nimport _ol_geom_flat_inflate_ from '../geom/flat/inflate.js';\nimport _ol_geom_flat_interpolate_ from '../geom/flat/interpolate.js';\nimport _ol_geom_flat_intersectsextent_ from '../geom/flat/intersectsextent.js';\nimport _ol_geom_flat_simplify_ from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-linestring geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {Array.<Array.<ol.Coordinate>>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst MultiLineString = function(coordinates, opt_layout) {\n\n  SimpleGeometry.call(this);\n\n  /**\n   * @type {Array.<number>}\n   * @private\n   */\n  this.ends_ = [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDelta_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDeltaRevision_ = -1;\n\n  this.setCoordinates(coordinates, opt_layout);\n\n};\n\ninherits(MultiLineString, SimpleGeometry);\n\n\n/**\n * Append the passed linestring to the multilinestring.\n * @param {ol.geom.LineString} lineString LineString.\n * @api\n */\nMultiLineString.prototype.appendLineString = function(lineString) {\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = lineString.getFlatCoordinates().slice();\n  } else {\n    extend(this.flatCoordinates, lineString.getFlatCoordinates().slice());\n  }\n  this.ends_.push(this.flatCoordinates.length);\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.MultiLineString} Clone.\n * @override\n * @api\n */\nMultiLineString.prototype.clone = function() {\n  const multiLineString = new MultiLineString(null);\n  multiLineString.setFlatCoordinates(\n    this.layout, this.flatCoordinates.slice(), this.ends_.slice());\n  return multiLineString;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiLineString.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  if (this.maxDeltaRevision_ != this.getRevision()) {\n    this.maxDelta_ = Math.sqrt(_ol_geom_flat_closest_.getsMaxSquaredDelta(\n      this.flatCoordinates, 0, this.ends_, this.stride, 0));\n    this.maxDeltaRevision_ = this.getRevision();\n  }\n  return _ol_geom_flat_closest_.getsClosestPoint(\n    this.flatCoordinates, 0, this.ends_, this.stride,\n    this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n};\n\n\n/**\n * Returns the coordinate at `m` using linear interpolation, or `null` if no\n * such coordinate exists.\n *\n * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n * M will return the first coordinate and Ms greater than the last M will\n * return the last coordinate.\n *\n * `opt_interpolate` controls interpolation between consecutive LineStrings\n * within the MultiLineString. If `opt_interpolate` is `true` the coordinates\n * will be linearly interpolated between the last coordinate of one LineString\n * and the first coordinate of the next LineString.  If `opt_interpolate` is\n * `false` then the function will return `null` for Ms falling between\n * LineStrings.\n *\n * @param {number} m M.\n * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n * @param {boolean=} opt_interpolate Interpolate. Default is `false`.\n * @return {ol.Coordinate} Coordinate.\n * @api\n */\nMultiLineString.prototype.getCoordinateAtM = function(m, opt_extrapolate, opt_interpolate) {\n  if ((this.layout != GeometryLayout.XYM &&\n       this.layout != GeometryLayout.XYZM) ||\n      this.flatCoordinates.length === 0) {\n    return null;\n  }\n  const extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n  const interpolate = opt_interpolate !== undefined ? opt_interpolate : false;\n  return _ol_geom_flat_interpolate_.lineStringsCoordinateAtM(this.flatCoordinates, 0,\n    this.ends_, this.stride, m, extrapolate, interpolate);\n};\n\n\n/**\n * Return the coordinates of the multilinestring.\n * @return {Array.<Array.<ol.Coordinate>>} Coordinates.\n * @override\n * @api\n */\nMultiLineString.prototype.getCoordinates = function() {\n  return _ol_geom_flat_inflate_.coordinatess(\n    this.flatCoordinates, 0, this.ends_, this.stride);\n};\n\n\n/**\n * @return {Array.<number>} Ends.\n */\nMultiLineString.prototype.getEnds = function() {\n  return this.ends_;\n};\n\n\n/**\n * Return the linestring at the specified index.\n * @param {number} index Index.\n * @return {ol.geom.LineString} LineString.\n * @api\n */\nMultiLineString.prototype.getLineString = function(index) {\n  if (index < 0 || this.ends_.length <= index) {\n    return null;\n  }\n  const lineString = new LineString(null);\n  lineString.setFlatCoordinates(this.layout, this.flatCoordinates.slice(\n    index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]));\n  return lineString;\n};\n\n\n/**\n * Return the linestrings of this multilinestring.\n * @return {Array.<ol.geom.LineString>} LineStrings.\n * @api\n */\nMultiLineString.prototype.getLineStrings = function() {\n  const flatCoordinates = this.flatCoordinates;\n  const ends = this.ends_;\n  const layout = this.layout;\n  /** @type {Array.<ol.geom.LineString>} */\n  const lineStrings = [];\n  let offset = 0;\n  let i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const lineString = new LineString(null);\n    lineString.setFlatCoordinates(layout, flatCoordinates.slice(offset, end));\n    lineStrings.push(lineString);\n    offset = end;\n  }\n  return lineStrings;\n};\n\n\n/**\n * @return {Array.<number>} Flat midpoints.\n */\nMultiLineString.prototype.getFlatMidpoints = function() {\n  const midpoints = [];\n  const flatCoordinates = this.flatCoordinates;\n  let offset = 0;\n  const ends = this.ends_;\n  const stride = this.stride;\n  let i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const midpoint = _ol_geom_flat_interpolate_.lineString(\n      flatCoordinates, offset, end, stride, 0.5);\n    extend(midpoints, midpoint);\n    offset = end;\n  }\n  return midpoints;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiLineString.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  const simplifiedFlatCoordinates = [];\n  const simplifiedEnds = [];\n  simplifiedFlatCoordinates.length = _ol_geom_flat_simplify_.douglasPeuckers(\n    this.flatCoordinates, 0, this.ends_, this.stride, squaredTolerance,\n    simplifiedFlatCoordinates, 0, simplifiedEnds);\n  const simplifiedMultiLineString = new MultiLineString(null);\n  simplifiedMultiLineString.setFlatCoordinates(\n    GeometryLayout.XY, simplifiedFlatCoordinates, simplifiedEnds);\n  return simplifiedMultiLineString;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiLineString.prototype.getType = function() {\n  return GeometryType.MULTI_LINE_STRING;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiLineString.prototype.intersectsExtent = function(extent) {\n  return _ol_geom_flat_intersectsextent_.lineStrings(\n    this.flatCoordinates, 0, this.ends_, this.stride, extent);\n};\n\n\n/**\n * Set the coordinates of the multilinestring.\n * @param {Array.<Array.<ol.Coordinate>>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\nMultiLineString.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(GeometryLayout.XY, null, this.ends_);\n  } else {\n    this.setLayout(opt_layout, coordinates, 2);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const ends = _ol_geom_flat_deflate_.coordinatess(\n      this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<number>} ends Ends.\n */\nMultiLineString.prototype.setFlatCoordinates = function(layout, flatCoordinates, ends) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.ends_ = ends;\n  this.changed();\n};\n\n\n/**\n * @param {Array.<ol.geom.LineString>} lineStrings LineStrings.\n */\nMultiLineString.prototype.setLineStrings = function(lineStrings) {\n  let layout = this.getLayout();\n  const flatCoordinates = [];\n  const ends = [];\n  let i, ii;\n  for (i = 0, ii = lineStrings.length; i < ii; ++i) {\n    const lineString = lineStrings[i];\n    if (i === 0) {\n      layout = lineString.getLayout();\n    }\n    extend(flatCoordinates, lineString.getFlatCoordinates());\n    ends.push(flatCoordinates.length);\n  }\n  this.setFlatCoordinates(layout, flatCoordinates, ends);\n};\nexport default MultiLineString;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/geom/MultiLineString.js\n// module id = 51\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 14","/**\n * @module ol/geom/MultiPolygon\n */\nimport {inherits} from '../index.js';\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport Polygon from '../geom/Polygon.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport _ol_geom_flat_area_ from '../geom/flat/area.js';\nimport _ol_geom_flat_center_ from '../geom/flat/center.js';\nimport _ol_geom_flat_closest_ from '../geom/flat/closest.js';\nimport _ol_geom_flat_contains_ from '../geom/flat/contains.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\nimport _ol_geom_flat_inflate_ from '../geom/flat/inflate.js';\nimport _ol_geom_flat_interiorpoint_ from '../geom/flat/interiorpoint.js';\nimport _ol_geom_flat_intersectsextent_ from '../geom/flat/intersectsextent.js';\nimport _ol_geom_flat_orient_ from '../geom/flat/orient.js';\nimport _ol_geom_flat_simplify_ from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-polygon geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {Array.<Array.<Array.<ol.Coordinate>>>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst MultiPolygon = function(coordinates, opt_layout) {\n\n  SimpleGeometry.call(this);\n\n  /**\n   * @type {Array.<Array.<number>>}\n   * @private\n   */\n  this.endss_ = [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.flatInteriorPointsRevision_ = -1;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.flatInteriorPoints_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDelta_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDeltaRevision_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.orientedRevision_ = -1;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.orientedFlatCoordinates_ = null;\n\n  this.setCoordinates(coordinates, opt_layout);\n\n};\n\ninherits(MultiPolygon, SimpleGeometry);\n\n\n/**\n * Append the passed polygon to this multipolygon.\n * @param {ol.geom.Polygon} polygon Polygon.\n * @api\n */\nMultiPolygon.prototype.appendPolygon = function(polygon) {\n  /** @type {Array.<number>} */\n  let ends;\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = polygon.getFlatCoordinates().slice();\n    ends = polygon.getEnds().slice();\n    this.endss_.push();\n  } else {\n    const offset = this.flatCoordinates.length;\n    extend(this.flatCoordinates, polygon.getFlatCoordinates());\n    ends = polygon.getEnds().slice();\n    let i, ii;\n    for (i = 0, ii = ends.length; i < ii; ++i) {\n      ends[i] += offset;\n    }\n  }\n  this.endss_.push(ends);\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.MultiPolygon} Clone.\n * @override\n * @api\n */\nMultiPolygon.prototype.clone = function() {\n  const multiPolygon = new MultiPolygon(null);\n\n  const len = this.endss_.length;\n  const newEndss = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    newEndss[i] = this.endss_[i].slice();\n  }\n\n  multiPolygon.setFlatCoordinates(\n    this.layout, this.flatCoordinates.slice(), newEndss);\n  return multiPolygon;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiPolygon.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  if (this.maxDeltaRevision_ != this.getRevision()) {\n    this.maxDelta_ = Math.sqrt(_ol_geom_flat_closest_.getssMaxSquaredDelta(\n      this.flatCoordinates, 0, this.endss_, this.stride, 0));\n    this.maxDeltaRevision_ = this.getRevision();\n  }\n  return _ol_geom_flat_closest_.getssClosestPoint(\n    this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n    this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n};\n\n\n/**\n * @inheritDoc\n */\nMultiPolygon.prototype.containsXY = function(x, y) {\n  return _ol_geom_flat_contains_.linearRingssContainsXY(\n    this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, x, y);\n};\n\n\n/**\n * Return the area of the multipolygon on projected plane.\n * @return {number} Area (on projected plane).\n * @api\n */\nMultiPolygon.prototype.getArea = function() {\n  return _ol_geom_flat_area_.linearRingss(\n    this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride);\n};\n\n\n/**\n * Get the coordinate array for this geometry.  This array has the structure\n * of a GeoJSON coordinate array for multi-polygons.\n *\n * @param {boolean=} opt_right Orient coordinates according to the right-hand\n *     rule (counter-clockwise for exterior and clockwise for interior rings).\n *     If `false`, coordinates will be oriented according to the left-hand rule\n *     (clockwise for exterior and counter-clockwise for interior rings).\n *     By default, coordinate orientation will depend on how the geometry was\n *     constructed.\n * @return {Array.<Array.<Array.<ol.Coordinate>>>} Coordinates.\n * @override\n * @api\n */\nMultiPolygon.prototype.getCoordinates = function(opt_right) {\n  let flatCoordinates;\n  if (opt_right !== undefined) {\n    flatCoordinates = this.getOrientedFlatCoordinates().slice();\n    _ol_geom_flat_orient_.orientLinearRingss(\n      flatCoordinates, 0, this.endss_, this.stride, opt_right);\n  } else {\n    flatCoordinates = this.flatCoordinates;\n  }\n\n  return _ol_geom_flat_inflate_.coordinatesss(\n    flatCoordinates, 0, this.endss_, this.stride);\n};\n\n\n/**\n * @return {Array.<Array.<number>>} Endss.\n */\nMultiPolygon.prototype.getEndss = function() {\n  return this.endss_;\n};\n\n\n/**\n * @return {Array.<number>} Flat interior points.\n */\nMultiPolygon.prototype.getFlatInteriorPoints = function() {\n  if (this.flatInteriorPointsRevision_ != this.getRevision()) {\n    const flatCenters = _ol_geom_flat_center_.linearRingss(\n      this.flatCoordinates, 0, this.endss_, this.stride);\n    this.flatInteriorPoints_ = _ol_geom_flat_interiorpoint_.linearRingss(\n      this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n      flatCenters);\n    this.flatInteriorPointsRevision_ = this.getRevision();\n  }\n  return this.flatInteriorPoints_;\n};\n\n\n/**\n * Return the interior points as {@link ol.geom.MultiPoint multipoint}.\n * @return {ol.geom.MultiPoint} Interior points as XYM coordinates, where M is\n * the length of the horizontal intersection that the point belongs to.\n * @api\n */\nMultiPolygon.prototype.getInteriorPoints = function() {\n  const interiorPoints = new MultiPoint(null);\n  interiorPoints.setFlatCoordinates(GeometryLayout.XYM,\n    this.getFlatInteriorPoints().slice());\n  return interiorPoints;\n};\n\n\n/**\n * @return {Array.<number>} Oriented flat coordinates.\n */\nMultiPolygon.prototype.getOrientedFlatCoordinates = function() {\n  if (this.orientedRevision_ != this.getRevision()) {\n    const flatCoordinates = this.flatCoordinates;\n    if (_ol_geom_flat_orient_.linearRingssAreOriented(\n      flatCoordinates, 0, this.endss_, this.stride)) {\n      this.orientedFlatCoordinates_ = flatCoordinates;\n    } else {\n      this.orientedFlatCoordinates_ = flatCoordinates.slice();\n      this.orientedFlatCoordinates_.length =\n          _ol_geom_flat_orient_.orientLinearRingss(\n            this.orientedFlatCoordinates_, 0, this.endss_, this.stride);\n    }\n    this.orientedRevision_ = this.getRevision();\n  }\n  return this.orientedFlatCoordinates_;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiPolygon.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  const simplifiedFlatCoordinates = [];\n  const simplifiedEndss = [];\n  simplifiedFlatCoordinates.length = _ol_geom_flat_simplify_.quantizess(\n    this.flatCoordinates, 0, this.endss_, this.stride,\n    Math.sqrt(squaredTolerance),\n    simplifiedFlatCoordinates, 0, simplifiedEndss);\n  const simplifiedMultiPolygon = new MultiPolygon(null);\n  simplifiedMultiPolygon.setFlatCoordinates(\n    GeometryLayout.XY, simplifiedFlatCoordinates, simplifiedEndss);\n  return simplifiedMultiPolygon;\n};\n\n\n/**\n * Return the polygon at the specified index.\n * @param {number} index Index.\n * @return {ol.geom.Polygon} Polygon.\n * @api\n */\nMultiPolygon.prototype.getPolygon = function(index) {\n  if (index < 0 || this.endss_.length <= index) {\n    return null;\n  }\n  let offset;\n  if (index === 0) {\n    offset = 0;\n  } else {\n    const prevEnds = this.endss_[index - 1];\n    offset = prevEnds[prevEnds.length - 1];\n  }\n  const ends = this.endss_[index].slice();\n  const end = ends[ends.length - 1];\n  if (offset !== 0) {\n    let i, ii;\n    for (i = 0, ii = ends.length; i < ii; ++i) {\n      ends[i] -= offset;\n    }\n  }\n  const polygon = new Polygon(null);\n  polygon.setFlatCoordinates(\n    this.layout, this.flatCoordinates.slice(offset, end), ends);\n  return polygon;\n};\n\n\n/**\n * Return the polygons of this multipolygon.\n * @return {Array.<ol.geom.Polygon>} Polygons.\n * @api\n */\nMultiPolygon.prototype.getPolygons = function() {\n  const layout = this.layout;\n  const flatCoordinates = this.flatCoordinates;\n  const endss = this.endss_;\n  const polygons = [];\n  let offset = 0;\n  let i, ii, j, jj;\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i].slice();\n    const end = ends[ends.length - 1];\n    if (offset !== 0) {\n      for (j = 0, jj = ends.length; j < jj; ++j) {\n        ends[j] -= offset;\n      }\n    }\n    const polygon = new Polygon(null);\n    polygon.setFlatCoordinates(\n      layout, flatCoordinates.slice(offset, end), ends);\n    polygons.push(polygon);\n    offset = end;\n  }\n  return polygons;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiPolygon.prototype.getType = function() {\n  return GeometryType.MULTI_POLYGON;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiPolygon.prototype.intersectsExtent = function(extent) {\n  return _ol_geom_flat_intersectsextent_.linearRingss(\n    this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, extent);\n};\n\n\n/**\n * Set the coordinates of the multipolygon.\n * @param {Array.<Array.<Array.<ol.Coordinate>>>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\nMultiPolygon.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(GeometryLayout.XY, null, this.endss_);\n  } else {\n    this.setLayout(opt_layout, coordinates, 3);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const endss = _ol_geom_flat_deflate_.coordinatesss(\n      this.flatCoordinates, 0, coordinates, this.stride, this.endss_);\n    if (endss.length === 0) {\n      this.flatCoordinates.length = 0;\n    } else {\n      const lastEnds = endss[endss.length - 1];\n      this.flatCoordinates.length = lastEnds.length === 0 ?\n        0 : lastEnds[lastEnds.length - 1];\n    }\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<Array.<number>>} endss Endss.\n */\nMultiPolygon.prototype.setFlatCoordinates = function(layout, flatCoordinates, endss) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.endss_ = endss;\n  this.changed();\n};\n\n\n/**\n * @param {Array.<ol.geom.Polygon>} polygons Polygons.\n */\nMultiPolygon.prototype.setPolygons = function(polygons) {\n  let layout = this.getLayout();\n  const flatCoordinates = [];\n  const endss = [];\n  for (let i = 0, ii = polygons.length; i < ii; ++i) {\n    const polygon = polygons[i];\n    if (i === 0) {\n      layout = polygon.getLayout();\n    }\n    const offset = flatCoordinates.length;\n    const ends = polygon.getEnds();\n    for (let j = 0, jj = ends.length; j < jj; ++j) {\n      ends[j] += offset;\n    }\n    extend(flatCoordinates, polygon.getFlatCoordinates());\n    endss.push(ends);\n  }\n  this.setFlatCoordinates(layout, flatCoordinates, endss);\n};\n\nexport default MultiPolygon;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/geom/MultiPolygon.js\n// module id = 53\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 14","/**\n * @module ol/geom/GeometryCollection\n */\nimport {inherits} from '../index.js';\nimport _ol_events_ from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {createOrUpdateEmpty, closestSquaredDistanceXY, extend, getCenter} from '../extent.js';\nimport Geometry from '../geom/Geometry.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport {clear} from '../obj.js';\n\n/**\n * @classdesc\n * An array of {@link ol.geom.Geometry} objects.\n *\n * @constructor\n * @extends {ol.geom.Geometry}\n * @param {Array.<ol.geom.Geometry>=} opt_geometries Geometries.\n * @api\n */\nconst GeometryCollection = function(opt_geometries) {\n\n  Geometry.call(this);\n\n  /**\n   * @private\n   * @type {Array.<ol.geom.Geometry>}\n   */\n  this.geometries_ = opt_geometries ? opt_geometries : null;\n\n  this.listenGeometriesChange_();\n};\n\ninherits(GeometryCollection, Geometry);\n\n\n/**\n * @param {Array.<ol.geom.Geometry>} geometries Geometries.\n * @private\n * @return {Array.<ol.geom.Geometry>} Cloned geometries.\n */\nGeometryCollection.cloneGeometries_ = function(geometries) {\n  const clonedGeometries = [];\n  let i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    clonedGeometries.push(geometries[i].clone());\n  }\n  return clonedGeometries;\n};\n\n\n/**\n * @private\n */\nGeometryCollection.prototype.unlistenGeometriesChange_ = function() {\n  let i, ii;\n  if (!this.geometries_) {\n    return;\n  }\n  for (i = 0, ii = this.geometries_.length; i < ii; ++i) {\n    _ol_events_.unlisten(\n      this.geometries_[i], EventType.CHANGE,\n      this.changed, this);\n  }\n};\n\n\n/**\n * @private\n */\nGeometryCollection.prototype.listenGeometriesChange_ = function() {\n  let i, ii;\n  if (!this.geometries_) {\n    return;\n  }\n  for (i = 0, ii = this.geometries_.length; i < ii; ++i) {\n    _ol_events_.listen(\n      this.geometries_[i], EventType.CHANGE,\n      this.changed, this);\n  }\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.GeometryCollection} Clone.\n * @override\n * @api\n */\nGeometryCollection.prototype.clone = function() {\n  const geometryCollection = new GeometryCollection(null);\n  geometryCollection.setGeometries(this.geometries_);\n  return geometryCollection;\n};\n\n\n/**\n * @inheritDoc\n */\nGeometryCollection.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  const geometries = this.geometries_;\n  let i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    minSquaredDistance = geometries[i].closestPointXY(\n      x, y, closestPoint, minSquaredDistance);\n  }\n  return minSquaredDistance;\n};\n\n\n/**\n * @inheritDoc\n */\nGeometryCollection.prototype.containsXY = function(x, y) {\n  const geometries = this.geometries_;\n  let i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    if (geometries[i].containsXY(x, y)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * @inheritDoc\n */\nGeometryCollection.prototype.computeExtent = function(extent) {\n  createOrUpdateEmpty(extent);\n  const geometries = this.geometries_;\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    extend(extent, geometries[i].getExtent());\n  }\n  return extent;\n};\n\n\n/**\n * Return the geometries that make up this geometry collection.\n * @return {Array.<ol.geom.Geometry>} Geometries.\n * @api\n */\nGeometryCollection.prototype.getGeometries = function() {\n  return GeometryCollection.cloneGeometries_(this.geometries_);\n};\n\n\n/**\n * @return {Array.<ol.geom.Geometry>} Geometries.\n */\nGeometryCollection.prototype.getGeometriesArray = function() {\n  return this.geometries_;\n};\n\n\n/**\n * @inheritDoc\n */\nGeometryCollection.prototype.getSimplifiedGeometry = function(squaredTolerance) {\n  if (this.simplifiedGeometryRevision != this.getRevision()) {\n    clear(this.simplifiedGeometryCache);\n    this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n    this.simplifiedGeometryRevision = this.getRevision();\n  }\n  if (squaredTolerance < 0 ||\n      (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n       squaredTolerance < this.simplifiedGeometryMaxMinSquaredTolerance)) {\n    return this;\n  }\n  const key = squaredTolerance.toString();\n  if (this.simplifiedGeometryCache.hasOwnProperty(key)) {\n    return this.simplifiedGeometryCache[key];\n  } else {\n    const simplifiedGeometries = [];\n    const geometries = this.geometries_;\n    let simplified = false;\n    let i, ii;\n    for (i = 0, ii = geometries.length; i < ii; ++i) {\n      const geometry = geometries[i];\n      const simplifiedGeometry = geometry.getSimplifiedGeometry(squaredTolerance);\n      simplifiedGeometries.push(simplifiedGeometry);\n      if (simplifiedGeometry !== geometry) {\n        simplified = true;\n      }\n    }\n    if (simplified) {\n      const simplifiedGeometryCollection = new GeometryCollection(null);\n      simplifiedGeometryCollection.setGeometriesArray(simplifiedGeometries);\n      this.simplifiedGeometryCache[key] = simplifiedGeometryCollection;\n      return simplifiedGeometryCollection;\n    } else {\n      this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n      return this;\n    }\n  }\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nGeometryCollection.prototype.getType = function() {\n  return GeometryType.GEOMETRY_COLLECTION;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nGeometryCollection.prototype.intersectsExtent = function(extent) {\n  const geometries = this.geometries_;\n  let i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    if (geometries[i].intersectsExtent(extent)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * @return {boolean} Is empty.\n */\nGeometryCollection.prototype.isEmpty = function() {\n  return this.geometries_.length === 0;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nGeometryCollection.prototype.rotate = function(angle, anchor) {\n  const geometries = this.geometries_;\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    geometries[i].rotate(angle, anchor);\n  }\n  this.changed();\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nGeometryCollection.prototype.scale = function(sx, opt_sy, opt_anchor) {\n  let anchor = opt_anchor;\n  if (!anchor) {\n    anchor = getCenter(this.getExtent());\n  }\n  const geometries = this.geometries_;\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    geometries[i].scale(sx, opt_sy, anchor);\n  }\n  this.changed();\n};\n\n\n/**\n * Set the geometries that make up this geometry collection.\n * @param {Array.<ol.geom.Geometry>} geometries Geometries.\n * @api\n */\nGeometryCollection.prototype.setGeometries = function(geometries) {\n  this.setGeometriesArray(\n    GeometryCollection.cloneGeometries_(geometries));\n};\n\n\n/**\n * @param {Array.<ol.geom.Geometry>} geometries Geometries.\n */\nGeometryCollection.prototype.setGeometriesArray = function(geometries) {\n  this.unlistenGeometriesChange_();\n  this.geometries_ = geometries;\n  this.listenGeometriesChange_();\n  this.changed();\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nGeometryCollection.prototype.applyTransform = function(transformFn) {\n  const geometries = this.geometries_;\n  let i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    geometries[i].applyTransform(transformFn);\n  }\n  this.changed();\n};\n\n\n/**\n * Translate the geometry.\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n * @override\n * @api\n */\nGeometryCollection.prototype.translate = function(deltaX, deltaY) {\n  const geometries = this.geometries_;\n  let i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    geometries[i].translate(deltaX, deltaY);\n  }\n  this.changed();\n};\n\n\n/**\n * @inheritDoc\n */\nGeometryCollection.prototype.disposeInternal = function() {\n  this.unlistenGeometriesChange_();\n  Geometry.prototype.disposeInternal.call(this);\n};\nexport default GeometryCollection;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/geom/GeometryCollection.js\n// module id = 72\n// module chunks = 0 1 2 3 4 5 7 9 10","/**\n * @module ol/interaction/DrawEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered upon feature draw start\n   * @event ol.interaction.Draw.Event#drawstart\n   * @api\n   */\n  DRAWSTART: 'drawstart',\n  /**\n   * Triggered upon feature draw end\n   * @event ol.interaction.Draw.Event#drawend\n   * @api\n   */\n  DRAWEND: 'drawend'\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/interaction/DrawEventType.js\n// module id = null\n// module chunks = ","/**\n * @module ol/interaction/Draw\n */\nimport {inherits} from '../index.js';\nimport EventType from '../events/EventType.js';\nimport Feature from '../Feature.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport MapBrowserPointerEvent from '../MapBrowserPointerEvent.js';\nimport BaseObject from '../Object.js';\nimport _ol_coordinate_ from '../coordinate.js';\nimport _ol_events_ from '../events.js';\nimport Event from '../events/Event.js';\nimport _ol_events_condition_ from '../events/condition.js';\nimport {boundingExtent, getBottomLeft, getBottomRight, getTopLeft, getTopRight} from '../extent.js';\nimport {TRUE, FALSE} from '../functions.js';\nimport Circle from '../geom/Circle.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport MouseSource from '../pointer/MouseSource.js';\nimport Point from '../geom/Point.js';\nimport Polygon, {fromCircle, makeRegular} from '../geom/Polygon.js';\nimport DrawEventType from '../interaction/DrawEventType.js';\nimport PointerInteraction from '../interaction/Pointer.js';\nimport InteractionProperty from '../interaction/Property.js';\nimport VectorLayer from '../layer/Vector.js';\nimport VectorSource from '../source/Vector.js';\nimport Style from '../style/Style.js';\n\n/**\n * @classdesc\n * Interaction for drawing feature geometries.\n *\n * @constructor\n * @extends {ol.interaction.Pointer}\n * @fires ol.interaction.Draw.Event\n * @param {olx.interaction.DrawOptions} options Options.\n * @api\n */\nconst Draw = function(options) {\n\n  PointerInteraction.call(this, {\n    handleDownEvent: Draw.handleDownEvent_,\n    handleEvent: Draw.handleEvent,\n    handleUpEvent: Draw.handleUpEvent_\n  });\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.shouldHandle_ = false;\n\n  /**\n   * @type {ol.Pixel}\n   * @private\n   */\n  this.downPx_ = null;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.downTimeout_;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.lastDragTime_;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.freehand_ = false;\n\n  /**\n   * Target source for drawn features.\n   * @type {ol.source.Vector}\n   * @private\n   */\n  this.source_ = options.source ? options.source : null;\n\n  /**\n   * Target collection for drawn features.\n   * @type {ol.Collection.<ol.Feature>}\n   * @private\n   */\n  this.features_ = options.features ? options.features : null;\n\n  /**\n   * Pixel distance for snapping.\n   * @type {number}\n   * @private\n   */\n  this.snapTolerance_ = options.snapTolerance ? options.snapTolerance : 12;\n\n  /**\n   * Geometry type.\n   * @type {ol.geom.GeometryType}\n   * @private\n   */\n  this.type_ = /** @type {ol.geom.GeometryType} */ (options.type);\n\n  /**\n   * Drawing mode (derived from geometry type.\n   * @type {ol.interaction.Draw.Mode_}\n   * @private\n   */\n  this.mode_ = Draw.getMode_(this.type_);\n\n  /**\n   * Stop click, singleclick, and doubleclick events from firing during drawing.\n   * Default is `false`.\n   * @type {boolean}\n   * @private\n   */\n  this.stopClick_ = !!options.stopClick;\n\n  /**\n   * The number of points that must be drawn before a polygon ring or line\n   * string can be finished.  The default is 3 for polygon rings and 2 for\n   * line strings.\n   * @type {number}\n   * @private\n   */\n  this.minPoints_ = options.minPoints ?\n    options.minPoints :\n    (this.mode_ === Draw.Mode_.POLYGON ? 3 : 2);\n\n  /**\n   * The number of points that can be drawn before a polygon ring or line string\n   * is finished. The default is no restriction.\n   * @type {number}\n   * @private\n   */\n  this.maxPoints_ = options.maxPoints ? options.maxPoints : Infinity;\n\n  /**\n   * A function to decide if a potential finish coordinate is permissible\n   * @private\n   * @type {ol.EventsConditionType}\n   */\n  this.finishCondition_ = options.finishCondition ? options.finishCondition : TRUE;\n\n  let geometryFunction = options.geometryFunction;\n  if (!geometryFunction) {\n    if (this.type_ === GeometryType.CIRCLE) {\n      /**\n       * @param {!Array.<ol.Coordinate>} coordinates\n       *     The coordinates.\n       * @param {ol.geom.SimpleGeometry=} opt_geometry Optional geometry.\n       * @return {ol.geom.SimpleGeometry} A geometry.\n       */\n      geometryFunction = function(coordinates, opt_geometry) {\n        const circle = opt_geometry ? /** @type {ol.geom.Circle} */ (opt_geometry) :\n          new Circle([NaN, NaN]);\n        const squaredLength = _ol_coordinate_.squaredDistance(\n          coordinates[0], coordinates[1]);\n        circle.setCenterAndRadius(coordinates[0], Math.sqrt(squaredLength));\n        return circle;\n      };\n    } else {\n      let Constructor;\n      const mode = this.mode_;\n      if (mode === Draw.Mode_.POINT) {\n        Constructor = Point;\n      } else if (mode === Draw.Mode_.LINE_STRING) {\n        Constructor = LineString;\n      } else if (mode === Draw.Mode_.POLYGON) {\n        Constructor = Polygon;\n      }\n      /**\n       * @param {!Array.<ol.Coordinate>} coordinates\n       *     The coordinates.\n       * @param {ol.geom.SimpleGeometry=} opt_geometry Optional geometry.\n       * @return {ol.geom.SimpleGeometry} A geometry.\n       */\n      geometryFunction = function(coordinates, opt_geometry) {\n        let geometry = opt_geometry;\n        if (geometry) {\n          if (mode === Draw.Mode_.POLYGON) {\n            if (coordinates[0].length) {\n              // Add a closing coordinate to match the first\n              geometry.setCoordinates([coordinates[0].concat([coordinates[0][0]])]);\n            } else {\n              geometry.setCoordinates([]);\n            }\n          } else {\n            geometry.setCoordinates(coordinates);\n          }\n        } else {\n          geometry = new Constructor(coordinates);\n        }\n        return geometry;\n      };\n    }\n  }\n\n  /**\n   * @type {ol.DrawGeometryFunctionType}\n   * @private\n   */\n  this.geometryFunction_ = geometryFunction;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.dragVertexDelay_ = options.dragVertexDelay !== undefined ? options.dragVertexDelay : 500;\n\n  /**\n   * Finish coordinate for the feature (first point for polygons, last point for\n   * linestrings).\n   * @type {ol.Coordinate}\n   * @private\n   */\n  this.finishCoordinate_ = null;\n\n  /**\n   * Sketch feature.\n   * @type {ol.Feature}\n   * @private\n   */\n  this.sketchFeature_ = null;\n\n  /**\n   * Sketch point.\n   * @type {ol.Feature}\n   * @private\n   */\n  this.sketchPoint_ = null;\n\n  /**\n   * Sketch coordinates. Used when drawing a line or polygon.\n   * @type {ol.Coordinate|Array.<ol.Coordinate>|Array.<Array.<ol.Coordinate>>}\n   * @private\n   */\n  this.sketchCoords_ = null;\n\n  /**\n   * Sketch line. Used when drawing polygon.\n   * @type {ol.Feature}\n   * @private\n   */\n  this.sketchLine_ = null;\n\n  /**\n   * Sketch line coordinates. Used when drawing a polygon or circle.\n   * @type {Array.<ol.Coordinate>}\n   * @private\n   */\n  this.sketchLineCoords_ = null;\n\n  /**\n   * Squared tolerance for handling up events.  If the squared distance\n   * between a down and up event is greater than this tolerance, up events\n   * will not be handled.\n   * @type {number}\n   * @private\n   */\n  this.squaredClickTolerance_ = options.clickTolerance ?\n    options.clickTolerance * options.clickTolerance : 36;\n\n  /**\n   * Draw overlay where our sketch features are drawn.\n   * @type {ol.layer.Vector}\n   * @private\n   */\n  this.overlay_ = new VectorLayer({\n    source: new VectorSource({\n      useSpatialIndex: false,\n      wrapX: options.wrapX ? options.wrapX : false\n    }),\n    style: options.style ? options.style :\n      Draw.getDefaultStyleFunction(),\n    updateWhileInteracting: true\n  });\n\n  /**\n   * Name of the geometry attribute for newly created features.\n   * @type {string|undefined}\n   * @private\n   */\n  this.geometryName_ = options.geometryName;\n\n  /**\n   * @private\n   * @type {ol.EventsConditionType}\n   */\n  this.condition_ = options.condition ?\n    options.condition : _ol_events_condition_.noModifierKeys;\n\n  /**\n   * @private\n   * @type {ol.EventsConditionType}\n   */\n  this.freehandCondition_;\n  if (options.freehand) {\n    this.freehandCondition_ = _ol_events_condition_.always;\n  } else {\n    this.freehandCondition_ = options.freehandCondition ?\n      options.freehandCondition : _ol_events_condition_.shiftKeyOnly;\n  }\n\n  _ol_events_.listen(this,\n    BaseObject.getChangeEventType(InteractionProperty.ACTIVE),\n    this.updateState_, this);\n\n};\n\ninherits(Draw, PointerInteraction);\n\n\n/**\n * @return {ol.StyleFunction} Styles.\n */\nDraw.getDefaultStyleFunction = function() {\n  const styles = Style.createDefaultEditing();\n  return function(feature, resolution) {\n    return styles[feature.getGeometry().getType()];\n  };\n};\n\n\n/**\n * @inheritDoc\n */\nDraw.prototype.setMap = function(map) {\n  PointerInteraction.prototype.setMap.call(this, map);\n  this.updateState_();\n};\n\n\n/**\n * Handles the {@link ol.MapBrowserEvent map browser event} and may actually\n * draw or finish the drawing.\n * @param {ol.MapBrowserEvent} event Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {ol.interaction.Draw}\n * @api\n */\nDraw.handleEvent = function(event) {\n  if (event.originalEvent.type === EventType.CONTEXTMENU) {\n    // Avoid context menu for long taps when drawing on mobile\n    event.preventDefault();\n  }\n  this.freehand_ = this.mode_ !== Draw.Mode_.POINT && this.freehandCondition_(event);\n  let move = event.type === MapBrowserEventType.POINTERMOVE;\n  let pass = true;\n  if (this.lastDragTime_ && event.type === MapBrowserEventType.POINTERDRAG) {\n    const now = Date.now();\n    if (now - this.lastDragTime_ >= this.dragVertexDelay_) {\n      this.downPx_ = event.pixel;\n      this.shouldHandle_ = !this.freehand_;\n      move = true;\n    } else {\n      this.lastDragTime_ = undefined;\n    }\n    if (this.shouldHandle_ && this.downTimeout_) {\n      clearTimeout(this.downTimeout_);\n      this.downTimeout_ = undefined;\n    }\n  }\n  if (this.freehand_ &&\n      event.type === MapBrowserEventType.POINTERDRAG &&\n      this.sketchFeature_ !== null) {\n    this.addToDrawing_(event);\n    pass = false;\n  } else if (this.freehand_ &&\n      event.type === MapBrowserEventType.POINTERDOWN) {\n    pass = false;\n  } else if (move) {\n    pass = event.type === MapBrowserEventType.POINTERMOVE;\n    if (pass && this.freehand_) {\n      pass = this.handlePointerMove_(event);\n    } else if (event.pointerEvent.pointerType == MouseSource.POINTER_TYPE ||\n        (event.type === MapBrowserEventType.POINTERDRAG && !this.downTimeout_)) {\n      this.handlePointerMove_(event);\n    }\n  } else if (event.type === MapBrowserEventType.DBLCLICK) {\n    pass = false;\n  }\n\n  return PointerInteraction.handleEvent.call(this, event) && pass;\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} event Event.\n * @return {boolean} Start drag sequence?\n * @this {ol.interaction.Draw}\n * @private\n */\nDraw.handleDownEvent_ = function(event) {\n  this.shouldHandle_ = !this.freehand_;\n\n  if (this.freehand_) {\n    this.downPx_ = event.pixel;\n    if (!this.finishCoordinate_) {\n      this.startDrawing_(event);\n    }\n    return true;\n  } else if (this.condition_(event)) {\n    this.lastDragTime_ = Date.now();\n    this.downTimeout_ = setTimeout(function() {\n      this.handlePointerMove_(new MapBrowserPointerEvent(\n        MapBrowserEventType.POINTERMOVE, event.map, event.pointerEvent, event.frameState));\n    }.bind(this), this.dragVertexDelay_);\n    this.downPx_ = event.pixel;\n    return true;\n  } else {\n    return false;\n  }\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} event Event.\n * @return {boolean} Stop drag sequence?\n * @this {ol.interaction.Draw}\n * @private\n */\nDraw.handleUpEvent_ = function(event) {\n  let pass = true;\n\n  if (this.downTimeout_) {\n    clearTimeout(this.downTimeout_);\n    this.downTimeout_ = undefined;\n  }\n\n  this.handlePointerMove_(event);\n\n  const circleMode = this.mode_ === Draw.Mode_.CIRCLE;\n\n  if (this.shouldHandle_) {\n    if (!this.finishCoordinate_) {\n      this.startDrawing_(event);\n      if (this.mode_ === Draw.Mode_.POINT) {\n        this.finishDrawing();\n      }\n    } else if (this.freehand_ || circleMode) {\n      this.finishDrawing();\n    } else if (this.atFinish_(event)) {\n      if (this.finishCondition_(event)) {\n        this.finishDrawing();\n      }\n    } else {\n      this.addToDrawing_(event);\n    }\n    pass = false;\n  } else if (this.freehand_) {\n    this.finishCoordinate_ = null;\n    this.abortDrawing_();\n  }\n  if (!pass && this.stopClick_) {\n    event.stopPropagation();\n  }\n  return pass;\n};\n\n\n/**\n * Handle move events.\n * @param {ol.MapBrowserEvent} event A move event.\n * @return {boolean} Pass the event to other interactions.\n * @private\n */\nDraw.prototype.handlePointerMove_ = function(event) {\n  if (this.downPx_ &&\n      ((!this.freehand_ && this.shouldHandle_) ||\n      (this.freehand_ && !this.shouldHandle_))) {\n    const downPx = this.downPx_;\n    const clickPx = event.pixel;\n    const dx = downPx[0] - clickPx[0];\n    const dy = downPx[1] - clickPx[1];\n    const squaredDistance = dx * dx + dy * dy;\n    this.shouldHandle_ = this.freehand_ ?\n      squaredDistance > this.squaredClickTolerance_ :\n      squaredDistance <= this.squaredClickTolerance_;\n    if (!this.shouldHandle_) {\n      return true;\n    }\n  }\n\n  if (this.finishCoordinate_) {\n    this.modifyDrawing_(event);\n  } else {\n    this.createOrUpdateSketchPoint_(event);\n  }\n  return true;\n};\n\n\n/**\n * Determine if an event is within the snapping tolerance of the start coord.\n * @param {ol.MapBrowserEvent} event Event.\n * @return {boolean} The event is within the snapping tolerance of the start.\n * @private\n */\nDraw.prototype.atFinish_ = function(event) {\n  let at = false;\n  if (this.sketchFeature_) {\n    let potentiallyDone = false;\n    let potentiallyFinishCoordinates = [this.finishCoordinate_];\n    if (this.mode_ === Draw.Mode_.LINE_STRING) {\n      potentiallyDone = this.sketchCoords_.length > this.minPoints_;\n    } else if (this.mode_ === Draw.Mode_.POLYGON) {\n      potentiallyDone = this.sketchCoords_[0].length >\n          this.minPoints_;\n      potentiallyFinishCoordinates = [this.sketchCoords_[0][0],\n        this.sketchCoords_[0][this.sketchCoords_[0].length - 2]];\n    }\n    if (potentiallyDone) {\n      const map = event.map;\n      for (let i = 0, ii = potentiallyFinishCoordinates.length; i < ii; i++) {\n        const finishCoordinate = potentiallyFinishCoordinates[i];\n        const finishPixel = map.getPixelFromCoordinate(finishCoordinate);\n        const pixel = event.pixel;\n        const dx = pixel[0] - finishPixel[0];\n        const dy = pixel[1] - finishPixel[1];\n        const snapTolerance = this.freehand_ ? 1 : this.snapTolerance_;\n        at = Math.sqrt(dx * dx + dy * dy) <= snapTolerance;\n        if (at) {\n          this.finishCoordinate_ = finishCoordinate;\n          break;\n        }\n      }\n    }\n  }\n  return at;\n};\n\n\n/**\n * @param {ol.MapBrowserEvent} event Event.\n * @private\n */\nDraw.prototype.createOrUpdateSketchPoint_ = function(event) {\n  const coordinates = event.coordinate.slice();\n  if (!this.sketchPoint_) {\n    this.sketchPoint_ = new Feature(new Point(coordinates));\n    this.updateSketchFeatures_();\n  } else {\n    const sketchPointGeom = /** @type {ol.geom.Point} */ (this.sketchPoint_.getGeometry());\n    sketchPointGeom.setCoordinates(coordinates);\n  }\n};\n\n\n/**\n * Start the drawing.\n * @param {ol.MapBrowserEvent} event Event.\n * @private\n */\nDraw.prototype.startDrawing_ = function(event) {\n  const start = event.coordinate;\n  this.finishCoordinate_ = start;\n  if (this.mode_ === Draw.Mode_.POINT) {\n    this.sketchCoords_ = start.slice();\n  } else if (this.mode_ === Draw.Mode_.POLYGON) {\n    this.sketchCoords_ = [[start.slice(), start.slice()]];\n    this.sketchLineCoords_ = this.sketchCoords_[0];\n  } else {\n    this.sketchCoords_ = [start.slice(), start.slice()];\n  }\n  if (this.sketchLineCoords_) {\n    this.sketchLine_ = new Feature(\n      new LineString(this.sketchLineCoords_));\n  }\n  const geometry = this.geometryFunction_(this.sketchCoords_);\n  this.sketchFeature_ = new Feature();\n  if (this.geometryName_) {\n    this.sketchFeature_.setGeometryName(this.geometryName_);\n  }\n  this.sketchFeature_.setGeometry(geometry);\n  this.updateSketchFeatures_();\n  this.dispatchEvent(new Draw.Event(DrawEventType.DRAWSTART, this.sketchFeature_));\n};\n\n\n/**\n * Modify the drawing.\n * @param {ol.MapBrowserEvent} event Event.\n * @private\n */\nDraw.prototype.modifyDrawing_ = function(event) {\n  let coordinate = event.coordinate;\n  const geometry = /** @type {ol.geom.SimpleGeometry} */ (this.sketchFeature_.getGeometry());\n  let coordinates, last;\n  if (this.mode_ === Draw.Mode_.POINT) {\n    last = this.sketchCoords_;\n  } else if (this.mode_ === Draw.Mode_.POLYGON) {\n    coordinates = this.sketchCoords_[0];\n    last = coordinates[coordinates.length - 1];\n    if (this.atFinish_(event)) {\n      // snap to finish\n      coordinate = this.finishCoordinate_.slice();\n    }\n  } else {\n    coordinates = this.sketchCoords_;\n    last = coordinates[coordinates.length - 1];\n  }\n  last[0] = coordinate[0];\n  last[1] = coordinate[1];\n  this.geometryFunction_(/** @type {!Array.<ol.Coordinate>} */ (this.sketchCoords_), geometry);\n  if (this.sketchPoint_) {\n    const sketchPointGeom = /** @type {ol.geom.Point} */ (this.sketchPoint_.getGeometry());\n    sketchPointGeom.setCoordinates(coordinate);\n  }\n  let sketchLineGeom;\n  if (geometry instanceof Polygon &&\n      this.mode_ !== Draw.Mode_.POLYGON) {\n    if (!this.sketchLine_) {\n      this.sketchLine_ = new Feature(new LineString(null));\n    }\n    const ring = geometry.getLinearRing(0);\n    sketchLineGeom = /** @type {ol.geom.LineString} */ (this.sketchLine_.getGeometry());\n    sketchLineGeom.setFlatCoordinates(\n      ring.getLayout(), ring.getFlatCoordinates());\n  } else if (this.sketchLineCoords_) {\n    sketchLineGeom = /** @type {ol.geom.LineString} */ (this.sketchLine_.getGeometry());\n    sketchLineGeom.setCoordinates(this.sketchLineCoords_);\n  }\n  this.updateSketchFeatures_();\n};\n\n\n/**\n * Add a new coordinate to the drawing.\n * @param {ol.MapBrowserEvent} event Event.\n * @private\n */\nDraw.prototype.addToDrawing_ = function(event) {\n  const coordinate = event.coordinate;\n  const geometry = /** @type {ol.geom.SimpleGeometry} */ (this.sketchFeature_.getGeometry());\n  let done;\n  let coordinates;\n  if (this.mode_ === Draw.Mode_.LINE_STRING) {\n    this.finishCoordinate_ = coordinate.slice();\n    coordinates = this.sketchCoords_;\n    if (coordinates.length >= this.maxPoints_) {\n      if (this.freehand_) {\n        coordinates.pop();\n      } else {\n        done = true;\n      }\n    }\n    coordinates.push(coordinate.slice());\n    this.geometryFunction_(coordinates, geometry);\n  } else if (this.mode_ === Draw.Mode_.POLYGON) {\n    coordinates = this.sketchCoords_[0];\n    if (coordinates.length >= this.maxPoints_) {\n      if (this.freehand_) {\n        coordinates.pop();\n      } else {\n        done = true;\n      }\n    }\n    coordinates.push(coordinate.slice());\n    if (done) {\n      this.finishCoordinate_ = coordinates[0];\n    }\n    this.geometryFunction_(this.sketchCoords_, geometry);\n  }\n  this.updateSketchFeatures_();\n  if (done) {\n    this.finishDrawing();\n  }\n};\n\n\n/**\n * Remove last point of the feature currently being drawn.\n * @api\n */\nDraw.prototype.removeLastPoint = function() {\n  if (!this.sketchFeature_) {\n    return;\n  }\n  const geometry = /** @type {ol.geom.SimpleGeometry} */ (this.sketchFeature_.getGeometry());\n  let coordinates, sketchLineGeom;\n  if (this.mode_ === Draw.Mode_.LINE_STRING) {\n    coordinates = this.sketchCoords_;\n    coordinates.splice(-2, 1);\n    this.geometryFunction_(coordinates, geometry);\n    if (coordinates.length >= 2) {\n      this.finishCoordinate_ = coordinates[coordinates.length - 2].slice();\n    }\n  } else if (this.mode_ === Draw.Mode_.POLYGON) {\n    coordinates = this.sketchCoords_[0];\n    coordinates.splice(-2, 1);\n    sketchLineGeom = /** @type {ol.geom.LineString} */ (this.sketchLine_.getGeometry());\n    sketchLineGeom.setCoordinates(coordinates);\n    this.geometryFunction_(this.sketchCoords_, geometry);\n  }\n\n  if (coordinates.length === 0) {\n    this.finishCoordinate_ = null;\n  }\n\n  this.updateSketchFeatures_();\n};\n\n\n/**\n * Stop drawing and add the sketch feature to the target layer.\n * The {@link ol.interaction.DrawEventType.DRAWEND} event is dispatched before\n * inserting the feature.\n * @api\n */\nDraw.prototype.finishDrawing = function() {\n  const sketchFeature = this.abortDrawing_();\n  let coordinates = this.sketchCoords_;\n  const geometry = /** @type {ol.geom.SimpleGeometry} */ (sketchFeature.getGeometry());\n  if (this.mode_ === Draw.Mode_.LINE_STRING) {\n    // remove the redundant last point\n    coordinates.pop();\n    this.geometryFunction_(coordinates, geometry);\n  } else if (this.mode_ === Draw.Mode_.POLYGON) {\n    // remove the redundant last point in ring\n    coordinates[0].pop();\n    this.geometryFunction_(coordinates, geometry);\n    coordinates = geometry.getCoordinates();\n  }\n\n  // cast multi-part geometries\n  if (this.type_ === GeometryType.MULTI_POINT) {\n    sketchFeature.setGeometry(new MultiPoint([coordinates]));\n  } else if (this.type_ === GeometryType.MULTI_LINE_STRING) {\n    sketchFeature.setGeometry(new MultiLineString([coordinates]));\n  } else if (this.type_ === GeometryType.MULTI_POLYGON) {\n    sketchFeature.setGeometry(new MultiPolygon([coordinates]));\n  }\n\n  // First dispatch event to allow full set up of feature\n  this.dispatchEvent(new Draw.Event(DrawEventType.DRAWEND, sketchFeature));\n\n  // Then insert feature\n  if (this.features_) {\n    this.features_.push(sketchFeature);\n  }\n  if (this.source_) {\n    this.source_.addFeature(sketchFeature);\n  }\n};\n\n\n/**\n * Stop drawing without adding the sketch feature to the target layer.\n * @return {ol.Feature} The sketch feature (or null if none).\n * @private\n */\nDraw.prototype.abortDrawing_ = function() {\n  this.finishCoordinate_ = null;\n  const sketchFeature = this.sketchFeature_;\n  if (sketchFeature) {\n    this.sketchFeature_ = null;\n    this.sketchPoint_ = null;\n    this.sketchLine_ = null;\n    this.overlay_.getSource().clear(true);\n  }\n  return sketchFeature;\n};\n\n\n/**\n * Extend an existing geometry by adding additional points. This only works\n * on features with `LineString` geometries, where the interaction will\n * extend lines by adding points to the end of the coordinates array.\n * @param {!ol.Feature} feature Feature to be extended.\n * @api\n */\nDraw.prototype.extend = function(feature) {\n  const geometry = feature.getGeometry();\n  const lineString = /** @type {ol.geom.LineString} */ (geometry);\n  this.sketchFeature_ = feature;\n  this.sketchCoords_ = lineString.getCoordinates();\n  const last = this.sketchCoords_[this.sketchCoords_.length - 1];\n  this.finishCoordinate_ = last.slice();\n  this.sketchCoords_.push(last.slice());\n  this.updateSketchFeatures_();\n  this.dispatchEvent(new Draw.Event(DrawEventType.DRAWSTART, this.sketchFeature_));\n};\n\n\n/**\n * @inheritDoc\n */\nDraw.prototype.shouldStopEvent = FALSE;\n\n\n/**\n * Redraw the sketch features.\n * @private\n */\nDraw.prototype.updateSketchFeatures_ = function() {\n  const sketchFeatures = [];\n  if (this.sketchFeature_) {\n    sketchFeatures.push(this.sketchFeature_);\n  }\n  if (this.sketchLine_) {\n    sketchFeatures.push(this.sketchLine_);\n  }\n  if (this.sketchPoint_) {\n    sketchFeatures.push(this.sketchPoint_);\n  }\n  const overlaySource = this.overlay_.getSource();\n  overlaySource.clear(true);\n  overlaySource.addFeatures(sketchFeatures);\n};\n\n\n/**\n * @private\n */\nDraw.prototype.updateState_ = function() {\n  const map = this.getMap();\n  const active = this.getActive();\n  if (!map || !active) {\n    this.abortDrawing_();\n  }\n  this.overlay_.setMap(active ? map : null);\n};\n\n\n/**\n * Create a `geometryFunction` for `type: 'Circle'` that will create a regular\n * polygon with a user specified number of sides and start angle instead of an\n * `ol.geom.Circle` geometry.\n * @param {number=} opt_sides Number of sides of the regular polygon. Default is\n *     32.\n * @param {number=} opt_angle Angle of the first point in radians. 0 means East.\n *     Default is the angle defined by the heading from the center of the\n *     regular polygon to the current pointer position.\n * @return {ol.DrawGeometryFunctionType} Function that draws a\n *     polygon.\n * @api\n */\nDraw.createRegularPolygon = function(opt_sides, opt_angle) {\n  return (\n    /**\n         * @param {ol.Coordinate|Array.<ol.Coordinate>|Array.<Array.<ol.Coordinate>>} coordinates\n         * @param {ol.geom.SimpleGeometry=} opt_geometry\n         * @return {ol.geom.SimpleGeometry}\n         */\n    function(coordinates, opt_geometry) {\n      const center = coordinates[0];\n      const end = coordinates[1];\n      const radius = Math.sqrt(\n        _ol_coordinate_.squaredDistance(center, end));\n      const geometry = opt_geometry ? /** @type {ol.geom.Polygon} */ (opt_geometry) :\n        fromCircle(new Circle(center), opt_sides);\n      const angle = opt_angle ? opt_angle :\n        Math.atan((end[1] - center[1]) / (end[0] - center[0]));\n      makeRegular(geometry, center, radius, angle);\n      return geometry;\n    }\n  );\n};\n\n\n/**\n * Create a `geometryFunction` that will create a box-shaped polygon (aligned\n * with the coordinate system axes).  Use this with the draw interaction and\n * `type: 'Circle'` to return a box instead of a circle geometry.\n * @return {ol.DrawGeometryFunctionType} Function that draws a box-shaped polygon.\n * @api\n */\nDraw.createBox = function() {\n  return (\n    /**\n     * @param {Array.<ol.Coordinate>} coordinates\n     * @param {ol.geom.SimpleGeometry=} opt_geometry\n     * @return {ol.geom.SimpleGeometry}\n     */\n    function(coordinates, opt_geometry) {\n      const extent = boundingExtent(coordinates);\n      const geometry = opt_geometry || new Polygon(null);\n      geometry.setCoordinates([[\n        getBottomLeft(extent),\n        getBottomRight(extent),\n        getTopRight(extent),\n        getTopLeft(extent),\n        getBottomLeft(extent)\n      ]]);\n      return geometry;\n    }\n  );\n};\n\n\n/**\n * Get the drawing mode.  The mode for mult-part geometries is the same as for\n * their single-part cousins.\n * @param {ol.geom.GeometryType} type Geometry type.\n * @return {ol.interaction.Draw.Mode_} Drawing mode.\n * @private\n */\nDraw.getMode_ = function(type) {\n  let mode;\n  if (type === GeometryType.POINT ||\n      type === GeometryType.MULTI_POINT) {\n    mode = Draw.Mode_.POINT;\n  } else if (type === GeometryType.LINE_STRING ||\n      type === GeometryType.MULTI_LINE_STRING) {\n    mode = Draw.Mode_.LINE_STRING;\n  } else if (type === GeometryType.POLYGON ||\n      type === GeometryType.MULTI_POLYGON) {\n    mode = Draw.Mode_.POLYGON;\n  } else if (type === GeometryType.CIRCLE) {\n    mode = Draw.Mode_.CIRCLE;\n  }\n  return /** @type {!ol.interaction.Draw.Mode_} */ (mode);\n};\n\n\n/**\n * Draw mode.  This collapses multi-part geometry types with their single-part\n * cousins.\n * @enum {string}\n * @private\n */\nDraw.Mode_ = {\n  POINT: 'Point',\n  LINE_STRING: 'LineString',\n  POLYGON: 'Polygon',\n  CIRCLE: 'Circle'\n};\n\n/**\n * @classdesc\n * Events emitted by {@link ol.interaction.Draw} instances are instances of\n * this type.\n *\n * @constructor\n * @extends {ol.events.Event}\n * @implements {oli.DrawEvent}\n * @param {ol.interaction.DrawEventType} type Type.\n * @param {ol.Feature} feature The feature drawn.\n */\nDraw.Event = function(type, feature) {\n\n  Event.call(this, type);\n\n  /**\n   * The feature being drawn.\n   * @type {ol.Feature}\n   * @api\n   */\n  this.feature = feature;\n\n};\ninherits(Draw.Event, Event);\n\nexport default Draw;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/interaction/Draw.js\n// module id = null\n// module chunks = ","/**\n * @module ol/format/XSD\n */\nimport _ol_xml_ from '../xml.js';\nimport _ol_string_ from '../string.js';\nconst XSD = {};\n\n\n/**\n * @param {Node} node Node.\n * @return {boolean|undefined} Boolean.\n */\nXSD.readBoolean = function(node) {\n  const s = _ol_xml_.getAllTextContent(node, false);\n  return XSD.readBooleanString(s);\n};\n\n\n/**\n * @param {string} string String.\n * @return {boolean|undefined} Boolean.\n */\nXSD.readBooleanString = function(string) {\n  const m = /^\\s*(true|1)|(false|0)\\s*$/.exec(string);\n  if (m) {\n    return m[1] !== undefined || false;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} DateTime in seconds.\n */\nXSD.readDateTime = function(node) {\n  const s = _ol_xml_.getAllTextContent(node, false);\n  const dateTime = Date.parse(s);\n  return isNaN(dateTime) ? undefined : dateTime / 1000;\n};\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Decimal.\n */\nXSD.readDecimal = function(node) {\n  const s = _ol_xml_.getAllTextContent(node, false);\n  return XSD.readDecimalString(s);\n};\n\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Decimal.\n */\nXSD.readDecimalString = function(string) {\n  // FIXME check spec\n  const m = /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*$/i.exec(string);\n  if (m) {\n    return parseFloat(m[1]);\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Non negative integer.\n */\nXSD.readNonNegativeInteger = function(node) {\n  const s = _ol_xml_.getAllTextContent(node, false);\n  return XSD.readNonNegativeIntegerString(s);\n};\n\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Non negative integer.\n */\nXSD.readNonNegativeIntegerString = function(string) {\n  const m = /^\\s*(\\d+)\\s*$/.exec(string);\n  if (m) {\n    return parseInt(m[1], 10);\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @return {string|undefined} String.\n */\nXSD.readString = function(node) {\n  return _ol_xml_.getAllTextContent(node, false).trim();\n};\n\n\n/**\n * @param {Node} node Node to append a TextNode with the boolean to.\n * @param {boolean} bool Boolean.\n */\nXSD.writeBooleanTextNode = function(node, bool) {\n  XSD.writeStringTextNode(node, (bool) ? '1' : '0');\n};\n\n\n/**\n * @param {Node} node Node to append a CDATA Section with the string to.\n * @param {string} string String.\n */\nXSD.writeCDATASection = function(node, string) {\n  node.appendChild(_ol_xml_.DOCUMENT.createCDATASection(string));\n};\n\n\n/**\n * @param {Node} node Node to append a TextNode with the dateTime to.\n * @param {number} dateTime DateTime in seconds.\n */\nXSD.writeDateTimeTextNode = function(node, dateTime) {\n  const date = new Date(dateTime * 1000);\n  const string = date.getUTCFullYear() + '-' +\n      _ol_string_.padNumber(date.getUTCMonth() + 1, 2) + '-' +\n      _ol_string_.padNumber(date.getUTCDate(), 2) + 'T' +\n      _ol_string_.padNumber(date.getUTCHours(), 2) + ':' +\n      _ol_string_.padNumber(date.getUTCMinutes(), 2) + ':' +\n      _ol_string_.padNumber(date.getUTCSeconds(), 2) + 'Z';\n  node.appendChild(_ol_xml_.DOCUMENT.createTextNode(string));\n};\n\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} decimal Decimal.\n */\nXSD.writeDecimalTextNode = function(node, decimal) {\n  const string = decimal.toPrecision();\n  node.appendChild(_ol_xml_.DOCUMENT.createTextNode(string));\n};\n\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} nonNegativeInteger Non negative integer.\n */\nXSD.writeNonNegativeIntegerTextNode = function(node, nonNegativeInteger) {\n  const string = nonNegativeInteger.toString();\n  node.appendChild(_ol_xml_.DOCUMENT.createTextNode(string));\n};\n\n\n/**\n * @param {Node} node Node to append a TextNode with the string to.\n * @param {string} string String.\n */\nXSD.writeStringTextNode = function(node, string) {\n  node.appendChild(_ol_xml_.DOCUMENT.createTextNode(string));\n};\nexport default XSD;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/format/XSD.js\n// module id = 80\n// module chunks = 0 1 2 5 10","/**\n * @module ol/geom/Circle\n */\nimport {inherits} from '../index.js';\nimport {createOrUpdate, forEachCorner, intersects} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\n\n/**\n * @classdesc\n * Circle geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {ol.Coordinate} center Center.\n * @param {number=} opt_radius Radius.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst Circle = function(center, opt_radius, opt_layout) {\n  SimpleGeometry.call(this);\n  const radius = opt_radius ? opt_radius : 0;\n  this.setCenterAndRadius(center, radius, opt_layout);\n};\n\ninherits(Circle, SimpleGeometry);\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.Circle} Clone.\n * @override\n * @api\n */\nCircle.prototype.clone = function() {\n  const circle = new Circle(null);\n  circle.setFlatCoordinates(this.layout, this.flatCoordinates.slice());\n  return circle;\n};\n\n\n/**\n * @inheritDoc\n */\nCircle.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  const flatCoordinates = this.flatCoordinates;\n  const dx = x - flatCoordinates[0];\n  const dy = y - flatCoordinates[1];\n  const squaredDistance = dx * dx + dy * dy;\n  if (squaredDistance < minSquaredDistance) {\n    if (squaredDistance === 0) {\n      for (let i = 0; i < this.stride; ++i) {\n        closestPoint[i] = flatCoordinates[i];\n      }\n    } else {\n      const delta = this.getRadius() / Math.sqrt(squaredDistance);\n      closestPoint[0] = flatCoordinates[0] + delta * dx;\n      closestPoint[1] = flatCoordinates[1] + delta * dy;\n      for (let i = 2; i < this.stride; ++i) {\n        closestPoint[i] = flatCoordinates[i];\n      }\n    }\n    closestPoint.length = this.stride;\n    return squaredDistance;\n  } else {\n    return minSquaredDistance;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nCircle.prototype.containsXY = function(x, y) {\n  const flatCoordinates = this.flatCoordinates;\n  const dx = x - flatCoordinates[0];\n  const dy = y - flatCoordinates[1];\n  return dx * dx + dy * dy <= this.getRadiusSquared_();\n};\n\n\n/**\n * Return the center of the circle as {@link ol.Coordinate coordinate}.\n * @return {ol.Coordinate} Center.\n * @api\n */\nCircle.prototype.getCenter = function() {\n  return this.flatCoordinates.slice(0, this.stride);\n};\n\n\n/**\n * @inheritDoc\n */\nCircle.prototype.computeExtent = function(extent) {\n  const flatCoordinates = this.flatCoordinates;\n  const radius = flatCoordinates[this.stride] - flatCoordinates[0];\n  return createOrUpdate(\n    flatCoordinates[0] - radius, flatCoordinates[1] - radius,\n    flatCoordinates[0] + radius, flatCoordinates[1] + radius,\n    extent);\n};\n\n\n/**\n * Return the radius of the circle.\n * @return {number} Radius.\n * @api\n */\nCircle.prototype.getRadius = function() {\n  return Math.sqrt(this.getRadiusSquared_());\n};\n\n\n/**\n * @private\n * @return {number} Radius squared.\n */\nCircle.prototype.getRadiusSquared_ = function() {\n  const dx = this.flatCoordinates[this.stride] - this.flatCoordinates[0];\n  const dy = this.flatCoordinates[this.stride + 1] - this.flatCoordinates[1];\n  return dx * dx + dy * dy;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nCircle.prototype.getType = function() {\n  return GeometryType.CIRCLE;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nCircle.prototype.intersectsExtent = function(extent) {\n  const circleExtent = this.getExtent();\n  if (intersects(extent, circleExtent)) {\n    const center = this.getCenter();\n\n    if (extent[0] <= center[0] && extent[2] >= center[0]) {\n      return true;\n    }\n    if (extent[1] <= center[1] && extent[3] >= center[1]) {\n      return true;\n    }\n\n    return forEachCorner(extent, this.intersectsCoordinate, this);\n  }\n  return false;\n\n};\n\n\n/**\n * Set the center of the circle as {@link ol.Coordinate coordinate}.\n * @param {ol.Coordinate} center Center.\n * @api\n */\nCircle.prototype.setCenter = function(center) {\n  const stride = this.stride;\n  const radius = this.flatCoordinates[stride] - this.flatCoordinates[0];\n  const flatCoordinates = center.slice();\n  flatCoordinates[stride] = flatCoordinates[0] + radius;\n  for (let i = 1; i < stride; ++i) {\n    flatCoordinates[stride + i] = center[i];\n  }\n  this.setFlatCoordinates(this.layout, flatCoordinates);\n};\n\n\n/**\n * Set the center (as {@link ol.Coordinate coordinate}) and the radius (as\n * number) of the circle.\n * @param {ol.Coordinate} center Center.\n * @param {number} radius Radius.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nCircle.prototype.setCenterAndRadius = function(center, radius, opt_layout) {\n  if (!center) {\n    this.setFlatCoordinates(GeometryLayout.XY, null);\n  } else {\n    this.setLayout(opt_layout, center, 0);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    /** @type {Array.<number>} */\n    const flatCoordinates = this.flatCoordinates;\n    let offset = _ol_geom_flat_deflate_.coordinate(\n      flatCoordinates, 0, center, this.stride);\n    flatCoordinates[offset++] = flatCoordinates[0] + radius;\n    for (let i = 1, ii = this.stride; i < ii; ++i) {\n      flatCoordinates[offset++] = flatCoordinates[i];\n    }\n    flatCoordinates.length = offset;\n    this.changed();\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nCircle.prototype.getCoordinates = function() {};\n\n\n/**\n * @inheritDoc\n */\nCircle.prototype.setCoordinates = function(coordinates, opt_layout) {};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n */\nCircle.prototype.setFlatCoordinates = function(layout, flatCoordinates) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.changed();\n};\n\n\n/**\n * Set the radius of the circle. The radius is in the units of the projection.\n * @param {number} radius Radius.\n * @api\n */\nCircle.prototype.setRadius = function(radius) {\n  this.flatCoordinates[this.stride] = this.flatCoordinates[0] + radius;\n  this.changed();\n};\n\n\n/**\n * Transform each coordinate of the circle from one coordinate reference system\n * to another. The geometry is modified in place.\n * If you do not want the geometry modified in place, first clone() it and\n * then use this function on the clone.\n *\n * Internally a circle is currently represented by two points: the center of\n * the circle `[cx, cy]`, and the point to the right of the circle\n * `[cx + r, cy]`. This `transform` function just transforms these two points.\n * So the resulting geometry is also a circle, and that circle does not\n * correspond to the shape that would be obtained by transforming every point\n * of the original circle.\n *\n * @param {ol.ProjectionLike} source The current projection.  Can be a\n *     string identifier or a {@link ol.proj.Projection} object.\n * @param {ol.ProjectionLike} destination The desired projection.  Can be a\n *     string identifier or a {@link ol.proj.Projection} object.\n * @return {ol.geom.Circle} This geometry.  Note that original geometry is\n *     modified in place.\n * @function\n * @api\n */\nCircle.prototype.transform;\nexport default Circle;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/geom/Circle.js\n// module id = 81\n// module chunks = 0 1 2 6 7 8 9 11 14","/**\n * @module ngeo.interaction.Measure\n*/\nimport ngeoCustomEvent from 'ngeo/CustomEvent.js';\nimport googAsserts from 'goog/asserts.js';\nimport * as olDom from 'ol/dom.js';\nimport olFeature from 'ol/Feature.js';\nimport olMapBrowserEvent from 'ol/MapBrowserEvent.js';\nimport olOverlay from 'ol/Overlay.js';\nimport * as olSphere from 'ol/sphere.js';\nimport olEvents from 'ol/events.js';\nimport olInteractionInteraction from 'ol/interaction/Interaction.js';\nimport olLayerVector from 'ol/layer/Vector.js';\nimport olProjEPSG4326 from 'ol/proj/EPSG4326.js';\nimport olSourceVector from 'ol/source/Vector.js';\nimport olStyleFill from 'ol/style/Fill.js';\nimport olStyleStroke from 'ol/style/Stroke.js';\nimport olStyleStyle from 'ol/style/Style.js';\n\n\n/**\n * Interactions for measure tools base class.\n * @typedef {{\n *    decimals: (number|undefined),\n *    precision: (number|undefined),\n *    displayHelpTooltip: (boolean|undefined),\n *    startMsg: (Element|undefined),\n *    style: (ol.style.Style|Array.<ol.style.Style>|ol.StyleFunction|undefined),\n *    sketchStyle: (ol.style.Style|Array.<ol.style.Style>|ol.StyleFunction|undefined)\n * }}\n */\nngeo.interaction.MeasureBaseOptions;\n\n\n/**\n * Interaction that allows measuring (length, area, ...).\n *\n * @constructor\n * @struct\n * @abstract\n * @extends {ol.interaction.Interaction}\n * @param {ngeo.interaction.MeasureBaseOptions=} opt_options Options\n */\nconst exports = function(opt_options) {\n\n  const options = opt_options !== undefined ? opt_options : {};\n\n  olInteractionInteraction.call(this, {\n    handleEvent: exports.handleEvent_\n  });\n\n  /**\n   * The help tooltip element.\n   * @type {Element}\n   * @private\n   */\n  this.helpTooltipElement_ = null;\n\n\n  /**\n   * Overlay to show the help messages.\n   * @type {ol.Overlay}\n   * @private\n   */\n  this.helpTooltipOverlay_ = null;\n\n\n  /**\n   * The measure tooltip element.\n   * @type {Element}\n   * @private\n   */\n  this.measureTooltipElement_ = null;\n\n\n  /**\n   * Overlay to show the measurement.\n   * @type {ol.Overlay}\n   * @private\n   */\n  this.measureTooltipOverlay_ = null;\n\n\n  /**\n   * The measurement overlay coordinate.\n   * @type {ol.Coordinate}\n   * @private\n   */\n  this.measureTooltipOverlayCoord_ = null;\n\n\n  /**\n   * The sketch feature.\n   * @type {ol.Feature}\n   * @protected\n   */\n  this.sketchFeature = null;\n\n  /**\n   * Message to show after the first point is clicked.\n   * @type {?Element}\n   */\n  this.continueMsg = null;\n\n  /**\n   * Defines the number of decimals to keep in the measurement. If not defined,\n   * then the default behaviour occurs depending on the measure type.\n   * @type {number|undefined}\n   * @protected\n   */\n  this.decimals = options.decimals;\n\n  /**\n   * Defines the number of precision to keep in the measurement. If not defined,\n   * then the default behaviour occurs depending on the measure type.\n   * @type {number|undefined}\n   * @protected\n   */\n  this.precision = options.precision;\n\n  /**\n   * Whether or not to display any tooltip\n   * @type {boolean}\n   * @private\n   */\n  this.displayHelpTooltip_ = options.displayHelpTooltip !== undefined ?\n    options.displayHelpTooltip : true;\n\n  /**\n   * The message to show when user is about to start drawing.\n   * @type {Element}\n   */\n  this.startMsg;\n  if (options.startMsg !== undefined) {\n    this.startMsg = options.startMsg;\n  } else {\n    this.startMsg = document.createElement('span');\n    this.startMsg.textContent =  'Click to start drawing.';\n  }\n\n  /**\n   * The key for geometry change event.\n   * @type {?ol.EventsKey}\n   * @private\n   */\n  this.changeEventKey_ = null;\n\n  /**\n   * The key for map postcompose event.\n   * @type {?ol.EventsKey}\n   * @private\n   */\n  this.postcomposeEventKey_ = null;\n\n  const style = options.style !== undefined ? options.style : [\n    new olStyleStyle({\n      fill: new olStyleFill({\n        color: 'rgba(255, 255, 255, 0.2)'\n      })\n    }),\n    new olStyleStyle({\n      stroke: new olStyleStroke({\n        color: 'white',\n        width: 5\n      })\n    }),\n    new olStyleStyle({\n      stroke: new olStyleStroke({\n        color: '#ffcc33',\n        width: 3\n      })\n    })\n  ];\n\n  /**\n   * The vector layer used to show final measure features.\n   * @type {ol.layer.Vector}\n   * @private\n   */\n  this.vectorLayer_ = new olLayerVector({\n    source: new olSourceVector(),\n    style: style\n  });\n\n  /**\n   * The draw interaction to be used.\n   * @type {ol.interaction.Draw|ngeo.interaction.DrawAzimut|ngeo.interaction.MobileDraw}\n   * @private\n   */\n  this.drawInteraction_ = this.createDrawInteraction(options.sketchStyle,\n    this.vectorLayer_.getSource());\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.shouldHandleDrawInteractionActiveChange_ = true;\n\n  olEvents.listen(this.drawInteraction_, 'change:active', this.handleDrawInteractionActiveChange_, this);\n  olEvents.listen(this.drawInteraction_, 'drawstart', this.onDrawStart_, this);\n  olEvents.listen(this.drawInteraction_, 'drawend', this.onDrawEnd_, this);\n\n  olEvents.listen(this, 'change:active', this.updateState_, this);\n};\n\nol.inherits(exports, olInteractionInteraction);\n\n\n/**\n * @const\n * @type {ol.Sphere}\n */\nexports.SPHERE_WGS84 = new olSphere(olProjEPSG4326.RADIUS);\n\n\n/**\n * Calculate the area of the passed polygon and return a formatted string\n * of the area.\n * @param {!ol.geom.Polygon} polygon Polygon.\n * @param {!ol.proj.Projection} projection Projection of the polygon coords.\n * @param {number|undefined} precision Precision.\n * @param {!ngeox.unitPrefix} format The format function.\n * @return {string} Formatted string of the area.\n * @this {ngeo.interaction.Measure}\n */\nexports.getFormattedArea = function(\n  polygon, projection, precision, format) {\n  const geom = /** @type {ol.geom.Polygon} */ (\n    polygon.clone().transform(projection, 'EPSG:4326'));\n  const coordinates = geom.getLinearRing(0).getCoordinates();\n  const area = Math.abs(exports.SPHERE_WGS84.geodesicArea(coordinates));\n  return format(area, 'm', 'square', precision);\n};\n\n\n/**\n * Calculate the area of the passed circle and return a formatted string\n * of the area.\n * @param {!ol.geom.Circle} circle Circle\n * @param {number|undefined} precision Precision.\n * @param {!ngeox.unitPrefix} format The format function.\n * @return {string} Formatted string of the area.\n */\nexports.getFormattedCircleArea = function(\n  circle, precision, format) {\n  const area = Math.PI * Math.pow(circle.getRadius(), 2);\n  return format(area, 'm', 'square', precision);\n};\n\n\n/**\n * Calculate the length of the passed line string and return a formatted\n * string of the length.\n * @param {!ol.geom.LineString} lineString Line string.\n * @param {!ol.proj.Projection} projection Projection of the line string coords.\n * @param {number|undefined} precision Precision.\n * @param {!ngeox.unitPrefix} format The format function.\n * @return {string} Formatted string of length.\n */\nexports.getFormattedLength = function(lineString, projection,\n  precision, format) {\n  let length = 0;\n  const coordinates = lineString.getCoordinates();\n  for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n    const c1 = ol.proj.transform(coordinates[i], projection, 'EPSG:4326');\n    const c2 = ol.proj.transform(coordinates[i + 1], projection, 'EPSG:4326');\n    length += exports.SPHERE_WGS84.haversineDistance(c1, c2);\n  }\n  return format(length, 'm', 'unit', precision);\n};\n\n\n/**\n * Return a formatted string of the point.\n * @param {!ol.geom.Point} point Point.\n * @param {number|undefined} decimals Decimals.\n * @param {!ngeox.numberCoordinates} format A function to format coordinate into text\n * @param {string=} opt_template The template.\n * @return {string} Formatted string of coordinate.\n */\nexports.getFormattedPoint = function(\n  point, decimals, format, opt_template) {\n  return format(point.getCoordinates(), decimals, opt_template);\n};\n\n\n/**\n * Handle map browser event.\n * @param {ol.MapBrowserEvent} evt Map browser event.\n * @return {boolean} `false` if event propagation should be stopped.\n * @this {ngeo.interaction.Measure}\n * @private\n */\nexports.handleEvent_ = function(evt) {\n  if (evt.type != 'pointermove' || evt.dragging) {\n    return true;\n  }\n\n  let helpMsg = this.startMsg;\n  if (this.sketchFeature !== null) {\n    helpMsg = this.continueMsg;\n  }\n\n  if (this.displayHelpTooltip_) {\n    olDom.removeChildren(this.helpTooltipElement_);\n    this.helpTooltipElement_.appendChild(helpMsg);\n    this.helpTooltipOverlay_.setPosition(evt.coordinate);\n  }\n\n  return true;\n};\n\n\n/**\n * @return {ol.interaction.Draw|ngeo.interaction.DrawAzimut|ngeo.interaction.MobileDraw} The draw interaction.\n */\nexports.prototype.getDrawInteraction = function() {\n  return this.drawInteraction_;\n};\n\n\n/**\n * Creates the draw interaction.\n *\n * @abstract\n * @param {ol.style.Style|Array.<ol.style.Style>|ol.StyleFunction|undefined}\n *     style The sketchStyle used for the drawing interaction.\n * @param {ol.source.Vector} source Vector source.\n * @return {ol.interaction.Draw|ngeo.interaction.DrawAzimut|ngeo.interaction.MobileDraw} The interaction\n * @protected\n */\nexports.prototype.createDrawInteraction = function(style, source) {};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.setMap = function(map) {\n\n  olInteractionInteraction.prototype.setMap.call(this, map);\n\n  this.vectorLayer_.setMap(map);\n\n  const prevMap = this.drawInteraction_.getMap();\n  if (prevMap !== null) {\n    prevMap.removeInteraction(this.drawInteraction_);\n  }\n\n  if (map !== null) {\n    map.addInteraction(this.drawInteraction_);\n  }\n};\n\n\n/**\n * Handle draw interaction `drawstart` event.\n * @param {ol.interaction.Draw.Event} evt Event.\n * @private\n */\nexports.prototype.onDrawStart_ = function(evt) {\n  this.sketchFeature = evt.feature;\n  this.vectorLayer_.getSource().clear(true);\n  this.createMeasureTooltip_();\n\n  const geometry = this.sketchFeature.getGeometry();\n\n  googAsserts.assert(geometry !== undefined);\n  this.changeEventKey_ = olEvents.listen(geometry, 'change', () => {\n    this.handleMeasure((measure, coord) => {\n      if (coord !== null) {\n        this.measureTooltipElement_.innerHTML = measure;\n        this.measureTooltipOverlayCoord_ = coord;\n      }\n    });\n  });\n\n  this.postcomposeEventKey_ = olEvents.listen(this.getMap(), 'postcompose', () => {\n    this.measureTooltipOverlay_.setPosition(this.measureTooltipOverlayCoord_);\n  });\n};\n\n\n/**\n * Handle draw interaction `drawend` event.\n * @param {ol.interaction.Draw.Event} evt Event.\n * @private\n */\nexports.prototype.onDrawEnd_ = function(evt) {\n  this.measureTooltipElement_.classList.add('ngeo-tooltip-static');\n  this.measureTooltipOverlay_.setOffset([0, -7]);\n  /** @type {ngeox.MeasureEvent} */\n  const event = new ngeoCustomEvent('measureend', {feature: this.sketchFeature});\n  this.dispatchEvent(event);\n  this.sketchFeature = null;\n  this.unlistenerEvent_();\n};\n\n/**\n * Handle unlistener events for 'end of drawing' interaction\n * @private\n */\nexports.prototype.unlistenerEvent_ = function() {\n  if (this.changeEventKey_ !== null && this.postcomposeEventKey_ !== null) {\n    olEvents.unlistenByKey(this.changeEventKey_);\n    olEvents.unlistenByKey(this.postcomposeEventKey_);\n    this.changeEventKey_ = null;\n    this.postcomposeEventKey_ = null;\n  }\n};\n\n/**\n * Creates a new help tooltip\n * @private\n */\nexports.prototype.createHelpTooltip_ = function() {\n  this.removeHelpTooltip_();\n  if (this.displayHelpTooltip_) {\n    this.helpTooltipElement_ = document.createElement('div');\n    this.helpTooltipElement_.classList.add('tooltip');\n    this.helpTooltipOverlay_ = new olOverlay({\n      element: this.helpTooltipElement_,\n      offset: [15, 0],\n      positioning: 'center-left'\n    });\n    this.getMap().addOverlay(this.helpTooltipOverlay_);\n  }\n};\n\n\n/**\n * Destroy the help tooltip\n * @private\n */\nexports.prototype.removeHelpTooltip_ = function() {\n  if (this.displayHelpTooltip_) {\n    this.getMap().removeOverlay(this.helpTooltipOverlay_);\n    if (this.helpTooltipElement_ !== null) {\n      this.helpTooltipElement_.parentNode.removeChild(this.helpTooltipElement_);\n    }\n    this.helpTooltipElement_ = null;\n    this.helpTooltipOverlay_ = null;\n  }\n};\n\n\n/**\n * Creates a new measure tooltip\n * @private\n */\nexports.prototype.createMeasureTooltip_ = function() {\n  this.removeMeasureTooltip_();\n  this.measureTooltipElement_ = document.createElement('div');\n  this.measureTooltipElement_.classList.add('tooltip');\n  this.measureTooltipElement_.classList.add('ngeo-tooltip-measure');\n  this.measureTooltipOverlay_ = new olOverlay({\n    element: this.measureTooltipElement_,\n    offset: [0, -15],\n    positioning: 'bottom-center',\n    stopEvent: false\n  });\n  this.getMap().addOverlay(this.measureTooltipOverlay_);\n};\n\n\n/**\n * Destroy the help tooltip\n * @private\n */\nexports.prototype.removeMeasureTooltip_ = function() {\n  if (this.measureTooltipElement_ !== null) {\n    this.measureTooltipElement_.parentNode.removeChild(this.measureTooltipElement_);\n    this.measureTooltipElement_ = null;\n    this.measureTooltipOverlay_ = null;\n    this.measureTooltipOverlayCoord_ = null;\n  }\n};\n\n\n/**\n * @private\n */\nexports.prototype.updateState_ = function() {\n  const active = this.getActive();\n  this.shouldHandleDrawInteractionActiveChange_ = false;\n  this.drawInteraction_.setActive(active);\n  this.shouldHandleDrawInteractionActiveChange_ = true;\n  if (!this.getMap()) {\n    return;\n  }\n  if (active) {\n    if (!this.measureTooltipOverlay_) {\n      this.createMeasureTooltip_();\n      this.createHelpTooltip_();\n    }\n  } else {\n    this.vectorLayer_.getSource().clear(true);\n    this.getMap().removeOverlay(this.measureTooltipOverlay_);\n    this.removeMeasureTooltip_();\n    this.removeHelpTooltip_();\n    this.unlistenerEvent_();\n  }\n};\n\n\n/**\n * Function implemented in inherited classes to compute measurement, determine\n * where to place the tooltip and determine which help message to display.\n *\n * @abstract\n * @param {function(string, ?ol.Coordinate)} callback The function\n *     to be called.\n * @protected\n */\nexports.prototype.handleMeasure = function(callback) {};\n\n\n/**\n * Get a reference to the tooltip element.\n * @return {Element} Tooltip Element.\n */\nexports.prototype.getTooltipElement = function() {\n  return this.measureTooltipElement_;\n};\n\n\n/**\n * Called when the draw interaction `active` property changes. If the\n * change is due to something else than this measure interactino, then\n * update follow the its active state accordingly.\n *\n * @private\n */\nexports.prototype.handleDrawInteractionActiveChange_ = function() {\n  if (this.shouldHandleDrawInteractionActiveChange_) {\n    this.setActive(this.drawInteraction_.getActive());\n  }\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/interaction/Measure.js","/**\n * @module ol/format/XMLFeature\n */\nimport {inherits} from '../index.js';\nimport {extend} from '../array.js';\nimport FeatureFormat from '../format/Feature.js';\nimport FormatType from '../format/FormatType.js';\nimport _ol_xml_ from '../xml.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for XML feature formats.\n *\n * @constructor\n * @abstract\n * @extends {ol.format.Feature}\n */\nconst XMLFeature = function() {\n\n  /**\n   * @type {XMLSerializer}\n   * @private\n   */\n  this.xmlSerializer_ = new XMLSerializer();\n\n  FeatureFormat.call(this);\n};\n\ninherits(XMLFeature, FeatureFormat);\n\n\n/**\n * @inheritDoc\n */\nXMLFeature.prototype.getType = function() {\n  return FormatType.XML;\n};\n\n\n/**\n * @inheritDoc\n */\nXMLFeature.prototype.readFeature = function(source, opt_options) {\n  if (_ol_xml_.isDocument(source)) {\n    return this.readFeatureFromDocument(\n      /** @type {Document} */ (source), opt_options);\n  } else if (_ol_xml_.isNode(source)) {\n    return this.readFeatureFromNode(/** @type {Node} */ (source), opt_options);\n  } else if (typeof source === 'string') {\n    const doc = _ol_xml_.parse(source);\n    return this.readFeatureFromDocument(doc, opt_options);\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * @param {Document} doc Document.\n * @param {olx.format.ReadOptions=} opt_options Options.\n * @return {ol.Feature} Feature.\n */\nXMLFeature.prototype.readFeatureFromDocument = function(\n  doc, opt_options) {\n  const features = this.readFeaturesFromDocument(doc, opt_options);\n  if (features.length > 0) {\n    return features[0];\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {olx.format.ReadOptions=} opt_options Options.\n * @return {ol.Feature} Feature.\n */\nXMLFeature.prototype.readFeatureFromNode = function(node, opt_options) {\n  return null; // not implemented\n};\n\n\n/**\n * @inheritDoc\n */\nXMLFeature.prototype.readFeatures = function(source, opt_options) {\n  if (_ol_xml_.isDocument(source)) {\n    return this.readFeaturesFromDocument(\n      /** @type {Document} */ (source), opt_options);\n  } else if (_ol_xml_.isNode(source)) {\n    return this.readFeaturesFromNode(/** @type {Node} */ (source), opt_options);\n  } else if (typeof source === 'string') {\n    const doc = _ol_xml_.parse(source);\n    return this.readFeaturesFromDocument(doc, opt_options);\n  } else {\n    return [];\n  }\n};\n\n\n/**\n * @param {Document} doc Document.\n * @param {olx.format.ReadOptions=} opt_options Options.\n * @protected\n * @return {Array.<ol.Feature>} Features.\n */\nXMLFeature.prototype.readFeaturesFromDocument = function(\n  doc, opt_options) {\n  /** @type {Array.<ol.Feature>} */\n  const features = [];\n  let n;\n  for (n = doc.firstChild; n; n = n.nextSibling) {\n    if (n.nodeType == Node.ELEMENT_NODE) {\n      extend(features, this.readFeaturesFromNode(n, opt_options));\n    }\n  }\n  return features;\n};\n\n\n/**\n * @abstract\n * @param {Node} node Node.\n * @param {olx.format.ReadOptions=} opt_options Options.\n * @protected\n * @return {Array.<ol.Feature>} Features.\n */\nXMLFeature.prototype.readFeaturesFromNode = function(node, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\nXMLFeature.prototype.readGeometry = function(source, opt_options) {\n  if (_ol_xml_.isDocument(source)) {\n    return this.readGeometryFromDocument(\n      /** @type {Document} */ (source), opt_options);\n  } else if (_ol_xml_.isNode(source)) {\n    return this.readGeometryFromNode(/** @type {Node} */ (source), opt_options);\n  } else if (typeof source === 'string') {\n    const doc = _ol_xml_.parse(source);\n    return this.readGeometryFromDocument(doc, opt_options);\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * @param {Document} doc Document.\n * @param {olx.format.ReadOptions=} opt_options Options.\n * @protected\n * @return {ol.geom.Geometry} Geometry.\n */\nXMLFeature.prototype.readGeometryFromDocument = function(doc, opt_options) {\n  return null; // not implemented\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {olx.format.ReadOptions=} opt_options Options.\n * @protected\n * @return {ol.geom.Geometry} Geometry.\n */\nXMLFeature.prototype.readGeometryFromNode = function(node, opt_options) {\n  return null; // not implemented\n};\n\n\n/**\n * @inheritDoc\n */\nXMLFeature.prototype.readProjection = function(source) {\n  if (_ol_xml_.isDocument(source)) {\n    return this.readProjectionFromDocument(/** @type {Document} */ (source));\n  } else if (_ol_xml_.isNode(source)) {\n    return this.readProjectionFromNode(/** @type {Node} */ (source));\n  } else if (typeof source === 'string') {\n    const doc = _ol_xml_.parse(source);\n    return this.readProjectionFromDocument(doc);\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * @param {Document} doc Document.\n * @protected\n * @return {ol.proj.Projection} Projection.\n */\nXMLFeature.prototype.readProjectionFromDocument = function(doc) {\n  return this.defaultDataProjection;\n};\n\n\n/**\n * @param {Node} node Node.\n * @protected\n * @return {ol.proj.Projection} Projection.\n */\nXMLFeature.prototype.readProjectionFromNode = function(node) {\n  return this.defaultDataProjection;\n};\n\n\n/**\n * @inheritDoc\n */\nXMLFeature.prototype.writeFeature = function(feature, opt_options) {\n  const node = this.writeFeatureNode(feature, opt_options);\n  return this.xmlSerializer_.serializeToString(node);\n};\n\n\n/**\n * @param {ol.Feature} feature Feature.\n * @param {olx.format.WriteOptions=} opt_options Options.\n * @protected\n * @return {Node} Node.\n */\nXMLFeature.prototype.writeFeatureNode = function(feature, opt_options) {\n  return null; // not implemented\n};\n\n\n/**\n * @inheritDoc\n */\nXMLFeature.prototype.writeFeatures = function(features, opt_options) {\n  const node = this.writeFeaturesNode(features, opt_options);\n  return this.xmlSerializer_.serializeToString(node);\n};\n\n\n/**\n * @param {Array.<ol.Feature>} features Features.\n * @param {olx.format.WriteOptions=} opt_options Options.\n * @return {Node} Node.\n */\nXMLFeature.prototype.writeFeaturesNode = function(features, opt_options) {\n  return null; // not implemented\n};\n\n\n/**\n * @inheritDoc\n */\nXMLFeature.prototype.writeGeometry = function(geometry, opt_options) {\n  const node = this.writeGeometryNode(geometry, opt_options);\n  return this.xmlSerializer_.serializeToString(node);\n};\n\n\n/**\n * @param {ol.geom.Geometry} geometry Geometry.\n * @param {olx.format.WriteOptions=} opt_options Options.\n * @return {Node} Node.\n */\nXMLFeature.prototype.writeGeometryNode = function(geometry, opt_options) {\n  return null; // not implemented\n};\nexport default XMLFeature;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/format/XMLFeature.js\n// module id = 98\n// module chunks = 0 1 2 10","/**\n * @module ol/style/Text\n */\nimport Fill from '../style/Fill.js';\nimport TextPlacement from '../style/TextPlacement.js';\n\n/**\n * @classdesc\n * Set text style for vector features.\n *\n * @constructor\n * @param {olx.style.TextOptions=} opt_options Options.\n * @api\n */\nconst Text = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.font_ = options.font;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.rotation_ = options.rotation;\n\n  /**\n   * @private\n   * @type {boolean|undefined}\n   */\n  this.rotateWithView_ = options.rotateWithView;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.scale_ = options.scale;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.text_ = options.text;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.textAlign_ = options.textAlign;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.textBaseline_ = options.textBaseline;\n\n  /**\n   * @private\n   * @type {ol.style.Fill}\n   */\n  this.fill_ = options.fill !== undefined ? options.fill :\n    new Fill({color: Text.DEFAULT_FILL_COLOR_});\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxAngle_ = options.maxAngle !== undefined ? options.maxAngle : Math.PI / 4;\n\n  /**\n   * @private\n   * @type {ol.style.TextPlacement|string}\n   */\n  this.placement_ = options.placement !== undefined ? options.placement : TextPlacement.POINT;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.overflow_ = !!options.overflow;\n\n  /**\n   * @private\n   * @type {ol.style.Stroke}\n   */\n  this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.offsetX_ = options.offsetX !== undefined ? options.offsetX : 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.offsetY_ = options.offsetY !== undefined ? options.offsetY : 0;\n\n  /**\n   * @private\n   * @type {ol.style.Fill}\n   */\n  this.backgroundFill_ = options.backgroundFill ? options.backgroundFill : null;\n\n  /**\n   * @private\n   * @type {ol.style.Stroke}\n   */\n  this.backgroundStroke_ = options.backgroundStroke ? options.backgroundStroke : null;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.padding_ = options.padding === undefined ? null : options.padding;\n};\n\n\n/**\n * The default fill color to use if no fill was set at construction time; a\n * blackish `#333`.\n *\n * @const {string}\n * @private\n */\nText.DEFAULT_FILL_COLOR_ = '#333';\n\n\n/**\n * Clones the style.\n * @return {ol.style.Text} The cloned style.\n * @api\n */\nText.prototype.clone = function() {\n  return new Text({\n    font: this.getFont(),\n    placement: this.getPlacement(),\n    maxAngle: this.getMaxAngle(),\n    overflow: this.getOverflow(),\n    rotation: this.getRotation(),\n    rotateWithView: this.getRotateWithView(),\n    scale: this.getScale(),\n    text: this.getText(),\n    textAlign: this.getTextAlign(),\n    textBaseline: this.getTextBaseline(),\n    fill: this.getFill() ? this.getFill().clone() : undefined,\n    stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n    offsetX: this.getOffsetX(),\n    offsetY: this.getOffsetY(),\n    backgroundFill: this.getBackgroundFill() ? this.getBackgroundFill().clone() : undefined,\n    backgroundStroke: this.getBackgroundStroke() ? this.getBackgroundStroke().clone() : undefined\n  });\n};\n\n\n/**\n * Get the `overflow` configuration.\n * @return {boolean} Let text overflow the length of the path they follow.\n * @api\n */\nText.prototype.getOverflow = function() {\n  return this.overflow_;\n};\n\n\n/**\n * Get the font name.\n * @return {string|undefined} Font.\n * @api\n */\nText.prototype.getFont = function() {\n  return this.font_;\n};\n\n\n/**\n * Get the maximum angle between adjacent characters.\n * @return {number} Angle in radians.\n * @api\n */\nText.prototype.getMaxAngle = function() {\n  return this.maxAngle_;\n};\n\n\n/**\n * Get the label placement.\n * @return {ol.style.TextPlacement|string} Text placement.\n * @api\n */\nText.prototype.getPlacement = function() {\n  return this.placement_;\n};\n\n\n/**\n * Get the x-offset for the text.\n * @return {number} Horizontal text offset.\n * @api\n */\nText.prototype.getOffsetX = function() {\n  return this.offsetX_;\n};\n\n\n/**\n * Get the y-offset for the text.\n * @return {number} Vertical text offset.\n * @api\n */\nText.prototype.getOffsetY = function() {\n  return this.offsetY_;\n};\n\n\n/**\n * Get the fill style for the text.\n * @return {ol.style.Fill} Fill style.\n * @api\n */\nText.prototype.getFill = function() {\n  return this.fill_;\n};\n\n\n/**\n * Determine whether the text rotates with the map.\n * @return {boolean|undefined} Rotate with map.\n * @api\n */\nText.prototype.getRotateWithView = function() {\n  return this.rotateWithView_;\n};\n\n\n/**\n * Get the text rotation.\n * @return {number|undefined} Rotation.\n * @api\n */\nText.prototype.getRotation = function() {\n  return this.rotation_;\n};\n\n\n/**\n * Get the text scale.\n * @return {number|undefined} Scale.\n * @api\n */\nText.prototype.getScale = function() {\n  return this.scale_;\n};\n\n\n/**\n * Get the stroke style for the text.\n * @return {ol.style.Stroke} Stroke style.\n * @api\n */\nText.prototype.getStroke = function() {\n  return this.stroke_;\n};\n\n\n/**\n * Get the text to be rendered.\n * @return {string|undefined} Text.\n * @api\n */\nText.prototype.getText = function() {\n  return this.text_;\n};\n\n\n/**\n * Get the text alignment.\n * @return {string|undefined} Text align.\n * @api\n */\nText.prototype.getTextAlign = function() {\n  return this.textAlign_;\n};\n\n\n/**\n * Get the text baseline.\n * @return {string|undefined} Text baseline.\n * @api\n */\nText.prototype.getTextBaseline = function() {\n  return this.textBaseline_;\n};\n\n\n/**\n * Get the background fill style for the text.\n * @return {ol.style.Fill} Fill style.\n * @api\n */\nText.prototype.getBackgroundFill = function() {\n  return this.backgroundFill_;\n};\n\n\n/**\n * Get the background stroke style for the text.\n * @return {ol.style.Stroke} Stroke style.\n * @api\n */\nText.prototype.getBackgroundStroke = function() {\n  return this.backgroundStroke_;\n};\n\n\n/**\n * Get the padding for the text.\n * @return {Array.<number>} Padding.\n * @api\n */\nText.prototype.getPadding = function() {\n  return this.padding_;\n};\n\n\n/**\n * Set the `overflow` property.\n *\n * @param {boolean} overflow Let text overflow the path that it follows.\n * @api\n */\nText.prototype.setOverflow = function(overflow) {\n  this.overflow_ = overflow;\n};\n\n\n/**\n * Set the font.\n *\n * @param {string|undefined} font Font.\n * @api\n */\nText.prototype.setFont = function(font) {\n  this.font_ = font;\n};\n\n\n/**\n * Set the maximum angle between adjacent characters.\n *\n * @param {number} maxAngle Angle in radians.\n * @api\n */\nText.prototype.setMaxAngle = function(maxAngle) {\n  this.maxAngle_ = maxAngle;\n};\n\n\n/**\n * Set the x offset.\n *\n * @param {number} offsetX Horizontal text offset.\n * @api\n */\nText.prototype.setOffsetX = function(offsetX) {\n  this.offsetX_ = offsetX;\n};\n\n\n/**\n * Set the y offset.\n *\n * @param {number} offsetY Vertical text offset.\n * @api\n */\nText.prototype.setOffsetY = function(offsetY) {\n  this.offsetY_ = offsetY;\n};\n\n\n/**\n * Set the text placement.\n *\n * @param {ol.style.TextPlacement|string} placement Placement.\n * @api\n */\nText.prototype.setPlacement = function(placement) {\n  this.placement_ = placement;\n};\n\n\n/**\n * Set the fill.\n *\n * @param {ol.style.Fill} fill Fill style.\n * @api\n */\nText.prototype.setFill = function(fill) {\n  this.fill_ = fill;\n};\n\n\n/**\n * Set the rotation.\n *\n * @param {number|undefined} rotation Rotation.\n * @api\n */\nText.prototype.setRotation = function(rotation) {\n  this.rotation_ = rotation;\n};\n\n\n/**\n * Set the scale.\n *\n * @param {number|undefined} scale Scale.\n * @api\n */\nText.prototype.setScale = function(scale) {\n  this.scale_ = scale;\n};\n\n\n/**\n * Set the stroke.\n *\n * @param {ol.style.Stroke} stroke Stroke style.\n * @api\n */\nText.prototype.setStroke = function(stroke) {\n  this.stroke_ = stroke;\n};\n\n\n/**\n * Set the text.\n *\n * @param {string|undefined} text Text.\n * @api\n */\nText.prototype.setText = function(text) {\n  this.text_ = text;\n};\n\n\n/**\n * Set the text alignment.\n *\n * @param {string|undefined} textAlign Text align.\n * @api\n */\nText.prototype.setTextAlign = function(textAlign) {\n  this.textAlign_ = textAlign;\n};\n\n\n/**\n * Set the text baseline.\n *\n * @param {string|undefined} textBaseline Text baseline.\n * @api\n */\nText.prototype.setTextBaseline = function(textBaseline) {\n  this.textBaseline_ = textBaseline;\n};\n\n\n/**\n * Set the background fill.\n *\n * @param {ol.style.Fill} fill Fill style.\n * @api\n */\nText.prototype.setBackgroundFill = function(fill) {\n  this.backgroundFill_ = fill;\n};\n\n\n/**\n * Set the background stroke.\n *\n * @param {ol.style.Stroke} stroke Stroke style.\n * @api\n */\nText.prototype.setBackgroundStroke = function(stroke) {\n  this.backgroundStroke_ = stroke;\n};\n\n\n/**\n * Set the padding (`[top, right, bottom, left]`).\n *\n * @param {!Array.<number>} padding Padding.\n * @api\n */\nText.prototype.setPadding = function(padding) {\n  this.padding_ = padding;\n};\nexport default Text;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/style/Text.js\n// module id = 99\n// module chunks = 0 1 2 8 10 19 24"],"sourceRoot":""}