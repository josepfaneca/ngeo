webpackJsonp([19],{107:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=o(1);(i=n)&&i.__esModule;t.default=function(e,t){this.getActive=function(){return e[t]},this.setActive=function(o){e[t]=o}}},11:function(e,t,o){"use strict";t.a="1.3.0"},12:function(e,t,o){"use strict";t.a={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},132:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(o(1)),n=r(o(3));r(o(107));function r(e){return e&&e.__esModule?e:{default:e}}var a=function(e){this.groups_={},this.scope_=e};a.$inject=["$rootScope"],a.$inject=["$rootScope"],a.prototype.registerTool=function(e,t,o){var i=this,r=this.groups_[e];r||(r=this.groups_[e]=[]);var a=this.scope_.$watch(t.getActive,function(o,n){o!==n&&(o?i.deactivateTools_(e,t):i.activateDefault_(e))});if(r.push({tool:t,defaultTool:o||!1,unlisten:a}),n.default.ENABLE_ASSERTS){var s=0;r.forEach(function(e){e.defaultTool&&s++}),n.default.assert(s<=1,"more than one default tool in group "+e)}},a.prototype.unregisterTool=function(e,t){var o=this.groups_[e];if(o)for(var i=0;i<o.length;i++)if(o[i].tool==t){o[i].unlisten(),o.splice(i,1);break}},a.prototype.unregisterGroup=function(e){var t=this.groups_[e];if(t){for(var o=0;o<t.length;o++)t[o].unlisten();delete this.groups_[e]}},a.prototype.activateTool=function(e){e.setActive(!0)},a.prototype.deactivateTool=function(e){e.setActive(!1)},a.prototype.deactivateTools_=function(e,t){for(var o=this.groups_[e],i=0;i<o.length;i++)t!=o[i].tool&&o[i].tool.setActive(!1)},a.prototype.activateDefault_=function(e){for(var t=this.groups_[e],o=null,i=!1,n=0;n<t.length;n++)i=i||t[n].tool.getActive(),t[n].defaultTool&&(o=t[n].tool);i||null===o||o.setActive(!0)},(a.module=angular.module("ngeoToolActivateMgr",[])).service("ngeoToolActivateMgr",a),i.default.module.requires.push(a.module.name),t.default=a},16:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(11),n=o(0),r=o(63),a=o(56),s=o(2),u=o(9),l=o(4);const c=function(e,t,o,i,n,s){r.a.call(this,e,t,o,a.a.IDLE),this.src_=i,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.imageListenerKeys_=null,this.state=a.a.IDLE,this.imageLoadFunction_=s};Object(n.inherits)(c,r.a),c.prototype.getImage=function(){return this.image_},c.prototype.handleImageError_=function(){this.state=a.a.ERROR,this.unlistenImage_(),this.changed()},c.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(l.getHeight)(this.extent)/this.image_.height),this.state=a.a.LOADED,this.unlistenImage_(),this.changed()},c.prototype.load=function(){this.state!=a.a.IDLE&&this.state!=a.a.ERROR||(this.state=a.a.LOADING,this.changed(),this.imageListenerKeys_=[s.default.listenOnce(this.image_,u.a.ERROR,this.handleImageError_,this),s.default.listenOnce(this.image_,u.a.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},c.prototype.setImage=function(e){this.image_=e},c.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s.default.unlistenByKey),this.imageListenerKeys_=null};var f=c,d=o(10),h=o(5),p=o(6),g=o(28),_=o(57),m=o(12),v=o(15),y=o(22);const S=function(e){const t=e||{};_.default.call(this,{attributions:t.attributions,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:_.default.defaultImageLoadFunction,this.params_=t.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5};Object(n.inherits)(S,_.default),S.GETFEATUREINFO_IMAGE_SIZE_=[101,101],S.prototype.getGetFeatureInfoUrl=function(e,t,o,n){if(void 0===this.url_)return;const r=Object(p.get)(o),a=this.getProjection();a&&a!==r&&(t=g.a.calculateSourceResolution(a,r,e,t),e=Object(p.transform)(e,r,a));const s=Object(l.getForViewAndSize)(e,t,0,S.GETFEATUREINFO_IMAGE_SIZE_),u={SERVICE:"WMS",VERSION:i.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(h.assign)(u,this.params_,n);const c=Math.floor((e[0]-s[0])/t),f=Math.floor((s[3]-e[1])/t);return u[this.v13_?"I":"X"]=c,u[this.v13_?"J":"Y"]=f,this.getRequestUrl_(s,S.GETFEATUREINFO_IMAGE_SIZE_,1,a||r,u)},S.prototype.getParams=function(){return this.params_},S.prototype.getImageInternal=function(e,t,o,n){if(void 0===this.url_)return null;t=this.findNearestResolution(t),1==o||this.hidpi_&&void 0!==this.serverType_||(o=1);const r=t/o,a=Object(l.getCenter)(e),c=Math.ceil(Object(l.getWidth)(e)/r),d=Math.ceil(Object(l.getHeight)(e)/r),p=Object(l.getForViewAndSize)(a,r,0,[c,d]),g=Math.ceil(this.ratio_*Object(l.getWidth)(e)/r),_=Math.ceil(this.ratio_*Object(l.getHeight)(e)/r),m=Object(l.getForViewAndSize)(a,r,0,[g,_]),v=this.image_;if(v&&this.renderedRevision_==this.getRevision()&&v.getResolution()==t&&v.getPixelRatio()==o&&Object(l.containsExtent)(v.getExtent(),p))return v;const y={SERVICE:"WMS",VERSION:i.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object(h.assign)(y,this.params_),this.imageSize_[0]=Math.round(Object(l.getWidth)(m)/r),this.imageSize_[1]=Math.round(Object(l.getHeight)(m)/r);const S=this.getRequestUrl_(m,this.imageSize_,o,n,y);return this.image_=new f(m,t,o,S,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),s.default.listen(this.image_,u.a.CHANGE,this.handleImageChange,this),this.image_},S.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},S.prototype.getRequestUrl_=function(e,t,o,i,n){if(Object(d.a)(void 0!==this.url_,9),n[this.v13_?"CRS":"SRS"]=i.getCode(),"STYLES"in this.params_||(n.STYLES=""),1!=o)switch(this.serverType_){case m.a.GEOSERVER:const e=90*o+.5|0;"FORMAT_OPTIONS"in n?n.FORMAT_OPTIONS+=";dpi:"+e:n.FORMAT_OPTIONS="dpi:"+e;break;case m.a.MAPSERVER:n.MAP_RESOLUTION=90*o;break;case m.a.CARMENTA_SERVER:case m.a.QGIS:n.DPI=90*o;break;default:Object(d.a)(!1,8)}n.WIDTH=t[0],n.HEIGHT=t[1];const r=i.getAxisOrientation();let a;return a=this.v13_&&"ne"==r.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,n.BBOX=a.join(","),Object(y.appendParams)(this.url_,n)},S.prototype.getUrl=function(){return this.url_},S.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},S.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},S.prototype.updateParams=function(e){Object(h.assign)(this.params_,e),this.updateV13_(),this.image_=null,this.changed()},S.prototype.updateV13_=function(){const e=this.params_.VERSION||i.a;this.v13_=v.default.compareVersions(e,"1.3")>=0};t.default=S},21:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(o(0)),r=o(43),a=(i=r)&&i.__esModule?i:{default:i};var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.default.call(this,e),this.detail=t};n.inherits(s,a.default),t.default=s},23:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(11),n=o(0),r=o(10),a=o(4),s=o(5),u=o(14),l=o(6),c=o(28),f=o(60),d=o(42),h=o(12),p=o(61),g=o(15),_=o(22);const m=function(e){const t=e||{},o=t.params||{},i=!("TRANSPARENT"in o)||o.TRANSPARENT;d.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,opaque:!i,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=o,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=Object(a.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())};Object(n.inherits)(m,d.a),m.prototype.getGetFeatureInfoUrl=function(e,t,o,n){const r=Object(l.get)(o),u=this.getProjection();let d=this.getTileGrid();d||(d=this.getTileGridForProjection(r));const h=d.getTileCoordForCoordAndResolution(e,t);if(d.getResolutions().length<=h[0])return;let p=d.getResolution(h[0]),g=d.getTileCoordExtent(h,this.tmpExtent_),_=f.default.toSize(d.getTileSize(h[0]),this.tmpSize);const m=this.gutter_;0!==m&&(_=f.default.buffer(_,m,this.tmpSize),g=Object(a.buffer)(g,p*m,g)),u&&u!==r&&(p=c.a.calculateSourceResolution(u,r,e,p),g=Object(l.transformExtent)(g,r,u),e=Object(l.transform)(e,r,u));const v={SERVICE:"WMS",VERSION:i.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(s.assign)(v,this.params_,n);const y=Math.floor((e[0]-g[0])/p),S=Math.floor((g[3]-e[1])/p);return v[this.v13_?"I":"X"]=y,v[this.v13_?"J":"Y"]=S,this.getRequestUrl_(h,_,g,1,u||r,v)},m.prototype.getGutterInternal=function(){return this.gutter_},m.prototype.getParams=function(){return this.params_},m.prototype.getRequestUrl_=function(e,t,o,i,n,a){const s=this.urls;if(!s)return;if(a.WIDTH=t[0],a.HEIGHT=t[1],a[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(a.STYLES=""),1!=i)switch(this.serverType_){case h.a.GEOSERVER:const e=90*i+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+e:a.FORMAT_OPTIONS="dpi:"+e;break;case h.a.MAPSERVER:a.MAP_RESOLUTION=90*i;break;case h.a.CARMENTA_SERVER:case h.a.QGIS:a.DPI=90*i;break;default:Object(r.a)(!1,52)}const l=n.getAxisOrientation(),c=o;let f,d;this.v13_&&"ne"==l.substr(0,2)&&(f=o[0],c[0]=o[1],c[1]=f,f=o[2],c[2]=o[3],c[3]=f);(a.BBOX=c.join(","),1==s.length)?d=s[0]:d=s[Object(u.modulo)(p.a.hash(e),s.length)];return Object(_.appendParams)(d,a)},m.prototype.getTilePixelRatio=function(e){return this.hidpi_&&void 0!==this.serverType_?e:1},m.prototype.getKeyForParams_=function(){let e=0;const t=[];for(const o in this.params_)t[e++]=o+"-"+this.params_[o];return t.join("/")},m.prototype.fixedTileUrlFunction=function(e,t,o){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(o)),n.getResolutions().length<=e[0])return;1==t||this.hidpi_&&void 0!==this.serverType_||(t=1);const r=n.getResolution(e[0]);let u=n.getTileCoordExtent(e,this.tmpExtent_),l=f.default.toSize(n.getTileSize(e[0]),this.tmpSize);const c=this.gutter_;0!==c&&(l=f.default.buffer(l,c,this.tmpSize),u=Object(a.buffer)(u,r*c,u)),1!=t&&(l=f.default.scale(l,t,this.tmpSize));const d={SERVICE:"WMS",VERSION:i.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object(s.assign)(d,this.params_),this.getRequestUrl_(e,l,u,t,o,d)},m.prototype.updateParams=function(e){Object(s.assign)(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())},m.prototype.updateV13_=function(){const e=this.params_.VERSION||i.a;this.v13_=g.default.compareVersions(e,"1.3")>=0},t.default=m},24:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(o(1)),n=r(o(47));function r(e){return e&&e.__esModule?e:{default:e}}var a={};a.module=angular.module("ngeoDataSources",[]),a.module.value("ngeoDataSources",new n.default),i.default.module.requires.push(a.module.name),t.default=a},26:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=o(1);(i=r)&&i.__esModule;var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.inRange_=!1!==t.inRange,this.visible_=!0===t.visible,this.attributes=t.attributes||null,this.id_=t.id,this.identifierAttribute_=t.identifierAttribute,this.maxResolution_=t.maxResolution,this.minResolution_=t.minResolution,this.name_=t.name}return n(e,[{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){this.attributes=e}},{key:"inRange",get:function(){return this.inRange_},set:function(e){this.inRange_=e}},{key:"visible",get:function(){return this.visible_},set:function(e){this.visible_=e}},{key:"id",get:function(){return this.id_}},{key:"identifierAttribute",get:function(){return this.identifierAttribute_}},{key:"maxResolution",get:function(){return this.maxResolution_}},{key:"minResolution",get:function(){return this.minResolution_}},{key:"name",get:function(){return this.name_}},{key:"queryable",get:function(){return!1}},{key:"supportsDynamicInRange",get:function(){return null!==this.maxResolution||null!==this.minResolution}}]),e}();t.default=a},29:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(o(1)),n=f(o(0)),r=d(o(20)),a=f(o(5)),s=d(o(18)),u=d(o(17)),l=d(o(3)),c=d(o(36));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}var h=function(){this.featureUidToGroupIndex_={},this.groups_=[],this.source_=new s.default({useSpatialIndex:!1}),this.layer_=new r.default({source:this.source_,style:this.styleFunction_.bind(this),updateWhileAnimating:!0,updateWhileInteracting:!0})};h.prototype.addFeature=function(e,t){l.default.assert(t>=0),l.default.assert(t<this.groups_.length);var o=n.getUid(e).toString();this.featureUidToGroupIndex_[o]=t,this.groups_[t].features[o]=e,this.source_.addFeature(e)},h.prototype.removeFeature=function(e,t){l.default.assert(t>=0),l.default.assert(t<this.groups_.length);var o=n.getUid(e).toString();delete this.featureUidToGroupIndex_[o],delete this.groups_[t].features[o],this.source_.removeFeature(e)},h.prototype.clear=function(e){l.default.assert(e>=0),l.default.assert(e<this.groups_.length);var t=this.groups_[e];for(var o in t.features)this.removeFeature(t.features[o],e);l.default.assert(a.isEmpty(t.features))},h.prototype.getLayer=function(){return this.layer_},h.prototype.getFeatureOverlay=function(){var e=this.groups_.length;return this.groups_.push({styleFunction:u.default.defaultFunction,features:{}}),new c.default(this,e)},h.prototype.init=function(e){this.layer_.setMap(e)},h.prototype.setStyle=function(e,t){l.default.assert(t>=0),l.default.assert(t<this.groups_.length),this.groups_[t].styleFunction=null===e?u.default.defaultFunction:u.default.createFunction(e)},h.prototype.styleFunction_=function(e,t){var o=n.getUid(e).toString();l.default.assert(o in this.featureUidToGroupIndex_);var i=this.featureUidToGroupIndex_[o];return this.groups_[i].styleFunction(e,t)},(h.module=angular.module("ngeoFeatureOverlayMgr",[c.default.module.name])).service("ngeoFeatureOverlayMgr",h),i.default.module.requires.push(h.module.name),t.default=h},3:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n={doAssertFailure_:function(e,t,o,i){var r="Assertion failed",a=void 0;o?(r+=": "+o,a=i):e&&(r+=": "+e,a=t);var s=new n.AssertionError(""+r,a||[]);n.errorHandler_(s)},setErrorHandler:function(e){n.ENABLE_ASSERTS&&(n.errorHandler_=e)},assert:function(e,t,o){return n.ENABLE_ASSERTS&&!e&&n.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},fail:function(e,t){n.ENABLE_ASSERTS&&n.errorHandler_(new n.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},assertNumber:function(e,t,o){return n.ENABLE_ASSERTS&&!goog.isNumber(e)&&n.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},assertString:function(e,t,o){return n.ENABLE_ASSERTS&&!goog.isString(e)&&n.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},assertFunction:function(e,t,o){return n.ENABLE_ASSERTS&&!goog.isFunction(e)&&n.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},assertObject:function(e,t,o){return n.ENABLE_ASSERTS&&!goog.isObject(e)&&n.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},assertArray:function(e,t,o){return n.ENABLE_ASSERTS&&!goog.isArray(e)&&n.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},assertBoolean:function(e,t,o){return n.ENABLE_ASSERTS&&!goog.isBoolean(e)&&n.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},assertElement:function(e,t,o){return!n.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||n.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},assertInstanceof:function(e,t,o,i){return!n.ENABLE_ASSERTS||e instanceof t||n.doAssertFailure_("Expected instanceof %s but got %s.",[n.getType_(t),n.getType_(e)],o,Array.prototype.slice.call(arguments,3)),e},assertObjectPrototypeIsIntact:function(){for(var e in Object.prototype)n.fail(e+" should not be enumerable in Object.prototype.")},getType_:function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":void 0===e?"undefined":i(e)}};t.default=n},32:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=c(o(1)),n=c(o(33)),r=c(o(34)),a=c(o(29)),s=c(o(37)),u=c(o(38)),l=c(o(39));function c(e){return e&&e.__esModule?e:{default:e}}var f=angular.module("ngeoMapModule",[i.default.module.name,n.default.module.name,r.default.name,a.default.module.name,s.default.name,u.default.name,l.default.name]);t.default=f},328:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o(329),o(59);var i=g(o(7)),n=g(o(31)),r=g(o(62)),a=g(o(48)),s=g(o(65)),u=g(o(79)),l=g(o(17)),c=g(o(99)),f=g(o(330)),d=g(o(32)),h=g(o(107)),p=g(o(132));function g(e){return e&&e.__esModule?e:{default:e}}var _={};_.module=angular.module("app",[ngeo.module.name,d.default.name,f.default.name,p.default.module.name]),_.MainController=function(e,t){this.radius=500,this.style=new l.default({text:new c.default({fill:new s.default({color:"#279B61"}),font:"normal 30px FontAwesome",offsetY:-15,stroke:new u.default({color:"#ffffff",width:3}),text:"ï"})}),this.map=new i.default({layers:[new r.default({source:new a.default})],view:new n.default({center:[-7910687,6178318],zoom:17})}),e.init(this.map),this.googleStreetViewActive=!0;var o=new h.default(this,"googleStreetViewActive");t.registerTool("mapTools",o,!0),this.dummyActive=!1;var f=new h.default(this,"dummyActive");t.registerTool("mapTools",f,!1)},_.MainController.$inject=["ngeoFeatureOverlayMgr","ngeoToolActivateMgr"],_.module.controller("MainController",_.MainController),t.default=_},329:function(e,t){},33:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=h(o(3)),n=h(o(1)),r=h(o(21)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(o(0)),s=h(o(19)),u=h(o(52)),l=h(o(50)),c=h(o(16)),f=h(o(23)),d=h(o(58));function h(e){return e&&e.__esModule?e:{default:e}}var p=function(){s.default.call(this),this.mapUids_={}};a.inherits(p,s.default),p.prototype.get=function(e){return a.getUid(e).toString()in this.mapUids_?e.getLayers().item(0):null},p.prototype.set=function(e,t){var o=a.getUid(e).toString(),n=this.get(e);null!==n?(i.default.assert(o in this.mapUids_),null!==t?e.getLayers().setAt(0,t):(e.getLayers().removeAt(0),delete this.mapUids_[o])):null!==t&&(e.getLayers().insertAt(0,t),this.mapUids_[o]=!0);var s=new r.default("change",{current:t,previous:n});return this.dispatchEvent(s),n},p.prototype.updateDimensions=function(e,t){var o=this.get(e);if(o){var n=[o];o instanceof u.default&&(n=o.getLayers().getArray()),n.forEach(function(e){if(i.default.assertInstanceof(e,l.default),e){var o=!1,n={};for(var r in e.get("dimensions")){var a=t[r];void 0!==a&&(n[r]=a,o=!0)}if(o){var s=e.getSource();s instanceof d.default?(s.updateDimensions(n),s.refresh()):(s instanceof f.default||s instanceof c.default)&&(s.updateParams(n),s.refresh())}}})}},(p.module=angular.module("ngeoBackgroundLayerMgr",[])).service("ngeoBackgroundLayerMgr",p),n.default.module.requires.push(p.module.name),t.default=p},330:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(o(1)),n=r(o(331));function r(e){return e&&e.__esModule?e:{default:e}}var a=angular.module("ngeoGooglestreetviewModule",[i.default.module.name,n.default.name]);t.default=a},331:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),n=h(o(8)),r=d(o(2)),a=h(o(6)),s=d(o(40)),u=d(o(19)),l=d(o(27)),c=d(o(1)),f=d(o(29));function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}var p=angular.module("ngeoGooglestreetview",[f.default.module.name]);c.default.module.requires.push(p.name),c.default.googlestreetview.Controller_=function(){function e(t,o,i){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.active,o.$watch(function(){return n.active},this.handleActiveChange_.bind(this)),this.featureStyle,this.map,this.radius,this.scope_=o,this.feature_=new s.default,this.featureOverlay_=goog.asserts.assert(i.getFeatureOverlay()),this.listenerKeys_=[],this.location=null,this.noDataAtLocation=!1,this.panorama_=new google.maps.StreetViewPanorama(t[0],{pov:{heading:0,pitch:0},visible:!1,zoom:1}),this.panoramaListener_=null,this.point_=new l.default([0,0]),this.feature_.setGeometry(this.point_),this.streetViewService_=new google.maps.StreetViewService,this.panoramaPositionChanging_=!1}return i(e,[{key:"$onInit",value:function(){var e=this;this.scope_.$watch(function(){return e.location},this.handleLocationChange_.bind(this)),this.scope_.$watch(function(){var t=e.active,o=null!==e.location;return t&&o},this.handleReadyChange_.bind(this)),this.scope_.$watch(function(){var t=e.active,o=null!==e.location,i=!1===e.noDataAtLocation;return t&&o&&i},function(t,o){t!==o&&(e.panorama_.setVisible(t),t?e.panoramaListener_=google.maps.event.addListener(e.panorama_,"position_changed",e.handlePanoramaPositionChange_.bind(e)):e.panoramaListener_&&(google.maps.event.removeListener(e.panoramaListener_),e.panoramaListener_=null))}),this.featureStyle&&this.feature_.setStyle(this.featureStyle)}},{key:"handleActiveChange_",value:function(e){var t=this.listenerKeys_;e?t.push(r.default.listen(this.map,"click",this.handleMapClick_,this)):(u.default.unByKey(t),t.length=0)}},{key:"handleLocationChange_",value:function(e,t){if(!(e===t||Array.isArray(e)&&Array.isArray(t)&&n.equals(e,t))&&(this.point_.setCoordinates(e),e&&!this.panoramaPositionChanging_)){var o=this.toLonLat_(e);this.streetViewService_.getPanorama({location:{lat:o[1],lng:o[0]},radius:this.radius},this.handleStreetViewServiceGetPanorama_.bind(this))}}},{key:"handleMapClick_",value:function(e){this.location=e.coordinate,this.scope_.$apply()}},{key:"handleReadyChange_",value:function(e,t){e!==t&&(e?this.featureOverlay_.addFeature(this.feature_):this.featureOverlay_.removeFeature(this.feature_))}},{key:"handleStreetViewServiceGetPanorama_",value:function(e,t){var o=this.panorama_;t===google.maps.StreetViewStatus.OK?(this.noDataAtLocation=!1,o.setPosition(e.location.latLng)):this.noDataAtLocation=!0,this.scope_.$apply()}},{key:"handlePanoramaPositionChange_",value:function(){this.panoramaPositionChanging_=!0;var e=this.panorama_.getPosition(),t=[e.lng(),e.lat()],o=this.fromLonLat_(t);this.location=o,this.scope_.$apply(),this.panoramaPositionChanging_=!1}},{key:"fromLonLat_",value:function(e){return a.fromLonLat(e,this.map.getView().getProjection())}},{key:"toLonLat_",value:function(e){return a.toLonLat(e,this.map.getView().getProjection())}}]),e}(),p.component("ngeoGooglestreetview",{bindings:{active:"<",featureStyle:"<?",map:"<",radius:"<?"},controller:c.default.googlestreetview.Controller_,templateUrl:function(){return c.default.baseModuleTemplateUrl+"/googlestreetview/component.html"}}),t.default=p},34:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(o(3)),n=u(o(1)),r=u(o(35)),a=u(o(2)),s=u(o(7));function u(e){return e&&e.__esModule?e:{default:e}}var l=angular.module("ngeoMap",[r.default.module.name]);n.default.module.requires.push(l.name),l.directive_=function(e,t){return{restrict:"A",link:function(o,n,r){var u=r.ngeoMap,l=o.$eval(u);i.default.assertInstanceof(l,s.default),l.setTarget(n[0]),t.map=l;var c=r.ngeoMapManageResize;if(o.$eval(c)){var f=r.ngeoMapResizeTransition,d=o.$eval(f);a.default.listen(e,"resize",function(){if(d){var t=Date.now(),o=!0;!function i(){l.updateSize(),l.renderSync(),o&&e.requestAnimationFrame(i),Date.now()-t>d&&(o=!1)}()}else l.updateSize()})}}}},l.directive_.$inject=["$window","ngeoSyncDataSourcesMap"],l.directive("ngeoMap",l.directive_),t.default=l},35:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),n=f(o(1)),r=f(o(26)),a=f(o(24)),s=f(o(2)),u=f(o(19)),l=f(o(31)),c=f(o(3));function f(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ngeoDataSources_=t,this.map_=null,this.listenerKeys_=[],s.default.listen(this.ngeoDataSources_,"add",this.handleDataSourcesAdd_,this)}return e.$inject=["ngeoDataSources"],i(e,[{key:"bindMap_",value:function(e){var t=e.getView();this.listenerKeys_.push(s.default.listen(t,"change:resolution",this.handleViewResolutionChange_,this));var o=t.getResolution();c.default.assertNumber(o),this.syncDataSourcesToResolution_(o)}},{key:"unbindMap_",value:function(e){u.default.unByKey(this.listenerKeys_),this.listenerKeys_=[]}},{key:"handleViewResolutionChange_",value:function(e){var t=e.target;c.default.assertInstanceof(t,l.default);var o=t.getResolution();c.default.assertNumber(o),this.syncDataSourcesToResolution_(o)}},{key:"syncDataSourcesToResolution_",value:function(e){var t=this;this.ngeoDataSources_.forEach(function(o){t.syncDataSourceToResolution_(o,e)})}},{key:"syncDataSourceToResolution_",value:function(e,t){if(e.supportsDynamicInRange){var o=e.maxResolution,i=e.minResolution,n=(null===i||void 0===i||t>=i)&&(null===o||void 0===o||t<=o);e.inRange=n}}},{key:"handleDataSourcesAdd_",value:function(e){var t=c.default.assertInstanceof(e.element,r.default);if(this.map_){var o=this.map_.getView().getResolution();c.default.assertNumber(o),this.syncDataSourceToResolution_(t,o)}}},{key:"map",set:function(e){this.map_&&this.unbindMap_(this.map_),this.map_=e,e&&this.bindMap_(e)}}]),e}();d.module=angular.module("ngeoSyncDataSourcesMap",[a.default.module.name]),d.module.service("ngeoSyncDataSourcesMap",d),n.default.module.requires.push(d.module.name),t.default=d},36:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(o(1)),n=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);t.default=e}(o(0)),r(o(2)));function r(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t){this.manager_=e,this.features_=null,this.index_=t};a.prototype.addFeature=function(e){this.manager_.addFeature(e,this.index_)},a.prototype.removeFeature=function(e){this.manager_.removeFeature(e,this.index_)},a.prototype.clear=function(){this.manager_.clear(this.index_)},a.prototype.setFeatures=function(e){null!==this.features_&&(this.features_.clear(),n.default.unlisten(this.features_,"add",this.handleFeatureAdd_,this),n.default.unlisten(this.features_,"remove",this.handleFeatureRemove_,this)),null!==e&&(e.forEach(function(e){this.addFeature(e)},this),n.default.listen(e,"add",this.handleFeatureAdd_,this),n.default.listen(e,"remove",this.handleFeatureRemove_,this)),this.features_=e},a.prototype.setStyle=function(e){this.manager_.setStyle(e,this.index_)},a.prototype.handleFeatureAdd_=function(e){var t=e.element;this.addFeature(t)},a.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature(t)},a.module=angular.module("ngeoFeatureOverlay",[]),i.default.module.requires.push(a.module.name),t.default=a},37:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=o(1),r=(i=n)&&i.__esModule?i:{default:i};var a=angular.module("ngeoRecenter",[]);r.default.module.requires.push(a.name),a.directive_=function(){return{restrict:"A",link:function(e,t,o){var i=o.ngeoRecenterMap,n=e.$eval(i);function r(t){var o=t.attr("ngeo-extent");if(void 0!==o){var i=n.getSize();n.getView().fit(e.$eval(o),{size:i})}var r=t.attr("ngeo-zoom");void 0!==r&&n.getView().setZoom(e.$eval(r))}t.on("click","*",function(e){r(angular.element($(this)))}),t.on("change",function(e){var t=e.target.options[e.target.selectedIndex];r(angular.element(t))})}}},a.directive("ngeoRecenter",a.directive_),t.default=a},38:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(o(3)),n=a(o(1)),r=a(o(7));function a(e){return e&&e.__esModule?e:{default:e}}var s=angular.module("ngeoResizemap",[]);n.default.module.requires.push(s.name),s.directive_=function(e){return{restrict:"A",link:function(t,o,n){var a=n.ngeoResizemap,s=t.$eval(a);i.default.assertInstanceof(s,r.default);var u=n.ngeoResizemapState;i.default.assert(void 0!==u);var l=void 0,c=void 0,f=function t(){s.updateSize(),s.renderSync(),Date.now()-l<1e3&&(c=e.requestAnimationFrame(t))};o.on("transitionend",function(){s.updateSize(),s.renderSync()}),t.$watch(u,function(t,o){t!=o&&(l=Date.now(),e.cancelAnimationFrame(c),c=e.requestAnimationFrame(f))})}}},s.directive("ngeoResizemap",s.directive_),t.default=s},39:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(o(1)),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(o(8)),r=s(o(7)),a=s(o(2));function s(e){return e&&e.__esModule?e:{default:e}}var u=angular.module("ngeoScaleselector",[]);i.default.module.requires.push(u.name),u.value("ngeoScaleselectorTemplateUrl",function(e,t){var o=t.ngeoScaleselectorTemplateurl;return void 0!==o?o:i.default.baseModuleTemplateUrl+"/map/scaleselector.html"}),u.directive_=function(e){return{restrict:"A",scope:!0,controller:"NgeoScaleselectorController",templateUrl:e}},u.directive("ngeoScaleselector",u.directive_),u.ScaleselectorController_=function(e,t,o){var i=this,s=o.ngeoScaleselector;this.scales=e.$eval(s),goog.asserts.assert(void 0!==this.scales),this.zoomLevels,e.$watch(function(){return Object.keys(i.scales).length},function(e){i.zoomLevels=Object.keys(i.scales).map(Number),i.zoomLevels.sort(n.numberSafeCompareFunction)});var l=o.ngeoScaleselectorMap;this.map_=e.$eval(l),goog.asserts.assertInstanceof(this.map_,r.default);var c=o.ngeoScaleselectorOptions,f=e.$eval(c);if(this.options=u.ScaleselectorController_.getOptions_(f),this.$scope_=e,this.resolutionChangeKey_=null,this.currentScale=void 0,null!==this.map_.getView()){var d=this.map_.getView().getZoom();void 0!==d&&(this.currentScale=this.getScale(d))}a.default.listen(this.map_,"change:view",this.handleViewChange_,this),this.registerResolutionChangeListener_(),e.scaleselectorCtrl=this},u.ScaleselectorController_.getOptions_=function(e){var t=!1;return void 0!==e&&(t=1==e.dropup),{dropup:t}},u.ScaleselectorController_.prototype.getScale=function(e){return this.scales[e]},u.ScaleselectorController_.prototype.changeZoom=function(e){this.map_.getView().setZoom(e)},u.ScaleselectorController_.prototype.handleResolutionChange_=function(e){var t=this,o=this.map_.getView(),i=this.scales[o.getZoom()];void 0!==i&&this.$scope_.$applyAsync(function(){t.currentScale=i})},u.ScaleselectorController_.prototype.handleViewChange_=function(e){this.registerResolutionChangeListener_(),this.handleResolutionChange_(null)},u.ScaleselectorController_.prototype.registerResolutionChangeListener_=function(){null!==this.resolutionChangeKey_&&a.default.unlistenByKey(this.resolutionChangeKey_);var e=this.map_.getView();this.resolutionChangeKey_=a.default.listen(e,"change:resolution",this.handleResolutionChange_,this)},u.controller("NgeoScaleselectorController",u.ScaleselectorController_),t.default=u},48:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(0),n=o(49);const r=function(e){const t=e||{};let o;o=void 0!==t.attributions?t.attributions:[r.ATTRIBUTION];const i=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",a=void 0!==t.url?t.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";n.a.call(this,{attributions:o,cacheSize:t.cacheSize,crossOrigin:i,opaque:void 0===t.opaque||t.opaque,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,url:a,wrapX:t.wrapX})};Object(i.inherits)(r,n.a),r.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',t.default=r},49:function(e,t,o){"use strict";var i=o(0),n=o(42),r=o(71);const a=function(e){const t=e||{},o=void 0!==t.projection?t.projection:"EPSG:3857",i=void 0!==t.tileGrid?t.tileGrid:r.a.createXYZ({extent:r.a.extentFromProjection(o),maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});n.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,opaque:t.opaque,projection:o,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition})};Object(i.inherits)(a,n.a),t.a=a},99:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(65),n=o(138);const r=function(e){const t=e||{};this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.text_=t.text,this.textAlign_=t.textAlign,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new i.default({color:r.DEFAULT_FILL_COLOR_}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:n.a.POINT,this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding};r.DEFAULT_FILL_COLOR_="#333",r.prototype.clone=function(){return new r({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},r.prototype.getOverflow=function(){return this.overflow_},r.prototype.getFont=function(){return this.font_},r.prototype.getMaxAngle=function(){return this.maxAngle_},r.prototype.getPlacement=function(){return this.placement_},r.prototype.getOffsetX=function(){return this.offsetX_},r.prototype.getOffsetY=function(){return this.offsetY_},r.prototype.getFill=function(){return this.fill_},r.prototype.getRotateWithView=function(){return this.rotateWithView_},r.prototype.getRotation=function(){return this.rotation_},r.prototype.getScale=function(){return this.scale_},r.prototype.getStroke=function(){return this.stroke_},r.prototype.getText=function(){return this.text_},r.prototype.getTextAlign=function(){return this.textAlign_},r.prototype.getTextBaseline=function(){return this.textBaseline_},r.prototype.getBackgroundFill=function(){return this.backgroundFill_},r.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},r.prototype.getPadding=function(){return this.padding_},r.prototype.setOverflow=function(e){this.overflow_=e},r.prototype.setFont=function(e){this.font_=e},r.prototype.setMaxAngle=function(e){this.maxAngle_=e},r.prototype.setOffsetX=function(e){this.offsetX_=e},r.prototype.setOffsetY=function(e){this.offsetY_=e},r.prototype.setPlacement=function(e){this.placement_=e},r.prototype.setFill=function(e){this.fill_=e},r.prototype.setRotation=function(e){this.rotation_=e},r.prototype.setScale=function(e){this.scale_=e},r.prototype.setStroke=function(e){this.stroke_=e},r.prototype.setText=function(e){this.text_=e},r.prototype.setTextAlign=function(e){this.textAlign_=e},r.prototype.setTextBaseline=function(e){this.textBaseline_=e},r.prototype.setBackgroundFill=function(e){this.backgroundFill_=e},r.prototype.setBackgroundStroke=function(e){this.backgroundStroke_=e},r.prototype.setPadding=function(e){this.padding_=e},t.default=r}},[328]);
//# sourceMappingURL=googlestreetview.734e50f8dea16aabaa22.js.map